/*
 * jQuery UI 1.7.3
 *
 * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
function tableToGrid(e,t){jQuery(e).each(function(){if(!this.grid){jQuery(this).width("99%");var e=jQuery(this).width(),n=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),r=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),n=0<n.length,r=!n&&0<r.length,i=n||r,s=[],o=[];jQuery("th",jQuery(this)).each(function(){0===s.length&&i?(s.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),o.push("__selection__")):(s.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),o.push(jQuery(this).html()))});var u=[],a=[],f=[];jQuery("tbody > tr",jQuery(this)).each(function(){var e={},t=0;jQuery("td",jQuery(this)).each(function(){if(0===t&&i){var n=jQuery("input",jQuery(this)),r=n.attr("value");a.push(r||u.length),n.is(":checked")&&f.push(r),e[s[t].name]=n.attr("value")}else e[s[t].name]=jQuery(this).html();t++}),0<t&&u.push(e)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:e,colNames:o,colModel:s,multiselect:n},t||{}));for(e=0;e<u.length;e++)r=null,0<a.length&&(r=a[e])&&r.replace&&(r=encodeURIComponent(r).replace(/[.\-%]/g,"_")),null===r&&(r=e+1),jQuery(this).jqGrid("addRowData",r,u[e]);for(e=0;e<f.length;e++)jQuery(this).jqGrid("setSelection",f[e])}})}function setUpDateSearch(e,t,n,r,i){$(document).ready(function(){$("#"+e).jqGrid("filterGrid","#"+t,{gridModel:!1,filterModel:[{label:"Date Filter&nbsp;&nbsp;&nbsp;&nbsp;From:",name:n+"_min",stype:"text",sopt:{id:"begin_date_"+t}},{label:"To:",name:n+"_max",stype:"text",sopt:{id:"end_date_"+t}}],enableSearch:!0,searchButton:"Go"}),$("#"+e+' input[name="'+n+'_min"]').datepicker({dateFormat:"yy/mm/dd",changeYear:!0}),$("#"+e+' input[name="'+n+'_max"]').datepicker({dateFormat:"yy/mm/dd",changeYear:!0}),$("#"+t+"_calendar_search").append(r),$("#"+i).click(function(t){$("#"+e).toggle(),t.preventDefault()})})}function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(e){mejs.YouTubeApi.flashReady(e)}jQuery.ui||function(e){function a(t,n,r,i){function s(r){var i=e[t][n][r]||[];return typeof i=="string"?i.split(/,?\s+/):i}var o=s("getter");return i.length==1&&typeof i[0]=="string"&&(o=o.concat(s("getterSetter"))),e.inArray(r,o)!=-1}var t=e.fn.remove,n=e.browser.mozilla&&parseFloat(e.browser.version)<1.9;e.ui={version:"1.7.3",plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")=="hidden")return!1;var r=n&&n=="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(n){var r=e.attr,i=e.fn.removeAttr,s="http://www.w3.org/2005/07/aaa",o=/^aria-/,u=/^wairole:/;e.attr=function(e,t,n){var i=n!==undefined;return t=="role"?i?r.call(this,e,t,"wairole:"+n):(r.apply(this,arguments)||"").replace(u,""):o.test(t)?i?e.setAttributeNS(s,t.replace(o,"aaa:"),n):r.call(this,e,t.replace(o,"aaa:")):r.apply(this,arguments)},e.fn.removeAttr=function(e){return o.test(e)?this.each(function(){this.removeAttributeNS(s,e.replace(o,""))}):i.call(this,e)}}e.fn.extend({remove:function(n,r){return this.each(function(){return r||(!n||e.filter(n,[this]).length)&&e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),t.call(e(this),n,r)})},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),r=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n||"area"==n?t.href||!isNaN(r):!isNaN(r))&&!e(t)["area"==n?"parents":"closest"](":hidden").length},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}}),e.widget=function(t,n){var r=t.split(".")[0];t=t.split(".")[1],e.fn[t]=function(n){var i=typeof n=="string",s=Array.prototype.slice.call(arguments,1);if(i&&n.substring(0,1)=="_")return this;if(i&&a(r,t,n,s)){var o=e.data(this[0],t);return o?o[n].apply(o,s):undefined}return this.each(function(){var o=e.data(this,t);!o&&!i&&e.data(this,t,new e[r][t](this,n))._init(),o&&i&&e.isFunction(o[n])&&o[n].apply(o,s)})},e[r]=e[r]||{},e[r][t]=function(n,i){var s=this;this.namespace=r,this.widgetName=t,this.widgetEventPrefix=e[r][t].eventPrefix||t,this.widgetBaseClass=r+"-"+t,this.options=e.extend({},e.widget.defaults,e[r][t].defaults,e.metadata&&e.metadata.get(n)[t],i),this.element=e(n).bind("setData."+t,function(e,t,r){if(e.target==n)return s._setData(t,r)}).bind("getData."+t,function(e,t){if(e.target==n)return s._getData(t)}).bind("remove",function(){return s.destroy()})},e[r][t].prototype=e.extend({},e.widget.prototype,n),e[r][t].getterSetter="option"},e.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(t,n){var r=t,i=this;if(typeof t=="string"){if(n===undefined)return this._getData(t);r={},r[t]=n}e.each(r,function(e,t){i._setData(e,t)})},_getData:function(e){return this.options[e]},_setData:function(e,t){this.options[e]=t,e=="disabled"&&this.element[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(t,n,r){var i=this.options[t],s=t==this.widgetEventPrefix?t:this.widgetEventPrefix+t;n=e.Event(n),n.type=s;if(n.originalEvent)for(var o=e.event.props.length,u;o;)u=e.event.props[--o],n[u]=n.originalEvent[u];return this.element.trigger(n,r),!(e.isFunction(i)&&i.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}},e.widget.defaults={disabled:!1},e.ui.mouse={_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(t._preventClickEvent)return t._preventClickEvent=!1,e.stopImmediatePropagation(),!1}),e.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on")),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(t){t.originalEvent=t.originalEvent||{};if(t.originalEvent.mouseHandled)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which==1,i=typeof this.options.cancel=="string"?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0,!0},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}},e.ui.mouse.defaults={cancel:null,distance:1,delay:0}}(jQuery),function(e){e.widget("ui.draggable",e.extend({},e.ui.mouse,{_init:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?!0:!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t),this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();this._trigger("drag",t,r),this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t),r._clear()})}else this._trigger("stop",t),this._clear();return!1},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone():this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(e){e.left!=undefined&&(this.offset.click.left=e.left+this.margins.left),e.right!=undefined&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),e.top!=undefined&&(this.offset.click.top=e.top+this.margins.top),e.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment)[0];if(!n)return;var r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var f=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+n.grid[0]:f-n.grid[0]:f:f}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,offset:this.positionAbs}}})),e.extend(e.ui.draggable,{version:"1.7.3",eventPrefix:"drag",defaults:{addClasses:!0,appendTo:"parent",axis:!1,cancel:":input,option",connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,delay:0,distance:1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n._refreshItems(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,f=t.top,l=t.left;return e.ui.isOver(i+n,s+r,f,l,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","iframeFix",{start:function(t,n){var r=e(this).data("draggable").options;e(r.iframeFix===!0?"iframe":r.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})},stop:function(t,n){e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,f=n.offset.top,l=f+r.helperProportions.height;for(var c=r.snapElements.length-1;c>=0;c--){var h=r.snapElements[c].left,p=h+r.snapElements[c].width,d=r.snapElements[c].top,v=d+r.snapElements[c].height;if(!(h-s<o&&o<p+s&&d-s<f&&f<v+s||h-s<o&&o<p+s&&d-s<l&&l<v+s||h-s<u&&u<p+s&&d-s<f&&f<v+s||h-s<u&&u<p+s&&d-s<l&&l<v+s)){r.snapElements[c].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=!1;continue}if(i.snapMode!="inner"){var m=Math.abs(d-l)<=s,g=Math.abs(v-f)<=s,y=Math.abs(h-u)<=s,b=Math.abs(p-o)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var w=m||g||y||b;if(i.snapMode!="outer"){var m=Math.abs(d-f)<=s,g=Math.abs(v-l)<=s,y=Math.abs(h-o)<=s,b=Math.abs(p-u)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[c].snapping&&(m||g||y||b||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=m||g||y||b||w}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack.group)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||r.stack.min)-(parseInt(e(n).css("zIndex"),10)||r.stack.min)});e(i).each(function(e){this.style.zIndex=r.stack.min+e}),this[0].style.zIndex=r.stack.min+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{_init:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.options.accept=this.options.accept&&e.isFunction(this.options.accept)?this.options.accept:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[this.options.scope]=e.ui.ddmanager.droppables[this.options.scope]||[],e.ui.ddmanager.droppables[this.options.scope].push(this),this.options.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable")},_setData:function(t,n){t=="accept"?this.options.accept=n&&e.isFunction(n)?n:function(e){return e.is(n)}:e.widget.prototype._setData.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.options.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.options.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.options.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,absolutePosition:e.positionAbs,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.7.3",eventPrefix:"drop",defaults:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,f=n.offset.left,l=f+n.proportions.width,c=n.offset.top,h=c+n.proportions.height;switch(r){case"fit":return f<i&&s<l&&c<o&&u<h;case"intersect":return f<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<l&&c<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<h;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,d=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,v=e.ui.isOver(d,p,c,f,n.proportions.height,n.proportions.width);return v;case"touch":return(o>=c&&o<=h||u>=c&&u<=h||o<c&&u>h)&&(i>=f&&i<=l||s>=f&&s<=l||i<f&&s>l);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].options.accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight},i=="mousedown"&&r[o]._activate.call(r[o],n)}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)),!this.options.disabled&&this.visible&&this.options.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},drag:function(t,n){t.options.refreshPositions&&
e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})}}}(jQuery),function(e){e.widget("ui.resizable",e.extend({},e.ui.mouse,{_init:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(s)&&u.css({zIndex:++n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.parent().append(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).end().remove()}this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement)},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return this.options.disabled||!!n},_mouseStart:function(n){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),e.browser.opera&&/relative/.test(s.css("position"))&&s.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var o=t(this.helper.css("left")),u=t(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var h=l.apply(this,[t,a,f]),p=e.browser.msie&&e.browser.version<7,d=this.sizeDiff;if(this._aspectRatio||t.shiftKey)h=this._updateRatio(h,t);return h=this._respectSize(h,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(h),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.size.width-u,height:r.size.height-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,r=this.position,i=this.size,s=this.axis;return e.height?e.width=i.height*this.aspectRatio:e.width&&(e.height=i.width/this.aspectRatio),s=="sw"&&(e.left=r.left+(i.width-e.width),e.top=null),s=="nw"&&(e.top=r.top+(i.height-e.height),e.left=r.left+(i.width-e.width)),e},_respectSize:function(e,t){var r=this.helper,i=this.options,s=this._aspectRatio||t.shiftKey,o=this.axis,u=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,f=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,l=n(e.width)&&i.minWidth&&i.minWidth>e.width,c=n(e.height)&&i.minHeight&&i.minHeight>e.height;l&&(e.width=i.minWidth),c&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),f&&(e.height=i.maxHeight);var h=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,d=/sw|nw|w/.test(o),v=/nw|ne|n/.test(o);l&&d&&(e.left=h-i.minWidth),u&&d&&(e.left=h-i.maxWidth),c&&v&&(e.top=p-i.minHeight),f&&v&&(e.top=p-i.maxHeight);var m=!e.width&&!e.height;return m&&!e.left&&e.top?e.top=null:m&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}})),e.extend(e.ui.resizable,{version:"1.7.3",eventPrefix:"resize",defaults:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,cancel:":input,option",containment:!1,delay:0,distance:1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options;_store=function(t){e(t).each(function(){e(this).data("resizable-alsoresize",{width:parseInt(e(this).width(),10),height:parseInt(e(this).height(),10),left:parseInt(e(this).css("left"),10),top:parseInt(e(this).css("top"),10)})})},typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],_store(i.alsoResize)):e.each(i.alsoResize,function(e,t){_store(e)}):_store(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,n){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=n&&n.length?n:["width","height","top","left"];e.each(o||["width","height","top","left"],function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),/relative/.test(t.css("position"))&&e.browser.opera&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"})),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){var r=e(this).data("resizable");r._revertToRelativePosition&&e.browser.opera&&(r._revertToRelativePosition=!1,el.css({position:"relative"})),e(this).removeData("resizable-alsoresize-start")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,h&&l?{top:h,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(n,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){l[e]=t(f.css("padding"+n))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var h=i.containerOffset,p=i.containerSize.height,d=i.containerSize.width,v=e.ui.hasScroll(a,"left")?a.scrollWidth:d,m=e.ui.hasScroll(a)?a.scrollHeight:p;i.parentData={element:a,left:h.left,top:h.top,width:v,height:m}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},h=r.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/i.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*i.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var p=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),d=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),v=r.containerElement.get(0)==r.element.parent().get(0),m=/relative|absolute/.test(r.containerElement.css("position"));v&&m&&(p-=r.parentData.left),p+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-p,f&&(r.size.height=r.size.width/r.aspectRatio)),d+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-d,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),h=f.outerWidth()-r.sizeDiff.width,p=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),h=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h,r.position.top=u.top-h):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+h,r.position.top=u.top-h,r.position.left=u.left-l)}});var t=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.extend({},e.ui.mouse,{_init:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({"z-index":100,position:"absolute",left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r)return r.$element.removeClass("ui-unselecting").addClass("ui-selecting"),r.unselecting=!1,r.selecting=!0,r.selected=!0,n._trigger("selecting",t,{selecting:r.element}),!1})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var f=o;o=i,i=f}if(s>u){var f=u;u=s,s=f}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var f=e.data(this,"selectable-item");if(!f||f.element==n.element[0])return;var l=!1;r.tolerance=="touch"?l=!(f.left>o||f.right<i||f.top>u||f.bottom<s):r.tolerance=="fit"&&(l=f.left>i&&f.right<o&&f.top>s&&f.bottom<u),l?(f.selected&&(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,n._trigger("selecting",t,{selecting:f.element}))):(f.selecting&&(t.metaKey&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),f.unselecting=!0),n._trigger("unselecting",t,{unselecting:f.element}))),f.selected&&!t.metaKey&&!f.startselected&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,n._trigger("unselecting",t,{unselecting:f.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})),e.extend(e.ui.selectable,{version:"1.7.3",defaults:{appendTo:"body",autoRefresh:!0,cancel:":input,option",delay:0,distance:0,filter:"*",tolerance:"touch"}})}(jQuery),function(e){e.widget("ui.sortable",e.extend({},e.ui.mouse,{_init:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item")},_mouseCapture:function(t,n){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var r=null,i=this,s=e(t.target).parents().each(function(){if(e.data(this,"sortable-item")==i)return r=e(this),!1});e.data(t.target,"sortable-item")==i&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp(),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem),!0},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e),this.refreshPositions()},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],"sortable");l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper"),l])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],"sortable");l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}}for(var o=i.length-1;o>=0;o--){var c=i[o][1],h=i[o][0];for(var f=0,p=h.length;f<p;f++){var d=e(h[f]);d.data("sortable-item",c),n.push({item:d,instance:c,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers
.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=this.containers.length-1;n>=0;n--)if(this._intersectsWith(this.containers[n].containerCache)){if(!this.containers[n].containerCache.over){if(this.currentContainer!=this.containers[n]){var r=1e4,i=null,s=this.positionAbs[this.containers[n].floating?"left":"top"];for(var o=this.items.length-1;o>=0;o--){if(!e.ui.contains(this.containers[n].element[0],this.items[o].item[0]))continue;var u=this.items[o][this.containers[n].floating?"left":"top"];Math.abs(u-s)<r&&(r=Math.abs(u-s),i=this.items[o])}if(!i&&!this.options.dropOnEmpty)continue;this.currentContainer=this.containers[n],i?this._rearrange(t,i,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder)}this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(e){e.left!=undefined&&(this.offset.click.left=e.left+this.margins.left),e.right!=undefined&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),e.top!=undefined&&(this.offset.click.top=e.top+this.margins.top),e.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var f=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+n.grid[0]:f-n.grid[0]:f:f}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,absolutePosition:n.positionAbs,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})),e.extend(e.ui.sortable,{getter:"serialize toArray",version:"1.7.3",eventPrefix:"sort",defaults:{appendTo:"parent",axis:!1,cancel:":input,option",connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,delay:0,distance:1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3}})}(jQuery),function(e){e.widget("ui.accordion",{_init:function(){var t=this.options,n=this;this.running=0,t.collapsible==e.ui.accordion.defaults.collapsible&&t.alwaysOpen!=e.ui.accordion.defaults.alwaysOpen&&(t.collapsible=!t.alwaysOpen);if(t.navigation){var r=this.element.find("a").filter(t.navigationFilter);r.length&&(r.filter(t.header).length?this.active=r:(this.active=r.parent().parent().prev(),r.addClass("ui-accordion-content-active")))}this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.element[0].nodeName=="UL"&&this.element.children("li").addClass("ui-accordion-li-fix"),this.headers=this.element.find(t.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){e(this).removeClass("ui-state-focus")}),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),this.active=this._findActive(this.active||t.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),this.active.next().addClass("ui-accordion-content-active"),e("<span/>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.find(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),e.browser.msie&&this.element.find("a").css("zoom","1"),this.resize(),this.element.attr("role","tablist"),this.headers.attr("role","tab").bind("keydown",function(e){return n._keydown(e)}).next().attr("role","tabpanel"),this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide(),this.active.length?this.active.attr("aria-expanded","true").attr("tabIndex","0"):this.headers.eq(0).attr("tabIndex","0"),e.browser.safari||this.headers.find("a").attr("tabIndex","-1"),t.event&&this.headers.bind(t.event+".accordion",function(e){return n._clickHandler.call(n,e,this)})},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex"),this.headers.find("a").removeAttr("tabindex"),this.headers.children(".ui-icon").remove();var t=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");(e.autoHeight||e.fillHeight)&&t.css("height","")},_setData:function(t,n){t=="alwaysOpen"&&(t="collapsible",n=!n),e.widget.prototype._setData.apply(this,arguments)},_keydown:function(t){var n=this.options,r=e.ui.keyCode;if(n.disabled||t.altKey||t.ctrlKey)return;var i=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case r.RIGHT:case r.DOWN:o=this.headers[(s+1)%i];break;case r.LEFT:case r.UP:o=this.headers[(s-1+i)%i];break;case r.SPACE:case r.ENTER:return this._clickHandler({target:t.target},t.target)}return o?(e(t.target).attr("tabIndex","-1"),e(o).attr("tabIndex","0"),o.focus(),!1):!0},resize:function(){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight()});var i=0;this.headers.next().each(function(){i=Math.max(i,e(this).innerHeight()-e(this).height())}).height(Math.max(0,n-i)).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).outerHeight())}).height(n))},activate:function(e){var t=this._findActive(e)[0];this._clickHandler({target:t},t)},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return!1;if(!t.target&&r.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);return this._toggle(o,i,s),!1}var u=e(t.currentTarget||n),f=u[0]==this.active[0];if(this.running||!r.collapsible&&f)return!1;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active"),f||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));var o=u.next(),i=this.active.next(),s={options:r,newHeader:f&&r.collapsible?e([]):u,oldHeader:this.active,newContent:f&&r.collapsible?e([]):o.find("> *"),oldContent:i.find("> *")},l=this.headers.index(this.active[0])>this.headers.index(u[0]);return this.active=f?e([]):u,this._toggle(o,i,s,f,l),!1},_toggle:function(t,n,r,i,s){var o=this.options,u=this;this.toShow=t,this.toHide=n,this.data=r;var f=function(){if(!u)return;return u._completed.apply(u,arguments)};this._trigger("changestart",null,this.data),this.running=n.size()===0?t.size():n.size();if(o.animated){var l={};o.collapsible&&i?l={toShow:e([]),toHide:n,complete:f,down:s,autoHeight:o.autoHeight||o.fillSpace}:l={toShow:t,toHide:n,complete:f,down:s,autoHeight:o.autoHeight||o.fillSpace},o.proxied||(o.proxied=o.animated),o.proxiedDuration||(o.proxiedDuration=o.duration),o.animated=e.isFunction(o.proxied)?o.proxied(l):o.proxied,o.duration=e.isFunction(o.proxiedDuration)?o.proxiedDuration(l):o.proxiedDuration;var c=e.ui.accordion.animations,h=o.duration,p=o.animated;c[p]||(c[p]=function(e){this.slide(e,{easing:p,duration:h||700})}),c[p](l)}else o.collapsible&&i?t.toggle():(n.hide(),t.show()),f(!0);n.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur(),t.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(e){var t=this.options;this.running=e?0:--this.running;if(this.running)return;t.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.7.3",defaults:{active:null,alwaysOpen:!0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide"},t);return}var r=t.toShow.css("overflow"),i,s={},o={},u=["height","paddingTop","paddingBottom"],f,l=t.toShow;f=l[0].style.width,l.width(parseInt(l.parent().width(),10)-parseInt(l.css("paddingLeft"),10)-parseInt(l.css("paddingRight"),10)-(parseInt(l.css("borderLeftWidth"),10)||0)-(parseInt(l.css("borderRightWidth"),10)||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css("width",f),t.toShow.css({overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})},easeslide:function(e){this.slide(e,{easing:"easeinout",duration:700})}}})}(jQuery),function(e){var t={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},n="ui-dialog ui-widget ui-widget-content ui-corner-all ";e.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var t=this,r=this.options,i=r.title||this.originalTitle||"&nbsp;",s=e.ui.dialog.getTitleId(this.element),o=(this.uiDialog=e("<div/>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&n.keyCode&&n.keyCode==e.ui.keyCode.ESCAPE&&t.close(n)}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),f=(this.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),l=e('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).mousedown(function(e){e.stopPropagation()}).click(function(e){return t.close(e),!1}).appendTo(f),h=(this.uiDialogTitlebarCloseText=e("<span/>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(l),p=e("<span/>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(f);f.find("*").add(f).disableSelection(),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,r.bgiframe&&e.fn.bgiframe&&o.bgiframe(),r.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle)},close:function(t){var n=this;if(!1===n._trigger("beforeclose",t))return;n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):n.uiDialog.hide()&&n._trigger("close",t),e.ui.dialog.overlay.resize(),n._isOpen=!1;if(n.options.modal){var r=0;e(".ui-dialog").each(function(){this!=n.uiDialog[0]&&(r=Math.max(r,e(this).css("z-index")))}),e.ui.dialog.maxZ=r}},isOpen:function(){return this._isOpen},moveToTop:function(t,n){if(this.options.modal&&!t||!this.options.stack&&!this.options.modal)return this._trigger("focus",n);this.options.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=this.options.zIndex),this.overlay&&this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=++e.ui.dialog.maxZ);var r={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++e.ui.dialog.maxZ),this.element.attr(r),this._trigger("focus",n)},open:function(){if(this._isOpen)return;var t=this.options,n=this.uiDialog;this.overlay=t.modal?new e.ui.dialog.overlay(this):null,n.next().length&&n.appendTo("body"),this._size(),this._position(t.position),n.show(t.show),this.moveToTop(!0),t.modal&&n.bind("keypress.ui-dialog",function(t){if(t.keyCode!=e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first")[0],i=n.filter(":last")[0];t.target==i&&!t.shiftKey?setTimeout(function(){r.focus()},1):t.target==r&&t.shiftKey&&setTimeout(function(){i.focus()},1)}),e([]).add(n.find(".ui-dialog-content :tabbable:first")).add(n.find(".ui-dialog-buttonpane :tabbable:first")).add(n).filter(":first").focus(),this._trigger("open"),this._isOpen=!0},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){e('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(t).click(function(){r.apply(n.element[0],arguments)}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}).appendTo(i)}),i.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options,r;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){r=n.height,e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n.dragStart&&n.dragStart.apply(t.element[0],arguments)},drag:function(){n.drag&&n.drag.apply(t.element[0],arguments)},stop:function(){e(this).removeClass("ui-dialog-dragging").height(r),n.dragStop&&n.dragStop.apply(t.element[0],arguments),e.ui.dialog.overlay.resize()}})},_makeResizable:function(t){t=t===undefined?this.options.resizable:t;var n=this,r=this.options,i=typeof t=="string"?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:r.minHeight,start:function(){e(this).addClass("ui-dialog-resizing"),r.resizeStart&&r.resizeStart.apply(n.element[0],arguments)},resize:function(){r.resize&&r.resize.apply(n.element[0],arguments)},handles:i,stop:function(){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),r.resizeStop&&r.resizeStop.apply(n.element[0],arguments),e.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(t){var n=e(window),r=e(document),i=r.scrollTop(),s=r.scrollLeft(),o=i;e.inArray(t,["center","top","right","bottom","left"])>=0&&(t=[t=="right"||t=="left"?t:"center",t=="top"||t=="bottom"?t:"middle"]),t.constructor!=Array&&(t=["center","middle"]);if(t[0].constructor==Number)s+=t[0];else switch(t[0]){case"left":s+=0;break;case"right":s+=n.width()-this.uiDialog.outerWidth();break;default:case"center":s+=(n.width()-this.uiDialog.outerWidth())/2}if(t[1].constructor==Number)i+=t[1];else switch(t[1]){case"top":i+=0;break;case"bottom":i+=n.height()-this.uiDialog.outerHeight();break;default:case"middle":i+=(n.height()-this.uiDialog.outerHeight())/2}i=Math.max(i,o),this.uiDialog.css({top:i,left:s})},_setData:function(r,i){t[r]&&this.uiDialog.data(t[r],i);switch(r){case"buttons":this._createButtons(i);break;case"closeText":this.uiDialogTitlebarCloseText.text(i);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(n+i);break;case"draggable":i?this._makeDraggable():this.uiDialog.draggable("destroy");break;case"height":this.uiDialog.height(i);break;case"position":this._position(i);break;case"resizable":var s=this.uiDialog,o=this.uiDialog.is(":data(resizable)");o&&!i&&s.resizable("destroy"),o&&typeof i=="string"&&s.resizable("option","handles",i),o||this._makeResizable(i);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(i||"&nbsp;");break;case"width":this.uiDialog.width(i)}e.widget.prototype._setData.apply(this,arguments)},_size:function(){var e=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var t=this.uiDialog.css({height:"auto",width:e.width}).height();this.element.css({minHeight:Math.max(e.minHeight-t,0),height:e.height=="auto"?"auto":Math.max(e.height-t,0)})}}),e.extend(e.ui.dialog,{version:"1.7.3",defaults:{autoOpen:!0,bgiframe:!1,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:"center",resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(e){return"ui-dialog-title-"+(e.attr("id")||++this.uuid)},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){var n=e(t.target).parents(".ui-dialog").css("zIndex")||0;return n>e.ui.dialog.overlay.maxZ})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&n.keyCode&&n.keyCode==e.ui.keyCode.ESCAPE&&t.close(n)}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=e("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});return t.options.bgiframe&&e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){this.instances.splice(e.inArray(this.instances,t),1),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var n=0;e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return t<n?e(window).height()+"px":t+"px"}return e(document).height()+"px"},width:function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return t<n?e(window).width()+"px":t+"px"}return e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.widget("ui.slider",e.extend({},e.ui.mouse,{_init:function(){var t=this,n=this.options;this._keySliding=!1,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this.range=e([]),n.range&&(n.range===!0?(this.range=e("<div></div>"),n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&n.values.length!=2&&(n.values=[n.values[0],n.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),(n.range=="min"||n.range=="max")&&this.range.addClass("ui-slider-range-"+n.range),this.range.addClass("ui-widget-header")),e(".ui-slider-handle",this.element).length==0&&e('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");if(n.values&&n.values.length)while(e(".ui-slider-handle",this.element).length<n.values.length)e('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var r=!0,i=e(this).data("index.ui-slider-handle");if(t.options.disabled)return;switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r=!1,t._keySliding||(t._keySliding=!0,e(this).addClass("ui-state-active"),t._start(n,i))}var s,o,u=t._step();t.options.values&&t.options.values.length?s=o=t.values(i):s=o=t.value();switch(n.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s==t._valueMax())return;o=s+u;break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s==t._valueMin())return;o=s-u}return t._slide(n,i,o),r}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._stop(n,r),t._change(n,r),t._keySliding=!1
,e(this).removeClass("ui-state-active"))}),this._refreshValue()},destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;if(n.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset();var r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,o,u=this,f;this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),f=t)}),n.range==1&&this.values(1)==n.min&&(o=e(this.handles[++f])),this._start(t,f),u._handleIndex=f,o.addClass("ui-state-active").focus();var l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle");return this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},i=this._normValueFromMouse(r),this._slide(t,f,i),!0},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,!1},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n;"horizontal"==this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));var r=n/t;r>1&&(r=1),r<0&&(r=0),"vertical"==this.orientation&&(r=1-r);var i=this._valueMax()-this._valueMin(),s=r*i,o=s%this.options.step,u=this._valueMin()+s-o;return o>this.options.step/2&&(u+=this.options.step),parseFloat(u.toFixed(5))},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r=this.handles[t];if(this.options.values&&this.options.values.length){var i=this.values(t?0:1);this.options.values.length==2&&this.options.range===!0&&(t==0&&n>i||t==1&&n<i)&&(n=i);if(n!=this.values(t)){var s=this.values();s[t]=n;var o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:s}),i=this.values(t?0:1);o!==!1&&this.values(t,n,e.type=="mousedown"&&this.options.animate,!0)}}else if(n!=this.value()){var o=this._trigger("slide",e,{handle:this.handles[t],value:n});o!==!1&&this._setData("value",n,e.type=="mousedown"&&this.options.animate)}},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)},value:function(e){return arguments.length&&(this._setData("value",e),this._change(null,0)),this._value()},values:function(e,t,n,r){return arguments.length>1&&(this.options.values[e]=t,this._refreshValue(n),r||this._change(null,e)),arguments.length?this.options.values&&this.options.values.length?this._values(e):this.value():this._values()},_setData:function(t,n,r){e.widget.prototype._setData.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled")):this.handles.removeAttr("disabled");case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(r);break;case"value":this._refreshValue(r)}},_step:function(){var e=this.options.step;return e},_value:function(){var e=this.options.value;return e<this._valueMin()&&(e=this._valueMin()),e>this._valueMax()&&(e=this._valueMax()),e},_values:function(e){if(arguments.length){var t=this.options.values[e];return t<this._valueMin()&&(t=this._valueMin()),t>this._valueMax()&&(t=this._valueMax()),t}return this.options.values},_valueMin:function(){var e=this.options.min;return e},_valueMax:function(){var e=this.options.max;return e},_refreshValue:function(t){var n=this.options.range,r=this.options,i=this;if(this.options.values&&this.options.values.length){var s,o;this.handles.each(function(n,s){var o=(i.values(n)-i._valueMin())/(i._valueMax()-i._valueMin())*100,u={};u[i.orientation=="horizontal"?"left":"bottom"]=o+"%",e(this).stop(1,1)[t?"animate":"css"](u,r.animate),i.options.range===!0&&(i.orientation=="horizontal"?(n==0&&i.range.stop(1,1)[t?"animate":"css"]({left:o+"%"},r.animate),n==1&&i.range[t?"animate":"css"]({width:o-lastValPercent+"%"},{queue:!1,duration:r.animate})):(n==0&&i.range.stop(1,1)[t?"animate":"css"]({bottom:o+"%"},r.animate),n==1&&i.range[t?"animate":"css"]({height:o-lastValPercent+"%"},{queue:!1,duration:r.animate}))),lastValPercent=o})}else{var u=this.value(),f=this._valueMin(),l=this._valueMax(),c=l!=f?(u-f)/(l-f)*100:0,h={};h[i.orientation=="horizontal"?"left":"bottom"]=c+"%",this.handle.stop(1,1)[t?"animate":"css"](h,r.animate),n=="min"&&this.orientation=="horizontal"&&this.range.stop(1,1)[t?"animate":"css"]({width:c+"%"},r.animate),n=="max"&&this.orientation=="horizontal"&&this.range[t?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:r.animate}),n=="min"&&this.orientation=="vertical"&&this.range.stop(1,1)[t?"animate":"css"]({height:c+"%"},r.animate),n=="max"&&this.orientation=="vertical"&&this.range[t?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:r.animate})}}})),e.extend(e.ui.slider,{getter:"value values",version:"1.7.3",eventPrefix:"slide",defaults:{animate:!1,delay:0,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null}})}(jQuery),function(e){var n=0,r=0;e.widget("ui.tabs",{_init:function(){this.options.deselectable!==undefined&&(this.options.collapsible=this.options.deselectable),this._tabify(!0)},_setData:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,e=="deselectable"&&(this.options.collapsible=t),this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++r);return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function h(t,n){t.css({display:""}),e.browser.msie&&n.opacity&&t[0].style.removeAttribute("filter")}this.list=this.element.children("ul:first"),this.lis=e("li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]);var n=this,r=this.options,i=/^#.+/;this.anchors.each(function(t,s){var o=e(s).attr("href"),u=o.split("#")[0],a;u&&(u===location.toString().split("#")[0]||(a=e("base")[0])&&u===a.href)&&(o=s.hash,s.href=o);if(i.test(o))n.panels=n.panels.add(n._sanitizeSelector(o));else if(o!="#"){e.data(s,"href.tabs",o),e.data(s,"load.tabs",o.replace(/#.*$/,""));var f=n._tabId(s);s.href="#"+f;var l=e("#"+f);l.length||(l=e(r.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(n.panels[t-1]||n.list),l.data("destroy.tabs",!0)),n.panels=n.panels.add(l)}else r.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),r.selected===undefined?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return r.selected=e,!1}),typeof r.selected!="number"&&r.cookie&&(r.selected=parseInt(n._cookie(),10)),typeof r.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),r.selected=r.selected||0):r.selected===null&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabled=e.unique(r.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return n.lis.index(e)}))).sort(),e.inArray(r.selected,r.disabled)!=-1&&r.disabled.splice(e.inArray(r.selected,r.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),r.selected>=0&&this.anchors.length&&(this.panels.eq(r.selected).removeClass("ui-tabs-hide"),this.lis.eq(r.selected).addClass("ui-tabs-selected ui-state-active"),n.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[r.selected],n.panels[r.selected]))}),this.load(r.selected)),e(window).bind("unload",function(){n.lis.add(n.anchors).unbind(".tabs"),n.lis=n.anchors=n.panels=null})):r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[r.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),r.cookie&&this._cookie(r.selected,r.cookie);for(var s=0,o;o=this.lis[s];s++)e(o)[e.inArray(s,r.disabled)!=-1&&!e(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(r.event!="mouseover"){var u=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},a=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){u("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){a("hover",e(this))}),this.anchors.bind("focus.tabs",function(){u("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){a("focus",e(this).closest("li"))})}var f,l;r.fx&&(e.isArray(r.fx)?(f=r.fx[0],l=r.fx[1]):f=l=r.fx);var p=l?function(t,r){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),r.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){h(r,l),n._trigger("show",null,n._ui(t,r[0]))})}:function(t,r){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),r.removeClass("ui-tabs-hide"),n._trigger("show",null,n._ui(t,r[0]))},d=f?function(e,t){t.animate(f,f.duration||"normal",function(){n.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),h(t,f),n.element.dequeue("tabs")})}:function(e,t,r){n.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),n.element.dequeue("tabs")};this.anchors.bind(r.event+".tabs",function(){var t=this,i=e(this).closest("li"),s=n.panels.filter(":not(.ui-tabs-hide)"),o=e(n._sanitizeSelector(this.hash));if(i.hasClass("ui-tabs-selected")&&!r.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||n._trigger("select",null,n._ui(this,o[0]))===!1)return this.blur(),!1;r.selected=n.anchors.index(this),n.abort();if(r.collapsible){if(i.hasClass("ui-tabs-selected"))return r.selected=-1,r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){d(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),this.blur(),!1}r.cookie&&n._cookie(r.selected,r.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&n.element.queue("tabs",function(){d(t,s)}),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},destroy:function(){var t=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie)},add:function(t,n,r){r===undefined&&(r=this.anchors.length);var i=this,s=this.options,o=e(s.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,n)),u=t.indexOf("#")?this._tabId(e("a",o)[0]):t.replace("#","");o.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var a=e("#"+u);a.length||(a=e(s.panelTemplate).attr("id",u).data("destroy.tabs",!0)),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(o.appendTo(this.list),a.appendTo(this.list[0].parentNode)):(o.insertBefore(this.lis[r]),a.insertBefore(this.panels[r])),s.disabled=e.map(s.disabled,function(e,t){return e>=r?++e:e}),this._tabify(),this.anchors.length==1&&(o.addClass("ui-tabs-selected ui-state-active"),a.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){i._trigger("show",null,i._ui(i.anchors[0],i.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r]))},remove:function(t){var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0]))},enable:function(t){var n=this.options;if(e.inArray(t,n.disabled)==-1)return;this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(e){var t=this,n=this.options;e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e])))},select:function(e){typeof e=="string"?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):e===null&&(e=-1),e==-1&&this.options.collapsible&&(e=this.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs")},load:function(t){var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){e(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}n.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]),this.panels.stop(!1,!0),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t)},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.7.3",getter:"length",defaults:{ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,n){var r=this,i=this.options,s=r._rotate||(r._rotate=function(t){clearTimeout(r.rotation),r.rotation=setTimeout(function(){var e=i.selected;r.select(++e<r.anchors.length?e:0)},e),t&&t.stopPropagation()}),o=r._unrotate||(r._unrotate=n?function(e){t=i.selected,s()}:function(e){e.clientX&&r.rotate(null)});e?(this.element.bind("tabsshow",s),this.anchors.bind(i.event+".tabs",o),s()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",s),this.anchors.unbind(i.event+".tabs",o),delete this._rotate,delete this._unrotate)}})}(jQuery),function($){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1},this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,showMonthAfterYear:!1,yearRange:"-10:+10",showOtherMonths:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}function isArray(e){return e&&($.browser.safari&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.7.3"}});var PROP_NAME="datepicker";$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(target.id="dp"+ ++this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;var r=this._get(t,"appendText"),i=this._get(t,"isRTL");r&&(t.append=$('<span class="'+this._appendClass+'">'+r+"</span>"),n[i?"before":"after"](t.append));var s=this._get(t,"showOn");(s=="focus"||s=="both")&&n.focus(this._showDatepicker);if(s=="button"||s=="both"){var o=this._get(t,"buttonText"),u=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:u,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(u==""?o:$("<img/>").attr({src:u,alt:o,title:o}))),n[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(e),!1})}n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t)},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t)),this._updateDatepicker(t),this._updateAlternate(t)},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){var o="dp"+ ++this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" size="1" style="position: absolute; top: -100px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker(null);var s=this._getDateDatepicker(e);extendRemove(r.settings,i),this._setDateDatepicker(e,s),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t,n){var r=this._getInst(e);r&&(this._setDate(r,t,n),this._updateDatepicker(r),this._updateAlternate(r))},_getDateDatepicker:function(e){var t=this._getInst(e);return t&&!t.inline&&this._setDateFromField(t),t?this._getDate(t):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:var i=$("td."+$.datepicker._dayOverClass+", td."+$.datepicker._currentClass,t.dpDiv);return i[0]?$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]):$.datepicker._hideDatepicker(null,$.datepicker._get(t,"duration")),!1;case 27:$.datepicker._hideDatepicker(null,$.datepicker._get(t,"duration"));break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||r<" "||!n||n.indexOf(r)>-1}},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e),n=$.datepicker._get(t,"beforeShow");extendRemove(t.settings,n?n.apply(e,[e,t]):{}),$.datepicker._hideDatepicker(null,""),$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each(function(){return r|=$(this).css("position")=="fixed",!r}),r&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var i={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.rangeStart=null,t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),i=$.datepicker._checkOffset(t,i,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"});if(!t.inline){var s=$.datepicker._get(t,"showAnim")||"show",o=$.datepicker._get(t,"duration"),u=function(){$.datepicker._datepickerShowing=!0,$.browser.msie&&parseInt($.browser.version,10)<7&&$("iframe.ui-datepicker-cover").css({width:t.dpDiv.width()+4,height:t.dpDiv.height()+4})};$.effects&&$.effects[s]?t.dpDiv.show(s,$.datepicker._get(t,"showOptions"),o,u):t.dpDiv[s](o,u),o==""&&u(),t.input[0].type!="hidden"&&t.input[0].focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){var t={width:e.dpDiv.width()+4,height:e.dpDiv.height()+4},n=this;e.dpDiv.empty().append(this._generateHTML(e)).find("iframe.ui-datepicker-cover").css({width:t.width,height:t.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){n._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var r=this._getNumberOfMonths(e),i=r[1],s=17;i>1?e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"):e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e.input&&e.input[0].type!="hidden"&&e==$.datepicker._curInst&&$(e.input[0]).focus()},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+$(document).scrollLeft(),a=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=t.left+r>u&&u>r?Math.abs(t.left+r-u):0,t.top-=t.top+i>a&&a>i?Math.abs(t.top+i+o*2-a):0,t},_findPos:function(e){while(e&&(e.type=="hidden"||e.nodeType!=1))e=e.nextSibling;var t=$(e).offset();return[t.left,t.top]},_hideDatepicker:function(e,t){var n=this._curInst;if(!n||e&&n!=$.data(e,PROP_NAME))return;n.stayOpen&&this._selectDate("#"+n.id,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)),n.stayOpen=!1;if(this._datepickerShowing){t=t!=null?t:this._get(n,"duration");var r=this._get(n,"showAnim"),i=function(){$.datepicker._tidyDialog(n)};t!=""&&$.effects&&$.effects[r]?n.dpDiv.hide(r,$.datepicker._get(n,"showOptions"),t,i):n.dpDiv[t==""?"hide":r=="slideDown"?"slideUp":r=="fadeIn"?"fadeOut":"hide"](t,i),t==""&&this._tidyDialog(n);var s=this._get(n,"onClose");s&&s.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}this._curInst=null},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target);t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)&&$.datepicker._hideDatepicker(
null,"")},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i._selectingMonthYear=!1,i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_clickMonthYear:function(e){var t=$(e),n=this._getInst(t[0]);n.input&&n._selectingMonthYear&&!$.browser.msie&&n.input[0].focus(),n._selectingMonthYear=!n._selectingMonthYear},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,s.stayOpen&&(s.endDay=s.endMonth=s.endYear=null),this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)),s.stayOpen&&(s.rangeStart=this._daylightSavingAdjust(new Date(s.currentYear,s.currentMonth,s.currentDay)),this._updateDatepicker(s))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);n.stayOpen=!1,n.endDay=n.endMonth=n.endYear=n.rangeStart=null,this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):r.stayOpen||(this._hideDatepicker(null,this._get(r,"duration")),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input[0].focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e);dateStr=this.formatDate(n,r,this._getFormatConfig(e)),$(t).each(function(){$(this).val(dateStr)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),0,4),r=n.getDay()||7;n.setDate(n.getDate()+1-r);if(r<4&&t<n)return t.setDate(t.getDate()-3),$.datepicker.iso8601Week(t);if(t>new Date(t.getFullYear(),11,28)){r=(new Date(t.getFullYear()+1,0,4)).getDay()||7;if(r>4&&(t.getDay()||7)<r-3)return 1}return Math.floor((t-n)/864e5/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){p(e);var n=e=="@"?14:e=="y"?4:e=="o"?3:2,r=n,i=0;while(r>0&&g<t.length&&t.charAt(g)>="0"&&t.charAt(g)<="9")i=i*10+parseInt(t.charAt(g++),10),r--;if(r==n)throw"Missing number at position "+g;return i},v=function(e,n,r){var i=p(e)?r:n,s=0;for(var o=0;o<i.length;o++)s=Math.max(s,i[o].length);var u="",a=g;while(s>0&&g<t.length){u+=t.charAt(g++);for(var f=0;f<i.length;f++)if(u==i[f])return f+1;s--}throw"Unknown name at position "+a},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var w=this._getDaysInMonth(a,f-1);if(l<=w)break;f++,l-=w}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":var p=t.getDate();for(var d=t.getMonth()-1;d>=0;d--)p+=this._getDaysInMonth(t.getFullYear(),d);l+=a("o",p,3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1;for(var r=0;r<e.length;r++)if(n)e.charAt(r)=="'"&&!lookAhead("'")?n=!1:t+=e.charAt(r);else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?t+="'":n=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e){var t=this._get(e,"dateFormat"),n=e.input?e.input.val():null;e.endDay=e.endMonth=e.endYear=null;var r=defaultDate=this._getDefaultDate(e),i=this._getFormatConfig(e);try{r=this.parseDate(t,n,i)||defaultDate}catch(s){this.log(s),r=defaultDate}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){var t=this._determineDate(this._get(e,"defaultDate"),new Date),n=this._getMinMaxDate(e,"min",!0),r=this._getMinMaxDate(e,"max");return t=n&&t<n?n:t,t=r&&t>r?r:t,t},_determineDate:function(e,t){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(e,t){var n=new Date,r=n.getFullYear(),i=n.getMonth(),s=n.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=o.exec(e);while(u){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=parseInt(u[1],10)*7;break;case"m":case"M":i+=parseInt(u[1],10),s=Math.min(s,t(r,i));break;case"y":case"Y":r+=parseInt(u[1],10),s=Math.min(s,t(r,i))}u=o.exec(e)}return new Date(r,i,s)};return e=e==null?t:typeof e=="string"?r(e,this._getDaysInMonth):typeof e=="number"?isNaN(e)?t:n(e):e,e=e&&e.toString()=="Invalid Date"?t:e,e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),this._daylightSavingAdjust(e)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear;t=this._determineDate(t,new Date),e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=this._get(e,"stepBigMonths"),l=o[0]!=1||o[1]!=1,c=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min",!0),p=this._getMinMaxDate(e,"max"),d=e.drawMonth-u,v=e.drawYear;d<0&&(d+=12,v--);if(p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[1]+1,p.getDate()));m=h&&m<h?h:m;while(this._daylightSavingAdjust(new Date(v,d,1))>m)d--,d<0&&(d=11,v--)}e.drawMonth=d,e.drawYear=v;var g=this._get(e,"prevText");g=s?this.formatDate(g,this._daylightSavingAdjust(new Date(v,d-a,1)),this._getFormatConfig(e)):g;var y=this._canAdjustMonth(e,-1,v,d)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+e.id+"', -"+a+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=s?this.formatDate(b,this._daylightSavingAdjust(new Date(v,d+a,1)),this._getFormatConfig(e)):b;var w=this._canAdjustMonth(e,1,v,d)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+e.id+"', +"+a+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>",E=this._get(e,"currentText"),S=this._get(e,"gotoCurrent")&&e.currentDay?c:t;E=s?this.formatDate(E,S,this._getFormatConfig(e)):E;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",T=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?x:"")+(this._isInRange(e,S)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#'+e.id+"');\">"+E+"</button>":"")+(n?"":x)+"</div>":"",N=parseInt(this._get(e,"firstDay"),10);N=isNaN(N)?0:N;var C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"calculateWeek")||this.iso8601Week,P=e.endDay?this._daylightSavingAdjust(new Date(e.endYear,e.endMonth,e.endDay)):c,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(v,d,e.selectedDay)),R=" ui-corner-all",U="";if(l){U+='<div class="ui-datepicker-group ui-datepicker-group-';switch(I){case 0:U+="first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+="last",R=" ui-corner-"+(n?"left":"right");break;default:U+="middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?w:y:"")+(/all|right/.test(R)&&j==0?n?y:w:"")+this._generateMonthYearHeader(e,d,v,h,p,q,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z="";for(var W=0;W<7;W++){var X=(W+N)%7;z+="<th"+((W+N+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(v,d);v==e.selectedYear&&d==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(v,d)-N+7)%7,K=l?6:Math.ceil((J+V)/7),Q=this._daylightSavingAdjust(new Date(v,d,1-J));for(var G=0;G<K;G++){U+="<tr>";var Y="";for(var W=0;W<7;W++){var Z=M?M.apply(e.input?e.input[0]:null,[Q]):[!0,""],et=Q.getMonth()!=d,tt=et||!Z[0]||h&&Q<h||p&&Q>p;Y+='<td class="'+((W+N+6)%7>=5?" ui-datepicker-week-end":"")+(et?" ui-datepicker-other-month":"")+(Q.getTime()==q.getTime()&&d==e.selectedMonth&&e._keyEvent||H.getTime()==Q.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(tt?" "+this._unselectableClass+" ui-state-disabled":"")+(et&&!_?"":" "+Z[1]+(Q.getTime()>=c.getTime()&&Q.getTime()<=P.getTime()?" "+this._currentClass:"")+(Q.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!et||_)&&Z[2]?' title="'+Z[2]+'"':"")+(tt?"":" onclick=\"DP_jQuery.datepicker._selectDay('#"+e.id+"',"+d+","+v+', this);return false;"')+">"+(et?_?Q.getDate():"&#xa0;":tt?'<span class="ui-state-default">'+Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==t.getTime()?" ui-state-highlight":"")+(Q.getTime()>=c.getTime()&&Q.getTime()<=P.getTime()?" ui-state-active":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>",Q.setDate(Q.getDate()+1),Q=this._daylightSavingAdjust(Q)}U+=Y+"</tr>"}d++,d>11&&(d=0,v++),U+="</tbody></table>"+(l?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=T+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u,a){r=e.rangeStart&&r&&s<r?s:r;var f=this._get(e,"changeMonth"),l=this._get(e,"changeYear"),c=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',p="";if(o||!f)p+='<span class="ui-datepicker-month">'+u[t]+"</span> ";else{var d=r&&r.getFullYear()==n,v=i&&i.getFullYear()==n;p+='<select class="ui-datepicker-month" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+e.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+e.id+"');\">";for(var m=0;m<12;m++)(!d||m>=r.getMonth())&&(!v||m<=i.getMonth())&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");p+="</select>"}c||(h+=p+((o||f||l)&&(!f||!l)?"&#xa0;":""));if(o||!l)h+='<span class="ui-datepicker-year">'+n+"</span>";else{var g=this._get(e,"yearRange").split(":"),y=0,b=0;g.length!=2?(y=n-10,b=n+10):g[0].charAt(0)=="+"||g[0].charAt(0)=="-"?(y=n+parseInt(g[0],10),b=n+parseInt(g[1],10)):(y=parseInt(g[0],10),b=parseInt(g[1],10)),y=r?Math.max(y,r.getFullYear()):y,b=i?Math.min(b,i.getFullYear()):b,h+='<select class="ui-datepicker-year" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+e.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+e.id+"');\">";for(;y<=b;y++)h+='<option value="'+y+'"'+(y==n?' selected="selected"':"")+">"+y+"</option>";h+="</select>"}return c&&(h+=(o||f||l?"&#xa0;":"")+p),h+="</div>",h},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._daylightSavingAdjust(new Date(r,i,s)),u=this._getMinMaxDate(e,"min",!0),a=this._getMinMaxDate(e,"max");o=u&&o<u?u:o,o=a&&o>a?a:o,e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t,n){var r=this._determineDate(this._get(e,t+"Date"),null);return!n||!e.rangeStart?r:!r||e.rangeStart>r?e.rangeStart:r},_getDaysInMonth:function(e,t){return 32-(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=e.rangeStart?this._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)):null;n=n&&e.rangeStart<n?e.rangeStart:n;var r=n||this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!r||t>=r)&&(!i||t<=i)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.7.3",window.DP_jQuery=$}(jQuery),function(e){e.widget("ui.progressbar",{_init:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()}),this.valueDiv=e('<div class="ui-progressbar-value ui-widget-header ui-corner-left"></div>').appendTo(this.element),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeData("progressbar").unbind(".progressbar"),this.valueDiv.remove(),e.widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===undefined?this._value():(this._setData("value",e),this)},_setData:function(t,n){switch(t){case"value":this.options.value=n,this._refreshValue(),this._trigger("change",null,{})}e.widget.prototype._setData.apply(this,arguments)},_value:function(){var e=this.options.value;return e<this._valueMin()&&(e=this._valueMin()),e>this._valueMax()&&(e=this._valueMax()),e},_valueMin:function(){var e=0;return e},_valueMax:function(){var e=100;return e},_refreshValue:function(){var e=this.value();this.valueDiv[e==this._valueMax()?"addClass":"removeClass"]("ui-corner-right"),this.valueDiv.width(e+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.7.3",defaults:{value:0}})}(jQuery),jQuery.effects||function(e){function t(t,n){var r=t[1]&&t[1].constructor==Object?t[1]:{};n&&(r.mode=n);var i=t[1]&&t[1].constructor!=Object?t[1]:r.duration?r.duration:t[2];i=e.fx.off?0:typeof i=="number"?i:e.fx.speeds[i]||e.fx.speeds._default;var s=r.callback||e.isFunction(t[1])&&t[1]||e.isFunction(t[2])&&t[2]||e.isFunction(t[3])&&t[3];return[t[0],r,i,s]}function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=e.curCSS(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}e.effects={version:"1.7.3",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var t={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")};e.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var n=e.parent();if(e.css("position")=="static")n.css({position:"relative"}),e.css({position:"relative"});else{var r=e.css("top");isNaN(parseInt(r,10))&&(r="auto");var i=e.css("left");isNaN(parseInt(i,10))&&(i="auto"),n.css({position:e.css("position"),top:r,left:i,zIndex:e.css("z-index")}).show(),e.css({position:"relative",top:0,left:0})}return n.css(t),n},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(i[n]=unit[0]*r+unit[1])}),i},animateClass:function(t,n,r,i){var s=typeof r=="function"?r:i?i:null,o=typeof r=="string"?r:null;return this.each(function(){var r={},i=e(this),u=i.attr("style")||"";typeof u=="object"&&(u=u.cssText),t.toggle&&(i.hasClass(t.toggle)?t.remove=t.toggle:t.add=t.toggle);var a=e.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);t.add&&i.addClass(t.add),t.remove&&i.removeClass(t.remove);var l=e.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);t.add&&i.removeClass(t.add),t.remove&&i.addClass(t.remove);for(var c in l)typeof l[c]!="function"&&l[c]&&c.indexOf("Moz")==-1&&c.indexOf("length")==-1&&l[c]!=a[c]&&(c.match(/color/i)||!c.match(/color/i)&&!isNaN(parseInt(l[c],10)))&&(a.position!="static"||a.position=="static"&&!c.match(/left|top|bottom|right/))&&(r[c]=l[c]);i.animate(r,n,o,function(){typeof e(this).attr("style")=="object"?(e(this).attr("style").cssText="",e(this).attr("style").cssText=u):e(this).attr("style",u),t.add&&e(this).addClass(t.add),t.remove&&e(this).removeClass(t.remove),s&&s.apply(this,arguments)})})}},e.fn.extend({_show:e.fn.show,_hide:e.fn.hide,__toggle:e.fn.toggle,_addClass:e.fn.addClass,_removeClass:e.fn.removeClass,_toggleClass:e.fn.toggleClass,effect:function(t,n,r,i){return e.effects[t]?e.effects[t].call(this,{method:t,options:n||{},duration:r,callback:i}):null},show:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._show.apply(this,arguments):this.effect.apply(this,t(arguments,"show"))},hide:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._hide.apply(this,arguments):this.effect.apply(this,t(arguments,"hide"))},toggle:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])||e.isFunction(arguments[0])||typeof arguments[0]=="boolean"?this.__toggle.apply(this,arguments):this.effect.apply(this,t(arguments,"toggle"))},addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},toggleClass:function(t,n,r,i){return typeof n!="boolean"&&n?e.effects.animateClass.apply(this,[{toggle:t},n,r,i]):this._toggleClass(t,n)},morph:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.state==0&&(e.start=r(e.elem,i),e.end=n(e.end)),e.elem.style[i]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)].join(",")+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=s=="vertical"?"height":"width",f=s=="vertical"?o.height():o.width();i=="show"&&o.css(u,0);var l={};l[u]=i=="show"?f:0,o.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",o=t.options.distance||20,u=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",o=t.options.distance||(l=="top"?n.outerHeight({margin:!0})/3:n.outerWidth({margin:!0})/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-o:o),i=="hide"&&(o/=u*2),i!="hide"&&u--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+o,n.animate(h,f/2,t.options.easing),o/=2,u--}for(var p=0;p<u;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),o=i=="hide"?o*2:o/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+o,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=n[0].tagName=="IMG"?o:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?u.height():u.width();i=="show"&&(u.css(f.size,0),u.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,u.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight({margin:!0})/2:n.outerWidth({margin:!0})/2);i=="show"&&n.css("opacity",0).css(o,u=="pos"?-f:f
);var l={opacity:i=="show"?1:0};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var o=i.outerWidth(!0),u=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(o/r),top:-f*(u/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/r,height:u/n,left:s.left+l*(o/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(o/r):0),top:s.top+f*(u/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(u/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(o/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(o/r)),top:s.top+f*(u/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(u/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,o=!!t.options.horizFirst,u=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=o,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(o?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,u,t.options.easing).animate(v,u,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.color||"#ffff99",o=n.css("backgroundColor");e.effects.save(n,r),n.show(),n.css({backgroundImage:"none",backgroundColor:s});var u={backgroundColor:o};i=="hide"&&(u.opacity=0),n.animate(u,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&e.browser.msie&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show"),i=t.options.times||5,s=t.duration?t.duration/2:e.fx.speeds._default/2;r=="hide"&&i--,n.is(":hidden")&&(n.css("opacity",0),n.show(),n.animate({opacity:1},s,t.options.easing),i-=2);for(var o=0;o<i;o++)n.animate({opacity:0},s,t.options.easing).animate({opacity:1},s,t.options.easing);r=="hide"?n.animate({opacity:0},s,t.options.easing,function(){n.hide(),t.callback&&t.callback.apply(this,arguments)}):n.animate({opacity:0},s,t.options.easing).animate({opacity:1},s,t.options.easing,function(){t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"hide"),s=parseInt(t.options.percent,10)||150;r.fade=!0;var o={height:n.height(),width:n.width()},u=s/100;n.from=i=="hide"?o:{height:o.height*u,width:o.width*u},r.from=n.from,r.percent=i=="hide"?s:100,r.mode=i,n.effect("scale",r,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),o=t.options.direction||"both",u=t.options.origin;i!="effect"&&(r.origin=u||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:o!="horizontal"?s/100:1,x:o!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","width","height","overflow","opacity"],i=["position","top","left","overflow","opacity"],s=["width","height","overflow"],o=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(o),n.from=e.effects.setTransition(n,o,m.from.y,n.from),n.to=e.effects.setTransition(n,o,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")u=u.concat(["marginTop","marginBottom"]).concat(o),f=f.concat(["marginLeft","marginRight"]),s=r.concat(u).concat(f),n.find("*[width]").each(function(){child=e(this),c&&e.effects.save(child,s);var n={height:child.height(),width:child.width()};child.from={height:n.height*m.from.y,width:n.width*m.from.x},child.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,u,m.from.y,child.from),child.to=e.effects.setTransition(child,u,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,f,m.from.x,child.from),child.to=e.effects.setTransition(child,f,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){c&&e.effects.restore(child,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",o=t.options.distance||20,u=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+o,p[l]=(c=="pos"?"+=":"-=")+o*2,d[l]=(c=="pos"?"-=":"+=")+o*2,n.animate(h,f,t.options.easing);for(var v=1;v<u;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight({margin:!0}):n.outerWidth({margin:!0}));i=="show"&&n.css(o,u=="pos"?-f:f);var l={};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},o=n.offset(),u=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){u.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},crossDomain:a},f&&(c.xhrFields={withCredentials:f}),s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val();if(!o==!r){if(s.is("input[type=radio]")&&a.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),function(e){var t=window.Backstop||{};window.Backstop===undefined&&(window.Backstop=t),window.console===undefined&&(window.console={},window.console.log=function(){}),t.redirect=function(e){typeof window.location.assign=="function"?window.location.assign(e):window.location.href=e},t.isnull=function(e){return typeof e=="undefined"||e===null}}(jQuery),function($){$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var t=e.keyCode;if(t<33)return!0;var n={38:"north",40:"south",37:"west",39:"east"},r=t>=37&&t<=40,i=e.altKey,s=e.shiftKey,o=e.ctrlKey,u=!1,a,f,l,h,p;return!o&&!s?!0:(r&&options[n[t]].enableCursorHotkey?u=n[t]:$.each(c.borderPanes.split(","),function(e,n){f=options[n],l=f.customHotkey,h=f.customHotkeyModifier;if(s&&h=="SHIFT"||o&&h=="CTRL"||o&&s)if(l&&t==(isNaN(l)||l<=9?l.toUpperCase().charCodeAt(0):l))return u=n,!1}),u?(f=options[u],a=state[u],!f.enableCursorHotkey||a.isHidden||!$Ps[u]?!0:(p=e.target||e.srcElement,p&&s&&r&&(p.tagName=="TEXTAREA"||p.tagName=="INPUT"&&(t==37||t==39))?!0:(toggle(u),e.stopPropagation(),e.returnValue=!1,!1))):!0)}function allowOverflow(e){this&&this.tagName&&(e=this);var t;typeof e=="string"?t=$Ps[e]:$(e).attr("pane")?t=$(e):t=$(e).parents("div[pane]:first");if(!t.length)return;var n=t.attr("pane"),r=state[n];r.cssSaved&&resetOverflow(n);if(r.isSliding||r.isResizing||r.isClosed){r.cssSaved=!1;return}var i={zIndex:c.zIndex.pane_normal+1},s={},o=t.css("overflow"),u=t.css("overflowX"),a=t.css("overflowY");o!="visible"&&(s.overflow=o,i.overflow="visible"),u&&u!="visible"&&u!="auto"&&(s.overflowX=u,i.overflowX="visible"),a&&a!="visible"&&a!="auto"&&(s.overflowY=u,i.overflowY="visible"),r.cssSaved=s,t.css(i),$.each(c.allPanes.split(","),function(e,t){t!=n&&resetOverflow(t)})}function resetOverflow(e){this&&this.tagName&&(e=this);var t;typeof e=="string"?t=$Ps[e]:$(e).hasClass("ui-layout-pane")?t=$(e):t=$(e).parents("div[pane]:first");if(!t.length)return;var n=t.attr("pane"),r=state[n],i=r.cssSaved||{};!r.isSliding&&!r.isResizing&&t.css("zIndex",c.zIndex.pane_normal),t.css(i),r.cssSaved=!1}function getBtn(e,t,n){var r=$(e),i="Error Adding Button \n\nInvalid ";if(!r.length)alert(i+"selector: "+e);else{if(c.borderPanes.indexOf(t)!=-1){var s=options[t].buttonClass+"-"+n;return r.addClass(s+" "+s+"-"+t),r}alert(i+"pane: "+t)}return!1}function addToggleBtn(e,t){var n=getBtn(e,t,"toggle");n&&n.attr("title",state[t].isClosed?"Open":"Close").click(function(e){toggle(t),e.stopPropagation()})}function addOpenBtn(e,t){var n=getBtn(e,t,"open");n&&n.attr("title","Open").click(function(e){open(t),e.stopPropagation()})}function addCloseBtn(e,t){var n=getBtn(e,t,"close");n&&n.attr("title","Close").click(function(e){close(t),e.stopPropagation()})}function addPinBtn(e,t){var n=getBtn(e,t,"pin");if(n){var r=state[t];n.click(function(e){setPinState($(this),t,r.isSliding||r.isClosed),r.isSliding||r.isClosed?open(t):close(t),e.stopPropagation()}),setPinState(n,t,!r.isClosed&&!r.isSliding),c[t].pins.push(e)}}function syncPinBtns(e,t){$.each(c[e].pins,function(n,r){setPinState($(r),e,t)})}function setPinState(e,t,n){var r=e.attr("pin");if(r&&n==(r=="down"))return;var i=options[t].buttonClass,s=i+"-pin",o=s+"-"+t,u=s+"-up",a=o+"-up",f=s+"-down",l=o+"-down";e.attr("pin",n?"down":"up").attr("title",n?"Un-Pin":"Pin").removeClass(n?u:f).removeClass(n?a:l).addClass(n?f:u).addClass(n?l:a)}var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"},options={name:"",scrollToBookmarkOnLoad:!0,defaults:{applyDefaultStyles:!1,closable:!0,resizable:!0,slidable:!0,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:!0,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:!1,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:!1,initHidden:!1},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:200,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}},effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:1e4,animation:1e4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},state={id:Math.floor(Math.random()*1e4),container:{},north:{},south:{},east:{},west:{},center:{}},altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"},isStr=function(e){if(typeof e=="string")return!0;if(typeof e=="object")try{var t=e.constructor.toString().match(/string/i);return t!==null}catch(n){}return!1},str=function(e){return typeof e=="string"||isStr(e)?$.trim(e):e},min=function(e,t){return Math.min(e,t)},max=function(e,t){return Math.max(e,t)},transformData=function(e){var t={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};return e=e||{},e.effects||e.defaults||e.north||e.south||e.west||e.east||e.center?t=$.extend(t,e):$.each(e,function(e,n){a=e.split("__"),t[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=n}),t},setFlowCallback=function(e,t,n){function o(e,n){i=c[e],i.doCallback?(cpPane=i.callback.split(",")[1],cpPane!=e&&cpPane!=t&&o(cpPane,!0)):(i.doCallback=!0,i.callback=r)}var r=e+","+t+","+(n?1:0),i,s;$.each(c.borderPanes.split(","),function(e,t){if(c[t].isMoving)return o(t),!1})},execFlowCallback=function(e){var t=c[e];c.isLayoutBusy=!1,delete t.isMoving;if(!t.doCallback||!t.callback)return;t.doCallback=!1;var n=t.callback.split(","),r=n[2]>0?!0:!1;n[0]=="open"?open(n[1],r):n[0]=="close"&&close(n[1],r),t.doCallback||(t.callback=null)},execUserCallback=function(pane,v_fn){if(!v_fn)return;var fn;try{if(typeof v_fn=="function")fn=v_fn;else{if(typeof v_fn!="string")return;if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1)return fn(args[1])}else fn=eval(v_fn)}if(typeof fn=="function")return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}catch(ex){}},cssNum=function(e,t){var n=0,r=!1,i="";return $.browser.msie||$.curCSS(e[0],"display",true)=="none"&&(r=!0,i=$.curCSS(e[0],"visibility",!0),e.css({display:"block",visibility:"hidden"})),n=parseInt($.curCSS(e[0],t,!0),10)||0,r&&(e.css({display:"none"}),i&&i!="hidden"&&e.css({visibility:i})),n},cssW=function(e,t){var n;return isStr(e)?(e=str(e),n=$Ps[e]):n=$(e),t<=0?0:(t>0||(t=isStr(e)?getPaneSize(e):n.outerWidth()),$.boxModel?t-cssNum(n,"paddingLeft")-cssNum(n,"paddingRight")-($.curCSS(n[0],"borderLeftStyle",true)=="none"?0:cssNum(n,"borderLeftWidth"))-($.curCSS(n[0],"borderRightStyle",true)=="none"?0:cssNum(n,"borderRightWidth")):t)},cssH=function(e,t){var n;return isStr(e)?(e=str(e),n=$Ps[e]):n=$(e),t<=0?0:(t>0||(t=isStr(e)?getPaneSize(e):n.outerHeight()),$.boxModel?t-cssNum(n,"paddingTop")-cssNum(n,"paddingBottom")-($.curCSS(n[0],"borderTopStyle",true)=="none"?0:cssNum(n,"borderTopWidth"))-($.curCSS(n[0],"borderBottomStyle",true)=="none"?0:cssNum(n,"borderBottomWidth")):t)},cssSize=function(e,t){return c[e].dir=="horz"?cssH(e,t):cssW(e,t)},getPaneSize=function(e,t){var n=$Ps[e],r=options[e],i=state[e],s=t?r.spacing_open:0,o=t?r.spacing_closed:0;return!n||i.isHidden?0:i.isClosed||i.isSliding&&t?o:c[e].dir=="horz"?n.outerHeight()+s:n.outerWidth()+s},setPaneMinMaxSizes=function(e){var t=cDims,n=c[e].edge,r=c[e].dir,i=options[e],s=state[e],o=$Ps[e],u=$Ps[altSide[e]],a=i.spacing_open,f=options[altSide[e]].spacing_open,l=u?r=="horz"?u.outerHeight():u.outerWidth():0,h=r=="horz"?t.innerHeight:t.innerWidth,p=h-a-l-f,d=s.minSize||0,v=Math.min(s.maxSize||9999,p),m,g;switch(e){case"north":m=t.offsetTop+d,g=t.offsetTop+v;break;case"west":m=t.offsetLeft+d,g=t.offsetLeft+v;break;case"south":m=t.offsetTop+t.innerHeight-v,g=t.offsetTop+t.innerHeight-d;break;case"east":m=t.offsetLeft+t.innerWidth-v,g=t.offsetLeft+t.innerWidth-d}$.extend(s,{minSize:d,maxSize:v,minPosition:m,maxPosition:g})},getPaneDims=function(){var d={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};with(d)width=cDims.innerWidth-left-right,height=cDims.innerHeight-bottom-top,top+=cDims.top,bottom+=cDims.bottom,left+=cDims.left,right+=cDims.right;return d},getElemDims=function(e){var t={},n,r,i;return $.each("Left,Right,Top,Bottom".split(","),function(){n=str(this),r=t["border"+n]=cssNum(e,"border"+n+"Width"),i=t["padding"+n]=cssNum(e,"padding"+n),t["offset"+n]=r+i,e==$Container&&(t[n.toLowerCase()]=$.boxModel?i:0)}),t.innerWidth=t.outerWidth=e.outerWidth(),t.innerHeight=t.outerHeight=e.outerHeight(),$.boxModel&&(t.innerWidth-=t.offsetLeft+t.offsetRight,t.innerHeight-=t.offsetTop+t.offsetBottom),t},setTimer=function(e,t,n,r){var i=window.layout=window.layout||{},s=i.timers=i.timers||{},o="layout_"+state.id+"_"+e+"_"+t;if(s[o])return;s[o]=setTimeout(n,r)},clearTimer=function(e,t){var n=window.layout=window.layout||{},r=n.timers=n.timers||{},i="layout_"+state.id+"_"+e+"_"+t;return r[i]?(clearTimeout(r[i]),delete r[i],!0):!1},create=function(){initOptions(),initContainer(),initPanes(),initHandles(),initResizable(),sizeContent("all");if(options.scrollToBookmarkOnLoad)with(self.location)hash&&replace(hash);initHotkeys(),$(window).resize(function(){var e="timerLayout_"+state.id;window[e]&&clearTimeout(window[e]),window[e]=null,window[e]=setTimeout(resizeAll,100)})},initContainer=function(){try{if($Container[0].tagName=="BODY")$("html").css({height:"100%",overflow:"hidden"}),$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"});else{var e={overflow:"hidden"},t=$Container.css("position"),n=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!t||"fixed,absolute,relative".indexOf(t)<0)e.position="relative";if(!n||n=="auto")e.height="100%"}$Container.css(e)}}catch(r){}cDims=state.container=getElemDims($Container)},initHotkeys=function(){$.each(c.borderPanes.split(","),function(e,t){var n=options[t];if(n.enableCursorHotkey||n.customHotkey)return $(document).keydown(keyDown),!1})},initOptions=function(){opts=transformData(opts),opts.effects&&($.extend(effects,opts.effects),delete opts.effects),$.each("name,scrollToBookmarkOnLoad".split(","),function(e,t){opts[t]!==undefined?options[t]=opts[t]:opts.defaults[t]!==undefined&&(options[t]=opts.defaults[t],delete opts.defaults[t])}),$.each("paneSelector,resizerCursor,customHotkey".split(","),function(e,t){delete opts.defaults[t]}),$.extend(options.defaults,opts.defaults),c.center=$.extend(!0,{},c.defaults,c.center),$.extend(options.center,opts.center);var e=$.extend(!0,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(t,n){options.center[n]=e[n]});var t=options.defaults;$.each(c.borderPanes.split(","),function(e,n){c[n]=$.extend(!0,{},c.defaults,c[n]),o=options[n]=$.extend(!0,{},options.defaults,options[n],opts.defaults,opts[n]),o.paneClass||(o.paneClass=defaults.paneClass),o.resizerClass||(o.resizerClass=defaults.resizerClass),o.togglerClass||(o.togglerClass=defaults.togglerClass),$.each(["_open","_close",""],function(e,r){var i="fxName"+r,s="fxSpeed"+r,u="fxSettings"+r;o[i]=opts[n][i]||opts[n].fxName||opts.defaults[i]||opts.defaults.fxName||o[i]||o.fxName||t[i]||t.fxName||"none";var a=o[i];if(a=="none"||!$.effects||!$.effects[a]||!effects[a]&&!o[u]&&!o.fxSettings)a=o[i]="none";var f=effects[a]||{},l=f.all||{},c=f[n]||{};o[u]=$.extend({},l,c,t.fxSettings||{},t[u]||{},o.fxSettings,o[u],opts.defaults.fxSettings,opts.defaults[u]||{},opts[n].fxSettings,opts[n][u]||{}),o[s]=opts[n][s]||opts[n].fxSpeed||opts.defaults[s]||opts.defaults.fxSpeed||o[s]||o[u].duration||o.fxSpeed||o.fxSettings.duration||t.fxSpeed||t.fxSettings.duration||c.duration||l.duration||"normal"})})},initPanes=function(){$.each(c.allPanes.split(","),function(){var e=str(this),t=options[e],n=state[e],r=n.fx,i=c[e].dir,s=t.size=="auto"||isNaN(t.size)?0:t.size,o=t.minSize||1,u=t.maxSize||9999,a=t.spacing_open||0,f=t.paneSelector,l=$.browser.msie&&$.browser.version<7,h={},p,d;$Cs[e]=!1,f.substr(0,1)==="#"?p=$Ps[e]=$Container.find(f+":first"):(p=$Ps[e]=$Container.children(f+":first"),p.length||(p=$Ps[e]=$Container.children("form:first").children(f+":first")));if(!p.length)return $Ps[e]=!1,!0;p.attr("pane",e).addClass(t.paneClass+" "+t.paneClass+"-"+e),e!="center"&&(n.isClosed=!1,n.isSliding=!1,n.isResizing=!1,n.isHidden=!1,n.noRoom=!1,c[e].pins=[]),h=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[e].cssReq),t.applyDefaultStyles&&$.extend(h,c.defaults.cssDef,c[e].cssDef),p.css(h),h={};switch(e){case"north":h.top=cDims.top,h.left=cDims.left,h.right=cDims.right;break;case"south":h.bottom=cDims.bottom,h.left=cDims.left,h.right=cDims.right;break;case"west":h.left=cDims.left;break;case"east":h.right=cDims.right;break;case"center":}if(i=="horz"){if(s===0||s=="auto")p.css({height:"auto"}),s=p.outerHeight();s=max(s,o),s=min(s,u),s=min(s,cDims.innerHeight-a),h.height=max(1,cssH(e,s)),n.size=s,n.maxSize=u,n.minSize=max(o,s-h.height+1),p.css(h)}else if(i=="vert"){if(s===0||s=="auto")p.css({width:"auto","float":"left"}),s=p.outerWidth(),p.css({"float":"none"});s=max(s,o),s=min(s,u),s=min(s,cDims.innerWidth-a),h.width=max(1,cssW(e,s)),n.size=s,n.maxSize=u,n.minSize=max(o,s-h.width+1),p.css(h),sizeMidPanes(e,null,!0)}else e=="center"&&(p.css(h),sizeMidPanes("center",null,!0));t.initClosed&&t.closable?(p.hide().addClass("closed"),n.isClosed=!0):t.initHidden||t.initClosed?(hide(e,!0),n.isHidden=!0):p.addClass("open"),t.showOverflowOnHover&&p.hover(allowOverflow,resetOverflow);if(t.contentSelector){d=$Cs[e]=p.children(t.contentSelector+":first");if(!d.length)return $Cs[e]=!1,!0;d.css(c.content.cssReq),t.applyDefaultStyles&&d.css(c.content.cssDef),p.css({overflow:"hidden"})}})},initHandles=function(){$.each(c.borderPanes.split(","),function(){var e=str(this),t=options[e],n=state[e],r=t.resizerClass,i=t.togglerClass,s=$Ps[e];$Rs[e]=!1,$Ts[e]=!1;if(!s||!t.closable&&!t.resizable)return;var o=c[e].edge,u=s.is(":visible"),a=u?t.spacing_open:t.spacing_closed,f="-"+e,l=u?"-open":"-closed",h,p;h=$Rs[e]=$("<span></span>"),(!u||!t.resizable)&&!u&&t.slidable&&h.attr("title",t.sliderTip).css("cursor",t.sliderCursor),h.attr("id",t.paneSelector.substr(0,1)=="#"?t.paneSelector.substr(1)+"-resizer":"").attr("resizer",e).css(c.resizers.cssReq).css(o,cDims[o]+getPaneSize(e)).addClass(r+" "+r+f+" "+r+l+" "+r+f+l).appendTo($Container),t.applyDefaultStyles&&h.css(c.resizers
.cssDef),t.closable&&(p=$Ts[e]=$("<div></div>"),p.attr("id",t.paneSelector.substr(0,1)=="#"?t.paneSelector.substr(1)+"-toggler":"").css(c.togglers.cssReq).attr("title",u?t.togglerTip_open:t.togglerTip_closed).click(function(t){toggle(e),t.stopPropagation()}).mouseover(function(e){e.stopPropagation()}).addClass(i+" "+i+f+" "+i+l+" "+i+f+l).appendTo(h),t.togglerContent_open&&$("<span>"+t.togglerContent_open+"</span>").addClass("content content-open").css("display",n.isClosed?"none":"block").appendTo(p),t.togglerContent_closed&&$("<span>"+t.togglerContent_closed+"</span>").addClass("content content-closed").css("display",n.isClosed?"block":"none").appendTo(p),t.applyDefaultStyles&&p.css(c.togglers.cssDef),u||bindStartSlidingEvent(e,!0))}),sizeHandles("all",!0)},initResizable=function(){var e=typeof $.fn.draggable=="function",t,n,r;$.each(c.borderPanes.split(","),function(){var t=str(this),n=options[t],i=state[t];if(!e||!$Ps[t]||!n.resizable)return n.resizable=!1,!0;var s=n.resizerClass,o=s+"-drag",u=s+"-"+t+"-drag",a=s+"-dragging",f=s+"-"+t+"-dragging",l=!1,h=$Ps[t],p=$Rs[t];i.isClosed||p.attr("title",n.resizerTip).css("cursor",n.resizerCursor),p.draggable({containment:$Container[0],axis:c[t].dir=="horz"?"y":"x",delay:200,distance:1,helper:"clone",opacity:n.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,s){if(!1===execUserCallback(t,n.onresize_start))return!1;i.isResizing=!0,clearTimer(t,"closeSlider"),p.addClass(o+" "+u),l=!1;var a=t=="east"||t=="south"?n.spacing_open:0;setPaneMinMaxSizes(t),i.minPosition-=a,i.maxPosition-=a,r=c[t].dir=="horz"?"top":"left",$(n.maskIframesOnResize===!0?"iframe":n.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,n){l||($(".ui-draggable-dragging").addClass(a+" "+f).children().css("visibility","hidden"),l=!0,i.isSliding&&$Ps[t].css("zIndex",c.zIndex.sliding)),n.position[r]<i.minPosition?n.position[r]=i.minPosition:n.position[r]>i.maxPosition&&(n.position[r]=i.maxPosition)},stop:function(e,n){var r=n.position,s,a;p.removeClass(o+" "+u);switch(t){case"north":s=r.top;break;case"west":s=r.left;break;case"south":s=cDims.outerHeight-r.top-p.outerHeight();break;case"east":s=cDims.outerWidth-r.left-p.outerWidth()}a=s-cDims[c[t].edge],sizePane(t,a),$("div.ui-layout-mask").remove(),i.isResizing=!1}})})},hide=function(e,t){var n=options[e],r=state[e],i=$Ps[e],s=$Rs[e];if(!i||r.isHidden)return;if(!1===execUserCallback(e,n.onhide_start))return;r.isSliding=!1,s&&s.hide(),t||r.isClosed?(r.isClosed=!0,r.isHidden=!0,i.hide(),sizeMidPanes(c[e].dir=="horz"?"all":"center"),execUserCallback(e,n.onhide_end||n.onhide)):(r.isHiding=!0,close(e,!1))},show=function(e,t){var n=options[e],r=state[e],i=$Ps[e],s=$Rs[e];if(!i||!r.isHidden)return;if(!1===execUserCallback(e,n.onshow_start))return;r.isSliding=!1,r.isShowing=!0,s&&n.spacing_open>0&&s.show(),t===!1?close(e,!0):open(e)},toggle=function(e){var t=state[e];t.isHidden?show(e):t.isClosed?open(e):close(e)},close=function(e,t,n){function b(){bindStartSlidingEvent(e,!0),g||execUserCallback(e,o.onclose_end||o.onclose),g&&execUserCallback(e,o.onshow_end||o.onshow),y&&execUserCallback(e,o.onhide_end||o.onhide),execFlowCallback(e)}var r=$Ps[e],i=$Rs[e],s=$Ts[e],o=options[e],u=state[e],a=!n&&!u.isClosed&&o.fxName_close!="none",f=c[e].edge,l=o.resizerClass,h=o.togglerClass,p="-"+e,d="-open",v="-sliding",m="-closed",g=u.isShowing,y=u.isHiding;delete u.isShowing,delete u.isHiding;if(!r||!o.resizable&&!o.closable)return;if(!t&&u.isClosed&&!g)return;if(c.isLayoutBusy){setFlowCallback("close",e,t);return}if(!g&&!1===execUserCallback(e,o.onclose_start))return;c[e].isMoving=!0,c.isLayoutBusy=!0,u.isClosed=!0,y?u.isHidden=!0:g&&(u.isHidden=!1),syncPinBtns(e,!1),u.isSliding||sizeMidPanes(c[e].dir=="horz"?"all":"center"),i&&(i.css(f,cDims[f]).removeClass(l+d+" "+l+p+d).removeClass(l+v+" "+l+p+v).addClass(l+m+" "+l+p+m),o.resizable&&i.draggable("disable").css("cursor","default").attr("title",""),s&&s.removeClass(h+d+" "+h+p+d).addClass(h+m+" "+h+p+m).attr("title",o.togglerTip_closed),sizeHandles()),a?(lockPaneForFX(e,!0),r.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(e,!1);if(!u.isClosed)return;b()})):(r.hide(),b())},open=function(e,t,n){function y(){u.isSliding||sizeMidPanes(c[e].dir=="vert"?"center":"all"),i&&(i.css(f,cDims[f]+getPaneSize(e)).removeClass(l+v+" "+l+p+v).addClass(l+d+" "+l+p+d).addClass(u.isSliding?l+m+" "+l+p+m:""),o.resizable?i.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip):i.css("cursor","default"),s&&s.removeClass(h+v+" "+h+p+v).addClass(h+d+" "+h+p+d).attr("title",o.togglerTip_open),sizeHandles("all")),sizeContent(e),syncPinBtns(e,!u.isSliding),execUserCallback(e,o.onopen_end||o.onopen),g&&execUserCallback(e,o.onshow_end||o.onshow),execFlowCallback(e)}var r=$Ps[e],i=$Rs[e],s=$Ts[e],o=options[e],u=state[e],a=!n&&u.isClosed&&o.fxName_open!="none",f=c[e].edge,l=o.resizerClass,h=o.togglerClass,p="-"+e,d="-open",v="-closed",m="-sliding",g=u.isShowing;delete u.isShowing;if(!r||!o.resizable&&!o.closable)return;if(!u.isClosed&&!u.isSliding)return;if(u.isHidden&&!g){show(e,!0);return}if(c.isLayoutBusy){setFlowCallback("open",e,t);return}if(!1===execUserCallback(e,o.onopen_start))return;c[e].isMoving=!0,c.isLayoutBusy=!0,u.isSliding&&!t&&bindStopSlidingEvents(e,!1),u.isClosed=!1,g&&(u.isHidden=!1),setPaneMinMaxSizes(e),u.size>u.maxSize&&r.css(c[e].sizeType,max(1,cssSize(e,u.maxSize))),bindStartSlidingEvent(e,!1),a?(lockPaneForFX(e,!0),r.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(e,!1);if(u.isClosed)return;y()})):(r.show(),y())},lockPaneForFX=function(e,t){var n=$Ps[e];t?(n.css({zIndex:c.zIndex.animation}),e=="south"?n.css({top:cDims.top+cDims.innerHeight-n.outerHeight()}):e=="east"&&n.css({left:cDims.left+cDims.innerWidth-n.outerWidth()})):(state[e].isSliding||n.css({zIndex:c.zIndex.pane_normal}),e=="south"?n.css({top:"auto"}):e=="east"&&n.css({left:"auto"}))},bindStartSlidingEvent=function(e,t){var n=options[e],r=$Rs[e],i=n.slideTrigger_open;if(!r||!n.slidable)return;i!="click"&&i!="dblclick"&&i!="mouseover"&&(i="click"),r[t?"bind":"unbind"](i,slideOpen).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.sliderTip:"")},bindStopSlidingEvents=function(e,t){function a(t){clearTimer(e,"closeSlider"),t.stopPropagation()}var n=options[e],r=state[e],i=n.slideTrigger_close,s=t?"bind":"unbind",o=$Ps[e],u=$Rs[e];r.isSliding=t,clearTimer(e,"closeSlider"),o.css({zIndex:t?c.zIndex.sliding:c.zIndex.pane_normal}),u.css({zIndex:t?c.zIndex.sliding:c.zIndex.resizer_normal}),i!="click"&&i!="mouseout"&&(i="mouseout");if(t){o.bind(i,slideClosed),u.bind(i,slideClosed);if(i="mouseout")o.bind("mouseover",a),u.bind("mouseover",a)}else{o.unbind(i),u.unbind(i);if(i="mouseout")o.unbind("mouseover"),u.unbind("mouseover"),clearTimer(e,"closeSlider")}},slideOpen=function(){var e=$(this).attr("resizer");state[e].isClosed&&(bindStopSlidingEvents(e,!0),open(e,!0))},slideClosed=function(){function i(){bindStopSlidingEvents(t,!1),r.isClosed||close(t)}var e=$(this),t=e.attr("pane")||e.attr("resizer"),n=options[t],r=state[t];if(r.isClosed||r.isResizing)return;n.slideTrigger_close=="click"?i():setTimer(t,"closeSlider",i,300)},sizePane=function(e,t){var n=c[e].edge,r=c[e].dir,i=options[e],s=state[e],o=$Ps[e],u=$Rs[e];setPaneMinMaxSizes(e),s.minSize=max(s.minSize,i.minSize),i.maxSize>0&&(s.maxSize=min(s.maxSize,i.maxSize)),t=max(t,s.minSize),t=min(t,s.maxSize),s.size=t,u.css(n,t+cDims[n]),o.css(c[e].sizeType,max(1,cssSize(e,t))),s.isSliding||sizeMidPanes(r=="horz"?"all":"center"),sizeHandles(),sizeContent(e),execUserCallback(e,i.onresize_end||i.onresize)},sizeMidPanes=function(e,t,n){if(!e||e=="all")e="east,west,center";var r=getPaneDims();t&&$.extend(r,t),$.each(e.split(","),function(){if(!$Ps[this])return;var e=str(this),t=options[e],i=state[e],s=$Ps[e],o=$Rs[e],u=!0,a={};e=="center"?(r=getPaneDims(),a=$.extend({},r),a.width=max(1,cssW(e,a.width)),a.height=max(1,cssH(e,a.height)),u=a.width>1&&a.height>1,$.browser.msie&&(!$.boxModel||$.browser.version<7)&&($Ps.north&&$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)}),$Ps.south&&$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)}))):(a.top=r.top,a.bottom=r.bottom,a.height=max(1,cssH(e,r.height)),u=a.height>1);if(u){s.css(a);if(i.noRoom){i.noRoom=!1;if(i.isHidden)return;show(e,!i.isClosed)}n||(sizeContent(e),execUserCallback(e,t.onresize_end||t.onresize))}else if(!i.noRoom){i.noRoom=!0;if(i.isHidden)return;n?(s.hide(),o&&o.hide()):hide(e)}})},sizeContent=function(e){if(!e||e=="all")e=c.allPanes;$.each(e.split(","),function(){if(!$Cs[this])return;var e=str(this),t=options[e].contentIgnoreSelector,n=$Ps[e],r=$Cs[e],i=r[0],s=cssH(n);n.children().each(function(){if(this==i)return;var e=$(this);if(!t||!e.is(t))s-=e.outerHeight()}),s>0&&(s=cssH(r,s)),s<1?r.hide():r.css({height:s}).show()})},sizeHandles=function(e,t){if(!e||e=="all")e=c.borderPanes;$.each(e.split(","),function(){var e=str(this),n=options[e],r=state[e],i=$Ps[e],s=$Rs[e],o=$Ts[e];if(!i||!s||!n.resizable&&!n.closable)return;var u=c[e].dir,a=r.isClosed?"_closed":"_open",f=n["spacing"+a],l=n["togglerAlign"+a],h=n["togglerLength"+a],p,d,v={};if(f==0){s.hide();return}!r.noRoom&&!r.isHidden&&s.show(),u=="horz"?(p=i.outerWidth(),s.css({width:max(1,cssW(s,p)),height:max(1,cssH(s,f)),left:cssNum(i,"left")})):(p=i.outerHeight(),s.css({height:max(1,cssH(s,p)),width:max(1,cssW(s,f)),top:cDims.top+getPaneSize("north",!0)}));if(o){if(h==0||r.isSliding&&n.hideTogglerOnSlide){o.hide();return}o.show();if(!(h>0)||h=="100%"||h>p)h=p,d=0;else if(typeof l=="string")switch(l){case"top":case"left":d=0;break;case"bottom":case"right":d=p-h;break;case"middle":case"center":default:d=Math.floor((p-h)/2)}else{var m=parseInt(l);l>=0?d=m:d=p-h+m}var g=n.togglerContent_open?o.children(".content-open"):!1,y=n.togglerContent_closed?o.children(".content-closed"):!1,b=r.isClosed?y:g;g&&g.css("display",r.isClosed?"none":"block"),y&&y.css("display",r.isClosed?"block":"none");if(u=="horz"){var w=cssW(o,h);o.css({width:max(0,w),height:max(1,cssH(o,f)),left:d}),b&&b.css("marginLeft",Math.floor((w-b.outerWidth())/2))}else{var E=cssH(o,h);o.css({height:max(0,E),width:max(1,cssW(o,f)),top:d}),b&&b.css("marginTop",Math.floor((E-b.outerHeight())/2))}}t&&n.initHidden&&(s.hide(),o&&o.hide())})},resizeAll=function(){var e=cDims.innerWidth,t=cDims.innerHeight;cDims=state.container=getElemDims($Container);var n=cDims.innerHeight<t,r=cDims.innerWidth<e,i,s;(n||r)&&$.each(["south","north","east","west"],function(e,t){i=state[t],s=c[t].dir,!i.isClosed&&(n&&s=="horz"||r&&s=="vert")&&(setPaneMinMaxSizes(t),i.size>i.maxSize&&sizePane(t,i.maxSize))}),sizeMidPanes("all"),sizeHandles("all")},$Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;return create(),{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}}(jQuery),function(e){e.jgrid=e.jgrid||{},e.extend(e.jgrid,{defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){return e<11||e>13?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"}})}(jQuery),function(b){b.jgrid=b.jgrid||{},b.extend(b.jgrid,{version:"4.4.0",htmlDecode:function(e){return e&&("&nbsp;"==e||"&#160;"==e||1===e.length&&160===e.charCodeAt(0))?"":e?(""+e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?(""+e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},format:function(e){var t=b.makeArray(arguments).slice(1);return void 0===e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,n){return t[n]})},getCellIndex:function(e){return e=b(e),e.is("tr")?-1:(e=(!e.is("td")&&!e.is("th")?e.closest("td,th"):e)[0],b.browser.msie?b.inArray(e,e.parentNode.cells):e.cellIndex)},stripHtml:function(e){var e=e+"",t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return e?(e=e.replace(t,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):"":e},stripPref:function(e,t){var n=b.type(e);if("string"==n||"number"==n)e=""+e,t=""!==e?(""+t).replace(""+e,""):t;return t},stringToDoc:function(e){var t;if("string"!=typeof e)return e;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(n){t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)}return t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null},parse:function(f){return"while(1);"==f.substr(0,9)&&(f=f.substr(9)),"/*"==f.substr(0,2)&&(f=f.substr(2,f.length-4)),f||(f="{}"),!0===b.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(f):eval("("+f+")")},parseDate:function(e,t){var n={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},r,i,s;r=/[\\\/:_;.,\t\T\s-]/;if(t&&null!==t&&void 0!==t){t=b.trim(t),t=t.split(r),void 0!==b.jgrid.formatter.date.masks[e]&&(e=b.jgrid.formatter.date.masks[e]);var e=e.split(r),o=b.jgrid.formatter.date.monthNames,u=b.jgrid.formatter.date.AmPm,a=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};r=0;for(i=e.length;r<i;r++)"M"==e[r]&&(s=b.inArray(t[r],o),-1!==s&&12>s&&(t[r]=s+1,n.m=t[r])),"F"==e[r]&&(s=b.inArray(t[r],o),-1!==s&&11<s&&(t[r]=s+1-12,n.m=t[r])),"a"==e[r]&&(s=b.inArray(t[r],u),-1!==s&&2>s&&t[r]==u[s]&&(t[r]=s,n.h=a(t[r],n.h))),"A"==e[r]&&(s=b.inArray(t[r],u),-1!==s&&1<s&&t[r]==u[s]&&(t[r]=s-2,n.h=a(t[r],n.h))),void 0!==t[r]&&(n[e[r].toLowerCase()]=parseInt(t[r],10));n.m=parseInt(n.m,10)-1,r=n.y,70<=r&&99>=r?n.y=1900+n.y:0<=r&&69>=r&&(n.y=2e3+n.y),void 0!==n.j&&(n.d=n.j),void 0!==n.n&&(n.m=parseInt(n.n,10)-1)}return new Date(n.y,n.m,n.d,n.h,n.i,n.s,n.u)},jqID:function(e){return(""+e).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e?e:b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(e,t){var n,r,i=[],s;if("function"==typeof t)return t(e);n=e[t];if(void 0===n)try{if("string"==typeof t&&(i=t.split(".")),s=i.length)for(n=e;n&&s--;)r=i.shift(),n=n[r]}catch(o){}return n},getXmlData:function(e,t,n){var r="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof t?t(e):r&&r[2]?r[1]?b(r[1],e).attr(r[2]):b(e).attr(r[2]):(e=b(t,e),n?e:0<e.length?b(e).text():void 0)},cellWidth:function(){var e=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();return e.remove(),5!==t},ajaxOptions:{},from:function(f){return new function(e,c){"string"==typeof e&&(e=b.data(e));var d=this,a=e,h=!0,f=!1,i=c,j=/[\$,%]/g,l=null,k=null,m=0,o=!1,p="",v=[],u=!0;if("object"!=typeof e||!e.push)throw"data provides is not an array";return 0<e.length&&(u="object"!=typeof e[0]?!1:!0),this._hasData=function(){return null===a?!1:0===a.length?!1:!0},this._getStr=function(e){var t=[];return f&&t.push("jQuery.trim("),t.push("String("+e+")"),f&&t.push(")"),h||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return f&&(e=b.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),h?e:e.toLowerCase()},this._funcLoop=function(e){var t=[];return b.each(a,function(n,r){t.push(e(r))}),t},this._append=function(e){var t;i=null===i?"":i+(""===p?" && ":p);for(t=0;t<m;t++)i+="(";o&&(i+="!"),i+="("+e+")",o=!1,p="",m=0},this._setCommand=function(e,t){l=e,k=t},this._resetNegate=function(){o=!1},this._repeatCommand=function(e,t){return null===l?d:null!==e&&null!==t?l(e,t):null===k||!u?l(e):l(k,e)},this._equals=function(e,t){return 0===d._compare(e,t,1)},this._compare=function(e,t,n){var r=Object.prototype.toString;return void 0===n&&(n=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===r.call(e)&&"[object Date]"===r.call(t)?e<t?-n:e>t?n:0:(!h&&"number"!=typeof e&&"number"!=typeof t&&(e=(""+e).toLowerCase(),t=(""+t).toLowerCase()),e<t?-n:e>t?n:0)},this._performSort=function(){0!==v.length&&(a=d._doSort(a,0))},this._doSort=function(e,t){var n=v[t].by,r=v[t].dir,i=v[t].type,s=v[t].datefmt;if(t==v.length-1)return d._getOrder(e,n,r,i,s);t++,n=d._getGroup(e,n,r,i,s),r=[];for(i=0;i<n.length;i++)for(var s=d._doSort(n[i].items,t),o=0;o<s.length;o++)r.push(s[o]);return r},this._getOrder=function(e,t,n,r,i){var s=[],o=[],u="a"==n?1:-1,a,f;void 0===r&&(r="text"),f="float"==r||"number"==r||"currency"==r||"numeric"==r?function(e){return e=parseFloat((""+e).replace(j,"")),isNaN(e)?0:e}:"int"==r||"integer"==r?function(e){return e?parseFloat((""+e).replace(j,"")):0}:"date"==r||"datetime"==r?function(e){return b.jgrid.parseDate(i,e).getTime()}:b.isFunction(r)?r:function(e){return e||(e=""),b.trim((""+e).toUpperCase())},b.each(e,function(e,n){a=""!==t?b.jgrid.getAccessor(n,t):n,void 0===a&&(a=""),a=f(a,n),o.push({vSort:a,index:e})}),o.sort(function(e,t){return e=e.vSort,t=t.vSort,d._compare(e,t,u)});for(var r=0,l=e.length;r<l;)n=o[r].index,s.push(e[n]),r++;return s},this._getGroup=function(e,t,n,r,i){var s=[],o=null,u=null,a;return b.each(d._getOrder(e,t,n,r,i),function(e,n){a=b.jgrid.getAccessor(n,t),void 0===a&&(a=""),d._equals(u,a)||(u=a,null!==o&&s.push(o),o=d._group(t,a)),o.items.push(n)}),null!==o&&s.push(o),s},this.ignoreCase=function(){return h=!1,d},this.useCase=function(){return h=!0,d},this.trim=function(){return f=!0,d},this.noTrim=function(){return f=!1,d},this.execute=function(){var c=i,f=[];return null===c?d:(b.each(a,function(){eval(c)&&f.push(this)}),a=f,d)},this.data=function(){return a},this.select=function(e){d._performSort();if(!d._hasData())return[];d.execute();if(b.isFunction(e)){var t=[];return b.each(a,function(n,r){t.push(e(r))}),t}return a},this.hasMatch=function(){return d._hasData()?(d.execute(),0<a.length):!1},this.andNot=function(e,t,n){return o=!o,d.and(e,t,n)},this.orNot=function(e,t,n){return o=!o,d.or(e,t,n)},this.not=function(e,t,n){return d.andNot(e,t,n)},this.and=function(e,t,n){return p=" && ",void 0===e?d:d._repeatCommand(e,t,n)},this.or=function(e,t,n){return p=" || ",void 0===e?d:d._repeatCommand(e,t,n)},this.orBegin=function(){return m++,d},this.orEnd=function(){return null!==i&&(i+=")"),d},this.isNot=function(e){return o=!o,d.is(e)},this.is=function(e){return d._append("this."+e),d._resetNegate(),d},this._compareValues=function(e,t,n,r,i){var s;s=u?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===n&&(n=null);var o=n,a=void 0===i.stype?"text":i.stype;if(null!==n)switch(a){case"int":case"integer":o=isNaN(Number(o))||""===o?"0":o,s="parseInt("+s+",10)",o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=(""+o).replace(j,""),o=isNaN(Number(o))||""===o?"0":o,s="parseFloat("+s+")",o="parseFloat("+o+")";break;case"date":case"datetime":o=""+b.jgrid.parseDate(i.newfmt||"Y-m-d",o).getTime(),s='jQuery.jgrid.parseDate("'+i.srcfmt+'",'+s+").getTime()";break;default:s=d._getStr(s),o=d._getStr('"'+d._toStr(o)+'"')}return d._append(s+" "+r+" "+o),d._setCommand(e,t),d._resetNegate(),d},this.equals=function(e,t,n){return d._compareValues(d.equals,e,t,"==",n)},this.notEquals=function(e,t,n){return d._compareValues(d.equals,e,t,"!==",n)},this.isNull=function(e,t,n){return d._compareValues(d.equals,e,null,"===",n)},this.greater=function(e,t,n){return d._compareValues(d.greater,e,t,">",n)},this.less=function(e,t,n){return d._compareValues(d.less,e,t,"<",n)},this.greaterOrEquals=function(e,t,n){return d._compareValues(d.greaterOrEquals,e,t,">=",n)},this.lessOrEquals=function(e,t,n){return d._compareValues(d.lessOrEquals,e,t,"<=",n)},this.startsWith=function(e,t){var n=void 0===t||null===t?e:t,n=f?b.trim(n.toString()).length:n.toString().length;return u?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+n+") == "+d._getStr('"'+d._toStr(t)+'"')):(n=f?b.trim(t.toString()).length:t.toString().length,d._append(d._getStr("this")+".substr(0,"+n+") == "+d._getStr('"'+d._toStr(e)+'"'))),d._setCommand(d.startsWith,e),d._resetNegate(),d},this.endsWith=function(e,t){var n=void 0===t||null===t?e:t,n=f?b.trim(n.toString()).length:n.toString().length;return u?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+d._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+n+","+n+') == "'+d._toStr(t)+'"'):d._append(d._getStr("this")+".substr("+d._getStr("this")+'.length-"'+d._toStr(e)+'".length,"'+d._toStr(e)+'".length) == "'+d._toStr(e)+'"'),d._setCommand(d.endsWith,e),d._resetNegate(),d},this.contains=function(e,t){return u?d._append(d._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+d._toStr(t)+'",0) > -1'):d._append(d._getStr("this")+'.indexOf("'+d._toStr(e)+'",0) > -1'),d._setCommand(d.contains,e),d._resetNegate(),d},this.groupBy=function(e,t,n,r){return d._hasData()?d._getGroup(a,e,t,n,r):null},this.orderBy=function(e,t,n,r){t=void 0===t||null===t?"a":b.trim(t.toString().toLowerCase());if(null===n||void 0===n)n="text";if(null===r||void 0===r)r="Y-m-d";if("desc"==t||"descending"==t)t="d";if("asc"==t||"ascending"==t)t="a";return v.push({by:e,dir:t,type:n,datefmt:r}),d},d}(f,null)},extend:function(e){b.extend(b.fn.jqGrid,e),this.no_legacy_api||b.fn.extend(e)}}),b.fn.jqGrid=function(e){if("string"==typeof e){var t=b.jgrid.getAccessor(b.fn.jqGrid,e);if(!t)throw"jqGrid - No such method: "+e;var n=b.makeArray(arguments).slice(1);return t.apply(this,n)}return this.each(function(){if(!this.grid){var t=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:!1,cmTemplate:{},idPrefix:""},b.jgrid.defaults,e||{}),n=this,r={headers:[],cols:[],footers:[],dragStart:function(e,r,i){this.resizing={idx:e,startX:r.clientX,sOL:i[0]},this.hDiv.style.cursor="col-resize",this.curGbox=b("#rs_m"+b.jgrid.jqID(t.id),"#gbox_"+b.jgrid.jqID(t.id)),this.curGbox.css({display:"block",left:i[0],top:i[1],height:i[2]}),b(n).triggerHandler("jqGridResizeStart",[r,e]),b.isFunction(t.resizeStart)&&t.resizeStart.call(this,r,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var n=e.clientX-this.resizing.startX,e=this.headers[this.resizing.idx],r="ltr"===t.direction?e.width+n:e.width-n,i;33<r&&(this.curGbox.css({left:this.resizing.sOL+n}),!0===t.forceFit?(i=this.headers[this.resizing.idx+t.nv],n="ltr"===t.direction?i.width-n:i.width+n,33<n&&(e.newWidth=r,i.newWidth=n)):(this.newWidth="ltr"===t.direction?t.tblwidth+n:t.tblwidth-n,e.newWidth=r))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var e=this.resizing.idx,r=this.headers[e].newWidth||this.headers[e].width,r=parseInt(r,10);this.resizing=!1,b("#rs_m"+b.jgrid.jqID(t.id)).css("display","none"),t.colModel[e].width=r,this.headers[e].width=r,this.headers[e].el.style.width=r+"px",this.cols[e].style.width=r+"px",0<this.footers.length&&(this.footers[e].style.width=r+"px"),!0===t.forceFit?(r=this.headers[e+t.nv].newWidth||this.headers[e+t.nv].width,this.headers[e+t.nv].width=r,this.headers[e+t.nv].el.style.width=r+"px",this.cols[e+t.nv].style.width=r+"px",0<this.footers.length&&(this.footers[e+t.nv].style.width=r+"px"),t.colModel[e+t.nv].width=r):(t.tblwidth=this.newWidth||t.tblwidth,b("table:first",this.bDiv).css("width",t.tblwidth+"px"),b("table:first",this.hDiv).css("width",t.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,t.footerrow&&(b("table:first",this.sDiv).css("width",t.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),b(n).triggerHandler("jqGridResizeStop",[r,e]),b.isFunction(t.resizeStop)&&t.resizeStop.call(this,r,e)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){r.timer&&clearTimeout(r.timer),r.timer=null;var e=b(r.bDiv).height();if(e){var n=b("table:first",r.bDiv),i,s;if(n[0].rows.length)try{s=(i=n[0].rows[1])?b(i).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(o){s=r.prevRowHeight}if(s){r.prevRowHeight=s;var u=t.rowNum;i=r.scrollTop=r.bDiv.scrollTop;var a=Math.round(n.position().top)-i,f=a+n.height();s*=u;var l,c,h;f<e&&0>=a&&(void 0===t.lastpage||parseInt((f+i+s-1)/s,10)<=t.lastpage)&&(c=parseInt((e-f+s-1)/s,10),0<=f||2>c||!0===t.scroll?(l=Math.round((f+i)/s)+1,a=-1):a=1),0<a&&(l=parseInt(i/s,10)+1,c=parseInt((i+e)/s,10)+2-l,h=!0),c&&!(t.lastpage&&l>t.lastpage||1==t.lastpage||l===t.page&&l===t.lastpage)&&(r.hDiv.loading?r.timer=setTimeout(r.populateVisible,t.scrollTimeout):(t.page=l,h&&(r.selectionPreserver(n[0]),r.emptyRows.call(n[0],!1,!1)),r.populate(c)))}}},scrollGrid:function(e){if(t.scroll){var n=r.bDiv.scrollTop;void 0===r.scrollTop&&(r.scrollTop=0),n!=r.scrollTop&&(r.scrollTop=n,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,t.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft,t.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft),e&&e.stopPropagation()},selectionPreserver:function(e){var t=e.p,n=t.selrow,r=t.selarrrow?b.makeArray(t.selarrrow):null,i=e.grid.bDiv.scrollLeft,s=function(){var o;t.selrow=null,t.selarrrow=[];if(t.multiselect&&r&&0<r.length)for(o=0;o<r.length;o++)r[o]!=n&&b(e).jqGrid("setSelection",r[o],!1,null);n&&b(e).jqGrid("setSelection",n,!1,null),e.grid.bDiv.scrollLeft=i,b(e).unbind(".selectionPreserver",s)};b(e).bind("jqGridGridComplete.selectionPreserver",s)}};if("TABLE"!=this.tagName.toUpperCase())alert("Element is not a table");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{b(this).empty().attr("tabindex","1"),this.p=t,this.p.useProp=!!b.fn.prop;var i,s;if(0===this.p.colNames.length)for(i=0;i<this.p.colModel.length;i++)this.p.colNames[i]=this.p.colModel[i].label||this.p.colModel[i].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var o=b("<div class='ui-jqgrid-view'></div>"),u,a=b.browser.msie?!0:!1;n.p.direction=b.trim(n.p.direction.toLowerCase()),-1==b.inArray(n.p.direction,["ltr","rtl"])&&(n.p.direction="ltr"),s=n.p.direction,b(o).insertBefore(this),b(this).appendTo(o).removeClass("scroll");var l=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(l).insertBefore(o).attr({id:"gbox_"+this.id,dir:s}),b(o).appendTo(l).attr("id","gview_"+this.id),u=a&&6>=b.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(u).insertBefore(o),b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(o),b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var c=function(e,t){return e=parseInt(e,10),isNaN(e)?t?t:0:e},h=function(e,t,i,s,o,u){var a=n.p.colModel[e],f=a.align,l='style="',c=a.classes,h=a.name,p=[];f&&(l+="text-align:"+f+";"),a.hidden===!0&&(l+="display:none;");if(t===0)l+="width: "+r.headers[e].width+"px;";else if(a.cellattr&&b.isFunction(a.cellattr)&&(e=a.cellattr.call(n,o,i,s,a,u))&&typeof e=="string"){e=e.replace(/style/i,"style").replace(/title/i,"title"),e.indexOf("title")>-1&&(a.title=!1),e.indexOf("class")>-1&&(c=void 0),p=e.split("style");if(p.length===2){p[1]=b.trim(p[1].replace("=",""));if(p[1].indexOf("'")===0||p[1].indexOf('"')===0)p[1]=p[1].substring(1);l+=p[1].replace(/'/gi,'"')}else l+='"'}return p.length||(p[0]="",l+='"'),l+=(c!==void 0?' class="'+c+'"':"")+(a.title&&i?' title="'+b.jgrid.stripHtml(i)+'"':""),l+=' aria-describedby="'+n.p.id+"_"+h+'"',l+p[0]},p=function(e){return e===void 0||e===null||e===""?"&#160;":n.p.autoencode?b.jgrid.htmlEncode(e):e+""},d=function(e,t,r,i,s){var o=n.p.colModel[r];return typeof o.formatter!="undefined"?(e={rowId:e,colModel:o,gid:n.p.id,pos:r},t=b.isFunction(o.formatter)?o.formatter.call
(n,t,e,i,s):b.fmatter?b.fn.fmatter.call(n,o.formatter,t,e,i,s):p(t)):t=p(t),t},v=function(e,t,n,r,i){return t=d(e,t,n,i,"add"),'<td role="gridcell" '+h(n,r,t,i,e,!0)+">"+t+"</td>"},m=function(e,t,r){var i='<input role="checkbox" type="checkbox" id="jqg_'+n.p.id+"_"+e+'" class="cbox" name="jqg_'+n.p.id+"_"+e+'"/>';return'<td role="gridcell" '+h(t,r,"",null,e,!0)+">"+i+"</td>"},g=function(e,t,n,r){return n=(parseInt(n,10)-1)*parseInt(r,10)+1+t,'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+h(e,t,n,null,t,!0)+">"+n+"</td>"},y=function(e){var t,r=[],i=0,s;for(s=0;s<n.p.colModel.length;s++)t=n.p.colModel[s],t.name!=="cb"&&t.name!=="subgrid"&&t.name!=="rn"&&(r[i]=e=="local"?t.name:e=="xml"||e==="xmlstring"?t.xmlmap||t.name:t.jsonmap||t.name,i++);return r},w=function(e){var t=n.p.remapColumns;if(!t||!t.length)t=b.map(n.p.colModel,function(e,t){return t});return e&&(t=b.map(t,function(t){return t<e?null:t-e})),t},E=function(e,t){var n;this.p.deepempty?b(this.rows).slice(1).remove():(n=this.rows.length>0?this.rows[0]:null,b(this.firstChild).empty().append(n)),e&&this.p.scroll&&(b(this.grid.bDiv.firstChild).css({height:"auto"}),b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0)),t===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},S=function(){var e=n.p.data.length,t,r,i;t=n.p.rownumbers===!0?1:0,r=n.p.multiselect===!0?1:0,i=n.p.subGrid===!0?1:0,t=n.p.keyIndex===!1||n.p.loadonce===!0?n.p.localReader.id:n.p.colModel[n.p.keyIndex+r+i+t].name;for(r=0;r<e;r++)i=b.jgrid.getAccessor(n.p.data[r],t),n.p._index[i]=r},x=function(e,t,r,i,s){var o="-1",u="",a,t=t?"display:none;":"",r="ui-widget-content jqgrow ui-row-"+n.p.direction+r,i=b.isFunction(n.p.rowattr)?n.p.rowattr.call(n,i,s):{};if(!b.isEmptyObject(i)){i.hasOwnProperty("id")&&(e=i.id,delete i.id),i.hasOwnProperty("tabindex")&&(o=i.tabindex,delete i.tabindex),i.hasOwnProperty("style")&&(t+=i.style,delete i.style),i.hasOwnProperty("class")&&(r+=" "+i["class"],delete i["class"]);try{delete i.role}catch(f){}for(a in i)i.hasOwnProperty(a)&&(u+=" "+a+"="+i[a])}return'<tr role="row" id="'+e+'" tabindex="'+o+'" class="'+r+'"'+(t===""?"":' style="'+t+'"')+u+">"},T=function(e,t,r,i,s){var o=new Date,u=n.p.datatype!="local"&&n.p.loadonce||n.p.datatype=="xmlstring",a=n.p.xmlReader,f=n.p.datatype=="local"?"local":"xml";u&&(n.p.data=[],n.p._index={},n.p.localReader.id="_id_"),n.p.reccount=0;if(b.isXMLDoc(e)){n.p.treeANode===-1&&!n.p.scroll?(E.call(n,!1,!0),r=1):r=r>1?r:1;var l,c,h=0,p,d=n.p.multiselect===!0?1:0,S=n.p.subGrid===!0?1:0,T=n.p.rownumbers===!0?1:0,N,C=[],k,L={},A,O,M=[],_=n.p.altRows===!0?" "+n.p.altclass:"",D;a.repeatitems||(C=y(f)),N=n.p.keyIndex===!1?b.isFunction(a.id)?a.id.call(n,e):a.id:n.p.keyIndex,C.length>0&&!isNaN(N)&&(n.p.remapColumns&&n.p.remapColumns.length&&(N=b.inArray(N,n.p.remapColumns)),N=C[N]),f=(N+"").indexOf("[")===-1?C.length?function(e,t){return b(N,e).text()||t}:function(e,t){return b(a.cell,e).eq(N).text()||t}:function(e,t){return e.getAttribute(N.replace(/[\[\]]/g,""))||t},n.p.userData={},n.p.page=b.jgrid.getXmlData(e,a.page)||0,n.p.lastpage=b.jgrid.getXmlData(e,a.total),n.p.lastpage===void 0&&(n.p.lastpage=1),n.p.records=b.jgrid.getXmlData(e,a.records)||0,b.isFunction(a.userdata)?n.p.userData=a.userdata.call(n,e)||{}:b.jgrid.getXmlData(e,a.userdata,!0).each(function(){n.p.userData[this.getAttribute("name")]=b(this).text()}),e=b.jgrid.getXmlData(e,a.root,!0),(e=b.jgrid.getXmlData(e,a.row,!0))||(e=[]);var P=e.length,H=0,B=[],j=parseInt(n.p.rowNum,10);P>0&&n.p.page<=0&&(n.p.page=1);if(e&&P){var F=n.p.scroll?b.jgrid.randId():1;s&&(j*=s+1);for(var s=b.isFunction(n.p.afterInsertRow),I=n.p.grouping&&n.p.groupingView.groupCollapse===!0;H<P;){A=e[H],O=f(A,F+H),O=n.p.idPrefix+O,l=r===0?0:r+1,D=(l+H)%2==1?_:"";var q=M.length;M.push(""),T&&M.push(g(0,H,n.p.page,n.p.rowNum)),d&&M.push(m(O,T,H)),S&&M.push(b(n).jqGrid("addSubGridCell",d+T,H+r));if(a.repeatitems){k||(k=w(d+S+T));var R=b.jgrid.getXmlData(A,a.cell,!0);b.each(k,function(e){var t=R[this];if(!t)return!1;p=t.textContent||t.text,L[n.p.colModel[e+d+S+T].name]=p,M.push(v(O,p,e+d+S+T,H+r,A))})}else for(l=0;l<C.length;l++)p=b.jgrid.getXmlData(A,C[l]),L[n.p.colModel[l+d+S+T].name]=p,M.push(v(O,p,l+d+S+T,H+r,A));M[q]=x(O,I,D,L,A),M.push("</tr>"),n.p.grouping&&(B=b(n).jqGrid("groupingPrepare",M,B,L,H),M=[]);if(u||n.p.treeGrid===!0)L._id_=O,n.p.data.push(L),n.p._index[O]=n.p.data.length-1;n.p.gridview===!1&&(b("tbody:first",t).append(M.join("")),b(n).triggerHandler("jqGridAfterInsertRow",[O,L,A]),s&&n.p.afterInsertRow.call(n,O,L,A),M=[]),L={},h++,H++;if(h==j)break}}n.p.gridview===!0&&(c=n.p.treeANode>-1?n.p.treeANode:0,n.p.grouping?(b(n).jqGrid("groupingRender",B,n.p.colModel.length),B=null):n.p.treeGrid===!0&&c>0?b(n.rows[c]).after(M.join("")):b("tbody:first",t).append(M.join("")));if(n.p.subGrid===!0)try{b(n).jqGrid("addSubGrid",d+T)}catch(U){}n.p.totaltime=new Date-o,h>0&&n.p.records===0&&(n.p.records=P),M=null;if(n.p.treeGrid===!0)try{b(n).jqGrid("setTreeNode",c+1,h+c+1)}catch(z){}!n.p.treeGrid&&!n.p.scroll&&(n.grid.bDiv.scrollTop=0),n.p.reccount=h,n.p.treeANode=-1,n.p.userDataOnFooter&&b(n).jqGrid("footerData","set",n.p.userData,!0),u&&(n.p.records=P,n.p.lastpage=Math.ceil(P/j)),i||n.updatepager(!1,!0);if(u)for(;h<P;){A=e[h],O=f(A,h+F),O=n.p.idPrefix+O;if(a.repeatitems){k||(k=w(d+S+T));var W=b.jgrid.getXmlData(A,a.cell,!0);b.each(k,function(e){var t=W[this];if(!t)return!1;p=t.textContent||t.text,L[n.p.colModel[e+d+S+T].name]=p})}else for(l=0;l<C.length;l++)p=b.jgrid.getXmlData(A,C[l]),L[n.p.colModel[l+d+S+T].name]=p;L._id_=O,n.p.data.push(L),n.p._index[O]=n.p.data.length-1,L={},h++}}},N=function(e,t,r,i,s){t=new Date;if(e){n.p.treeANode===-1&&!n.p.scroll?(E.call(n,!1,!0),r=1):r=r>1?r:1;var o,u,a=n.p.datatype!="local"&&n.p.loadonce||n.p.datatype=="jsonstring";a&&(n.p.data=[],n.p._index={},n.p.localReader.id="_id_"),n.p.reccount=0,n.p.datatype=="local"?(o=n.p.localReader,u="local"):(o=n.p.jsonReader,u="json");var f=0,l,c,h=[],p,d=n.p.multiselect?1:0,S=n.p.subGrid?1:0,T=n.p.rownumbers===!0?1:0,N,C,k={},L,A,O=[],M=n.p.altRows===!0?" "+n.p.altclass:"",_;n.p.page=b.jgrid.getAccessor(e,o.page)||0,N=b.jgrid.getAccessor(e,o.total),n.p.lastpage=N===void 0?1:N,n.p.records=b.jgrid.getAccessor(e,o.records)||0,n.p.userData=b.jgrid.getAccessor(e,o.userdata)||{},o.repeatitems||(p=h=y(u)),u=n.p.keyIndex===!1?b.isFunction(o.id)?o.id.call(n,e):o.id:n.p.keyIndex,h.length>0&&!isNaN(u)&&(n.p.remapColumns&&n.p.remapColumns.length&&(u=b.inArray(u,n.p.remapColumns)),u=h[u]),(C=b.jgrid.getAccessor(e,o.root))||(C=[]),N=C.length,e=0,N>0&&n.p.page<=0&&(n.p.page=1);var D=parseInt(n.p.rowNum,10),P=n.p.scroll?b.jgrid.randId():1;s&&(D*=s+1);for(var H=b.isFunction(n.p.afterInsertRow),B=[],j=n.p.grouping&&n.p.groupingView.groupCollapse===!0;e<N;){s=C[e],A=b.jgrid.getAccessor(s,u),A===void 0&&(A=P+e,h.length===0&&o.cell&&(l=b.jgrid.getAccessor(s,o.cell),A=l!==void 0?l[u]||A:A)),A=n.p.idPrefix+A,l=r===1?0:r,_=(l+e)%2==1?M:"";var F=O.length;O.push(""),T&&O.push(g(0,e,n.p.page,n.p.rowNum)),d&&O.push(m(A,T,e)),S&&O.push(b(n).jqGrid("addSubGridCell",d+T,e+r)),o.repeatitems&&(o.cell&&(s=b.jgrid.getAccessor(s,o.cell)),p||(p=w(d+S+T)));for(c=0;c<p.length;c++)l=b.jgrid.getAccessor(s,p[c]),O.push(v(A,l,c+d+S+T,e+r,s)),k[n.p.colModel[c+d+S+T].name]=l;O[F]=x(A,j,_,k,s),O.push("</tr>"),n.p.grouping&&(B=b(n).jqGrid("groupingPrepare",O,B,k,e),O=[]);if(a||n.p.treeGrid===!0)k._id_=A,n.p.data.push(k),n.p._index[A]=n.p.data.length-1;n.p.gridview===!1&&(b("#"+b.jgrid.jqID(n.p.id)+" tbody:first").append(O.join("")),b(n).triggerHandler("jqGridAfterInsertRow",[A,k,s]),H&&n.p.afterInsertRow.call(n,A,k,s),O=[]),k={},f++,e++;if(f==D)break}n.p.gridview===!0&&(L=n.p.treeANode>-1?n.p.treeANode:0,n.p.grouping?b(n).jqGrid("groupingRender",B,n.p.colModel.length):n.p.treeGrid===!0&&L>0?b(n.rows[L]).after(O.join("")):b("#"+b.jgrid.jqID(n.p.id)+" tbody:first").append(O.join("")));if(n.p.subGrid===!0)try{b(n).jqGrid("addSubGrid",d+T)}catch(I){}n.p.totaltime=new Date-t,f>0&&n.p.records===0&&(n.p.records=N);if(n.p.treeGrid===!0)try{b(n).jqGrid("setTreeNode",L+1,f+L+1)}catch(q){}!n.p.treeGrid&&!n.p.scroll&&(n.grid.bDiv.scrollTop=0),n.p.reccount=f,n.p.treeANode=-1,n.p.userDataOnFooter&&b(n).jqGrid("footerData","set",n.p.userData,!0),a&&(n.p.records=N,n.p.lastpage=Math.ceil(N/D)),i||n.updatepager(!1,!0);if(a)for(;f<N&&C[f];){s=C[f],A=b.jgrid.getAccessor(s,u),A===void 0&&(A=P+f,h.length===0&&o.cell&&(A=b.jgrid.getAccessor(s,o.cell)[u]||A));if(s){A=n.p.idPrefix+A,o.repeatitems&&(o.cell&&(s=b.jgrid.getAccessor(s,o.cell)),p||(p=w(d+S+T)));for(c=0;c<p.length;c++)l=b.jgrid.getAccessor(s,p[c]),k[n.p.colModel[c+d+S+T].name]=l;k._id_=A,n.p.data.push(k),n.p._index[A]=n.p.data.length-1,k={}}f++}}},C=function(){function e(t){var r=0,s,o,u,a,f;if(t.groups!==void 0){(o=t.groups.length&&t.groupOp.toString().toUpperCase()==="OR")&&d.orBegin();for(s=0;s<t.groups.length;s++){r>0&&o&&d.or();try{e(t.groups[s])}catch(l){alert(l)}r++}o&&d.orEnd()}if(t.rules!==void 0){r>0&&(o=d.select(),d=b.jgrid.from(o),n.p.ignoreCase&&(d=d.ignoreCase()));try{(u=t.rules.length&&t.groupOp.toString().toUpperCase()==="OR")&&d.orBegin();for(s=0;s<t.rules.length;s++)f=t.rules[s],a=t.groupOp.toString().toUpperCase(),p[f.op]&&f.field&&(r>0&&a&&a==="OR"&&(d=d.or()),d=p[f.op](d,a)(f.field,f.data,i[f.field])),r++;u&&d.orEnd()}catch(c){alert(c)}}}var t,r=!1,i={},s=[],o=[],u,a,f;if(b.isArray(n.p.data)){var l=n.p.grouping?n.p.groupingView:!1,c,h;b.each(n.p.colModel,function(){a=this.sorttype||"text",a=="date"||a=="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter=="date"?(u=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat,f=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat):u=f=this.datefmt||"Y-m-d",i[this.name]={stype:a,srcfmt:u,newfmt:f}):i[this.name]={stype:a,srcfmt:"",newfmt:""};if(n.p.grouping){h=0;for(c=l.groupField.length;h<c;h++)if(this.name==l.groupField[h]){var e=this.name;typeof this.index!="undefined"&&(e=this.index),s[h]=i[e],o[h]=e}}!r&&(this.index==n.p.sortname||this.name==n.p.sortname)&&(t=this.name,r=!0)});if(!n.p.treeGrid){var p={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return t==="OR"?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return t==="OR"?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return t==="OR"?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return t==="OR"?e.orNot().equals:e.andNot().equals},"in":function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return t==="OR"?e.orNot().isNull:e.andNot().isNull}},d=b.jgrid.from(n.p.data);n.p.ignoreCase&&(d=d.ignoreCase());if(n.p.search===!0){var v=n.p.postData.filters;if(v)typeof v=="string"&&(v=b.jgrid.parse(v)),e(v);else try{d=p[n.p.postData.searchOper](d)(n.p.postData.searchField,n.p.postData.searchString,i[n.p.postData.searchField])}catch(m){}}if(n.p.grouping)for(h=0;h<c;h++)d.orderBy(o[h],l.groupOrder[h],s[h].stype,s[h].srcfmt);t&&n.p.sortorder&&r&&(n.p.sortorder.toUpperCase()=="DESC"?d.orderBy(n.p.sortname,"d",i[t].stype,i[t].srcfmt):d.orderBy(n.p.sortname,"a",i[t].stype,i[t].srcfmt));var v=d.select(),g=parseInt(n.p.rowNum,10),y=v.length,w=parseInt(n.p.page,10),E=Math.ceil(y/g),S={},v=v.slice((w-1)*g,w*g),i=d=null;return S[n.p.localReader.total]=E,S[n.p.localReader.page]=w,S[n.p.localReader.records]=y,S[n.p.localReader.root]=v,S[n.p.localReader.userdata]=n.p.userData,v=null,S}b(n).jqGrid("SortTree",t,n.p.sortorder,i[t].stype,i[t].srcfmt)}},k=function(){n.grid.hDiv.loading=!0;if(!n.p.hiddengrid)switch(n.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(n.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(n.p.id)).show(),b("#load_"+b.jgrid.jqID(n.p.id)).show()}},L=function(){n.grid.hDiv.loading=!1;switch(n.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(n.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(n.p.id)).hide(),b("#load_"+b.jgrid.jqID(n.p.id)).hide()}},A=function(e){if(!n.grid.hDiv.loading){var t=n.p.scroll&&e===!1,r={},i,s=n.p.prmNames;n.p.page<=0&&(n.p.page=1),s.search!==null&&(r[s.search]=n.p.search),s.nd!==null&&(r[s.nd]=(new Date).getTime()),s.rows!==null&&(r[s.rows]=n.p.rowNum),s.page!==null&&(r[s.page]=n.p.page),s.sort!==null&&(r[s.sort]=n.p.sortname),s.order!==null&&(r[s.order]=n.p.sortorder),n.p.rowTotal!==null&&s.totalrows!==null&&(r[s.totalrows]=n.p.rowTotal);var o=b.isFunction(n.p.loadComplete),u=o?n.p.loadComplete:null,a=0,e=e||1;e>1?s.npage!==null?(r[s.npage]=e,a=e-1,e=1):u=function(t){n.p.page++,n.grid.hDiv.loading=!1,o&&n.p.loadComplete.call(n,t),A(e-1)}:s.npage!==null&&delete n.p.postData[s.npage];if(n.p.grouping){b(n).jqGrid("groupingSetup");var f=n.p.groupingView,l,c="";for(l=0;l<f.groupField.length;l++)c+=f.groupField[l]+" "+f.groupOrder[l]+", ";r[s.sort]=c+r[s.sort]}b.extend(n.p.postData,r);var h=n.p.scroll?n.rows.length-1:1,r=b(n).triggerHandler("jqGridBeforeRequest");if(r!==!1&&r!=="stop")if(b.isFunction(n.p.datatype))n.p.datatype.call(n,n.p.postData,"load_"+n.p.id);else{if(b.isFunction(n.p.beforeRequest)){r=n.p.beforeRequest.call(n),r===void 0&&(r=!0);if(r===!1)return}i=n.p.datatype.toLowerCase();switch(i){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:n.p.url,type:n.p.mtype,dataType:i,data:b.isFunction(n.p.serializeGridData)?n.p.serializeGridData.call(n,n.p.postData):n.p.postData,success:function(r,s,o){if(b.isFunction(n.p.beforeProcessing)&&n.p.beforeProcessing.call(n,r,s,o)===!1)L();else{i==="xml"?T(r,n.grid.bDiv,h,e>1,a):N(r,n.grid.bDiv,h,e>1,a),b(n).triggerHandler("jqGridLoadComplete",[r]),u&&u.call(n,r),b(n).triggerHandler("jqGridAfterLoadComplete",[r]),t&&n.grid.populateVisible();if(n.p.loadonce||n.p.treeGrid)n.p.datatype="local";e===1&&L()}},error:function(t,r,i){b.isFunction(n.p.loadError)&&n.p.loadError.call(n,t,r,i),e===1&&L()},beforeSend:function(e,t){var r=!0;b.isFunction(n.p.loadBeforeSend)&&(r=n.p.loadBeforeSend.call(n,e,t)),r===void 0&&(r=!0);if(r===!1)return!1;k()}},b.jgrid.ajaxOptions,n.p.ajaxGridOptions));break;case"xmlstring":k(),r=b.jgrid.stringToDoc(n.p.datastr),T(r,n.grid.bDiv),b(n).triggerHandler("jqGridLoadComplete",[r]),o&&n.p.loadComplete.call(n,r),b(n).triggerHandler("jqGridAfterLoadComplete",[r]),n.p.datatype="local",n.p.datastr=null,L();break;case"jsonstring":k(),r=typeof n.p.datastr=="string"?b.jgrid.parse(n.p.datastr):n.p.datastr,N(r,n.grid.bDiv),b(n).triggerHandler("jqGridLoadComplete",[r]),o&&n.p.loadComplete.call(n,r),b(n).triggerHandler("jqGridAfterLoadComplete",[r]),n.p.datatype="local",n.p.datastr=null,L();break;case"local":case"clientside":k(),n.p.datatype="local",r=C(),N(r,n.grid.bDiv,h,e>1,a),b(n).triggerHandler("jqGridLoadComplete",[r]),u&&u.call(n,r),b(n).triggerHandler("jqGridAfterLoadComplete",[r]),t&&n.grid.populateVisible(),L()}}}},O=function(e){b("#cb_"+b.jgrid.jqID(n.p.id),n.grid.hDiv)[n.p.useProp?"prop":"attr"]("checked",e),n.p.frozenColumns&&n.p.id+"_frozen"&&b("#cb_"+b.jgrid.jqID(n.p.id),n.grid.fhDiv)[n.p.useProp?"prop":"attr"]("checked",e)};u=function(e,t){var r="",i="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",u,a,f,l,h=function(e){var t;return b.isFunction(n.p.onPaging)&&(t=n.p.onPaging.call(n,e)),n.p.selrow=null,n.p.multiselect&&(n.p.selarrrow=[],O(!1)),n.p.savedRow=[],t=="stop"?!1:!0},e=e.substr(1),t=t+("_"+e);u="pg_"+e,a=e+"_left",f=e+"_center",l=e+"_right",b("#"+b.jgrid.jqID(e)).append("<div id='"+u+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+a+"' align='left'></td><td id='"+f+"' align='center' style='white-space:pre;'></td><td id='"+l+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(n.p.rowList.length>0){o="<td dir='"+s+"'>",o+="<select class='ui-pg-selbox' role='listbox'>";for(a=0;a<n.p.rowList.length;a++)o+='<option role="option" value="'+n.p.rowList[a]+'"'+(n.p.rowNum==n.p.rowList[a]?' selected="selected"':"")+">"+n.p.rowList[a]+"</option>";o+="</select></td>"}s=="rtl"&&(i+=o),n.p.pginput===!0&&(r="<td dir='"+s+"'>"+b.jgrid.format(n.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(e)+"'></span>")+"</td>"),n.p.pgbuttons===!0?(a=["first"+t,"prev"+t,"next"+t,"last"+t],s=="rtl"&&a.reverse(),i+="<td id='"+a[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",i+="<td id='"+a[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",i=i+(r!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+r+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+a[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>"),i+="<td id='"+a[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):r!==""&&(i+=r),s=="ltr"&&(i+=o),i+="</tr></tbody></table>",n.p.viewrecords===!0&&b("td#"+e+"_"+n.p.recordpos,"#"+u).append("<div dir='"+s+"' style='text-align:"+n.p.recordpos+"' class='ui-paging-info'></div>"),b("td#"+e+"_"+n.p.pagerpos,"#"+u).append(i),o=b(".ui-jqgrid").css("font-size")||"11px",b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+o+";visibility:hidden;' ></div>"),i=b(i).clone().appendTo("#testpg").width(),b("#testpg").remove(),i>0&&(r!==""&&(i+=50),b("td#"+e+"_"+n.p.pagerpos,"#"+u).width(i)),n.p._nvtd=[],n.p._nvtd[0]=i?Math.floor((n.p.width-i)/2):Math.floor(n.p.width/3),n.p._nvtd[1]=0,i=null,b(".ui-pg-selbox","#"+u).bind("change",function(){return n.p.page=Math.round(n.p.rowNum*(n.p.page-1)/this.value-.5)+1,n.p.rowNum=this.value,n.p.pager&&b(".ui-pg-selbox",n.p.pager).val(this.value),n.p.toppager&&b(".ui-pg-selbox",n.p.toppager).val(this.value),h("records")?(A(),!1):!1}),n.p.pgbuttons===!0&&(b(".ui-pg-button","#"+u).hover(function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")}),b("#first"+b.jgrid.jqID(t)+", #prev"+b.jgrid.jqID(t)+", #next"+b.jgrid.jqID(t)+", #last"+b.jgrid.jqID(t)).click(function(){var e=c(n.p.page,1),r=c(n.p.lastpage,1),i=!1,s=!0,o=!0,u=!0,a=!0;r===0||r===1?a=u=o=s=!1:r>1&&e>=1?e===1?o=s=!1:e===r&&(a=u=!1):r>1&&e===0&&(a=u=!1,e=r-1),this.id==="first"+t&&s&&(n.p.page=1,i=!0),this.id==="prev"+t&&o&&(n.p.page=e-1,i=!0),this.id==="next"+t&&u&&(n.p.page=e+1,i=!0),this.id==="last"+t&&a&&(n.p.page=r,i=!0);if(i){if(!h(this.id))return!1;A()}return!1})),n.p.pginput===!0&&b("input.ui-pg-input","#"+u).keypress(function(e){return(e.charCode?e.charCode:e.keyCode?e.keyCode:0)==13?(n.p.page=b(this).val()>0?b(this).val():n.p.page,h("user")?(A(),!1):!1):this})};var M=function(e,t,r,i){if(n.p.colModel[t].sortable&&!(n.p.savedRow.length>0)){r||(n.p.lastsort==t?n.p.sortorder=="asc"?n.p.sortorder="desc":n.p.sortorder=="desc"&&(n.p.sortorder="asc"):n.p.sortorder=n.p.colModel[t].firstsortorder||"asc",n.p.page=1);if(i){if(n.p.lastsort==t&&n.p.sortorder==i&&!r)return;n.p.sortorder=i}r=n.grid.headers[n.p.lastsort].el,i=n.grid.headers[t].el,b("span.ui-grid-ico-sort",r).addClass("ui-state-disabled"),b(r).attr("aria-selected","false"),b("span.ui-icon-"+n.p.sortorder,i).removeClass("ui-state-disabled"),b(i).attr("aria-selected","true"),!n.p.viewsortcols[0]&&n.p.lastsort!=t&&(b("span.s-ico",r).hide(),b("span.s-ico",i).show()),e=e.substring(5+n.p.id.length+1),n.p.sortname=n.p.colModel[t].index||e,r=n.p.sortorder,b(n).triggerHandler("jqGridSortCol",[e,t,r])==="stop"?n.p.lastsort=t:b.isFunction(n.p.onSortCol)&&n.p.onSortCol.call(n,e,t,r)=="stop"?n.p.lastsort=t:(n.p.datatype=="local"?n.p.deselectAfterSort&&b(n).jqGrid("resetSelection"):(n.p.selrow=null,n.p.multiselect&&O(!1),n.p.selarrrow=[],n.p.savedRow=[]),n.p.scroll&&(r=n.grid.bDiv.scrollLeft,E.call(n,!0,!1),n.grid.hDiv.scrollLeft=r),n.p.subGrid&&n.p.datatype=="local"&&b("td.sgexpanded","#"+b.jgrid.jqID(n.p.id)).each(function(){b(this).trigger("click")}),A(),n.p.lastsort=t,n.p.sortname!=e&&t&&(n.p.lastsort=t))}},_=function(e){var t,r={},i=b.jgrid.cellWidth()?0:n.p.cellLayout;for(t=r[0]=r[1]=r[2]=0;t<=e;t++)n.p.colModel[t].hidden===!1&&(r[0]=r[0]+(n.p.colModel[t].width+i));return n.p.direction=="rtl"&&(r[0]=n.p.width-r[0]),r[0]=r[0]-n.grid.bDiv.scrollLeft,b(n.grid.cDiv).is(":visible")&&(r[1]=r[1]+(b(n.grid.cDiv).height()+parseInt(b(n.grid.cDiv).css("padding-top"),10)+parseInt(b(n.grid.cDiv).css("padding-bottom"),10))),n.p.toolbar[0]===!0&&(n.p.toolbar[1]=="top"||n.p.toolbar[1]=="both")&&(r[1]=r[1]+(b(n.grid.uDiv).height()+parseInt(b(n.grid.uDiv).css("border-top-width"),10)+parseInt(b(n.grid.uDiv).css("border-bottom-width"),10))),n.p.toppager&&(r[1]=r[1]+(b(n.grid.topDiv).height()+parseInt(b(n.grid.topDiv).css("border-bottom-width"),10))),r[2]=r[2]+(b(n.grid.bDiv).height()+b(n.grid.hDiv).height()),r},D=function(e){var t,r=n.grid.headers,i=b.jgrid.getCellIndex(e);for(t=0;t<r.length;t++)if(e===r[t].el){i=t;break}return i};this.p.id=this.id,-1==b.inArray(n.p.multikey,["shiftKey","altKey","ctrlKey"])&&(n.p.multikey=!1),n.p.keyIndex=!1;for(i=0;i<n.p.colModel.length;i++)n.p.colModel[i]=b.extend(!0,{},n.p.cmTemplate,n.p.colModel[i].template||{},n.p.colModel[i]),!1===n.p.keyIndex&&!0===n.p.colModel[i].key&&(n.p.keyIndex=i);n.p.sortorder=n.p.sortorder.toLowerCase(),!0===n.p.grouping&&(n.p.scroll=!1,n.p.rownumbers=!1,n.p.treeGrid=!1,n.p.gridview=!0);if(!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(P){}"local"!=n.p.datatype&&(n.p.localReader={id:"_id_"})}if(this.p.subGrid)try{b(n).jqGrid("setSubGrid")}catch(H){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cellWidth()?n.p.multiselectWidth+n.p.cellLayout:n.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:n.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),n.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},n.p.xmlReader),n.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},n.p.jsonReader),n.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},n.p.localReader),n.p.scroll&&(n.p.pgbuttons=!1,n.p.pginput=!1,n.p.rowList=[]),n.p.data.length&&S();var B="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",j,F,I,q,R,U,z,W;F=W="";if(!0===n.p.shrinkToFit&&!0===n.p.forceFit)for(i=n.p.colModel.length-1;0<=i;i--)if(!n.p.colModel[i].hidden){n.p.colModel[i].resizable=!1;break}"horizontal"==n.p.viewsortcols[1]&&(W=" ui-i-asc",F=" ui-i-desc"),j=a?"class='ui-th-div-ie'":"",W="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+s+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+F+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+s+"'></span></span>");for(i=0;i<this.p.colNames.length;i++)F=n.p.headertitles?' title="'+b.jgrid.stripHtml(n.p.colNames[i])+'"':"",B+="<th id='"+n.p.id+"_"+n.p.colModel[i].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+s+"'"+F+">",F=n.p.colModel[i].index||n.p.colModel[i].name,B+="<div id='jqgh_"+n.p.id+"_"+n.p.colModel[i].name+"' "+j+">"+n.p.colNames[i],n.p.colModel[i].width=n.p.colModel[i].width?parseInt(n.p.colModel[i].width,10):150,"boolean"!=typeof n.p.colModel[i].title&&(n.p.colModel[i].title=!0),F==n.p.sortname&&(n.p.lastsort=i),B+=W+"</div></th>";W=null,b(this).append(B+"</tr></thead>"),b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var X=[],V;b("#cb_"+b.jgrid.jqID(n.p.id),this).bind("click",function(){n.p.selarrrow=[];var e=n.p.frozenColumns===!0?n.p.id+"_frozen":"";this.checked?(b(n.rows).each(function(t){t>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(this.id))[n.p.useProp?"prop":"attr"]("checked",!0),b(this).addClass("ui-state-highlight").attr("aria-selected","true"),n.p.selarrrow.push(this.id),n.p.selrow=this.id,e&&(b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(this.id),n.grid.fbDiv)[n.p.useProp?"prop":"attr"]("checked",!0),b("#"+b.jgrid.jqID(this.id),n.grid.fbDiv).addClass("ui-state-highlight")))}),V=!0,X=[]):(b(n.rows).each(function(t){t>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(this.id))[n.p.useProp?"prop":"attr"]("checked",!1),b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),X.push(this.id),e&&(b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(this.id),n.grid.fbDiv)[n.p.useProp?"prop":"attr"]("checked",!1),b("#"+b.jgrid.jqID(this.id),n.grid.fbDiv).removeClass("ui-state-highlight")))}),n.p.selrow=null,V=!1),b(n).triggerHandler("jqGridSelectAll",[V?n.p.selarrrow:X,V]),b.isFunction(n.p.onSelectAll)&&n.p.onSelectAll.call(n,V?n.p.selarrrow:X,V)})}!0===n.p.autowidth&&(B=b(l).innerWidth(),n.p.width=0<B?B:"nw"),function(){var e=0,t=b.jgrid.cellWidth()?0:c(n.p.cellLayout,0),i=0,s,o=c(n.p.scrollOffset,0),u,a=!1,f,l=0,h=0,p;b.each(n.p.colModel,function(){typeof this.hidden=="undefined"&&(this.hidden=!1),this.widthOrg=u=c(this.width,0),this.hidden===!1&&(e+=u+t,this.fixed?l+=u+t:i++,h++)}),isNaN(n.p.width)&&(n.p.width=e+(n.p.shrinkToFit===!1&&!isNaN(n.p.height)?o:0)),r.width=n.p.width,n.p.tblwidth=e,n.p.shrinkToFit===!1&&n.p.forceFit===!0&&(n.p.forceFit=!1),n.p.shrinkToFit===!0&&i>0&&(f=r.width-t*i-l,isNaN(n.p.height)||(f-=o,a=!0),e=0,b.each(n.p.colModel,function(r){this.hidden===!1&&!this.fixed&&(this.width=u=Math.round(f*this.width/(n.p.tblwidth-t*i-l)),e+=u,s=r)}),p=0,a?r.width-l-(e+t*i)!==o&&(p=r.width-l-(e+t*i)-o):!a&&Math.abs(r.width-l-(e+t*i))!==1&&(p=r.width-l-(e+t*i)),n.p.colModel[s].width=n.p.colModel[s].width+p,n.p.tblwidth=e+p+t*i+l,n.p.tblwidth>n.p.width&&(n.p.colModel[s].width=n.p.colModel[s].width-(n.p.tblwidth-parseInt(n.p.width,10)),n.p.tblwidth=n.p.width))}(),b(l).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+n.p.id+"'>&#160;</div>"),b(o).css("width",r.width+"px");var B=b("thead:first",n).get(0),$="";n.p.footerrow&&($+="<table role='grid' style='width:"+n.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+s+"'>");var o=b("tr:first",B),J="<tr class='jqgfirstrow' role='row' style='height:auto'>";n.p.disableClick=!1,b("th",o).each(function(e){I=n.p.colModel[e].width,typeof n.p.colModel[e].resizable=="undefined"&&(n.p.colModel[e].resizable=!0),n.p.colModel[e].resizable?(q=document.createElement("span"),b(q).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+s),b.browser.opera||b(q).css("cursor","col-resize"),b(this).addClass(n.p.resizeclass)):q="",b(this).css("width",I+"px").prepend(q);var t="";n.p.colModel[e].hidden&&(b(this).css("display","none"),t="display:none;"),J+="<td role='gridcell' style='height:0px;width:"+I+"px;"+t+"'></td>",r.headers[e]={width:I,el:this},R=n.p.colModel[e].sortable,typeof R!="boolean"&&(R=n.p.colModel[e].sortable=!0),t=n.p.colModel[e].name,t=="cb"||t=="subgrid"||t=="rn"||n.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable"),R&&(n.p.viewsortcols[0]?(b("div span.s-ico",this).show(),e==n.p.lastsort&&b("div span.ui-icon-"+n.p.sortorder,this).removeClass("ui-state-disabled")):e==n.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+n.p.sortorder,this).removeClass("ui-state-disabled"))),n.p.footerrow&&($+="<td role='gridcell' "+h(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(b(e.target).closest("th>span.ui-jqgrid-resize").length==1){var t=D(this);if(n.p.forceFit===!0){var i=n.p,s=t,o;for(o=t+1;o<n.p.colModel.length;o++)if(n.p.colModel[o].hidden!==!0){s=o;break}i.nv=s-t}return r.dragStart(t,e,_(t)),!1}}).click(function(e){if(n.p.disableClick)return n.p.disableClick=!1;var t="th>div.ui-jqgrid-sortable",r,i;n.p.viewsortcols[2]||(t="th>div>span>span.ui-grid-ico-sort"),e=b(e.target).closest(t);if(e.length==1)return t=D(this),n.p.viewsortcols[2]||(r=!0,i=e.attr("sort")),M(b("div",this)[0].id,t,r,i),!1});if(n.p.sortable&&b.fn.sortable)try{b(n).jqGrid("sortableColumns",o)}catch(K){}n.p.footerrow&&($+="</tr></tbody></table>"),J+="</tr>",this.appendChild(document.createElement("tbody")),b(this).addClass("ui-jqgrid-btable").append(J);var J=null,o=b("<table class='ui-jqgrid-htable' style='width:"+n.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(B),Q=n.p.caption&&!0===n.p.hiddengrid?!0:!1;i=b("<div class='ui-jqgrid-hbox"+("rtl"==s?"-rtl":"")+"'></div>"),B=null,r.hDiv=document.createElement("div"),b(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(i),b(i).append(o),o=null,Q&&b(r.hDiv).hide(),n.p.pager&&("string"==typeof n.p.pager?"#"!=n.p.pager.substr(0,1)&&(n.p.pager="#"+n.p.pager):n.p.pager="#"+b(n.p.pager).attr("id"),b(n.p.pager).css({width:r.width+"px"}).appendTo(l).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),Q&&b(n.p.pager).hide(),u(n.p.pager,"")),!1===n.p.cellEdit&&!0===n.p.hoverrows&&b(n).bind("mouseover",function(e){z=b(e.target).closest("tr.jqgrow"),b(z).attr("class")!=="ui-subgrid"&&b(z).addClass("ui-state-hover")}).bind("mouseout",function(e){z=b(e.target).closest("tr.jqgrow"),b(z).removeClass("ui-state-hover")});var G,Y,Z;b(n).before(r.hDiv).click(function(e){U=e.target,z=b(U,n.rows).closest("tr.jqgrow");if(b(z).length===0||z[0].className.indexOf("ui-state-disabled")>-1||(b(U,n).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==n.id)return this;var t=b(U).hasClass("cbox"),r=b(n).triggerHandler("jqGridBeforeSelectRow",[z[0].id,e]);(r=r===!1||r==="stop"?!1:!0)&&b.isFunction(n.p.beforeSelectRow)&&(r=n.p.beforeSelectRow.call(n,z[0].id,e));if(U.tagName!="A"&&(U.tagName!="INPUT"&&U.tagName!="TEXTAREA"&&U.tagName!="OPTION"&&U.tagName!="SELECT"||!!t)&&r===!0){G=z[0].id,Y=b.jgrid.getCellIndex(U),Z=b(U).closest("td,th").html(),b(n).triggerHandler("jqGridCellSelect",[G,Y,Z,e]),b.isFunction(n.p.onCellSelect)&&n.p.onCellSelect.call(n,G,Y,Z,e);if(n.p.cellEdit===!0)if(n.p.multiselect&&t)b(n).jqGrid("setSelection",G,!0,e);else{G=z[0].rowIndex;try{b(n).jqGrid("editCell",G,Y,!0)}catch(i){}}else if(n.p.multikey)e[n.p.multikey]?b(n).jqGrid("setSelection",G,!0,e):n.p.multiselect&&t&&(t=b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+G).is(":checked"),b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+G)[n.p.useProp?"prop":"attr"]("checked",t));else{if(n.p.multiselect&&n.p.multiboxonly&&!t){var s=n.p.frozenColumns?n.p.id+"_frozen":"";b(n.p.selarrrow).each(function(e,t){var r=n.rows.namedItem(t);b(r).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(t))[n.p.useProp?"prop":"attr"]("checked",!1),s&&(b("#"+b.jgrid.jqID(t),"#"+b.jgrid.jqID(s)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(n.p.id)+"_"+b.jgrid.jqID(t),"#"+b.jgrid.jqID(s))[n.p.useProp?"prop":"attr"]("checked",!1))}),n.p.selarrrow=[]}b(n).jqGrid("setSelection",G,!0,e)}}}).bind("reloadGrid",function(e,t){n.p.treeGrid===!0&&(n.p.datatype=n.p.treedatatype),t&&t.current&&n.grid.selectionPreserver(n),n.p.datatype=="local"?(b(n).jqGrid("resetSelection"),n.p.data.length&&S()):n.p.treeGrid||(n.p.selrow=null,n.p.multiselect&&(n.p.selarrrow=[],O(!1)),n.p.savedRow=[]),n.p.scroll&&E.call(n,!0,!1);if(t&&t.page){var r=t.page;r>n.p.lastpage&&
(r=n.p.lastpage),r<1&&(r=1),n.p.page=r,n.grid.bDiv.scrollTop=n.grid.prevRowHeight?(r-1)*n.grid.prevRowHeight*n.p.rowNum:0}return n.grid.prevRowHeight&&n.p.scroll?(delete n.p.lastpage,n.grid.populateVisible()):n.grid.populate(),n.p._inlinenav===!0&&b(n).jqGrid("showAddEditButtons"),!1}).dblclick(function(e){U=e.target,z=b(U,n.rows).closest("tr.jqgrow"),b(z).length!==0&&(G=z[0].rowIndex,Y=b.jgrid.getCellIndex(U),b(n).triggerHandler("jqGridDblClickRow",[b(z).attr("id"),G,Y,e]),b.isFunction(this.p.ondblClickRow)&&n.p.ondblClickRow.call(n,b(z).attr("id"),G,Y,e))}).bind("contextmenu",function(e){U=e.target,z=b(U,n.rows).closest("tr.jqgrow"),b(z).length!==0&&(n.p.multiselect||b(n).jqGrid("setSelection",z[0].id,!0,e),G=z[0].rowIndex,Y=b.jgrid.getCellIndex(U),b(n).triggerHandler("jqGridRightClickRow",[b(z).attr("id"),G,Y,e]),b.isFunction(this.p.onRightClickRow)&&n.p.onRightClickRow.call(n,b(z).attr("id"),G,Y,e))}),r.bDiv=document.createElement("div"),a&&"auto"===(""+n.p.height).toLowerCase()&&(n.p.height="100%"),b(r.bDiv).append(b('<div style="position:relative;'+(a&&8>b.browser.version?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:n.p.height+(isNaN(n.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid),b("table:first",r.bDiv).css({width:n.p.tblwidth+"px"}),a?(2==b("tbody",this).size()&&b("tbody:gt(0)",this).remove(),n.p.multikey&&b(r.bDiv).bind("selectstart",function(){return!1})):n.p.multikey&&b(r.bDiv).bind("mousedown",function(){return!1}),Q&&b(r.bDiv).hide(),r.cDiv=document.createElement("div");var et=!0===n.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){et.addClass("ui-state-hover")},function(){et.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==s?"left":"right","0px"):"";b(r.cDiv).append(et).append("<span class='ui-jqgrid-title"+("rtl"==s?"-rtl":"")+"'>"+n.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),b(r.cDiv).insertBefore(r.hDiv),n.p.toolbar[0]&&(r.uDiv=document.createElement("div"),"top"==n.p.toolbar[1]?b(r.uDiv).insertBefore(r.hDiv):"bottom"==n.p.toolbar[1]&&b(r.uDiv).insertAfter(r.hDiv),"both"==n.p.toolbar[1]?(r.ubDiv=document.createElement("div"),b(r.uDiv).insertBefore(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),b(r.ubDiv).insertAfter(r.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),Q&&b(r.ubDiv).hide()):b(r.uDiv).width(r.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),Q&&b(r.uDiv).hide()),n.p.toppager&&(n.p.toppager=b.jgrid.jqID(n.p.id)+"_toppager",r.topDiv=b("<div id='"+n.p.toppager+"'></div>")[0],n.p.toppager="#"+n.p.toppager,b(r.topDiv).insertBefore(r.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width),u(n.p.toppager,"_t")),n.p.footerrow&&(r.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],i=b("<div class='ui-jqgrid-hbox"+("rtl"==s?"-rtl":"")+"'></div>"),b(r.sDiv).append(i).insertAfter(r.hDiv).width(r.width),b(i).append($),r.footers=b(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,n.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),Q&&b(r.sDiv).hide()),i=null;if(n.p.caption){var tt=n.p.datatype;!0===n.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",r.cDiv).click(function(e){var t=b.isFunction(n.p.onHeaderClick),i=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",s,o=this;return n.p.toolbar[0]===!0&&(n.p.toolbar[1]=="both"&&(i+=", #"+b(r.ubDiv).attr("id")),i+=", #"+b(r.uDiv).attr("id")),s=b(i,"#gview_"+b.jgrid.jqID(n.p.id)).length,n.p.gridstate=="visible"?b(i,"#gbox_"+b.jgrid.jqID(n.p.id)).slideUp("fast",function(){s--,s===0&&(b("span",o).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),n.p.gridstate="hidden",b("#gbox_"+b.jgrid.jqID(n.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(n.p.id)).hide(),b(n).triggerHandler("jqGridHeaderClick",[n.p.gridstate,e]),t&&(Q||n.p.onHeaderClick.call(n,n.p.gridstate,e)))}):n.p.gridstate=="hidden"&&b(i,"#gbox_"+b.jgrid.jqID(n.p.id)).slideDown("fast",function(){s--,s===0&&(b("span",o).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),Q&&(n.p.datatype=tt,A(),Q=!1),n.p.gridstate="visible",b("#gbox_"+b.jgrid.jqID(n.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(n.p.id)).show(),b(n).triggerHandler("jqGridHeaderClick",[n.p.gridstate,e]),t&&(Q||n.p.onHeaderClick.call(n,n.p.gridstate,e)))}),!1}),Q&&(n.p.datatype="local",b(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))}else b(r.cDiv).hide();b(r.hDiv).after(r.bDiv).mousemove(function(e){if(r.resizing)return r.dragMove(e),!1}),b(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1}),b(document).mouseup(function(){return r.resizing?(r.dragEnd(),!1):!0}),n.formatCol=h,n.sortData=M,n.updatepager=function(e,t){var r,i,s,o,u,a,f,l="",h=n.p.pager?"_"+b.jgrid.jqID(n.p.pager.substr(1)):"",p=n.p.toppager?"_"+n.p.toppager.substr(1):"";s=parseInt(n.p.page,10)-1,s<0&&(s=0),s*=parseInt(n.p.rowNum,10),u=s+n.p.reccount;if(n.p.scroll){r=b("tbody:first > tr:gt(0)",n.grid.bDiv),s=u-r.length,n.p.reccount=r.length;if(i=r.outerHeight()||n.grid.prevRowHeight)r=s*i,i=parseInt(n.p.records,10)*i,b(">div:first",n.grid.bDiv).css({height:i}).children("div:first").css({height:r,display:r?"":"none"});n.grid.bDiv.scrollLeft=n.grid.hDiv.scrollLeft}l=n.p.pager?n.p.pager:"";if(l+=n.p.toppager?l?","+n.p.toppager:n.p.toppager:"")f=b.jgrid.formatter.integer||{},r=c(n.p.page),i=c(n.p.lastpage),b(".selbox",l)[this.p.useProp?"prop":"attr"]("disabled",!1),n.p.pginput===!0&&(b(".ui-pg-input",l).val(n.p.page),o=n.p.toppager?"#sp_1"+h+",#sp_1"+p:"#sp_1"+h,b(o).html(b.fmatter?b.fmatter.util.NumberFormat(n.p.lastpage,f):n.p.lastpage)),n.p.viewrecords&&(n.p.reccount===0?b(".ui-paging-info",l).html(n.p.emptyrecords):(o=s+1,a=n.p.records,b.fmatter&&(o=b.fmatter.util.NumberFormat(o,f),u=b.fmatter.util.NumberFormat(u,f),a=b.fmatter.util.NumberFormat(a,f)),b(".ui-paging-info",l).html(b.jgrid.format(n.p.recordtext,o,u,a)))),n.p.pgbuttons===!0&&(r<=0&&(r=i=0),r==1||r===0?(b("#first"+h+", #prev"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),n.p.toppager&&b("#first_t"+p+", #prev_t"+p).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first"+h+", #prev"+h).removeClass("ui-state-disabled"),n.p.toppager&&b("#first_t"+p+", #prev_t"+p).removeClass("ui-state-disabled")),r==i||r===0?(b("#next"+h+", #last"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),n.p.toppager&&b("#next_t"+p+", #last_t"+p).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next"+h+", #last"+h).removeClass("ui-state-disabled"),n.p.toppager&&b("#next_t"+p+", #last_t"+p).removeClass("ui-state-disabled")));e===!0&&n.p.rownumbers===!0&&b("td.jqgrid-rownum",n.rows).each(function(e){b(this).html(s+1+e)}),t&&n.p.jqgdnd&&b(n).jqGrid("gridDnD","updateDnD"),b(n).triggerHandler("jqGridGridComplete"),b.isFunction(n.p.gridComplete)&&n.p.gridComplete.call(n),b(n).triggerHandler("jqGridAfterGridComplete")},n.refreshIndex=S,n.setHeadCheckBox=O,n.constructTr=x,n.formatter=function(e,t,n,r,i){return d(e,t,n,r,i)},b.extend(r,{populate:A,emptyRows:E}),this.grid=r,n.addXmlData=function(e){T(e,n.grid.bDiv)},n.addJSONData=function(e){N(e,n.grid.bDiv)},this.grid.cols=this.rows[0].cells,A(),n.p.hiddengrid=!1,b(window).unload(function(){n=null})}}}})},b.jgrid.extend({getGridParam:function(e){var t=this[0];return!t||!t.grid?void 0:e?"undefined"!=typeof t.p[e]?t.p[e]:null:t.p},setGridParam:function(e){return this.each(function(){this.grid&&"object"==typeof e&&b.extend(!0,this.p,e)})},getDataIDs:function(){var e=[],t=0,n,r=0;return this.each(function(){if((n=this.rows.length)&&0<n)for(;t<n;)b(this.rows[t]).hasClass("jqgrow")&&(e[r]=this.rows[t].id,r++),t++}),e},setSelection:function(e,t,n){return this.each(function(){var r,i,s,o,u,a;void 0!==e&&(t=!1===t?!1:!0,(i=this.rows.namedItem(e+""))&&i.className&&!(-1<i.className.indexOf("ui-state-disabled")))&&((!0===this.p.scrollrows&&(s=this.rows.namedItem(e).rowIndex,0<=s&&(r=b(this.grid.bDiv)[0].clientHeight,o=b(this.grid.bDiv)[0].scrollTop,u=this.rows[s].offsetTop,s=this.rows[s].clientHeight,u+s>=r+o?b(this.grid.bDiv)[0].scrollTop=u-(r+o)+s+o:u<r+o&&u<o&&(b(this.grid.bDiv)[0].scrollTop=u))),!0===this.p.frozenColumns&&(a=this.p.id+"_frozen"),this.p.multiselect)?(this.setHeadCheckBox(!1),this.p.selrow=i.id,o=b.inArray(this.p.selrow,this.p.selarrrow),-1===o?("ui-subgrid"!==i.className&&b(i).addClass("ui-state-highlight").attr("aria-selected","true"),r=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==i.className&&b(i).removeClass("ui-state-highlight").attr("aria-selected","false"),r=!1,this.p.selarrrow.splice(o,1),u=this.p.selarrrow[0],this.p.selrow=void 0===u?null:u),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(i.id))[this.p.useProp?"prop":"attr"]("checked",r),a&&(-1===o?b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a))[this.p.useProp?"prop":"attr"]("checked",r)),b(this).triggerHandler("jqGridSelectRow",[i.id,r,n]),this.p.onSelectRow&&t&&this.p.onSelectRow.call(this,i.id,r,n)):"ui-subgrid"!==i.className&&(this.p.selrow!=i.id?(b(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(i).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),a&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).addClass("ui-state-highlight")),r=!0):r=!1,this.p.selrow=i.id,b(this).triggerHandler("jqGridSelectRow",[i.id,r,n]),this.p.onSelectRow&&t&&this.p.onSelectRow.call(this,i.id,r,n)))})},resetSelection:function(e){return this.each(function(){var t=this,n,r,i;!0===t.p.frozenColumns&&(i=t.p.id+"_frozen"),"undefined"!=typeof e?(r=e===t.p.selrow?t.p.selrow:e,b("#"+b.jgrid.jqID(t.p.id)+" tbody:first tr#"+b.jgrid.jqID(r)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&b("#"+b.jgrid.jqID(r),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.multiselect&&(b("#jqg_"+b.jgrid.jqID(t.p.id)+"_"+b.jgrid.jqID(r),"#"+b.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",!1),i&&b("#jqg_"+b.jgrid.jqID(t.p.id)+"_"+b.jgrid.jqID(r),"#"+b.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1),t.setHeadCheckBox(!1)),r=null):t.p.multiselect?(b(t.p.selarrrow).each(function(e,r){n=t.rows.namedItem(r),b(n).removeClass("ui-state-highlight").attr("aria-selected","false"),b("#jqg_"+b.jgrid.jqID(t.p.id)+"_"+b.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",!1),i&&(b("#"+b.jgrid.jqID(r),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(t.p.id)+"_"+b.jgrid.jqID(r),"#"+b.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.setHeadCheckBox(!1),t.p.selarrrow=[]):t.p.selrow&&(b("#"+b.jgrid.jqID(t.p.id)+" tbody:first tr#"+b.jgrid.jqID(t.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),i&&b("#"+b.jgrid.jqID(t.p.selrow),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),t.p.selrow=null),!0===t.p.cellEdit&&0<=parseInt(t.p.iCol,10)&&0<=parseInt(t.p.iRow,10)&&(b("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(t.rows[t.p.iRow]).removeClass("selected-row ui-state-hover")),t.p.savedRow=[]})},getRowData:function(e){var t={},n,r=!1,i,s=0;return this.each(function(){var o=this,u,l;if("undefined"==typeof e)r=!0,n=[],i=o.rows.length;else{l=o.rows.namedItem(e);if(!l)return t;i=2}for(;s<i;)r&&(l=o.rows[s]),b(l).hasClass("jqgrow")&&(b('td[role="gridcell"]',l).each(function(e){u=o.p.colModel[e].name;if("cb"!==u&&"subgrid"!==u&&"rn"!==u)if(!0===o.p.treeGrid&&u==o.p.ExpandColumn)t[u]=b.jgrid.htmlDecode(b("span:first",this).html());else try{t[u]=b.unformat.call(o,this,{rowId:l.id,colModel:o.p.colModel[e]},e)}catch(n){t[u]=b.jgrid.htmlDecode(b(this).html())}}),r&&(n.push(t),t={})),s++}),n?n:t},delRowData:function(e){var t=!1,n,r;return this.each(function(){if(!(n=this.rows.namedItem(e)))return!1;if(b(n).remove(),this.p.records--,this.p.reccount--,this.updatepager(!0,!1),t=!0,this.p.multiselect&&(r=b.inArray(e,this.p.selarrrow),-1!=r&&this.p.selarrrow.splice(r,1)),e==this.p.selrow)this.p.selrow=null;if("local"==this.p.datatype){var i=this.p._index[b.jgrid.stripPref(this.p.idPrefix,e)];"undefined"!=typeof i&&(this.p.data.splice(i,1),this.refreshIndex())}if(!0===this.p.altRows&&t){var s=this.p.altclass;b(this.rows).each(function(e){1==e%2?b(this).addClass(s):b(this).removeClass(s)})}}),t},setRowData:function(e,t,n){var r,i=!0,s;return this.each(function(){if(!this.grid)return!1;var o=this,u,l,p=typeof n,v={};l=o.rows.namedItem(e);if(!l)return!1;if(t)try{if(b(this.p.colModel).each(function(n){r=this.name,void 0!==t[r]&&(v[r]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?b.unformat.date.call(o,t[r],this):t[r],u=o.formatter(e,t[r],n,t,"edit"),s=this.title?{title:b.jgrid.stripHtml(u)}:{},!0===o.p.treeGrid&&r==o.p.ExpandColumn?b("td:eq("+n+") > span:first",l).html(u).attr(s):b("td:eq("+n+")",l).html(u).attr(s))}),"local"==o.p.datatype){var m=b.jgrid.stripPref(o.p.idPrefix,e),g=o.p._index[m];if(o.p.treeGrid)for(var y in o.p.treeReader)v.hasOwnProperty(o.p.treeReader[y])&&delete v[o.p.treeReader[y]];"undefined"!=typeof g&&(o.p.data[g]=b.extend(!0,o.p.data[g],v)),v=null}}catch(w){i=!1}i&&("string"===p?b(l).addClass(n):"object"===p&&b(l).css(n),b(o).triggerHandler("jqGridAfterGridComplete"))}),i},addRowData:function(e,t,n,r){n||(n="last");var i=!1,s,o,u,a,f,l,c,h,p="",d,v,m,g,y,w;return t&&(b.isArray(t)?(d=!0,n="last",v=e):(t=[t],d=!1),this.each(function(){var E=t.length;f=this.p.rownumbers===!0?1:0,u=this.p.multiselect===!0?1:0,a=this.p.subGrid===!0?1:0,d||(typeof e!="undefined"?e+="":(e=b.jgrid.randId(),this.p.keyIndex!==!1&&(v=this.p.colModel[this.p.keyIndex+u+a+f].name,typeof t[0][v]!="undefined"&&(e=t[0][v])))),m=this.p.altclass;for(var S=0,x="",T={},N=b.isFunction(this.p.afterInsertRow)?!0:!1;S<E;){g=t[S],o=[];if(d){try{e=g[v]}catch(C){e=b.jgrid.randId()}x=this.p.altRows===!0?(this.rows.length-1)%2===0?m:"":""}w=e,e=this.p.idPrefix+e,f&&(p=this.formatCol(0,1,"",null,e,!0),o[o.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+p+">0</td>"),u&&(h='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+e+'" class="cbox"/>',p=this.formatCol(f,1,"",null,e,!0),o[o.length]='<td role="gridcell" '+p+">"+h+"</td>"),a&&(o[o.length]=b(this).jqGrid("addSubGridCell",u+f,1));for(c=u+a+f;c<this.p.colModel.length;c++)y=this.p.colModel[c],s=y.name,T[s]=g[s],h=this.formatter(e,b.jgrid.getAccessor(g,s),c,g),p=this.formatCol(c,1,h,g,e,!0),o[o.length]='<td role="gridcell" '+p+">"+h+"</td>";o.unshift(this.constructTr(e,!1,x,T,T)),o[o.length]="</tr>";if(this.rows.length===0)b("table:first",this.grid.bDiv).append(o.join(""));else switch(n){case"last":b(this.rows[this.rows.length-1]).after(o.join("")),l=this.rows.length-1;break;case"first":b(this.rows[0]).after(o.join("")),l=1;break;case"after":(l=this.rows.namedItem(r))&&(b(this.rows[l.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[l.rowIndex+1]).after(o):b(l).after(o.join(""))),l++;break;case"before":if(l=this.rows.namedItem(r))b(l).before(o.join("")),l=l.rowIndex;l--}this.p.subGrid===!0&&b(this).jqGrid("addSubGrid",u+f,l),this.p.records++,this.p.reccount++,b(this).triggerHandler("jqGridAfterInsertRow",[e,g,g]),N&&this.p.afterInsertRow.call(this,e,g,g),S++,this.p.datatype=="local"&&(T[this.p.localReader.id]=w,this.p._index[w]=this.p.data.length,this.p.data.push(T),T={})}this.p.altRows===!0&&!d&&(n=="last"?(this.rows.length-1)%2==1&&b(this.rows[this.rows.length-1]).addClass(m):b(this.rows).each(function(e){e%2==1?b(this).addClass(m):b(this).removeClass(m)})),this.updatepager(!0,!0),i=!0})),i},footerData:function(e,t,n){function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var i,s=!1,o={},u;return"undefined"==typeof e&&(e="get"),"boolean"!=typeof n&&(n=!0),e=e.toLowerCase(),this.each(function(){var l=this,p;if(!l.grid||!l.p.footerrow||"set"==e&&r(t))return!1;s=!0,b(this.p.colModel).each(function(r){i=this.name,"set"==e?void 0!==t[i]&&(p=n?l.formatter("",t[i],r,t,"edit"):t[i],u=this.title?{title:b.jgrid.stripHtml(p)}:{},b("tr.footrow td:eq("+r+")",l.grid.sDiv).html(p).attr(u),s=!0):"get"==e&&(o[i]=b("tr.footrow td:eq("+r+")",l.grid.sDiv).html())})}),"get"==e?o:s},showHideCol:function(e,t){return this.each(function(){var n=this,r=!1,i=b.jgrid.cellWidth()?0:n.p.cellLayout,s;if(n.grid){"string"==typeof e&&(e=[e]),t="none"!=t?"":"none";var o=""===t?!0:!1,u=n.p.groupHeader&&("object"==typeof n.p.groupHeader||b.isFunction(n.p.groupHeader));u&&b(n).jqGrid("destroyGroupHeader",!1),b(this.p.colModel).each(function(u){if(-1!==b.inArray(this.name,e)&&this.hidden===o){if(!0===n.p.frozenColumns&&!0===this.frozen)return!0;b("tr",n.grid.hDiv).each(function(){b(this.cells[u]).css("display",t)}),b(n.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[u]).css("display",t)}),n.p.footerrow&&b("tr.footrow td:eq("+u+")",n.grid.sDiv).css("display",t),s=parseInt(this.width,10),n.p.tblwidth="none"===t?n.p.tblwidth-(s+i):n.p.tblwidth+(s+i),this.hidden=!o,r=!0,b(n).triggerHandler("jqGridShowHideCol",[o,this.name,u])}}),!0===r&&(!0===n.p.shrinkToFit&&!isNaN(n.p.height)&&(n.p.tblwidth+=parseInt(n.p.scrollOffset,10)),b(n).jqGrid("setGridWidth",!0===n.p.shrinkToFit?n.p.tblwidth:n.p.width)),u&&b(n).jqGrid("setGroupHeaders",n.p.groupHeader)}})},hideCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){b(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,t,n){function r(t){var n;n=t.length?b.makeArray(t):b.extend({},t),b.each(e,function(e){t[e]=n[this]})}function i(t,n){b(">tr"+(n||""),t).each(function(){var t=this,n=b.makeArray(t.cells);b.each(e,function(){var e=n[this];e&&t.appendChild(e)})})}var s=this.get(0);r(s.p.colModel),r(s.p.colNames),r(s.grid.headers),i(b("thead:first",s.grid.hDiv),n&&":not(.ui-jqgrid-labels)"),t&&i(b("#"+b.jgrid.jqID(s.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),s.p.footerrow&&i(b("tbody:first",s.grid.sDiv)),s.p.remapColumns&&(s.p.remapColumns.length?r(s.p.remapColumns):s.p.remapColumns=b.makeArray(e)),s.p.lastsort=b.inArray(s.p.lastsort,e),s.p.treeGrid&&(s.p.expColInd=b.inArray(s.p.expColInd,e)),b(s).triggerHandler("jqGridRemapColumns",[e,t,n])},setGridWidth:function(e,t){return this.each(function(){if(this.grid){var n=this,r,i=0,s=b.jgrid.cellWidth()?0:n.p.cellLayout,o,u=0,a=!1,l=n.p.scrollOffset,c,h=0,p=0,d;"boolean"!=typeof t&&(t=n.p.shrinkToFit);if(!isNaN(e)){e=parseInt(e,10),n.grid.width=n.p.width=e,b("#gbox_"+b.jgrid.jqID(n.p.id)).css("width",e+"px"),b("#gview_"+b.jgrid.jqID(n.p.id)).css("width",e+"px"),b(n.grid.bDiv).css("width",e+"px"),b(n.grid.hDiv).css("width",e+"px"),n.p.pager&&b(n.p.pager).css("width",e+"px"),n.p.toppager&&b(n.p.toppager).css("width",e+"px"),!0===n.p.toolbar[0]&&(b(n.grid.uDiv).css("width",e+"px"),"both"==n.p.toolbar[1]&&b(n.grid.ubDiv).css("width",e+"px")),n.p.footerrow&&b(n.grid.sDiv).css("width",e+"px"),!1===t&&!0===n.p.forceFit&&(n.p.forceFit=!1);if(!0===t){b.each(n.p.colModel,function(){this.hidden===!1&&(r=this.widthOrg,i+=r+s,this.fixed?h+=r+s:u++,p++)});if(0===u)return;n.p.tblwidth=i,c=e-s*u-h,!isNaN(n.p.height)&&(b(n.grid.bDiv)[0].clientHeight<b(n.grid.bDiv)[0].scrollHeight||1===n.rows.length)&&(a=!0,c-=l);var i=0,v=0<n.grid.cols.length;b.each(n.p.colModel,function(e){this.hidden===!1&&!this.fixed&&(r=this.widthOrg,r=Math.round(c*r/(n.p.tblwidth-s*u-h)),r<0||(this.width=r,i+=r,n.grid.headers[e].width=r,n.grid.headers[e].el.style.width=r+"px",n.p.footerrow&&(n.grid.footers[e].style.width=r+"px"),v&&(n.grid.cols[e].style.width=r+"px"),o=e))});if(!o)return;d=0,a?e-h-(i+s*u)!==l&&(d=e-h-(i+s*u)-l):1!==Math.abs(e-h-(i+s*u))&&(d=e-h-(i+s*u)),n.p.colModel[o].width+=d,n.p.tblwidth=i+d+s*u+h,n.p.tblwidth>e?(a=n.p.tblwidth-parseInt(e,10),n.p.tblwidth=e,r=n.p.colModel[o].width-=a):r=n.p.colModel[o].width,n.grid.headers[o].width=r,n.grid.headers[o].el.style.width=r+"px",v&&(n.grid.cols[o].style.width=r+"px"),n.p.footerrow&&(n.grid.footers[o].style.width=r+"px")}n.p.tblwidth&&(b("table:first",n.grid.bDiv).css("width",n.p.tblwidth+"px"),b("table:first",n.grid.hDiv).css("width",n.p.tblwidth+"px"),n.grid.hDiv.scrollLeft=n.grid.bDiv.scrollLeft,n.p.footerrow&&b("table:first",n.grid.sDiv).css("width",n.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){if(this.grid){var t=b(this.grid.bDiv);t.css({height:e+(isNaN(e)?"":"px")}),!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(t.height()-16),this.p.height=e,this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e,b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e),b(this.grid.cDiv).show()})},setLabel:function(e,t,n,r){return this.each(function(){var i=-1;if(this.grid&&"undefined"!=typeof e&&(b(this.p.colModel).each(function(t){if(this.name==e)return i=t,!1}),0<=i)){var s=b("tr.ui-jqgrid-labels th:eq("+i+")",this.grid.hDiv);if(t){var o=b(".s-ico",s);b("[id^=jqgh_]",s).empty().html(t).append(o),this.p.colNames[i]=t}n&&("string"==typeof n?b(s).addClass(n):b(s).css(n)),"object"==typeof r&&b(s).attr(r)}})},setCell:function(e,t,n,r,i,s){return this.each(function(){var o=-1,u,l;if(this.grid&&(isNaN(t)?b(this.p.colModel).each(function(e){if(this.name==t)return o=e,!1}):o=parseInt(t,10),0<=o&&(u=this.rows.namedItem(e)))){var p=b("td:eq("+o+")",u);if(""!==n||!0===s)u=this.formatter(e,n,o,u,"edit"),l=this.p.colModel[o].title?{title:b.jgrid.stripHtml(u)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(p)).length?b("span",b(p)).html(u).attr(l):b(p).html(u).attr(l),"local"==this.p.datatype&&(u=this.p.colModel[o],n=u.formatter&&"string"==typeof u.formatter&&"date"==u.formatter?b.unformat.date.call(this,n,u):n,l=this.p._index[e],"undefined"!=typeof l&&(this.p.data[l][u.name]=n));"string"==typeof r?b(p).addClass(r):r&&b(p).css(r),"object"==typeof i&&b(p).attr(i)}})},getCell:function(e,t){var n=!1;return this.each(function(){var r=-1;if(this.grid&&(isNaN(t)?b(this.p.colModel).each(function(e){if(this.name===t)return r=e,!1}):r=parseInt(t,10),0<=r)){var i=this.rows.namedItem(e);if(i)try{n=b.unformat.call(this,b("td:eq("+r+")",i),{rowId:i.id,colModel:this.p.colModel[r]},r)}catch(s){n=b.jgrid.htmlDecode(b("td:eq("+r+")",i).html())}}}),n},getCol:function(e,t,n){var r=[],i,s=0,o,u,a,t="boolean"!=typeof t?!1:t;return"undefined"==typeof n&&(n=!1),this.each(function(){var l=-1;if(this.grid&&(isNaN(e)?b(this.p.colModel).each(function(t){if(this.name===e)return l=t,!1}):l=parseInt(e,10),0<=l)){var p=this.rows.length,v=0;if(p&&0<p){for(;v<p;){if(b(this.rows[v]).hasClass("jqgrow")){try{i=b.unformat.call(this,b(this.rows[v].cells[l]),{rowId:this.rows[v].id,colModel:this.p.colModel[l]},l)}catch(m){i=b.jgrid.htmlDecode(this.rows[v].cells[l].innerHTML)}n?(a=parseFloat(i),s+=a,0===v?u=o=a:(o=Math.min(o,a),u=Math.max(u,a))):t?r.push({id:this.rows[v].id,value:i}):r.push(i)}v++}if(n)switch(n.toLowerCase()){case"sum":r=s;break;case"avg":r=s/p;break;case"count":r=p;break;case"min":r=o;break;case"max":r=u}}}}),r},clearGridData:function(e){return this.each(function(){if(this.grid){"boolean"!=typeof e&&(e=!1);if(this.p.deepempty)b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var t=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(t)}this.p.footerrow&&e&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;"),this.p.selrow=null,this.p.selarrrow=[],this.p.savedRow=[],this.p.records=0,this.p.page=1,this.p.lastpage=0,this.p.reccount=0,this.p.data=[],this.p._index={},this.updatepager(!0,!1)}})},getInd:function(e,t){var n=!1,r;return this.each(function(){(r=this.rows.namedItem(e))&&(n=!0===t?r:r.rowIndex)}),n},bindKeys:function(e){var t=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var e=this;b("body").is("[role]")||b("body").attr("role","application"),e.p.scrollrows=t.scrollingRows,b(e).keydown(function(n){var r=b(e).find("tr[tabindex=0]")[0],i,s,o,u=e.p.treeReader.expanded_field;if(r)if(o=e.p._index[r.id],37===n.keyCode||38===n.keyCode||39===n.keyCode||40===n.keyCode){if(38===n.keyCode){s=r.previousSibling,i="";if(s)if(b(s).is(":hidden")){for(;s;)if(s=s.previousSibling,!b(s).is(":hidden")&&b(s).hasClass("jqgrow")){i=s.id;break}}else i=s.id;b(e).jqGrid("setSelection",i,!0,n)}if(40===n.keyCode){s=r.nextSibling,i="";if(s)if(b(s).is(":hidden")){for(;s;)if(s=s.nextSibling,!b(s).is(":hidden")&&b(s).hasClass("jqgrow")){i=s.id;break}}else i=s.id;b(e).jqGrid("setSelection",i,!0,n)}37===n.keyCode&&(e.p.treeGrid&&e.p.data[o][u]&&b(r).find("div.treeclick").trigger("click"),b(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]),b.isFunction(t.onLeftKey)&&t.onLeftKey.call(e,e.p.selrow)),39===n.keyCode&&(e.p.treeGrid&&!e.p.data[o][u]&&b(r).find("div.treeclick").trigger("click"),b(e).triggerHandler("jqGridKeyRight",[e.p.selrow]),b.isFunction(t.onRightKey)&&t.onRightKey.call(e,e.p.selrow))}else 13===n.keyCode?(b(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]),b.isFunction(t.onEnter)&&t.onEnter.call(e,e.p.selrow)):32===n.keyCode&&(b(e).triggerHandler("jqGridKeySpace",[e.p.selrow]),b.isFunction(t.onSpace)&&t.onSpace.call(e,e.p.selrow))})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(e){var t=!1,n;return this.each(function(){"undefined"!=typeof e&&(n=this.p._index[e],0<=n&&(t=this.p.data[n]))}),t}})}(jQuery),function(e){e.fmatter={},e.extend(e.fmatter,{isBoolean:function(e){return"boolean"==typeof e},isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNull:function(e){return null===e},isUndefined:function(e){return"undefined"==typeof e},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=e.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),""===t):!0}}),e.fn.fmatter=function(t,n,r,i,s){var o=n,r=e.extend({},e.jgrid.formatter,r);try{o=e.fn.fmatter[t].call(this,n,r,i,s)}catch(u){}return o},e.fmatter.util={NumberFormat:function(t,n){e.fmatter.isNumber(t)||(t*=1);if(e.fmatter.isNumber(t)){var r=0>t,i=t+"",s=n.decimalSeparator?n.decimalSeparator:".",o;if(e.fmatter.isNumber(n.decimalPlaces)){var u=n.decimalPlaces,i=Math.pow(10,u),i=Math.round(t*i)/i+"";o=i.lastIndexOf(".");if(0<u){0>o?(i+=s,o=i.length-1):"."!==s&&(i=i.replace(".",s));for(;i.length-1-o<u;)i+="0"}}if(n.thousandsSeparator){u=n.thousandsSeparator,o=i.lastIndexOf(s),o=-1<o?o:i.length;for(var s=i.substring(o),a=-1,f=o;0<f;f--)a++,0===a%3&&f!==o&&(!r||1<f)&&(s=u+s),s=i.charAt(f-1)+s;i=s}return i=n.prefix?n.prefix+i:i,i=n.suffix?i+n.suffix:i}return t},DateFormat:function(t,n,r,i){var s=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,o="string"==typeof n?n.match(s):null,s=function(e,t){e=""+e;for(t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},a=0,f,l=["i18n"];l.i18n={dayNames:i.dayNames,monthNames:i.monthNames},t in i.masks&&(t=i.masks[t]);if(!isNaN(n-0)&&"u"==(""+t).toLowerCase())a=new Date(1e3*parseFloat(n));else if(n.constructor===Date)a=n;else if(null!==o)a=new Date(parseInt(o[1],10)),o[3]&&(t=60*Number(o[5])+Number(o[6]),t*="-"==o[4]?1:-1,t-=a.getTimezoneOffset(),a.setTime(Number(Number(a)+6e4*t)));else{n=(""+n).split(/[\\\/:_;.,\t\T\s-]/),t=t.split(/[\\\/:_;.,\t\T\s-]/),o=0;for(f=t.length;o<f;o++)"M"==t[o]&&(a=e.inArray(n[o],l.i18n.monthNames),-1!==a&&12>a&&(n[o]=a+1)),"F"==t[o]&&(a=e.inArray(n[o],l.i18n.monthNames),-1!==a&&11<a&&(n[o]=a+1-12)),n[o]&&(u[t[o].toLowerCase()]=parseInt(n[o],10));u.f&&(u.m=u.f);if(0===u.m&&0===u.y&&0===u.d)return"&#160;";u.m=parseInt(u.m,10)-1,a=u.y,70<=a&&99>=a?u.y=1900+u.y:0<=a&&69>=a&&(u.y=2e3+u.y),a=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u)}r in i.masks?r=i.masks[r]:r||(r="Y-m-d"),t=a.getHours(),n=a.getMinutes(),u=a.getDate(),o=a.getMonth()+1,f=a.getTimezoneOffset();var h=a.getSeconds(),p=a.getMilliseconds(),d=a.getDay(),v=a.getFullYear(),m=(d+6)%7+1,g=(new Date(v,o-1,u)-new Date(v,0,1))/864e5,y={d:s(u),D:l.i18n.dayNames[d],j:u,l:l.i18n.dayNames[d+7],N:m,S:i.S(u),w:d,z:g,W:5>m?Math.floor((g+m-1)/7)+1:Math.floor((g+m-1)/7)||(4>((new Date(v-1,0,1)).getDay()+6)%7?53:52),F:l.i18n.monthNames[o-1+12],m:s(o),M:l.i18n.monthNames[o-1],n:o,t:"?",L:"?",o:"?",Y:v,y:(""+v).substring(2),a:12>t?i.AmPm[0]:i.AmPm[1],A:12>t?i.AmPm[2]:i.AmPm[3],B:"?",g:t%12||12,G:t,h:s(t%12||12),H:s(t),i:s(n),s:s(h),u:p,e:"?",I:"?",O:(0<f?"-":"+")+s(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4),P:"?",T:((""+a).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(a/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return e in y?y[e]:e.substring(1)})}},e.fn.fmatter.defaultFormat=function(t,n){return e.fmatter.isValue(t)&&""!==t?t:n.defaultValue?n.defaultValue:"&#160;"},e.fn.fmatter.email=function(t,n){return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,n):'<a href="mailto:'+t+'">'+t+"</a>"},e.fn.fmatter.checkbox=function(t,n){var r=e.extend({},n.checkbox),i;void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),i=!0===r.disabled?'disabled="disabled"':"";if(e.fmatter.isEmpty(t)||e.fmatter.isUndefined(t))t=e.fn.fmatter.defaultFormat(t,r);return t=(t+"").toLowerCase(),'<input type="checkbox" '+(0>t.search(/(false|0|no|off)/i)?" checked='checked' ":"")+' value="'+t+'" offval="no" '+i+"/>"},e.fn.fmatter.link=function(t,n){var r={target:n.target},i="";return void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),r.target&&(i="target="+r.target),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,n):"<a "+i+' href="'+t+'">'+t+"</a>"},e.fn.fmatter.showlink=function(t,n){var r={baseLinkUrl:n.baseLinkUrl,showAction:n.showAction,addParam:n.addParam||"",target:n.target,idName:n.idName},i="";return void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),r.target&&(i="target="+r.target),r=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+n.rowId+r.addParam,e.fmatter.isString(t)||e.fmatter.isNumber(t)?"<a "+i+' href="'+r+'">'+t+"</a>":e.fn.fmatter.defaultFormat(t,n)},e.fn.fmatter.integer=function(t,n){var r=e.extend({},n.integer);return void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.number=function(t,n){var r=e.extend({},n.number);return void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.currency=function(t,n){var r=e.extend({},n.currency);return void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.date=function(t,n,r,i){return r=e.extend({},n.date),void 0!==n.colModel&&!e.fmatter.isUndefined(n.colModel.formatoptions)&&(r=e.extend({},r,n.colModel.formatoptions)),!r.reformatAfterEdit&&"edit"==i||e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,n):e.fmatter.util.DateFormat(r.srcformat,t,r.newformat,r)},e.fn.fmatter.select=function(t,n){var t=t+"",r=!1,i=[],s,o;e.fmatter.isUndefined(n.colModel.formatoptions)?e.fmatter.isUndefined(n.colModel.editoptions)||(r=n.colModel.editoptions.value,s=void 0===n.colModel.editoptions.separator?":":n.colModel.editoptions.separator,o=void 0===n.colModel.editoptions.delimiter?";":n.colModel.editoptions.delimiter):(r=n.colModel.formatoptions.value,s=void 0===n.colModel.formatoptions.separator?":":n.colModel.formatoptions.separator,o=void 0===n.colModel.formatoptions.delimiter?";":n.colModel.formatoptions.delimiter);if(r){var u=!0===n.colModel.editoptions.multiple?!0:!1,a=[];u&&(a=t.split(","),a=e.map(a,function(
t){return e.trim(t)}));if(e.fmatter.isString(r)){for(var f=r.split(o),l=0,h=0;h<f.length;h++)if(o=f[h].split(s),2<o.length&&(o[1]=e.map(o,function(e,t){if(t>0)return e}).join(s)),u)-1<e.inArray(o[0],a)&&(i[l]=o[1],l++);else if(e.trim(o[0])==e.trim(t)){i[0]=o[1];break}}else e.fmatter.isObject(r)&&(u?i=e.map(a,function(e){return r[e]}):i[0]=r[t]||"")}return t=i.join(", "),""===t?e.fn.fmatter.defaultFormat(t,n):t},e.fn.fmatter.rowactions=function(t,n,r,i){var s={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},t=e.jgrid.jqID(t),n=e.jgrid.jqID(n),i=e("#"+n)[0].p.colModel[i];e.fmatter.isUndefined(i.formatoptions)||(s=e.extend(s,i.formatoptions)),e.fmatter.isUndefined(e("#"+n)[0].p.editOptions)||(s.editOptions=e("#"+n)[0].p.editOptions),e.fmatter.isUndefined(e("#"+n)[0].p.delOptions)||(s.delOptions=e("#"+n)[0].p.delOptions);var o=e("#"+n)[0],i=function(r){e.isFunction(s.afterRestore)&&s.afterRestore.call(o,r),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+n+".ui-jqgrid-btable:first").show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+n+".ui-jqgrid-btable:first").hide()};if(e("#"+t,"#"+n).hasClass("jqgrid-new-row")){var u=o.p.prmNames;s.extraparam[u.oper]=u.addoper}u={keys:s.keys,oneditfunc:s.onEdit,successfunc:s.onSuccess,url:s.url,extraparam:s.extraparam,aftersavefunc:function(r,i){e.isFunction(s.afterSave)&&s.afterSave.call(o,r,i),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+n+".ui-jqgrid-btable:first").show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+n+".ui-jqgrid-btable:first").hide()},errorfunc:s.onError,afterrestorefunc:i,restoreAfterError:s.restoreAfterError,mtype:s.mtype};switch(r){case"edit":e("#"+n).jqGrid("editRow",t,u),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+n+".ui-jqgrid-btable:first").hide(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+n+".ui-jqgrid-btable:first").show(),e(o).triggerHandler("jqGridAfterGridComplete");break;case"save":e("#"+n).jqGrid("saveRow",t,u)&&(e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+n+".ui-jqgrid-btable:first").show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+n+".ui-jqgrid-btable:first").hide(),e(o).triggerHandler("jqGridAfterGridComplete"));break;case"cancel":e("#"+n).jqGrid("restoreRow",t,i),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+n+".ui-jqgrid-btable:first").show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+n+".ui-jqgrid-btable:first").hide(),e(o).triggerHandler("jqGridAfterGridComplete");break;case"del":e("#"+n).jqGrid("delGridRow",t,s.delOptions);break;case"formedit":e("#"+n).jqGrid("setSelection",t),e("#"+n).jqGrid("editGridRow",t,s.editOptions)}},e.fn.fmatter.actions=function(t,n){var r={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};e.fmatter.isUndefined(n.colModel.formatoptions)||(r=e.extend(r,n.colModel.formatoptions));var i=n.rowId,s="",o;return"undefined"==typeof i||e.fmatter.isEmpty(i)?"":(r.editformbutton?(o="onclick=jQuery.fn.fmatter.rowactions('"+i+"','"+n.gid+"','formedit',"+n.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s=s+"<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+o+"><span class='ui-icon ui-icon-pencil'></span></div>"):r.editbutton&&(o="onclick=jQuery.fn.fmatter.rowactions('"+i+"','"+n.gid+"','edit',"+n.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",s=s+"<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+o+"><span class='ui-icon ui-icon-pencil'></span></div>"),r.delbutton&&(o="onclick=jQuery.fn.fmatter.rowactions('"+i+"','"+n.gid+"','del',"+n.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s=s+"<div title='"+e.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+o+"><span class='ui-icon ui-icon-trash'></span></div>"),o="onclick=jQuery.fn.fmatter.rowactions('"+i+"','"+n.gid+"','save',"+n.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s=s+"<div title='"+e.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+o+"><span class='ui-icon ui-icon-disk'></span></div>",o="onclick=jQuery.fn.fmatter.rowactions('"+i+"','"+n.gid+"','cancel',"+n.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",s=s+"<div title='"+e.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+o+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+s+"</div>")},e.unformat=function(t,n,r,i){var s,o=n.colModel.formatter,u=n.colModel.formatoptions||{},a=/([\.\*\_\'\(\)\{\}\+\?\\])/g,f=n.colModel.unformat||e.fn.fmatter[o]&&e.fn.fmatter[o].unformat;if("undefined"!=typeof f&&e.isFunction(f))s=f.call(this,e(t).text(),n,t);else if(!e.fmatter.isUndefined(o)&&e.fmatter.isString(o))switch(s=e.jgrid.formatter||{},o){case"integer":u=e.extend({},s.integer,u),n=u.thousandsSeparator.replace(a,"\\$1"),n=RegExp(n,"g"),s=e(t).text().replace(n,"");break;case"number":u=e.extend({},s.number,u),n=u.thousandsSeparator.replace(a,"\\$1"),n=RegExp(n,"g"),s=e(t).text().replace(n,"").replace(u.decimalSeparator,".");break;case"currency":u=e.extend({},s.currency,u),n=u.thousandsSeparator.replace(a,"\\$1"),n=RegExp(n,"g"),s=e(t).text(),u.prefix&&u.prefix.length&&(s=s.substr(u.prefix.length)),u.suffix&&u.suffix.length&&(s=s.substr(0,s.length-u.suffix.length)),s=s.replace(n,"").replace(u.decimalSeparator,".");break;case"checkbox":u=n.colModel.editoptions?n.colModel.editoptions.value.split(":"):["Yes","No"],s=e("input",t).is(":checked")?u[0]:u[1];break;case"select":s=e.unformat.select(t,n,r,i);break;case"actions":return"";default:s=e(t).text()}return void 0!==s?s:!0===i?e(t).text():e.jgrid.htmlDecode(e(t).html())},e.unformat.select=function(t,n,r,i){r=[],t=e(t).text();if(!0===i)return t;var i=e.extend({},e.fmatter.isUndefined(n.colModel.formatoptions)?n.colModel.editoptions:n.colModel.formatoptions),n=void 0===i.separator?":":i.separator,s=void 0===i.delimiter?";":i.delimiter;if(i.value){var o=i.value,i=!0===i.multiple?!0:!1,u=[];i&&(u=t.split(","),u=e.map(u,function(t){return e.trim(t)}));if(e.fmatter.isString(o)){for(var a=o.split(s),f=0,l=0;l<a.length;l++)if(s=a[l].split(n),2<s.length&&(s[1]=e.map(s,function(e,t){if(t>0)return e}).join(n)),i)-1<e.inArray(s[1],u)&&(r[f]=s[0],f++);else if(e.trim(s[1])==e.trim(t)){r[0]=s[0];break}}else if(e.fmatter.isObject(o)||e.isArray(o))i||(u[0]=t),r=e.map(u,function(t){var n;e.each(o,function(e,r){if(r==t)return n=e,!1});if(typeof n!="undefined")return n});return r.join(", ")}return t||""},e.unformat.date=function(t,n){var r=e.jgrid.formatter.date||{};return e.fmatter.isUndefined(n.formatoptions)||(r=e.extend({},r,n.formatoptions)),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,n):e.fmatter.util.DateFormat(r.newformat,t,r.srcformat,r)}}(jQuery),function(e){e.jgrid.extend({getColProp:function(e){var t={},n=this[0];if(!n.grid)return!1;for(var n=n.p.colModel,r=0;r<n.length;r++)if(n[r].name==e){t=n[r];break}return t},setColProp:function(t,n){return this.each(function(){if(this.grid&&n)for(var r=this.p.colModel,i=0;i<r.length;i++)if(r[i].name==t){e.extend(this.p.colModel[i],n);break}})},sortGrid:function(e,t,n){return this.each(function(){var r=-1;if(this.grid){e||(e=this.p.sortname);for(var i=0;i<this.p.colModel.length;i++)if(this.p.colModel[i].index==e||this.p.colModel[i].name==e){r=i;break}-1!=r&&(i=this.p.colModel[r].sortable,"boolean"!=typeof i&&(i=!0),"boolean"!=typeof t&&(t=!1),i&&this.sortData("jqgh_"+this.p.id+"_"+e,r,t,n))}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&e(this.p.pager).remove();try{e("#gbox_"+e.jgrid.jqID(this.id)).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var t=e(this).attr("id"),n=e(this).attr("class");this.p.pager&&e(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var r=document.createElement("table");e(r).attr({id:t}),r.className=n,t=e.jgrid.jqID(this.id),e(r).removeClass("ui-jqgrid-btable"),1===e(this.p.pager).parents("#gbox_"+t).length?(e(r).insertBefore("#gbox_"+t).show(),e(this.p.pager).insertBefore("#gbox_"+t)):e(r).insertBefore("#gbox_"+t).show(),e("#gbox_"+t).remove()}})},setGridState:function(t){return this.each(function(){this.grid&&("hidden"==t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+e.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&e(this.p.pager).slideUp("fast"),this.p.toppager&&e(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&e(this.grid.ubDiv).slideUp("fast"),e(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(this.p.id)).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"==t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+e.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&e(this.p.pager).slideDown("fast"),this.p.toppager&&e(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"==this.p.toolbar[1]&&e(this.grid.ubDiv).slideDown("fast"),e(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(this.p.id)).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(t){return t=e.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},t||{}),this.each(function(){function n(t,n){var r=e(t);r[0]&&jQuery.each(n,function(){void 0!==this.data?r.bind(this.type,this.data,this.fn):r.bind(this.type,this.fn)})}var r=this;if(!this.ftoolbar){var i=function(){var n={},i=0,s,o,u={},f;e.each(r.p.colModel,function(){o=this.index||this.name,f=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":t.defaultSearch;if(s=e("#gs_"+e.jgrid.jqID(this.name),!0===this.frozen&&!0===r.p.frozenColumns?r.grid.fhDiv:r.grid.hDiv).val())n[o]=s,u[o]=f,i++;else try{delete r.p.postData[o]}catch(l){}});var l=0<i?!0:!1;if(!0===t.stringResult||"local"==r.p.datatype){var h='{"groupOp":"'+t.groupOp+'","rules":[',p=0;e.each(n,function(e,t){0<p&&(h+=","),h+='{"field":"'+e+'",',h+='"op":"'+u[e]+'",',h+='"data":"'+(t+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',p++}),h+="]}",e.extend(r.p.postData,{filters:h}),e.each(["searchField","searchString","searchOper"],function(e,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})}else e.extend(r.p.postData,n);var d;r.p.searchurl&&(d=r.p.url,e(r).jqGrid("setGridParam",{url:r.p.searchurl}));var v="stop"===e(r).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!v&&e.isFunction(t.beforeSearch)&&(v=t.beforeSearch.call(r)),v||e(r).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),d&&e(r).jqGrid("setGridParam",{url:d}),e(r).triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(t.afterSearch)&&t.afterSearch.call(r)},s=e("<tr class='ui-search-toolbar' role='rowheader'></tr>"),o;e.each(r.p.colModel,function(){var u=this,f,l,p,v;l=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+r.p.direction+"'></th>"),f=e("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),!0===this.hidden&&e(l).css("display","none"),this.search=!1===this.search?!1:!0,"undefined"==typeof this.stype&&(this.stype="text"),p=e.extend({},this.searchoptions||{});if(this.search)switch(this.stype){case"select":if(v=this.surl||p.dataUrl)e.ajax(e.extend({url:v,dataType:"html",success:function(r){p.buildSelect!==void 0?(r=p.buildSelect(r))&&e(f).append(r):e(f).append(r),p.defaultValue!==void 0&&e("select",f).val(p.defaultValue),e("select",f).attr({name:u.index||u.name,id:"gs_"+u.name}),p.attr&&e("select",f).attr(p.attr),e("select",f).css({width:"100%"}),p.dataInit!==void 0&&p.dataInit(e("select",f)[0]),p.dataEvents!==void 0&&n(e("select",f)[0],p.dataEvents),t.autosearch===!0&&e("select",f).change(function(){return i(),!1}),r=null}},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));else{var m,y,w;u.searchoptions?(m=void 0===u.searchoptions.value?"":u.searchoptions.value,y=void 0===u.searchoptions.separator?":":u.searchoptions.separator,w=void 0===u.searchoptions.delimiter?";":u.searchoptions.delimiter):u.editoptions&&(m=void 0===u.editoptions.value?"":u.editoptions.value,y=void 0===u.editoptions.separator?":":u.editoptions.separator,w=void 0===u.editoptions.delimiter?";":u.editoptions.delimiter);if(m){v=document.createElement("select"),v.style.width="100%",e(v).attr({name:u.index||u.name,id:"gs_"+u.name});var E;if("string"==typeof m){m=m.split(w);for(var S=0;S<m.length;S++)E=m[S].split(y),w=document.createElement("option"),w.value=E[0],w.innerHTML=E[1],v.appendChild(w)}else if("object"==typeof m)for(E in m)m.hasOwnProperty(E)&&(w=document.createElement("option"),w.value=E,w.innerHTML=m[E],v.appendChild(w));void 0!==p.defaultValue&&e(v).val(p.defaultValue),p.attr&&e(v).attr(p.attr),void 0!==p.dataInit&&p.dataInit(v),void 0!==p.dataEvents&&n(v,p.dataEvents),e(f).append(v),!0===t.autosearch&&e(v).change(function(){return i(),!1})}}break;case"text":y=void 0!==p.defaultValue?p.defaultValue:"",e(f).append("<input type='text' style='width:95%;padding:0px;' name='"+(u.index||u.name)+"' id='gs_"+u.name+"' value='"+y+"'/>"),p.attr&&e("input",f).attr(p.attr),void 0!==p.dataInit&&p.dataInit(e("input",f)[0]),void 0!==p.dataEvents&&n(e("input",f)[0],p.dataEvents),!0===t.autosearch&&(t.searchOnEnter?e("input",f).keypress(function(e){return(e.charCode?e.charCode:e.keyCode?e.keyCode:0)==13?(i(),!1):this}):e("input",f).keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:o&&clearTimeout(o),o=setTimeout(function(){i()},500)}}))}e(l).append(f),e(s).append(l)}),e("table thead",r.grid.hDiv).append(s),this.ftoolbar=!0,this.triggerToolbar=i,this.clearToolbar=function(n){var i={},s=0,o,n="boolean"!=typeof n?!0:n;e.each(r.p.colModel,function(){var t;this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),o=this.index||this.name;switch(this.stype){case"select":e("#gs_"+e.jgrid.jqID(this.name)+" option",!0===this.frozen&&!0===r.p.frozenColumns?r.grid.fhDiv:r.grid.hDiv).each(function(n){n===0&&(this.selected=!0);if(e(this).val()==t)return this.selected=!0,!1});if(void 0!==t)i[o]=t,s++;else try{delete r.p.postData[o]}catch(n){}break;case"text":if(e("#gs_"+e.jgrid.jqID(this.name),!0===this.frozen&&!0===r.p.frozenColumns?r.grid.fhDiv:r.grid.hDiv).val(t),void 0!==t)i[o]=t,s++;else try{delete r.p.postData[o]}catch(u){}}});var u=0<s?!0:!1;if(!0===t.stringResult||"local"==r.p.datatype){var f='{"groupOp":"'+t.groupOp+'","rules":[',l=0;e.each(i,function(e,t){0<l&&(f+=","),f+='{"field":"'+e+'",',f+='"op":"eq",',f+='"data":"'+(t+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),f+="]}",e.extend(r.p.postData,{filters:f}),e.each(["searchField","searchString","searchOper"],function(e,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})}else e.extend(r.p.postData,i);var h;r.p.searchurl&&(h=r.p.url,e(r).jqGrid("setGridParam",{url:r.p.searchurl}));var p="stop"===e(r).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!p&&e.isFunction(t.beforeClear)&&(p=t.beforeClear.call(r)),p||n&&e(r).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]),h&&e(r).jqGrid("setGridParam",{url:h}),e(r).triggerHandler("jqGridToolbarAfterClear"),e.isFunction(t.afterClear)&&t.afterClear()},this.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",r.grid.hDiv),n=!0===r.p.frozenColumns?e("tr.ui-search-toolbar",r.grid.fhDiv):!1;"none"==t.css("display")?(t.show(),n&&n.show()):(t.hide(),n&&n.hide())}}})},destroyGroupHeader:function(t){return"undefined"==typeof t&&(t=!0),this.each(function(){var n,r,i,s,o,u;r=this.grid;var f=e("table.ui-jqgrid-htable thead",r.hDiv),l=this.p.colModel;if(r){e(this).unbind(".setGroupHeaders"),n=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),s=r.headers,r=0;for(i=s.length;r<i;r++){o=l[r].hidden?"none":"",o=e(s[r].el).width(s[r].width).css("display",o);try{o.removeAttr("rowSpan")}catch(c){o.attr("rowSpan",1)}n.append(o),u=o.children("span.ui-jqgrid-resize"),0<u.length&&(u[0].style.height=""),o.children("div")[0].style.top=""}e(f).children("tr.ui-jqgrid-labels").remove(),e(f).prepend(n),!0===t&&e(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var n,r,i=0,s,o,u,f,l,c=this.p.colModel,h=c.length,p=this.grid.headers,d=e("table.ui-jqgrid-htable",this.grid.hDiv),v=d.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");s=d.children("thead");var m=d.find(".jqg-first-row-header");null===m.html()?m=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):m.empty();var g,y=function(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].startColumnName===e)return n;return-1};e(this).prepend(s),s=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(n=0;n<h;n++)if(u=p[n].el,f=e(u),r=c[n],o={height:"0px",width:p[n].width+"px",display:r.hidden?"none":""},e("<th>",{role:"gridcell"}).css(o).addClass("ui-first-th-"+this.p.direction).appendTo(m),u.style.width="",o=y(r.name,t.groupHeaders),0<=o){o=t.groupHeaders[o],i=o.numberOfColumns,l=o.titleText;for(o=r=0;o<i&&n+o<h;o++)c[n+o].hidden||r++;o=e("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0px none"}).html(l),0<r&&o.attr("colspan",""+r),this.p.headertitles&&o.attr("title",o.text()),0===r&&o.hide(),f.before(o),s.append(u),i-=1}else 0===i?t.useColSpanStyle?f.attr("rowspan","2"):(e("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:r.hidden?"none":"","border-top":"0px none"}).insertBefore(f),s.append(u)):(s.append(u),i--);c=e(this).children("thead"),c.prepend(m),s.insertAfter(v),d.append(c),t.useColSpanStyle&&(d.find("span.ui-jqgrid-resize").each(function(){var t=e(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),d.find("div.ui-jqgrid-sortable").each(function(){var t=e(this),n=t.parent();n.is(":visible")&&n.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(n.height()-t.outerHeight())/2+"px")})),g=c.find("tr.jqg-first-row-header"),e(this).bind("jqGridResizeStop.setGroupHeaders",function(e,t,n){g.find("th").eq(n).width(t)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var t=this,n=t.p.colModel,r=0,i=n.length,s=-1,o=!1;if(!(!0===t.p.subGrid||!0===t.p.treeGrid||!0===t.p.cellEdit||t.p.sortable||t.p.scroll||t.p.grouping)){t.p.rownumbers&&r++;for(t.p.multiselect&&r++;r<i;){if(!0!==n[r].frozen)break;o=!0,s=r,r++}if(0<=s&&o){n=t.p.caption?e(t.grid.cDiv).outerHeight():0,r=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).height(),t.p.toppager&&(n+=e(t.grid.topDiv).outerHeight()),!0===t.p.toolbar[0]&&"bottom"!=t.p.toolbar[1]&&(n+=e(t.grid.uDiv).outerHeight()),t.grid.fhDiv=e('<div style="position:absolute;left:0px;top:'+n+"px;height:"+r+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),t.grid.fbDiv=e('<div style="position:absolute;left:0px;top:'+(parseInt(n,10)+parseInt(r,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fhDiv),n=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).clone(!0);if(t.p.groupHeader){e("tr.jqg-first-row-header, tr.jqg-third-row-header",n).each(function(){e("th:gt("+s+")",this).remove()});var u=-1,f=-1;e("tr.jqg-second-row-header th",n).each(function(){var t=parseInt(e(this).attr("colspan"),10);t&&(u+=t,f++);if(u===s)return!1}),u!==s&&(f=s),e("tr.jqg-second-row-header",n).each(function(){e("th:gt("+f+")",this).remove()})}else e("tr",n).each(function(){e("th:gt("+s+")",this).remove()});e(n).width(1),e(t.grid.fhDiv).append(n).mousemove(function(e){if(t.grid.resizing)return t.grid.dragMove(e),!1}),e(t).bind("jqGridResizeStop.setFrozenColumns",function(n,r,i){n=e(".ui-jqgrid-htable",t.grid.fhDiv),e("th:eq("+i+")",n).width(r),n=e(".ui-jqgrid-btable",t.grid.fbDiv),e("tr:first td:eq("+i+")",n).width(r)}),e(t).bind("jqGridOnSortCol.setFrozenColumns",function(n,r){var i=e("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv),s=e("tr.ui-jqgrid-labels:last th:eq("+r+")",t.grid.fhDiv);e("span.ui-grid-ico-sort",i).addClass("ui-state-disabled"),e(i).attr("aria-selected","false"),e("span.ui-icon-"+t.p.sortorder,s).removeClass("ui-state-disabled"),e(s).attr("aria-selected","true"),!t.p.viewsortcols[0]&&t.p.lastsort!=r&&(e("span.s-ico",i).hide(),e("span.s-ico",s).show())}),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fbDiv),jQuery(t.grid.bDiv).scroll(function(){jQuery(t.grid.fbDiv).scrollTop(jQuery(this).scrollTop())}),!0===t.p.hoverrows&&e("#"+e.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout"),e(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){e("#"+e.jgrid.jqID(t.p.id)+"_frozen").remove(),jQuery(t.grid.fbDiv).height(jQuery(t.grid.bDiv).height()-16);var n=e("#"+e.jgrid.jqID(t.p.id)).clone(!0);e("tr",n).each(function(){e("td:gt("+s+")",this).remove()}),e(n).width(1).attr("id",t.p.id+"_frozen"),e(t.grid.fbDiv).append(n),!0===t.p.hoverrows&&(e("tr.jqgrow",n).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),e("tr.jqgrow","#"+e.jgrid.jqID(t.p.id)).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")})),n=null}),t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){e(this.grid.fhDiv).remove(),e(this.grid.fbDiv).remove(),this.grid.fhDiv=null,this.grid.fbDiv=null,e(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var t;e("#"+e.jgrid.jqID(this.p.id)).bind("mouseover",function(n){t=e(n.target).closest("tr.jqgrow"),"ui-subgrid"!==e(t).attr("class")&&e(t).addClass("ui-state-hover")}).bind("mouseout",function(n){t=e(n.target).closest("tr.jqgrow"),e(t).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function(e){e.extend(e.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(t,n){n=e.extend({jqm:!0,gb:""},n||{});if(n.onClose){var r=n.onClose(t);if("boolean"==typeof r&&!r)return}if(e.fn.jqm&&!0===n.jqm)e(t).attr("aria-hidden","true").jqmHide();else{if(""!==n.gb)try{e(".jqgrid-overlay:first",n.gb).hide()}catch(i){}e(t).hide().attr("aria-hidden","true")}},findPos:function(e){var t=0,n=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent);return[t,n]},createModal:function(t,n,r,i,s,o,u){var f=document.createElement("div"),l,c=this,u=e.extend({},u||{});l="rtl"==e(r.gbox).attr("dir")?!0:!1,f.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",f.id=t.themodal;var h=document.createElement("div");h.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",h.id=t.modalhead,e(h).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var p=e("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");e(h).append(p),l?(f.dir="rtl",e(".ui-jqdialog-title",h).css("float","right"),e(".ui-jqdialog-titlebar-close",h).css("left","0.3em")):(f.dir="ltr",e(".ui-jqdialog-title",h).css("float","left"),e(".ui-jqdialog-titlebar-close",h).css("right","0.3em"));var d=document.createElement("div");e(d).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),e(d).append(n),f.appendChild(d),e(f).prepend(h),!0===o?e("body").append(f):"string"==typeof o?e(o).append(f):e(f).insertBefore(i),e(f).css(u),"undefined"==typeof r.jqModal&&(r.jqModal=!0),n={};if(e.fn.jqm&&!0===r.jqModal)0===r.left&&0===r.top&&r.overlay&&(u=[],u=e.jgrid.findPos(s),r.left=u[0]+4,r.top=u[1]+4),n.top=r.top+"px",n.left=r.left;else if(0!==r.left||0!==r.top)n.left=r.left,n.top=r.top+"px";e("a.ui-jqdialog-titlebar-close",h).click(function(){var n=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,i=e("#"+e.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return c.hideModal("#"+e.jgrid.jqID(t.themodal),{gb:i,jqm:r.jqModal,onClose:n}),!1});if(0===r.width||!r.width)r.width=300;if(0===r.height||!r.height)r.height=200;r.zIndex||(i=e(i).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=i?parseInt(i,10)+2:950),i=0,l&&n.left&&!o&&(i=e(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,n.left=parseInt(n.left,10)+parseInt(i,10)),n.left&&(n.left+="px"),e(f).css(e.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},n)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),"undefined"==typeof r.drag&&(r.drag=!0),"undefined"==typeof r.resize&&(r.resize=!0);if(r.drag)if(e(h).css("cursor","move"),e.fn.jqDrag)e(f).jqDrag(h);else try{e(f).draggable({handle:e("#"+e.jgrid.jqID(h.id))})}catch(v){}if(r.resize)if(e.fn.jqResize)e(f).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),e("#"+e.jgrid.jqID(t.themodal)).jqResize(".jqResize",t.scrollelm?"#"+e.jgrid.jqID(t.scrollelm):!1);else try{e(f).resizable({handles:"se, sw",alsoResize:t.scrollelm?"#"+e.jgrid.jqID(t.scrollelm):!1})}catch(m){}!0===r.closeOnEscape&&e(f).keydown(function(n){n.which==27&&(n=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,c.hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:n}))})},viewModal:function(t,n){n=e.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:e.jgrid.showModal,onHide:e.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},n||{});if(e.fn.jqm&&!0===n.jqm)n.jqM?e(t).attr("aria-hidden","false").jqm(n).jqmShow():e(t).attr("aria-hidden","false").jqmShow();else{""!==n.gbox&&(e(".jqgrid-overlay:first",n.gbox).show(),e(t).data("gbox",n.gbox)),e(t).show().attr("aria-hidden","false");try{e(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,n,r,i){var s={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+t+"</b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};e.extend(s,i||{});var o=s.jqModal,u=this;e.fn.jqm&&!o&&(o=!1),t="";if(0<s.buttons.length)for(i=0;i<s.buttons.length;i++)"undefined"==typeof s.buttons[i].id&&(s.buttons[i].id="info_button_"+i),t+="<a href='javascript:void(0)' id='"+s.buttons[i].id+"' class='fm-button ui-state-default ui-corner-all'>"+s.buttons[i].text+"</a>";i=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",n="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+i+";"+("text-align:"+s.align+";")+"'>"+n+"</div>"),n+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+s.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"</a>"+t+"</div>":""!==t?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+s.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+t+"</div>":"",n+="</div>";try{"false"==e("#info_dialog").attr("aria-hidden")&&e.jgrid.hideModal("#info_dialog",{jqm:o}),e("#info_dialog").remove()}catch(f){}e.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},n,s,"","",!0),t&&e.each(s.buttons,function(t){e("#"+e.jgrid.jqID(this.id),"#info_id").bind("click",function(){return s.buttons[t].onClick.call(e("#info_dialog")),!1})}),e("#closedialog","#info_id").click(function(){return u.hideModal("#info_dialog",{jqm:o}),!1}),e(".fm-button","#info_dialog").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e.isFunction(s.beforeOpen)&&s.beforeOpen(),e.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:s.modal,jqm:o}),e.isFunction(s.afterOpen)&&s.afterOpen();try{e("#info_dialog").focus()}catch(l){}},createEl:function(t,n,r,i,s){function o(t,n){return e.isFunction(n.dataInit)&&n.dataInit.call(l,t),n.dataEvents&&e.each(n.dataEvents,function(){void 0!==this.data?e(t).bind(this.type,this.data,this.fn):e(t).bind(this.type,this.fn)}),n}function u(t,n,r){var i="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr".split(" ");"undefined"!=typeof r&&e.isArray(r)&&e.merge(i,r),e.each(n,function(n,r){-1===e.inArray(n,i)&&e(t).attr(n,r)}),n.hasOwnProperty("id")||e(t).attr("id",e.jgrid.randId())}var f="",l=this;switch(t){case"textarea":f=document.createElement("textarea"),i?n.cols||e(f).css({width:"98%"}):n.cols||(n.cols=20),n.rows||(n.rows=2);if("&nbsp;"==r||"&#160;"==r||1==r.length&&160==r.charCodeAt(0))r="";f.value=r,u(f,n),n=o(f,n),e(f).attr({role:"textbox",multiline:"true"});break;case"checkbox":f=document.createElement("input"),f.type="checkbox",n.value?(t=n.value.split(":"),r===t[0]&&(f.checked=!0,f.defaultChecked=!0),f.value=t[0],e(f).attr("offval",t[1])):(t=r.toLowerCase(),0>t.search(/(false|0|no|off|undefined)/i)&&""!==t?(f.checked=!0,f.defaultChecked=!0,f.value=r):f.value="on",e(f).attr("offval","off")),u(f,n,["value"]),n=o(f,n),e(f).attr("role","checkbox");break;case"select":f=document.createElement("select"),f.setAttribute("role","select"),i=[],!0===n.multiple?(t=!0,f.multiple="multiple",e(f).attr("aria-multiselectable","true")):t=!1;if("undefined"!=typeof n.dataUrl)e.ajax(e.extend({url:n.dataUrl,type:"GET",dataType:"html",context:{elem:f,options:n,vl:r},success:function(t){var n=[],r=this.elem,i=this.vl,s=e.extend({},this.options),f=s.multiple===!0;e.isFunction(s.buildSelect)&&(t=s.buildSelect.call(l,t));if(t=e(t).html())e(r).append(t),u(r,s),s=o(r,s),typeof s.size=="undefined"&&(s.size=f?3:1),f?(n=i.split(","),n=e.map(n,function(t){return e.trim(t)})):n[0]=e.trim(i),setTimeout(function(){e("option",r).each(function(t){t===0&&r.multiple&&(this.selected=!1),e(this).attr("role","option");if(e.inArray(e.trim(e(this).text()),n)>-1||e.inArray(e.trim(e(this).val()),n)>-1)this.selected="selected"})},0)}},s||{}));else if(n.value){var c;"undefined"==typeof n.size&&(n.size=t?3:1),t&&(i=r.split(","),i=e.map(i,function(t){return e.trim(t)})),"function"==typeof n.value&&(n.value=n.value());var h,p,d=void 0===n.separator?":":n.separator,s=void 0===n.delimiter?";":n.delimiter;if("string"==typeof n.value){h=n.value.split(s);for(c=0;c<h.length;c++)p=h[c].split(d),2<p.length&&(p[1]=e.map(p,function(e,t){if(t>0)return e}).join(d)),s=document.createElement("option"),s.setAttribute("role","option"),s.value=p[0],s.innerHTML=p[1],f.appendChild(s),!t&&(e.trim(p[0])==e.trim(r)||e.trim(p[1])==e.trim(r))&&(s.selected="selected"),t&&(-1<e.inArray(e.trim(p[1]),i)||-1<e.inArray(e.trim(p[0]),i))&&(s.selected="selected")}else if("object"==typeof n.value)for(c in d=n.value,d)d.hasOwnProperty(c)&&(s=document.createElement("option"),s.setAttribute("role","option"),s.value=c,s.innerHTML=d[c],f.appendChild(s),!t&&(e.trim(c)==e.trim(r)||e.trim(d[c])==e.trim(r))&&(s.selected="selected"),t&&(-1<e.inArray(e.trim(d[c]),i)||-1<e.inArray(e.trim(c),i))&&(s.selected="selected"));u(f,n,["value"
]),n=o(f,n)}break;case"text":case"password":case"button":c="button"==t?"button":"textbox",f=document.createElement("input"),f.type=t,f.value=r,u(f,n),n=o(f,n),"button"!=t&&(i?n.size||e(f).css({width:"98%"}):n.size||(n.size=20)),e(f).attr("role",c);break;case"image":case"file":f=document.createElement("input"),f.type=t,u(f,n),n=o(f,n);break;case"custom":f=document.createElement("span");try{if(!e.isFunction(n.custom_element))throw"e1";if(!(d=n.custom_element.call(l,r,n)))throw"e2";d=e(d).addClass("customelement").attr({id:n.id,name:n.name}),e(f).empty().append(d)}catch(v){"e1"==v&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"==v?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,"string"==typeof v?v:v.message,e.jgrid.edit.bClose)}}return f},checkDate:function(e,t){var n={},r,e=e.toLowerCase();r=-1!=e.indexOf("/")?"/":-1!=e.indexOf("-")?"-":-1!=e.indexOf(".")?".":"/",e=e.split(r),t=t.split(r);if(3!=t.length)return!1;r=-1;for(var i,s=-1,o=-1,u=0;u<e.length;u++)i=isNaN(t[u])?0:parseInt(t[u],10),n[e[u]]=i,i=e[u],-1!=i.indexOf("y")&&(r=u),-1!=i.indexOf("m")&&(o=u),-1!=i.indexOf("d")&&(s=u);i="y"==e[r]||"yyyy"==e[r]?4:"yy"==e[r]?2:-1;var u=function(e){for(var t=1;t<=e;t++){this[t]=31;if(4==t||6==t||9==t||11==t)this[t]=30;2==t&&(this[t]=29)}return this}(12),a;return-1===r?!1:(a=n[e[r]].toString(),2==i&&1==a.length&&(i=1),a.length!=i||0===n[e[r]]&&"00"!=t[r]||-1===o?!1:(a=n[e[o]].toString(),1>a.length||1>n[e[o]]||12<n[e[o]]||-1===s?!1:(a=n[e[s]].toString(),1>a.length||1>n[e[s]]||31<n[e[s]]||2==n[e[o]]&&n[e[s]]>(0!==n[e[r]]%4||0===n[e[r]]%100&&0!==n[e[r]]%400?28:29)||n[e[s]]>u[n[e[o]]]?!1:!0)))},isEmpty:function(e){return e.match(/^\s+$/)||""===e?!0:!1},checkTime:function(t){var n=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!e.jgrid.isEmpty(t)){if(!(t=t.match(n)))return!1;if(t[3]){if(1>t[1]||12<t[1])return!1}else if(23<t[1])return!1;if(59<t[2])return!1}return!0},checkValues:function(t,n,r,i,s){var o,u;if("undefined"==typeof i)if("string"==typeof n){i=0;for(s=r.p.colModel.length;i<s;i++)if(r.p.colModel[i].name==n){o=r.p.colModel[i].editrules,n=i;try{u=r.p.colModel[i].formoptions.label}catch(f){}break}}else 0<=n&&(o=r.p.colModel[n].editrules);else o=i,u=void 0===s?"_":s;if(o){u||(u=r.p.colNames[n]);if(!0===o.required&&e.jgrid.isEmpty(t))return[!1,u+": "+e.jgrid.edit.msg.required,""];i=!1===o.required?!1:!0;if(!0===o.number&&(!1!==i||!e.jgrid.isEmpty(t))&&isNaN(t))return[!1,u+": "+e.jgrid.edit.msg.number,""];if("undefined"!=typeof o.minValue&&!isNaN(o.minValue)&&parseFloat(t)<parseFloat(o.minValue))return[!1,u+": "+e.jgrid.edit.msg.minValue+" "+o.minValue,""];if("undefined"!=typeof o.maxValue&&!isNaN(o.maxValue)&&parseFloat(t)>parseFloat(o.maxValue))return[!1,u+": "+e.jgrid.edit.msg.maxValue+" "+o.maxValue,""];if(!0===o.email&&(!1!==i||!e.jgrid.isEmpty(t))&&(s=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!s.test(t)))return[!1,u+": "+e.jgrid.edit.msg.email,""];if(!(!0!==o.integer||!1===i&&!!e.jgrid.isEmpty(t)||!isNaN(t)&&0===t%1&&-1==t.indexOf(".")))return[!1,u+": "+e.jgrid.edit.msg.integer,""];if(!0===o.date&&(!1!==i||!e.jgrid.isEmpty(t))&&(n=r.p.colModel[n].formatoptions&&r.p.colModel[n].formatoptions.newformat?r.p.colModel[n].formatoptions.newformat:r.p.colModel[n].datefmt||"Y-m-d",!e.jgrid.checkDate(n,t)))return[!1,u+": "+e.jgrid.edit.msg.date+" - "+n,""];if(!0===o.time&&(!1!==i||!e.jgrid.isEmpty(t))&&!e.jgrid.checkTime(t))return[!1,u+": "+e.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!0===o.url&&(!1!==i||!e.jgrid.isEmpty(t))&&(s=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!s.test(t)))return[!1,u+": "+e.jgrid.edit.msg.url,""];if(!0===o.custom&&(!1!==i||!e.jgrid.isEmpty(t)))return e.isFunction(o.custom_func)?(t=o.custom_func.call(r,t,u),e.isArray(t)?t:[!1,e.jgrid.edit.msg.customarray,""]):[!1,e.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(e){var t={};e.jgrid.extend({searchGrid:function(t){return t=e.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},e.jgrid.search,t||{}),this.each(function(){function n(n){s=e(r).triggerHandler("jqGridFilterBeforeShow",[n]),"undefined"==typeof s&&(s=!0),s&&e.isFunction(t.beforeShowSearch)&&(s=t.beforeShowSearch.call(r,n)),s&&(e.jgrid.viewModal("#"+e.jgrid.jqID(o.themodal),{gbox:"#gbox_"+e.jgrid.jqID(i),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),e(r).triggerHandler("jqGridFilterAfterShow",[n]),e.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(r,n))}var r=this;if(r.grid){var i="fbox_"+r.p.id,s=!0,o={themodal:"searchmod"+i,modalhead:"searchhd"+i,modalcontent:"searchcnt"+i,scrollelm:i},u=r.p.postData[t.sFilter];"string"==typeof u&&(u=e.jgrid.parse(u)),!0===t.recreateFilter&&e("#"+e.jgrid.jqID(o.themodal)).remove();if(null!==e("#"+e.jgrid.jqID(o.themodal)).html())n(e("#fbox_"+e.jgrid.jqID(+r.p.id)));else{var f=e("<div><div id='"+i+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+e.jgrid.jqID(r.p.id)),l="left",h="";"rtl"==r.p.direction&&(l="right",h=" style='text-align:left'",f.attr("dir","rtl"));var p=e.extend([],r.p.colModel),d="<a href='javascript:void(0)' id='"+i+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+t.Find+"</a>",v="<a href='javascript:void(0)' id='"+i+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+t.Reset+"</a>",m="",g="",y,b=!1,w=-1;t.showQuery&&(m="<a href='javascript:void(0)' id='"+i+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),t.columns.length?p=t.columns:e.each(p,function(e,t){t.label||(t.label=r.p.colNames[e]);if(!b){var n=typeof t.search=="undefined"?!0:t.search,i=t.hidden===!0;if(t.searchoptions&&t.searchoptions.searchhidden===!0&&n||n&&!i)b=!0,y=t.index||t.name,w=e}});if(!u&&y||!1===t.multipleSearch){var E="eq";0<=w&&p[w].searchoptions&&p[w].searchoptions.sopt?E=p[w].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(E=t.sopt[0]),u={groupOp:"AND",rules:[{field:y,op:E,data:""}]}}b=!1,t.tmplNames&&t.tmplNames.length&&(b=!0,g=t.tmplLabel,g+="<select class='ui-template'>",g+="<option value='default'>Default</option>",e.each(t.tmplNames,function(e,t){g+="<option value='"+e+"'>"+t+"</option>"}),g+="</select>"),l="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+i+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+l+"'>"+v+g+"</td><td class='EditButton' "+h+">"+m+d+"</td></tr></tbody></table>",i=e.jgrid.jqID(i),e("#"+i).jqFilter({columns:p,filter:t.loadDefaults?u:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,_gridsopt:e.jgrid.search.odata,ajaxSelectOptions:r.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function(){this.p.showQuery&&e(".query",this).html(this.toUserFriendlyString()),e.isFunction(t.afterChange)&&t.afterChange.call(r,e("#"+i),t)},direction:r.p.direction}),f.append(l),b&&t.tmplFilters&&t.tmplFilters.length&&e(".ui-template",f).bind("change",function(){var n=e(this).val();return n=="default"?e("#"+i).jqFilter("addFilter",u):e("#"+i).jqFilter("addFilter",t.tmplFilters[parseInt(n,10)]),!1}),!0===t.multipleGroup&&(t.multipleSearch=!0),e(r).triggerHandler("jqGridFilterInitialize",[e("#"+i)]),e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(r,e("#"+i)),t.gbox="#gbox_"+i,t.layer?e.jgrid.createModal(o,f,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0],"#"+e.jgrid.jqID(t.layer),{position:"relative"}):e.jgrid.createModal(o,f,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&e("#"+e.jgrid.jqID(o.themodal)).keydown(function(n){var r=e(n.target);if(t.searchOnEnter&&n.which===13&&!r.hasClass("add-group")&&!r.hasClass("add-rule")&&!r.hasClass("delete-group")&&!r.hasClass("delete-rule")&&(!r.hasClass("fm-button")||!r.is("[id$=_query]")))return e("#"+i+"_search").focus().click(),!1;if(t.closeOnEscape&&n.which===27)return e("#"+e.jgrid.jqID(o.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1}),m&&e("#"+i+"_query").bind("click",function(){return e(".queryresult",f).toggle(),!1}),void 0===t.stringResult&&(t.stringResult=t.multipleSearch),e("#"+i+"_search").bind("click",function(){var n=e("#"+i),s={},u,f=n.jqFilter("filterData");if(t.errorcheck){n[0].hideError(),t.showQuery||n.jqFilter("toSQLString");if(n[0].p.error)return n[0].showError(),!1}if(t.stringResult){try{u=xmlJsonClass.toJson(f,"","",!1)}catch(l){try{u=JSON.stringify(f)}catch(h){}}typeof u=="string"&&(s[t.sFilter]=u,e.each([t.sField,t.sValue,t.sOper],function(){s[this]=""}))}else t.multipleSearch?(s[t.sFilter]=f,e.each([t.sField,t.sValue,t.sOper],function(){s[this]=""})):(s[t.sField]=f.rules[0].field,s[t.sValue]=f.rules[0].data,s[t.sOper]=f.rules[0].op,s[t.sFilter]="");return r.p.search=!0,e.extend(r.p.postData,s),e(r).triggerHandler("jqGridFilterSearch"),e.isFunction(t.onSearch)&&t.onSearch.call(r),e(r).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&e.jgrid.hideModal("#"+e.jgrid.jqID(o.themodal),{gb:"#gbox_"+e.jgrid.jqID(r.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),e("#"+i+"_reset").bind("click",function(){var n={},s=e("#"+i);return r.p.search=!1,t.multipleSearch===!1?n[t.sField]=n[t.sValue]=n[t.sOper]="":n[t.sFilter]="",s[0].resetFilter(),b&&e(".ui-template",f).val("default"),e.extend(r.p.postData,n),e(r).triggerHandler("jqGridFilterReset"),e.isFunction(t.onReset)&&t.onReset.call(r),e(r).trigger("reloadGrid",[{page:1}]),!1}),n(e("#"+i)),e(".fm-button:not(.ui-state-disabled)",f).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},editGridRow:function(n,r){return r=e.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},e.jgrid.edit,r||{}),t[e(this)[0].p.id]=r,this.each(function(){function i(){return e(S+" > tbody > tr > td > .FormElement").each(function(){var t=e(".customelement",this);if(t.length){var n=e(t[0]).attr("name");e.each(y.p.colModel,function(){if(this.name===n&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{if(M[n]=this.editoptions.custom_value.call(y,e("#"+e.jgrid.jqID(n),S),"get"),void 0===M[n])throw"e1"}catch(t){"e1"===t?e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,t.message,jQuery.jgrid.edit.bClose)}return!0}})}else{switch(e(this).get(0).type){case"checkbox":e(this).is(":checked")?M[this.name]=e(this).val():(t=e(this).attr("offval"),M[this.name]=t);break;case"select-one":M[this.name]=e("option:selected",this).val(),_[this.name]=e("option:selected",this).text();break;case"select-multiple":M[this.name]=e(this).val(),M[this.name]=M[this.name]?M[this.name].join(","):"";var r=[];e("option:selected",this).each(function(t,n){r[t]=e(n).text()}),_[this.name]=r.join(",");break;case"password":case"text":case"textarea":case"button":M[this.name]=e(this).val()}y.p.autoencode&&(M[this.name]=e.jgrid.htmlEncode(M[this.name]))}}),!0}function s(n,r,i,s){var o,u,f,l=0,h,p,d,v=[],m=!1,g="",b;for(b=1;b<=s;b++)g+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";return"_empty"!=n&&(m=e(r).jqGrid("getInd",n)),e(r.p.colModel).each(function(b){o=this.name,p=(u=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==o&&"subgrid"!==o&&!0===this.editable&&"rn"!==o){if(!1===m)h="";else if(o==r.p.ExpandColumn&&!0===r.p.treeGrid)h=e("td:eq("+b+")",r.rows[m]).text();else{try{h=e.unformat.call(r,e("td:eq("+b+")",r.rows[m]),{rowId:n,colModel:this},b)}catch(w){h=this.edittype&&"textarea"==this.edittype?e("td:eq("+b+")",r.rows[m]).text():e("td:eq("+b+")",r.rows[m]).html()}if(!h||"&nbsp;"==h||"&#160;"==h||1==h.length&&160==h.charCodeAt(0))h=""}var E=e.extend({},this.editoptions||{},{id:o,name:o}),S=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),x=parseInt(S.rowpos,10)||l+1,T=parseInt(2*(parseInt(S.colpos,10)||1),10);"_empty"==n&&E.defaultValue&&(h=e.isFunction(E.defaultValue)?E.defaultValue.call(y):E.defaultValue),this.edittype||(this.edittype="text"),y.p.autoencode&&(h=e.jgrid.htmlDecode(h)),d=e.jgrid.createEl.call(y,this.edittype,E,h,!1,e.extend({},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{})),""===h&&"checkbox"==this.edittype&&(h=e(d).attr("offval")),""===h&&"select"==this.edittype&&(h=e("option:eq(0)",d).text());if(t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)t[y.p.id]._savedData[o]=h;e(d).addClass("FormElement"),("text"==this.edittype||"textarea"==this.edittype)&&e(d).addClass("ui-widget-content ui-corner-all"),f=e(i).find("tr[rowpos="+x+"]"),S.rowabove&&(E=e("<tr><td class='contentinfo' colspan='"+2*s+"'>"+S.rowcontent+"</td></tr>"),e(i).append(E),E[0].rp=x),0===f.length&&(f=e("<tr "+p+" rowpos='"+x+"'></tr>").addClass("FormData").attr("id","tr_"+o),e(f).append(g),e(i).append(f),f[0].rp=x),e("td:eq("+(T-2)+")",f[0]).html("undefined"==typeof S.label?r.p.colNames[b]:S.label),e("td:eq("+(T-1)+")",f[0]).append(S.elmprefix).append(d).append(S.elmsuffix),v[l]=b,l++}}),0<l&&(b=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+n+"'/></td></tr>"),b[0].rp=l+999,e(i).append(b),t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)&&(t[y.p.id]._savedData[r.p.id+"_id"]=n),v}function o(n,r,i){var s,o=0,u,f,l,h,p;if(t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)t[y.p.id]._savedData={},t[y.p.id]._savedData[r.p.id+"_id"]=n;var d=r.p.colModel;if("_empty"==n)e(d).each(function(){s=this.name,l=e.extend({},this.editoptions||{}),(f=e("#"+e.jgrid.jqID(s),"#"+i))&&f.length&&null!==f[0]&&(h="",l.defaultValue?(h=e.isFunction(l.defaultValue)?l.defaultValue.call(y):l.defaultValue,"checkbox"==f[0].type?(p=h.toLowerCase(),0>p.search(/(false|0|no|off|undefined)/i)&&""!==p?(f[0].checked=!0,f[0].defaultChecked=!0,f[0].value=h):(f[0].checked=!1,f[0].defaultChecked=!1)):f.val(h)):"checkbox"==f[0].type?(f[0].checked=!1,f[0].defaultChecked=!1,h=e(f).attr("offval")):f[0].type&&"select"==f[0].type.substr(0,6)?f[0].selectedIndex=0:f.val(h),!0===t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)&&(t[y.p.id]._savedData[s]=h)}),e("#id_g","#"+i).val(n);else{var v=e(r).jqGrid("getInd",n,!0);v&&(e('td[role="gridcell"]',v).each(function(f){s=d[f].name;if("cb"!==s&&"subgrid"!==s&&"rn"!==s&&!0===d[f].editable){if(s==r.p.ExpandColumn&&!0===r.p.treeGrid)u=e(this).text();else try{u=e.unformat.call(r,e(this),{rowId:n,colModel:d[f]},f)}catch(l){u="textarea"==d[f].edittype?e(this).text():e(this).html()}y.p.autoencode&&(u=e.jgrid.htmlDecode(u));if(!0===t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)t[y.p.id]._savedData[s]=u;s=e.jgrid.jqID(s);switch(d[f].edittype){case"password":case"text":case"button":case"image":case"textarea":if("&nbsp;"==u||"&#160;"==u||1==u.length&&160==u.charCodeAt(0))u="";e("#"+s,"#"+i).val(u);break;case"select":var h=u.split(","),h=e.map(h,function(t){return e.trim(t)});e("#"+s+" option","#"+i).each(function(){this.selected=!!d[f].editoptions.multiple||e.trim(u)!=e.trim(e(this).text())&&h[0]!=e.trim(e(this).text())&&h[0]!=e.trim(e(this).val())?d[f].editoptions.multiple?-1<e.inArray(e.trim(e(this).text()),h)||-1<e.inArray(e.trim(e(this).val()),h)?!0:!1:!1:!0});break;case"checkbox":u+="",d[f].editoptions&&d[f].editoptions.value?d[f].editoptions.value.split(":")[0]==u?(e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("checked",!0),e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("checked",!1),e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("defaultChecked",!1)):(u=u.toLowerCase(),0>u.search(/(false|0|no|off|undefined)/i)&&""!==u?(e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("checked",!0),e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("checked",!1),e("#"+s,"#"+i)[y.p.useProp?"prop":"attr"]("defaultChecked",!1)));break;case"custom":try{if(!d[f].editoptions||!e.isFunction(d[f].editoptions.custom_value))throw"e1";d[f].editoptions.custom_value.call(y,e("#"+s,"#"+i),"set",u)}catch(p){"e1"==p?e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,p.message,jQuery.jgrid.edit.bClose)}}o++}}),0<o&&e("#id_g",S).val(n))}}function f(){e.each(y.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&M.hasOwnProperty(t.name)&&""===M[t.name]&&(M[t.name]="null")})}function l(){var n,i=[!0,"",""],s={},u=y.p.prmNames,l,h,p,v,m,g=e(y).triggerHandler("jqGridAddEditBeforeCheckValues",[e("#"+w),H]);g&&"object"==typeof g&&(M=g),e.isFunction(t[y.p.id].beforeCheckValues)&&(g=t[y.p.id].beforeCheckValues.call(y,M,e("#"+w),"_empty"==M[y.p.id+"_id"]?u.addoper:u.editoper))&&"object"==typeof g&&(M=g);for(p in M)if(M.hasOwnProperty(p)&&(i=e.jgrid.checkValues.call(y,M[p],p,y),!1===i[0]))break;f(),i[0]&&(s=e(y).triggerHandler("jqGridAddEditClickSubmit",[t[y.p.id],M,H]),void 0===s&&e.isFunction(t[y.p.id].onclickSubmit)&&(s=t[y.p.id].onclickSubmit.call(y,t[y.p.id],M)||{}),i=e(y).triggerHandler("jqGridAddEditBeforeSubmit",[M,e("#"+w),H]),void 0===i&&(i=[!0,"",""]),i[0]&&e.isFunction(t[y.p.id].beforeSubmit)&&(i=t[y.p.id].beforeSubmit.call(y,M,e("#"+w))));if(i[0]&&!t[y.p.id].processing){t[y.p.id].processing=!0,e("#sData",S+"_2").addClass("ui-state-active"),h=u.oper,l=u.id,M[h]="_empty"==e.trim(M[y.p.id+"_id"])?u.addoper:u.editoper,M[h]!=u.addoper?M[l]=M[y.p.id+"_id"]:void 0===M[l]&&(M[l]=M[y.p.id+"_id"]),delete M[y.p.id+"_id"],M=e.extend(M,t[y.p.id].editData,s);if(!0===y.p.treeGrid)for(m in M[h]==u.addoper&&(v=e(y).jqGrid("getGridParam","selrow"),M["adjacency"==y.p.treeGridModel?y.p.treeReader.parent_id_field:"parent_id"]=v),y.p.treeReader)y.p.treeReader.hasOwnProperty(m)&&(s=y.p.treeReader[m],M.hasOwnProperty(s)&&(M[h]!=u.addoper||"parent_id_field"!==m)&&delete M[s]);M[l]=e.jgrid.stripPref(y.p.idPrefix,M[l]),m=e.extend({url:t[y.p.id].url?t[y.p.id].url:e(y).jqGrid("getGridParam","editurl"),type:t[y.p.id].mtype,data:e.isFunction(t[y.p.id].serializeEditData)?t[y.p.id].serializeEditData.call(y,M):M,complete:function(s,f){M[l]=y.p.idPrefix+M[l],f!="success"?(i[0]=!1,i[1]=e(y).triggerHandler("jqGridAddEditErrorTextFormat",[s,H]),i[1]=e.isFunction(t[y.p.id].errorTextFormat)?t[y.p.id].errorTextFormat.call(y,s):f+" Status: '"+s.statusText+"'. Error code: "+s.status):(i=e(y).triggerHandler("jqGridAddEditAfterSubmit",[s,M,H]),i===void 0&&(i=[!0,"",""]),i[0]&&e.isFunction(t[y.p.id].afterSubmit)&&(i=t[y.p.id].afterSubmit.call(y,s,M)));if(i[0]===!1)e("#FormError>td",S).html(i[1]),e("#FormError",S).show();else{e.each(y.p.colModel,function(){if(_[this.name]&&this.formatter&&this.formatter=="select")try{delete _[this.name]}catch(e){}}),M=e.extend(M,_),y.p.autoencode&&e.each(M,function(t,n){M[t]=e.jgrid.htmlDecode(n)}),M[h]==u.addoper?(i[2]||(i[2]=e.jgrid.randId()),M[l]=i[2],t[y.p.id].closeAfterAdd?(t[y.p.id].reloadAfterSubmit?e(y).trigger("reloadGrid"):y.p.treeGrid===!0?e(y).jqGrid("addChildNode",i[2],v,M):(e(y).jqGrid("addRowData",i[2],M,r.addedrow),e(y).jqGrid("setSelection",i[2])),e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose})):t[y.p.id].clearAfterAdd?(t[y.p.id].reloadAfterSubmit?e(y).trigger("reloadGrid"):y.p.treeGrid===!0?e(y).jqGrid("addChildNode",i[2],v,M):e(y).jqGrid("addRowData",i[2],M,r.addedrow),o("_empty",y,w)):t[y.p.id].reloadAfterSubmit?e(y).trigger("reloadGrid"):y.p.treeGrid===!0?e(y).jqGrid("addChildNode",i[2],v,M):e(y).jqGrid("addRowData",i[2],M,r.addedrow)):(t[y.p.id].reloadAfterSubmit?(e(y).trigger("reloadGrid"),t[y.p.id].closeAfterEdit||setTimeout(function(){e(y).jqGrid("setSelection",M[l])},1e3)):y.p.treeGrid===!0?e(y).jqGrid("setTreeRow",M[l],M):e(y).jqGrid("setRowData",M[l],M),t[y.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose})),e.isFunction(t[y.p.id].afterComplete)&&(n=s,setTimeout(function(){e(y).triggerHandler("jqGridAddEditAfterComplete",[n,M,e("#"+w),H]),t[y.p.id].afterComplete.call(y,n,M,e("#"+w)),n=null},500));if(t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate){e("#"+w).data("disabled",!1);if(t[y.p.id]._savedData[y.p.id+"_id"]!="_empty")for(var p in t[y.p.id]._savedData)M[p]&&(t[y.p.id]._savedData[p]=M[p])}}t[y.p.id].processing=!1,e("#sData",S+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+w)[0].focus()}catch(m){}}},e.jgrid.ajaxOptions,t[y.p.id].ajaxEditOptions),!m.url&&!t[y.p.id].useDataProxy&&(e.isFunction(y.p.dataProxy)?t[y.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+e.jgrid.errors.nourl)),i[0]&&(t[y.p.id].useDataProxy?(s=y.p.dataProxy.call(y,m,"set_"+y.p.id),"undefined"==typeof s&&(s=[!0,""]),!1===s[0]?(i[0]=!1,i[1]=s[1]||"Error deleting the selected row!"):(m.data.oper==u.addoper&&t[y.p.id].closeAfterAdd&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),m.data.oper==u.editoper&&t[y.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}))):e.ajax(m))}!1===i[0]&&(e("#FormError>td",S).html(i[1]),e("#FormError",S).show())}function h(e,t){var n=!1,r;for(r in e)if(e[r]!=t[r]){n=!0;break}return n}function p(){var n=!0;return e("#FormError",S).hide(),t[y.p.id].checkOnUpdate&&(M={},_={},i(),D=e.extend({},M,_),P=h(D,t[y.p.id]._savedData))&&(e("#"+w).data("disabled",!0),e(".confirm","#"+x.themodal).show(),n=!1),n}function v(){if("_empty"!==n&&"undefined"!=typeof y.p.savedRow&&0<y.p.savedRow.length&&e.isFunction(e.fn.jqGrid.restoreRow))for(var t=0;t<y.p.savedRow.length;t++)if(y.p.savedRow[t].id==n){e(y).jqGrid("restoreRow",n);break}}function m(t,n){0===t?e("#pData",S+"_2").addClass("ui-state-disabled"):e("#pData",S+"_2").removeClass("ui-state-disabled"),t==n?e("#nData",S+"_2").addClass("ui-state-disabled"):e("#nData",S+"_2").removeClass("ui-state-disabled")}function g(){var t=e(y).jqGrid("getDataIDs"),n=e("#id_g",S).val();return[e.inArray(n,t),t]}var y=this;if(y.grid&&n){var b=y.p.id,w="FrmGrid_"+b,E="TblGrid_"+b,S="#"+e.jgrid.jqID(E),x={themodal:"editmod"+b,modalhead:"edithd"+b,modalcontent:"editcnt"+b,scrollelm:w},T=e.isFunction(t[y.p.id].beforeShowForm)?t[y.p.id].beforeShowForm:!1,N=e.isFunction(t[y.p.id].afterShowForm)?t[y.p.id].afterShowForm:!1,C=e.isFunction(t[y.p.id].beforeInitData)?t[y.p.id].beforeInitData:!1,k=e.isFunction(t[y.p.id].onInitializeForm)?t[y.p.id].onInitializeForm:!1,L=!0,A=1,O=0,M,_,D,P,H,w=e.jgrid.jqID(w);"new"===n?(n="_empty",H="add",r.caption=t[y.p.id].addCaption):(r.caption=t[y.p.id].editCaption,H="edit"),!0===r.recreateForm&&null!==e("#"+e.jgrid.jqID(x.themodal)).html()&&e("#"+e.jgrid.jqID(x.themodal)).remove();var B=!0;r.checkOnUpdate&&r.jqModal&&!r.modal&&(B=!1);if(null!==e("#"+e.jgrid.jqID(x.themodal)).html()){L=e(y).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+e.jgrid.jqID(w))]),"undefined"==typeof L&&(L=!0),L&&C&&(L=C.call(y,e("#"+w)));if(!1===L)return;v(),e(".ui-jqdialog-title","#"+e.jgrid.jqID(x.modalhead)).html(r.caption),e("#FormError",S).hide(),t[y.p.id].topinfo?(e(".topinfo",S).html(t[y.p.id].topinfo),e(".tinfo",S).show()):e(".tinfo",S).hide(),t[y.p.id].bottominfo?(e(".bottominfo",S+"_2").html(t[y.p.id].bottominfo),e(".binfo",S+"_2").show()):e(".binfo",S+"_2").hide(),o(n,y,w),"_empty"==n||!t[y.p.id].viewPagerButtons?e("#pData, #nData",S+"_2").hide():e("#pData, #nData",S+"_2").show(),!0===t[y.p.id].processing&&(t[y.p.id].processing=!1,e("#sData",S+"_2").removeClass("ui-state-active")),!0===e("#"+w).data("disabled")&&(e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),e("#"+w).data("disabled",!1)),e(y).triggerHandler("jqGridAddEditBeforeShowForm",[e("#"+w),H]),T&&T.call(y,e("#"+w)),e("#"+e.jgrid.jqID(x.themodal)).data("onClose",t[y.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(x.themodal),{gbox:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,jqM:!1,overlay:r.overlay,modal:r.modal}),B||e(".jqmOverlay").click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1):!1}),e(y).triggerHandler("jqGridAddEditAfterShowForm",[e("#"+w),H]),N&&N.call(y,e("#"+w))}else{var j=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px",j=e("<form name='FormPost' id='"+w+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+j+";'></form>").data("disabled",!1),F=e("<table id='"+E+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),L=e(y).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+w),H]);"undefined"==typeof L&&(L=!0),L&&C&&(L=C.call(y,e("#"+w)));if(!1===L)return;v(),e(y.p.colModel).each(function(){var e=this.formoptions;A=Math.max(A,e?e.colpos||0:0),O=Math.max(O,e?e.rowpos||0:0)}),e(j).append(F),C=e("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*A+"'></td></tr>"),C[0].rp=0,e(F).append(C),C=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*A+"'>"+t[y.p.id].topinfo+"</td></tr>"),C[0].rp=0,e(F).append(C);var L=(C="rtl"==y.p.direction?!0:!1)?"nData":"pData",I=C?"pData":"nData";s(n,y,F,A);var L="<a href='javascript:void(0)' id='"+L+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",I="<a href='javascript:void(0)' id='"+I+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",q="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>",R="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>",E="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+E+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(C?I+L:L+I)+"</td><td class='EditButton'>"+q+R+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t[y.p.id].bottominfo+"</td></tr>"),E=E+"</tbody></table>";if(0<O){var U=[];e.each(e(F)[0].rows,function(e,t){U[e]=t}),U.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(U,function(t,n){e("tbody",F).append(n)})}r.gbox="#gbox_"+e.jgrid.jqID(b);var z=!1;!0===r.closeOnEscape&&(r.closeOnEscape=!1,z=!0),E=e("<span></span>").append(j).append(E),e.jgrid.createModal(x,E,r,"#gview_"+e.jgrid.jqID(y.p.id),e("#gbox_"+e.jgrid.jqID(y.p.id))[0]),C&&(e("#pData, #nData",S+"_2").css("float","right"),e(".EditButton",S+"_2").css("text-align","left")),t[y.p.id].topinfo&&e(".tinfo",S).show(),t[y.p.id].bottominfo&&e(".binfo",S+"_2").show(),E=E=null,e("#"+e.jgrid.jqID(x.themodal)).keydown(function(n){var i=n.target;if(e("#"+w).data("disabled")===!0)return!1;if(t[y.p.id].savekey[0]===!0&&n.which==t[y.p.id].savekey[1]&&i.tagName!="TEXTAREA")return e("#sData",S+"_2").trigger("click"),!1;if(n.which===27)return p()?(z&&e.jgrid.hideModal(this,{gb:r.gbox,jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1):!1;if(t[y.p.id].navkeys[0]===!0){if(e("#id_g",S).val()=="_empty")return!0;if(n.which==t[y.p.id].navkeys[1])return e("#pData",S+"_2").trigger("click"),!1;if(n.which==t[y.p.id].navkeys[2])return e("#nData",S+"_2").trigger("click"),!1}}),r.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span","#"+e.jgrid.jqID(x.themodal)).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(x.themodal)).unbind("click").click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1):!1})),r.saveicon=e.extend([!0,"left","ui-icon-disk"],r.saveicon),r.closeicon=e.extend([!0,"left","ui-icon-close"],r.closeicon),!0===r.saveicon[0]&&e("#sData",S+"_2").addClass("right"==r.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.saveicon[2]+"'></span>"),!0===r.closeicon[0]&&e("#cData",S+"_2").addClass("right"==r.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.closeicon[2]+"'></span>");if(t[y.p.id].checkOnSubmit||t[y.p.id].checkOnUpdate)q="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bYes+"</a>",I="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bNo+"</a>",R="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+r.bExit+"</a>",E=r.zIndex||999,E++,e("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+E+";display:none;'>&#160;"+(e.browser.msie&&6==e.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(E+1)+"'>"+r.saveData+"<br/><br/>"+q+I+R+"</div>").insertAfter("#"+w),e("#sNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return l(),e("#"+w).data("disabled",!1),e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),!1}),e("#nNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),e("#"+w).data("disabled",!1),setTimeout(function(){e(":input","#"+w)[0].focus()},0),!1}),e("#cNew","#"+e.jgrid.jqID(x.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(x.themodal)).hide(),e("#"+w).data("disabled",!1),e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1});e(y).triggerHandler("jqGridAddEditInitializeForm",[e("#"+w),H]),k&&k.call(y,e("#"+w)),"_empty"==n||!t[y.p.id].viewPagerButtons?e("#pData,#nData",S+"_2").hide():e("#pData,#nData",S+"_2").show(),e(y).triggerHandler("jqGridAddEditBeforeShowForm",[e("#"+w),H]),T&&T.call(y,e("#"+w)),e("#"+e.jgrid.jqID(x.themodal)).data("onClose",t[y.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(x.themodal),{gbox:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,overlay:r.overlay,modal:r.modal}),B||e(".jqmOverlay").click(function(){return p()?
(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1):!1}),e(y).triggerHandler("jqGridAddEditAfterShowForm",[e("#"+w),H]),N&&N.call(y,e("#"+w)),e(".fm-button","#"+e.jgrid.jqID(x.themodal)).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e("#sData",S+"_2").click(function(){return M={},_={},e("#FormError",S).hide(),i(),M[y.p.id+"_id"]=="_empty"?l():r.checkOnSubmit===!0?(D=e.extend({},M,_),(P=h(D,t[y.p.id]._savedData))?(e("#"+w).data("disabled",!0),e(".confirm","#"+e.jgrid.jqID(x.themodal)).show()):l()):l(),!1}),e("#cData",S+"_2").click(function(){return p()?(e.jgrid.hideModal("#"+e.jgrid.jqID(x.themodal),{gb:"#gbox_"+e.jgrid.jqID(b),jqm:r.jqModal,onClose:t[y.p.id].onClose}),!1):!1}),e("#nData",S+"_2").click(function(){if(!p())return!1;e("#FormError",S).hide();var t=g();return t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]&&(e(y).triggerHandler("jqGridAddEditClickPgButtons",["next",e("#"+w),t[1][t[0]]]),e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(y,"next",e("#"+w),t[1][t[0]]),o(t[1][t[0]+1],y,w),e(y).jqGrid("setSelection",t[1][t[0]+1]),e(y).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",e("#"+w),t[1][t[0]]]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(y,"next",e("#"+w),t[1][t[0]+1]),m(t[0]+1,t[1].length-1)),!1}),e("#pData",S+"_2").click(function(){if(!p())return!1;e("#FormError",S).hide();var t=g();return t[0]!=-1&&t[1][t[0]-1]&&(e(y).triggerHandler("jqGridAddEditClickPgButtons",["prev",e("#"+w),t[1][t[0]]]),e.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(y,"prev",e("#"+w),t[1][t[0]]),o(t[1][t[0]-1],y,w),e(y).jqGrid("setSelection",t[1][t[0]-1]),e(y).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",e("#"+w),t[1][t[0]]]),e.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(y,"prev",e("#"+w),t[1][t[0]-1]),m(t[0]-1,t[1].length-1)),!1})}T=g(),m(T[0],T[1].length-1)}})},viewGridRow:function(t,n){return n=e.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},e.jgrid.view,n||{}),this.each(function(){function r(){(!0===n.closeOnEscape||!0===n.navkeys[0])&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(g.modalhead)).focus()},0)}function i(t,r,i,s){for(var o,u,f,l=0,c,h,p=[],v=!1,m="<td class='CaptionTD form-view-label ui-widget-content' width='"+n.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",g="",y=["integer","number","currency"],b=0,w=0,E,S,x,T=1;T<=s;T++)g+=1==T?m:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";return e(r.p.colModel).each(function(){u=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1,!u&&"right"===this.align&&(this.formatter&&-1!==e.inArray(this.formatter,y)?b=Math.max(b,parseInt(this.width,10)):w=Math.max(w,parseInt(this.width,10)))}),E=0!==b?b:0!==w?w:0,v=e(r).jqGrid("getInd",t),e(r.p.colModel).each(function(t){o=this.name,S=!1,h=(u=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"",x="boolean"!=typeof this.viewable?!0:this.viewable;if("cb"!==o&&"subgrid"!==o&&"rn"!==o&&x){c=!1===v?"":o==r.p.ExpandColumn&&!0===r.p.treeGrid?e("td:eq("+t+")",r.rows[v]).text():e("td:eq("+t+")",r.rows[v]).html(),S="right"===this.align&&0!==E?!0:!1,e.extend({},this.editoptions||{},{id:o,name:o});var n=e.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(n.rowpos,10)||l+1,m=parseInt(2*(parseInt(n.colpos,10)||1),10);if(n.rowabove){var y=e("<tr><td class='contentinfo' colspan='"+2*s+"'>"+n.rowcontent+"</td></tr>");e(i).append(y),y[0].rp=d}f=e(i).find("tr[rowpos="+d+"]"),0===f.length&&(f=e("<tr "+h+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","trv_"+o),e(f).append(g),e(i).append(f),f[0].rp=d),e("td:eq("+(m-2)+")",f[0]).html("<b>"+("undefined"==typeof n.label?r.p.colNames[t]:n.label)+"</b>"),e("td:eq("+(m-1)+")",f[0]).append("<span>"+c+"</span>").attr("id","v_"+o),S&&e("td:eq("+(m-1)+") span",f[0]).css({"text-align":"right",width:E+"px"}),p[l]=t,l++}}),0<l&&(t=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>"),t[0].rp=l+99,e(i).append(t)),p}function s(t,n){var r,i,s=0,o,u;if(u=e(n).jqGrid("getInd",t,!0))e("td",u).each(function(t){r=n.p.colModel[t].name,i=n.p.colModel[t].editrules&&!0===n.p.colModel[t].editrules.edithidden?!1:!0===n.p.colModel[t].hidden?!0:!1,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(o=r==n.p.ExpandColumn&&!0===n.p.treeGrid?e(this).text():e(this).html(),e.extend({},n.p.colModel[t].editoptions||{}),r=e.jgrid.jqID("v_"+r),e("#"+r+" span","#"+p).html(o),i&&e("#"+r,"#"+p).parents("tr:first").hide(),s++)}),0<s&&e("#id_g","#"+p).val(t)}function o(t,n){0===t?e("#pData","#"+p+"_2").addClass("ui-state-disabled"):e("#pData","#"+p+"_2").removeClass("ui-state-disabled"),t==n?e("#nData","#"+p+"_2").addClass("ui-state-disabled"):e("#nData","#"+p+"_2").removeClass("ui-state-disabled")}function u(){var t=e(f).jqGrid("getDataIDs"),n=e("#id_g","#"+p).val();return[e.inArray(n,t),t]}var f=this;if(f.grid&&t){var l=f.p.id,h="ViewGrid_"+e.jgrid.jqID(l),p="ViewTbl_"+e.jgrid.jqID(l),v="ViewGrid_"+l,m="ViewTbl_"+l,g={themodal:"viewmod"+l,modalhead:"viewhd"+l,modalcontent:"viewcnt"+l,scrollelm:h},y=e.isFunction(n.beforeInitData)?n.beforeInitData:!1,b=!0,w=1,E=0;if(null!==e("#"+e.jgrid.jqID(g.themodal)).html()){y&&(b=y.call(f,e("#"+h)),"undefined"==typeof b&&(b=!0));if(!1===b)return;e(".ui-jqdialog-title","#"+e.jgrid.jqID(g.modalhead)).html(n.caption),e("#FormError","#"+p).hide(),s(t,f),e.isFunction(n.beforeShowForm)&&n.beforeShowForm.call(f,e("#"+h)),e.jgrid.viewModal("#"+e.jgrid.jqID(g.themodal),{gbox:"#gbox_"+e.jgrid.jqID(l),jqm:n.jqModal,jqM:!1,overlay:n.overlay,modal:n.modal}),r()}else{var S=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",v=e("<form name='FormPost' id='"+v+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+S+";'></form>"),x=e("<table id='"+m+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");y&&(b=y.call(f,e("#"+h)),"undefined"==typeof b&&(b=!0));if(!1===b)return;e(f.p.colModel).each(function(){var e=this.formoptions;w=Math.max(w,e?e.colpos||0:0),E=Math.max(E,e?e.rowpos||0:0)}),e(v).append(x),i(t,f,x,w),m="rtl"==f.p.direction?!0:!1,y="<a href='javascript:void(0)' id='"+(m?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",b="<a href='javascript:void(0)' id='"+(m?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",S="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+n.bClose+"</a>";if(0<E){var T=[];e.each(e(x)[0].rows,function(e,t){T[e]=t}),T.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(T,function(t,n){e("tbody",x).append(n)})}n.gbox="#gbox_"+e.jgrid.jqID(l);var N=!1;!0===n.closeOnEscape&&(n.closeOnEscape=!1,N=!0),v=e("<span></span>").append(v).append("<table border='0' class='EditTable' id='"+p+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+n.labelswidth+"'>"+(m?b+y:y+b)+"</td><td class='EditButton'>"+S+"</td></tr></tbody></table>"),e.jgrid.createModal(g,v,n,"#gview_"+e.jgrid.jqID(f.p.id),e("#gview_"+e.jgrid.jqID(f.p.id))[0]),m&&(e("#pData, #nData","#"+p+"_2").css("float","right"),e(".EditButton","#"+p+"_2").css("text-align","left")),n.viewPagerButtons||e("#pData, #nData","#"+p+"_2").hide(),v=null,e("#"+g.themodal).keydown(function(t){if(t.which===27)return N&&e.jgrid.hideModal(this,{gb:n.gbox,jqm:n.jqModal,onClose:n.onClose}),!1;if(n.navkeys[0]===!0){if(t.which===n.navkeys[1])return e("#pData","#"+p+"_2").trigger("click"),!1;if(t.which===n.navkeys[2])return e("#nData","#"+p+"_2").trigger("click"),!1}}),n.closeicon=e.extend([!0,"left","ui-icon-close"],n.closeicon),!0===n.closeicon[0]&&e("#cData","#"+p+"_2").addClass("right"==n.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+n.closeicon[2]+"'></span>"),e.isFunction(n.beforeShowForm)&&n.beforeShowForm.call(f,e("#"+h)),e.jgrid.viewModal("#"+e.jgrid.jqID(g.themodal),{gbox:"#gbox_"+e.jgrid.jqID(l),jqm:n.jqModal,modal:n.modal}),e(".fm-button:not(.ui-state-disabled)","#"+p+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),r(),e("#cData","#"+p+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(g.themodal),{gb:"#gbox_"+e.jgrid.jqID(l),jqm:n.jqModal,onClose:n.onClose}),!1}),e("#nData","#"+p+"_2").click(function(){e("#FormError","#"+p).hide();var t=u();return t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]&&(e.isFunction(n.onclickPgButtons)&&n.onclickPgButtons.call(f,"next",e("#"+h),t[1][t[0]]),s(t[1][t[0]+1],f),e(f).jqGrid("setSelection",t[1][t[0]+1]),e.isFunction(n.afterclickPgButtons)&&n.afterclickPgButtons.call(f,"next",e("#"+h),t[1][t[0]+1]),o(t[0]+1,t[1].length-1)),r(),!1}),e("#pData","#"+p+"_2").click(function(){e("#FormError","#"+p).hide();var t=u();return t[0]!=-1&&t[1][t[0]-1]&&(e.isFunction(n.onclickPgButtons)&&n.onclickPgButtons.call(f,"prev",e("#"+h),t[1][t[0]]),s(t[1][t[0]-1],f),e(f).jqGrid("setSelection",t[1][t[0]-1]),e.isFunction(n.afterclickPgButtons)&&n.afterclickPgButtons.call(f,"prev",e("#"+h),t[1][t[0]-1]),o(t[0]-1,t[1].length-1)),r(),!1})}v=u(),o(v[0],v[1].length-1)}})},delGridRow:function(n,r){return r=e.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e.jgrid.del,r||{}),t[e(this)[0].p.id]=r,this.each(function(){var i=this;if(i.grid&&n){var s=e.isFunction(t[i.p.id].beforeShowForm),o=e.isFunction(t[i.p.id].afterShowForm),f=e.isFunction(t[i.p.id].beforeInitData)?t[i.p.id].beforeInitData:!1,l=i.p.id,h={},p=!0,v="DelTbl_"+e.jgrid.jqID(l),m,g,y,b,w="DelTbl_"+l,E={themodal:"delmod"+l,modalhead:"delhd"+l,modalcontent:"delcnt"+l,scrollelm:v};jQuery.isArray(n)&&(n=n.join());if(null!==e("#"+e.jgrid.jqID(E.themodal)).html()){f&&(p=f.call(i,e("#"+v)),"undefined"==typeof p&&(p=!0));if(!1===p)return;e("#DelData>td","#"+v).text(n),e("#DelError","#"+v).hide(),!0===t[i.p.id].processing&&(t[i.p.id].processing=!1,e("#dData","#"+v).removeClass("ui-state-active")),s&&t[i.p.id].beforeShowForm.call(i,e("#"+v)),e.jgrid.viewModal("#"+e.jgrid.jqID(E.themodal),{gbox:"#gbox_"+e.jgrid.jqID(l),jqm:t[i.p.id].jqModal,jqM:!1,overlay:t[i.p.id].overlay,modal:t[i.p.id].modal})}else{var S=isNaN(t[i.p.id].dataheight)?t[i.p.id].dataheight:t[i.p.id].dataheight+"px",w="<div id='"+w+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+S+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>"+("<tr id='DelData' style='display:none'><td >"+n+"</td></tr>"),w=w+('<tr><td class="delmsg" style="white-space:pre;">'+t[i.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),w=w+"</tbody></table></div>"+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+v+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+r.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+r.bCancel+"</a>")+"</td></tr></tbody></table>");r.gbox="#gbox_"+e.jgrid.jqID(l),e.jgrid.createModal(E,w,r,"#gview_"+e.jgrid.jqID(i.p.id),e("#gview_"+e.jgrid.jqID(i.p.id))[0]),f&&(p=f.call(i,e("#"+v)),"undefined"==typeof p&&(p=!0));if(!1===p)return;e(".fm-button","#"+v+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),r.delicon=e.extend([!0,"left","ui-icon-scissors"],t[i.p.id].delicon),r.cancelicon=e.extend([!0,"left","ui-icon-cancel"],t[i.p.id].cancelicon),!0===r.delicon[0]&&e("#dData","#"+v+"_2").addClass("right"==r.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.delicon[2]+"'></span>"),!0===r.cancelicon[0]&&e("#eData","#"+v+"_2").addClass("right"==r.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+r.cancelicon[2]+"'></span>"),e("#dData","#"+v+"_2").click(function(){var n=[!0,""];h={};var s=e("#DelData>td","#"+v).text();e.isFunction(t[i.p.id].onclickSubmit)&&(h=t[i.p.id].onclickSubmit.call(i,t[i.p.id],s)||{}),e.isFunction(t[i.p.id].beforeSubmit)&&(n=t[i.p.id].beforeSubmit.call(i,s));if(n[0]&&!t[i.p.id].processing){t[i.p.id].processing=!0,y=i.p.prmNames,m=e.extend({},t[i.p.id].delData,h),b=y.oper,m[b]=y.deloper,g=y.id,s=(""+s).split(",");if(!s.length)return!1;for(var o in s)s.hasOwnProperty(o)&&(s[o]=e.jgrid.stripPref(i.p.idPrefix,s[o]));m[g]=s.join(),e(this).addClass("ui-state-active"),o=e.extend({url:t[i.p.id].url?t[i.p.id].url:e(i).jqGrid("getGridParam","editurl"),type:t[i.p.id].mtype,data:e.isFunction(t[i.p.id].serializeDelData)?t[i.p.id].serializeDelData.call(i,m):m,complete:function(o,u){u!="success"?(n[0]=!1,n[1]=e.isFunction(t[i.p.id].errorTextFormat)?t[i.p.id].errorTextFormat.call(i,o):u+" Status: '"+o.statusText+"'. Error code: "+o.status):e.isFunction(t[i.p.id].afterSubmit)&&(n=t[i.p.id].afterSubmit.call(i,o,m));if(n[0]===!1)e("#DelError>td","#"+v).html(n[1]),e("#DelError","#"+v).show();else{if(t[i.p.id].reloadAfterSubmit&&i.p.datatype!="local")e(i).trigger("reloadGrid");else{if(i.p.treeGrid===!0)try{e(i).jqGrid("delTreeNode",i.p.idPrefix+s[0])}catch(f){}else for(var h=0;h<s.length;h++)e(i).jqGrid("delRowData",i.p.idPrefix+s[h]);i.p.selrow=null,i.p.selarrrow=[]}e.isFunction(t[i.p.id].afterComplete)&&setTimeout(function(){t[i.p.id].afterComplete.call(i,o,s)},500)}t[i.p.id].processing=!1,e("#dData","#"+v+"_2").removeClass("ui-state-active"),n[0]&&e.jgrid.hideModal("#"+e.jgrid.jqID(E.themodal),{gb:"#gbox_"+e.jgrid.jqID(l),jqm:r.jqModal,onClose:t[i.p.id].onClose})}},e.jgrid.ajaxOptions,t[i.p.id].ajaxDelOptions),!o.url&&!t[i.p.id].useDataProxy&&(e.isFunction(i.p.dataProxy)?t[i.p.id].useDataProxy=!0:(n[0]=!1,n[1]=n[1]+(" "+e.jgrid.errors.nourl))),n[0]&&(t[i.p.id].useDataProxy?(o=i.p.dataProxy.call(i,o,"del_"+i.p.id),typeof o=="undefined"&&(o=[!0,""]),o[0]===!1?(n[0]=!1,n[1]=o[1]||"Error deleting the selected row!"):e.jgrid.hideModal("#"+e.jgrid.jqID(E.themodal),{gb:"#gbox_"+e.jgrid.jqID(l),jqm:r.jqModal,onClose:t[i.p.id].onClose})):e.ajax(o))}return n[0]===!1&&(e("#DelError>td","#"+v).html(n[1]),e("#DelError","#"+v).show()),!1}),e("#eData","#"+v+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(E.themodal),{gb:"#gbox_"+e.jgrid.jqID(l),jqm:t[i.p.id].jqModal,onClose:t[i.p.id].onClose}),!1}),s&&t[i.p.id].beforeShowForm.call(i,e("#"+v)),e.jgrid.viewModal("#"+e.jgrid.jqID(E.themodal),{gbox:"#gbox_"+e.jgrid.jqID(l),jqm:t[i.p.id].jqModal,overlay:t[i.p.id].overlay,modal:t[i.p.id].modal})}o&&t[i.p.id].afterShowForm.call(i,e("#"+v)),!0===t[i.p.id].closeOnEscape&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(E.modalhead)).focus()},0)}})},navGrid:function(t,n,r,i,s,o,u){return n=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},e.jgrid.nav,n||{}),this.each(function(){if(!this.nav){var f={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},h=this,p;if(h.grid&&"string"==typeof t){null===e("#"+f.themodal).html()&&(!n.alerttop&&!n.alertleft&&("undefined"!=typeof window.innerWidth?(n.alertleft=window.innerWidth,n.alerttop=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(n.alertleft=document.documentElement.clientWidth,n.alerttop=document.documentElement.clientHeight):(n.alertleft=1024,n.alerttop=768),n.alertleft=n.alertleft/2-parseInt(n.alertwidth,10)/2,n.alerttop=n.alerttop/2-25),e.jgrid.createModal(f,"<div>"+n.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+e.jgrid.jqID(h.p.id),jqModal:!0,drag:!0,resize:!0,caption:n.alertcap,top:n.alerttop,left:n.alertleft,width:n.alertwidth,height:n.alertheight,closeOnEscape:n.closeOnEscape,zIndex:n.alertzIndex},"","",!0));var v=1;n.cloneToTop&&h.p.toppager&&(v=2);for(var m=0;m<v;m++){var g=e("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),y,b;0===m?(y=t,b=h.p.id,y==h.p.toppager&&(b+="_top",v=1)):(y=h.p.toppager,b=h.p.id+"_top"),"rtl"==h.p.direction&&e(g).attr("dir","rtl").css("float","right"),n.add&&(i=i||{},p=e("<td class='ui-pg-button ui-corner-all'></td>"),e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.addicon+"'></span>"+n.addtext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.addtitle||"",id:i.id||"add_"+b}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(n.addfunc)?n.addfunc.call(h):e(h).jqGrid("editGridRow","new",i)),!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),p=null),n.edit&&(p=e("<td class='ui-pg-button ui-corner-all'></td>"),r=r||{},e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.editicon+"'></span>"+n.edittext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.edittitle||"",id:r.id||"edit_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=h.p.selrow;t?e.isFunction(n.editfunc)?n.editfunc.call(h,t):e(h).jqGrid("editGridRow",t,r):(e.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+e.jgrid.jqID(h.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),p=null),n.view&&(p=e("<td class='ui-pg-button ui-corner-all'></td>"),u=u||{},e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.viewicon+"'></span>"+n.viewtext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.viewtitle||"",id:u.id||"view_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=h.p.selrow;t?e.isFunction(n.viewfunc)?n.viewfunc.call(h,t):e(h).jqGrid("viewGridRow",t,u):(e.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+e.jgrid.jqID(h.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),p=null),n.del&&(p=e("<td class='ui-pg-button ui-corner-all'></td>"),s=s||{},e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.delicon+"'></span>"+n.deltext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.deltitle||"",id:s.id||"del_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t;h.p.multiselect?(t=h.p.selarrrow,t.length===0&&(t=null)):t=h.p.selrow,t?e.isFunction(n.delfunc)?n.delfunc.call(h,t):e(h).jqGrid("delGridRow",t,s):(e.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+e.jgrid.jqID(h.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),p=null),(n.add||n.edit||n.del||n.view)&&e("tr",g).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"),n.search&&(p=e("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.searchicon+"'></span>"+n.searchtext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.searchtitle||"",id:o.id||"search_"+b}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(n.searchfunc)?n.searchfunc.call(h,o):e(h).jqGrid("searchGrid",o)),!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),o.showOnLoad&&!0===o.showOnLoad&&e(p,g).click(),p=null),n.refresh&&(p=e("<td class='ui-pg-button ui-corner-all'></td>"),e(p).append("<div class='ui-pg-div'><span class='ui-icon "+n.refreshicon+"'></span>"+n.refreshtext+"</div>"),e("tr",g).append(p),e(p,g).attr({title:n.refreshtitle||"",id:"refresh_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){e.isFunction(n.beforeRefresh)&&n.beforeRefresh.call(h),h.p.search=!1;try{var t=h.p.id;h.p.postData.filters="",e("#fbox_"+e.jgrid.jqID(t)).jqFilter("resetFilter"),e.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}catch(r){}switch(n.refreshstate){case"firstpage":e(h).trigger("reloadGrid",[{page:1}]);break;case"current":e(h).trigger("reloadGrid",[{current:!0}])}e.isFunction(n.afterRefresh)&&n.afterRefresh.call(h)}return!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),p=null),p=e(".ui-jqgrid").css("font-size")||"11px",e("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+p+";visibility:hidden;' ></div>"),p=e(g).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(y+"_"+n.position,y).append(g),h.p._nvtd&&(p>h.p._nvtd[0]&&(e(y+"_"+n.position,y).width(p),h.p._nvtd[0]=p),h.p._nvtd[1]=p),g=p=p=null,this.nav=!0}}}})},navButtonAdd:function(t,n){return n=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},n||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0],i=this;if(r&&(!n.id||null===e("#"+e.jgrid.jqID(n.id),r).html())){var s=e("<td></td>");"NONE"==n.buttonicon.toString().toUpperCase()?e(s).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+n.caption+"</div>"):e(s).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+n.buttonicon+"'></span>"+n.caption+"</div>"),n.id&&e(s).attr("id",n.id),"first"==n.position?0===r.rows[0].cells.length?e("tr",r).append(s):e("tr td:eq(0)",r).before(s):e("tr",r).append(s),e(s,r).attr("title",n.title||"").click(function(t){return e(this).hasClass("ui-state-disabled")||e.isFunction(n.onClickButton)&&n.onClickButton.call(i,t),!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(t,n){return n=e.extend({sepclass:"ui-separator",sepcontent:""},n||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0];if(r){var i="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+n.sepclass+"'></span>"+n.sepcontent+"</td>";e("tr",r).append(i)}}})},GridToForm:function(t,n){return this.each(function(){var r=this;if(r.grid){var i=e(r).jqGrid("getRowData",t);if(i)for(var s in i)e("[name="+e.jgrid.jqID(s)+"]",n).is("input:radio")||e("[name="+e.jgrid.jqID(s)+"]",n).is("input:checkbox")?e("[name="+e.jgrid.jqID(s)+"]",n).each(function(){e(this).val()==i[s]?e(this)[r.p.useProp?"prop":"attr"]("checked",!0):e(this)[r.p.useProp?"prop":"attr"]("checked",!1)}):e("[name="+e.jgrid.jqID(s)+"]",n).val(i[s])}})},FormToGrid:function(t,n,r,i){return this.each(function(){if(this.grid){r||(r="set"),i||(i="first");var s=e(n).serializeArray(),o={};e.each(s,function(e,t){o[t.name]=t.value}),"add"==r?e(this).jqGrid("addRowData",t,o,i):"set"==r&&e(this).jqGrid("setRowData",t,o)}})}})}(jQuery),function(e){e.fn.jqFilter=function(t){if("string"==typeof t){var n=e.fn.jqFilter[t];if(!n)throw"jqFilter - No such method: "+t;var r=e.makeArray(arguments).slice(1);return n.apply(this,r)}var i=e.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),_gridsopt:[],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},e.jgrid.filter,t||{});return this.each(function(){if(!this.filter){this.p=i;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]};var t,n=this.p.columns.length,r,s=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(t=0;t<this.p._gridsopt.length;t++)this.p.ops[t].description=this.p._gridsopt[t];this.p.initFilter=e.extend(!0,{},this.p.filter);if(n){for(t=0;t<n;t++)if(r=this.p.columns[t],r.stype?r.inputtype=r.stype:r.inputtype||(r.inputtype="text"),r.sorttype?r.searchtype=r.sorttype:r.searchtype||(r.searchtype="string"),void 0===r.hidden&&(r.hidden=!1),r.label||(r.label=r.name),r.index&&(r.name=r.index),r.hasOwnProperty("searchoptions")||(r.searchoptions={}),!r.hasOwnProperty("searchrules"))r.searchrules={};this.p.showQuery&&e(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var u=function(t,n){var r=[!0,""];if(e.isFunction(n.searchrules))r=n.searchrules(t,n);else if(e.jgrid&&e.jgrid.checkValues)try{r=e.jgrid.checkValues(t,-1,null,n.searchrules,n.label)}catch(s){}r&&r.length&&!1===r[0]&&(i.error=!r[0],i.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",e.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){e("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);e(this).append(t),e.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(t,n){var r=this,s,u=e("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),f="left";"rtl"==this.p.direction&&(f="right",u.attr("dir","rtl")),null===n&&u.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+f+"'></th></tr>");var l=e("<tr></tr>");u.append(l),f=e("<th colspan='5' align='"+f+"'></th>"),l.append(f);if(!0===this.p.ruleButtons){var c=e("<select class='opsel'></select>");f.append(c);var l="",h;for(s=0;s<i.groupOps.length;s++)h=t.groupOp===r.p.groupOps[s].op?" selected='selected'":"",l+="<option value='"+r.p.groupOps[s].op+"'"+h+">"+r.p.groupOps[s].text+"</option>";c.append(l).bind("change",function(){t.groupOp=e(c).val(),r.onchange()})}l="<span></span>",this.p.groupButton&&(l=e("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),l.bind("click",function(){return t.groups===void 0&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),r.reDraw(),r.onchange(),!1})),f.append(l);if(!0===this.p.ruleButtons){var l=e("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),p;l.bind("click",function(){t.rules===void 0&&(t.rules=[]);for(s=0;s<r.p.columns.length;s++){var e=typeof r.p.columns[s].search=="undefined"?!0:r.p.columns[s].search,n=r.p.columns[s].hidden===!0;if(r.p.columns[s].searchoptions.searchhidden===!0&&e||e&&!n){p=r.p.columns[s];break}}return t.rules.push({field:p.name,op:(p.searchoptions.sopt?p.searchoptions.sopt:r.p.sopt?r.p.sopt:p.searchtype==="string"?r.p.stropts:r.p.numopts)[0],data:""}),r.reDraw(),!1}),f.append(l)}null!==n&&(l=e("<input type='button' value='-' title='Delete group' class='delete-group'/>"),f.append(l),l.bind("click",function(){for(s=0;s<n.groups.length;s++)if(n.groups[s]===t){n.groups.splice(s,1);break}return r.reDraw(),r.onchange(),!1}));if(void 0!==t.groups)for(s=0;s<t.groups.length;s++)f=e("<tr></tr>"),u.append(f),l=e("<td class='first'></td>"),f.append(l),l=e("<td colspan='4'></td>"),l.append(this.createTableForGroup(t.groups[s],t)),f.append(l);void 0===t.groupOp&&(t.groupOp=r.p.groupOps[0].op);if(void 0!==t.rules)for(s=0;s<t.rules.length;s++)u.append(this.createTableRowForRule(t.rules[s],t));return u},this.createTableRowForRule=function(t,n){var r=this,u=e("<tr></tr>"),f,l,c,h,p="",d;u.append("<td class='first'></td>");var v=e("<td class='columns'></td>");u.append(v);var m=e("<select></select>"),g,y=[];v.append(m),m.bind("change",function(){t.field=e(m).val(),c=e(this).parents("tr:first");for(f=0;f<r.p.columns.length;f++)if(r.p.columns[f].name===t.field){h=r.p.columns[f];break}if(h){h.searchoptions.id=e.jgrid.randId(),s&&"text"===h.inputtype&&!h.searchoptions.size&&(h.searchoptions.size=10);var n=e.jgrid.createEl(h.inputtype,h.searchoptions,"",!0,r.p.ajaxSelectOptions,!0);e(n).addClass("input-elm"),l=h.searchoptions.sopt?h.searchoptions.sopt:r.p.sopt?r.p.sopt:"string"===h.searchtype?r.p.stropts:r.p.numopts;var i="",o=0;y=[],e.each(r.p.ops,function(){y.push(this.name)});for(f=0;f<l.length;f++)g=e.inArray(l[f],y),-1!==g&&(0===o&&(t.op=r.p.ops[g].name),i+="<option value='"+r.p.ops[g].name+"'>"+r.p.ops[g].description+"</option>",o++);e(".selectopts",c).empty().append(i),e(".selectopts",c)[0].selectedIndex=0,e.browser.msie&&9>e.browser.version&&(i=parseInt(e("select.selectopts",c)[0].offsetWidth)+1,e(".selectopts",c).width(i),e(".selectopts",c).css("width","auto")),e(".data",c).empty().append(n),e(".input-elm",c).bind("change",function(n){var i=e(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var i=n.target;t.data=i.nodeName.toUpperCase()==="SPAN"&&h.searchoptions&&e.isFunction(h.searchoptions.custom_value)?h.searchoptions.custom_value(e(i).children(".customelement:first"),"get"):i.value,r.onchange()},i)}),setTimeout(function(){t.data=e(n).val(),r.onchange()},0)}});for(f=v=0;f<r.p.columns.length;f++){d="undefined"==typeof r.p.columns[f].search?!0:r.p.columns[f].search;var b=!0===r.p.columns[f].hidden;if(!0===r.p.columns[f].searchoptions.searchhidden&&d||d&&!b)d="",t.field===r.p.columns[f].name&&(d=" selected='selected'",v=f),p+="<option value='"+r.p.columns[f].name+"'"+d+">"+r.p.columns[f].label+"</option>"}m.append(p),p=e("<td class='operators'></td>"),u.append(p),h=i.columns[v],h.searchoptions.id=e.jgrid.randId(),s&&"text"===h.inputtype&&!h.searchoptions.size&&(h.searchoptions.size=10);var v=e.jgrid.createEl(h.inputtype,h.searchoptions,t.data,!0,r.p.ajaxSelectOptions,!0),w=e("<select class='selectopts'></select>");p.append(w),w.bind("change",function(){t.op=e(w).val(),c=e(this).parents("tr:first");var n=e(".input-elm",c)[0];t.op==="nu"||t.op==="nn"?(t.data="",n.value="",n.setAttribute("readonly","true"),n.setAttribute("disabled","true")):(n.removeAttribute("readonly"),n.removeAttribute("disabled")),r.onchange()}),l=h.searchoptions.sopt?h.searchoptions.sopt:r.p.sopt?r.p.sopt:"string"===h.searchtype?i.stropts:r.p.numopts,p="",e.each(r.p.ops,function(){y.push(this.name)});for(f=0;f<l.length;f++)g=e.inArray(l[f],y),-1!==g&&(d=t.op===r.p.ops[g].name?" selected='selected'":"",p+="<option value='"+r.p.ops[g].name+"'"+d+">"+r.p.ops[g].description+"</option>");return w.append(p),p=e("<td class='data'></td>"),u.append
(p),p.append(v),e(v).addClass("input-elm").bind("change",function(){t.data=h.inputtype==="custom"?h.searchoptions.custom_value(e(this).children(".customelement:first"),"get"):e(this).val(),r.onchange()}),p=e("<td></td>"),u.append(p),!0===this.p.ruleButtons&&(v=e("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),p.append(v),v.bind("click",function(){for(f=0;f<n.rules.length;f++)if(n.rules[f]===t){n.rules.splice(f,1);break}return r.reDraw(),r.onchange(),!1})),u},this.getStringForGroup=function(e){var t="(",n;if(void 0!==e.groups)for(n=0;n<e.groups.length;n++){1<t.length&&(t+=" "+e.groupOp+" ");try{t+=this.getStringForGroup(e.groups[n])}catch(r){alert(r)}}if(void 0!==e.rules)try{for(n=0;n<e.rules.length;n++)1<t.length&&(t+=" "+e.groupOp+" "),t+=this.getStringForRule(e.rules[n])}catch(i){alert(i)}return t+=")","()"===t?"":t},this.getStringForRule=function(t){var n="",r="",s,f;for(s=0;s<this.p.ops.length;s++)if(this.p.ops[s].name===t.op){n=this.p.ops[s].operator,r=this.p.ops[s].name;break}for(s=0;s<this.p.columns.length;s++)if(this.p.columns[s].name===t.field){f=this.p.columns[s];break}s=t.data;if("bw"===r||"bn"===r)s+="%";if("ew"===r||"en"===r)s="%"+s;if("cn"===r||"nc"===r)s="%"+s+"%";if("in"===r||"ni"===r)s=" ("+s+")";return i.errorcheck&&u(t.data,f),-1!==e.inArray(f.searchtype,["int","integer","float","number","currency"])||"nn"===r||"nu"===r?t.field+" "+n+" "+s:t.field+" "+n+' "'+s+'"'},this.resetFilter=function(){this.p.filter=e.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){e("th.ui-state-error",this).html(""),e("tr.error",this).hide()},this.showError=function(){e("th.ui-state-error",this).html(this.p.errmsg),e("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)},this.toString=function(){function e(n){var r="(",i;if(void 0!==n.groups)for(i=0;i<n.groups.length;i++)1<r.length&&(r="OR"===n.groupOp?r+" || ":r+" && "),r+=e(n.groups[i]);if(void 0!==n.rules)for(i=0;i<n.rules.length;i++){1<r.length&&(r="OR"===n.groupOp?r+" || ":r+" && ");var s=n.rules[i];if(t.p.errorcheck){for(var o=void 0,f=void 0,o=0;o<t.p.columns.length;o++)if(t.p.columns[o].name===s.field){f=t.p.columns[o];break}f&&u(s.data,f)}r+=s.op+"(item."+s.field+",'"+s.data+"')"}return r+=")","()"===r?"":r}var t=this;return e(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},e.extend(e.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=jQuery.jgrid.parse(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}})}(jQuery),function(e){e.jgrid.inlineEdit=e.jgrid.inlineEdit||{},e.jgrid.extend({editRow:function(t,n,r,i,s,o,u,f,l){var c={},h=e.makeArray(arguments).slice(1);if("object"===e.type(h[0]))c=h[0];else if("undefined"!=typeof n&&(c.keys=n),e.isFunction(r)&&(c.oneditfunc=r),e.isFunction(i)&&(c.successfunc=i),"undefined"!=typeof s&&(c.url=s),"undefined"!=typeof o&&(c.extraparam=o),e.isFunction(u)&&(c.aftersavefunc=u),e.isFunction(f)&&(c.errorfunc=f),e.isFunction(l))c.afterrestorefunc=l;return c=e.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,c),this.each(function(){var n=this,r,i,s,o=0,u=null,f={},l,h;n.grid&&(l=e(n).jqGrid("getInd",t,!0),!1!==l&&(s=e(l).attr("editable")||"0","0"==s&&!e(l).hasClass("not-editable-row")&&(h=n.p.colModel,e('td[role="gridcell"]',l).each(function(s){r=h[s].name;var l=!0===n.p.treeGrid&&r==n.p.ExpandColumn;if(l)i=e("span:first",this).html();else try{i=e.unformat.call(n,this,{rowId:t,colModel:h[s]},s)}catch(c){i=h[s].edittype&&"textarea"==h[s].edittype?e(this).text():e(this).html()}if("cb"!=r&&"subgrid"!=r&&"rn"!=r&&(n.p.autoencode&&(i=e.jgrid.htmlDecode(i)),f[r]=i,!0===h[s].editable)){null===u&&(u=s),l?e("span:first",this).html(""):e(this).html("");var p=e.extend({},h[s].editoptions||{},{id:t+"_"+r,name:r});h[s].edittype||(h[s].edittype="text");if("&nbsp;"==i||"&#160;"==i||1==i.length&&160==i.charCodeAt(0))i="";p=e.jgrid.createEl.call(n,h[s].edittype,p,i,!0,e.extend({},e.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})),e(p).addClass("editable"),l?e("span:first",this).append(p):e(this).append(p),"select"==h[s].edittype&&"undefined"!=typeof h[s].editoptions&&!0===h[s].editoptions.multiple&&"undefined"==typeof h[s].editoptions.dataUrl&&e.browser.msie&&e(p).width(e(p).width()),o++}}),0<o&&(f.id=t,n.p.savedRow.push(f),e(l).attr("editable","1"),e("td:eq("+u+") input",l).focus(),!0===c.keys&&e(l).bind("keydown",function(r){if(27===r.keyCode){e(n).jqGrid("restoreRow",t,c.afterrestorefunc);if(n.p._inlinenav)try{e(n).jqGrid("showAddEditButtons")}catch(i){}return!1}if(13===r.keyCode){if("TEXTAREA"==r.target.tagName)return!0;if(e(n).jqGrid("saveRow",t,c)&&n.p._inlinenav)try{e(n).jqGrid("showAddEditButtons")}catch(s){}return!1}}),e(n).triggerHandler("jqGridInlineEditRow",[t,c]),e.isFunction(c.oneditfunc)&&c.oneditfunc.call(n,t)))))})},saveRow:function(t,n,r,i,s,o,u){var f=e.makeArray(arguments).slice(1),l={};if("object"===e.type(f[0]))l=f[0];else if(e.isFunction(n)&&(l.successfunc=n),"undefined"!=typeof r&&(l.url=r),"undefined"!=typeof i&&(l.extraparam=i),e.isFunction(s)&&(l.aftersavefunc=s),e.isFunction(o)&&(l.errorfunc=o),e.isFunction(u))l.afterrestorefunc=u;var l=e.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,l),c=!1,h=this[0],p,d={},v={},m={},g,y,b;if(!h.grid)return c;b=e(h).jqGrid("getInd",t,!0);if(!1===b)return c;f=e(b).attr("editable"),l.url=l.url?l.url:h.p.editurl;if("1"===f){var w;e('td[role="gridcell"]',b).each(function(t){w=h.p.colModel[t],p=w.name;if("cb"!=p&&"subgrid"!=p&&!0===w.editable&&"rn"!=p&&!e(this).hasClass("not-editable-cell")){switch(w.edittype){case"checkbox":var n=["Yes","No"];w.editoptions&&(n=w.editoptions.value.split(":")),d[p]=e("input",this).is(":checked")?n[0]:n[1];break;case"text":case"password":case"textarea":case"button":d[p]=e("input, textarea",this).val();break;case"select":if(w.editoptions.multiple){var n=e("select",this),r=[];d[p]=e(n).val(),d[p]=d[p]?d[p].join(","):"",e("select option:selected",this).each(function(t,n){r[t]=e(n).text()}),v[p]=r.join(",")}else d[p]=e("select option:selected",this).val(),v[p]=e("select option:selected",this).text();w.formatter&&"select"==w.formatter&&(v={});break;case"custom":try{if(!w.editoptions||!e.isFunction(w.editoptions.custom_value))throw"e1";if(d[p]=w.editoptions.custom_value.call(h,e(".customelement",this),"get"),void 0===d[p])throw"e2"}catch(i){"e1"==i&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"==i?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,i.message,e.jgrid.edit.bClose)}}y=e.jgrid.checkValues(d[p],t,h);if(!1===y[0])return y[1]=d[p]+" "+y[1],!1;h.p.autoencode&&(d[p]=e.jgrid.htmlEncode(d[p])),"clientArray"!==l.url&&w.editoptions&&!0===w.editoptions.NullIfEmpty&&""===d[p]&&(m[p]="null")}});if(!1===y[0]){try{var E=e.jgrid.findPos(e("#"+e.jgrid.jqID(t),h.grid.bDiv)[0]);e.jgrid.info_dialog(e.jgrid.errors.errcap,y[1],e.jgrid.edit.bClose,{left:E[0],top:E[1]})}catch(S){alert(y[1])}return c}var x,f=h.p.prmNames;x=f.oper,E=f.id,d&&(d[x]=f.editoper,d[E]=t,"undefined"==typeof h.p.inlineData&&(h.p.inlineData={}),d=e.extend({},d,h.p.inlineData,l.extraparam));if("clientArray"==l.url){d=e.extend({},d,v),h.p.autoencode&&e.each(d,function(t,n){d[t]=e.jgrid.htmlDecode(n)}),E=e(h).jqGrid("setRowData",t,d),e(b).attr("editable","0");for(f=0;f<h.p.savedRow.length;f++)if(h.p.savedRow[f].id==t){g=f;break}0<=g&&h.p.savedRow.splice(g,1),e(h).triggerHandler("jqGridInlineAfterSaveRow",[t,E,d,l]),e.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(h,t,E),c=!0,e(b).unbind("keydown")}else e("#lui_"+e.jgrid.jqID(h.p.id)).show(),m=e.extend({},d,m),m[E]=e.jgrid.stripPref(h.p.idPrefix,m[E]),e.ajax(e.extend({url:l.url,data:e.isFunction(h.p.serializeRowData)?h.p.serializeRowData.call(h,m):m,type:l.mtype,async:!1,complete:function(n,r){e("#lui_"+e.jgrid.jqID(h.p.id)).hide();if(r==="success"){var i=!0,s;s=e(h).triggerHandler("jqGridInlineSuccessSaveRow",[n,t,l]),e.isArray(s)||(s=[!0,d]),s[0]&&e.isFunction(l.successfunc)&&(s=l.successfunc.call(h,n)),e.isArray(s)?(i=s[0],d=s[1]?s[1]:d):i=s;if(i===!0){h.p.autoencode&&e.each(d,function(t,n){d[t]=e.jgrid.htmlDecode(n)}),d=e.extend({},d,v),e(h).jqGrid("setRowData",t,d),e(b).attr("editable","0");for(i=0;i<h.p.savedRow.length;i++)if(h.p.savedRow[i].id==t){g=i;break}g>=0&&h.p.savedRow.splice(g,1),e(h).triggerHandler("jqGridInlineAfterSaveRow",[t,n,d,l]),e.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(h,t,n),c=!0,e(b).unbind("keydown")}else e(h).triggerHandler("jqGridInlineErrorSaveRow",[t,n,r,null,l]),e.isFunction(l.errorfunc)&&l.errorfunc.call(h,t,n,r,null),l.restoreAfterError===!0&&e(h).jqGrid("restoreRow",t,l.afterrestorefunc)}},error:function(n,r,i){e("#lui_"+e.jgrid.jqID(h.p.id)).hide(),e(h).triggerHandler("jqGridInlineErrorSaveRow",[t,n,r,i,l]);if(e.isFunction(l.errorfunc))l.errorfunc.call(h,t,n,r,i);else try{e.jgrid.info_dialog(e.jgrid.errors.errcap,'<div class="ui-state-error">'+n.responseText+"</div>",e.jgrid.edit.bClose,{buttonalign:"right"})}catch(s){alert(n.responseText)}l.restoreAfterError===!0&&e(h).jqGrid("restoreRow",t,l.afterrestorefunc)}},e.jgrid.ajaxOptions,h.p.ajaxRowOptions||{}))}return c},restoreRow:function(t,n){var r=e.makeArray(arguments).slice(1),i={};return"object"===e.type(r[0])?i=r[0]:e.isFunction(n)&&(i.afterrestorefunc=n),i=e.extend(!0,e.jgrid.inlineEdit,i),this.each(function(){var n=this,r,s,o={};if(n.grid){s=e(n).jqGrid("getInd",t,!0);if(s!==!1){for(var u=0;u<n.p.savedRow.length;u++)if(n.p.savedRow[u].id==t){r=u;break}if(r>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+e.jgrid.jqID(s.id)).datepicker("hide")}catch(f){}e.each(n.p.colModel,function(){this.editable===!0&&this.name in n.p.savedRow[r]&&(o[this.name]=n.p.savedRow[r][this.name])}),e(n).jqGrid("setRowData",t,o),e(s).attr("editable","0").unbind("keydown"),n.p.savedRow.splice(r,1),e("#"+e.jgrid.jqID(t),"#"+e.jgrid.jqID(n.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){e(n).jqGrid("delRowData",t)},0)}e(n).triggerHandler("jqGridInlineAfterRestoreRow",[t]),e.isFunction(i.afterrestorefunc)&&i.afterrestorefunc.call(n,t)}}})},addRow:function(t){return t=e.extend(!0,{rowID:"new_row",initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var n=this;!0===t.useDefValues&&e(n.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,r=e.isFunction(r)?r.call(n):r;t.initdata[this.name]=r}}),e(n).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=n.p.idPrefix+t.rowID,e("#"+e.jgrid.jqID(t.rowID),"#"+e.jgrid.jqID(n.p.id)).addClass("jqgrid-new-row");if(t.useFormatter)e("#"+e.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+e.jgrid.jqID(n.p.id)).click();else{var r=n.p.prmNames;t.addRowParams.extraparam[r.oper]=r.addoper,e(n).jqGrid("editRow",t.rowID,t.addRowParams),e(n).jqGrid("setSelection",t.rowID)}}})},inlineNav:function(t,n){return n=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{useFormatter:!1,rowID:"new_row"},editParams:{},restoreAfterSelect:!0},e.jgrid.nav,n||{}),this.each(function(){if(this.grid){var r=this,i,s=e.jgrid.jqID(r.p.id);r.p._inlinenav=!0;if(!0===n.addParams.useFormatter){var o=r.p.colModel,u;for(u=0;u<o.length;u++)if(o[u].formatter&&"actions"===o[u].formatter){o[u].formatoptions&&(o=e.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},o[u].formatoptions),n.addParams.addRowParams={keys:o.keys,oneditfunc:o.onEdit,successfunc:o.onSuccess,url:o.url,extraparam:o.extraparam,aftersavefunc:o.afterSavef,errorfunc:o.onError,afterrestorefunc:o.afterRestore});break}}n.add&&e(r).jqGrid("navButtonAdd",t,{caption:n.addtext,title:n.addtitle,buttonicon:n.addicon,id:r.p.id+"_iladd",onClickButton:function(){e(r).jqGrid("addRow",n.addParams),n.addParams.useFormatter||(e("#"+s+"_ilsave").removeClass("ui-state-disabled"),e("#"+s+"_ilcancel").removeClass("ui-state-disabled"),e("#"+s+"_iladd").addClass("ui-state-disabled"),e("#"+s+"_iledit").addClass("ui-state-disabled"))}}),n.edit&&e(r).jqGrid("navButtonAdd",t,{caption:n.edittext,title:n.edittitle,buttonicon:n.editicon,id:r.p.id+"_iledit",onClickButton:function(){var t=e(r).jqGrid("getGridParam","selrow");t?(e(r).jqGrid("editRow",t,n.editParams),e("#"+s+"_ilsave").removeClass("ui-state-disabled"),e("#"+s+"_ilcancel").removeClass("ui-state-disabled"),e("#"+s+"_iladd").addClass("ui-state-disabled"),e("#"+s+"_iledit").addClass("ui-state-disabled")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+s,jqm:!0}),e("#jqg_alrt").focus())}}),n.save&&(e(r).jqGrid("navButtonAdd",t,{caption:n.savetext||"",title:n.savetitle||"Save row",buttonicon:n.saveicon,id:r.p.id+"_ilsave",onClickButton:function(){var t=r.p.savedRow[0].id;if(t){var i=r.p.prmNames,o=i.oper;n.editParams.extraparam||(n.editParams.extraparam={}),n.editParams.extraparam[o]=e("#"+e.jgrid.jqID(t),"#"+s).hasClass("jqgrid-new-row")?i.addoper:i.editoper,e(r).jqGrid("saveRow",t,n.editParams)&&e(r).jqGrid("showAddEditButtons")}else e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+s,jqm:!0}),e("#jqg_alrt").focus()}}),e("#"+s+"_ilsave").addClass("ui-state-disabled")),n.cancel&&(e(r).jqGrid("navButtonAdd",t,{caption:n.canceltext||"",title:n.canceltitle||"Cancel row editing",buttonicon:n.cancelicon,id:r.p.id+"_ilcancel",onClickButton:function(){var t=r.p.savedRow[0].id;t?(e(r).jqGrid("restoreRow",t,n.editParams),e(r).jqGrid("showAddEditButtons")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+s,jqm:!0}),e("#jqg_alrt").focus())}}),e("#"+s+"_ilcancel").addClass("ui-state-disabled")),!0===n.restoreAfterSelect&&(i=e.isFunction(r.p.beforeSelectRow)?r.p.beforeSelectRow:!1,r.p.beforeSelectRow=function(t,s){var o=!0;return r.p.savedRow.length>0&&r.p._inlinenav===!0&&t!==r.p.selrow&&r.p.selrow!==null&&(r.p.selrow==n.addParams.rowID?e(r).jqGrid("delRowData",r.p.selrow):e(r).jqGrid("restoreRow",r.p.selrow,n.editParams),e(r).jqGrid("showAddEditButtons")),i&&(o=i.call(r,t,s)),o})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=e.jgrid.jqID(this.p.id);e("#"+t+"_ilsave").addClass("ui-state-disabled"),e("#"+t+"_ilcancel").addClass("ui-state-disabled"),e("#"+t+"_iladd").removeClass("ui-state-disabled"),e("#"+t+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(e){e.jgrid.extend({editCell:function(t,n,r){return this.each(function(){var i=this,s,o,u,l;if(i.grid&&!0===i.p.cellEdit){n=parseInt(n,10),i.p.selrow=i.rows[t].id,i.p.knv||e(i).jqGrid("GridNav");if(0<i.p.savedRow.length){if(!0===r&&t==i.p.iRow&&n==i.p.iCol)return;e(i).jqGrid("saveCell",i.p.savedRow[0].id,i.p.savedRow[0].ic)}else window.setTimeout(function(){e("#"+e.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0);l=i.p.colModel[n],s=l.name;if("subgrid"!=s&&"cb"!=s&&"rn"!=s){u=e("td:eq("+n+")",i.rows[t]);if(!0===l.editable&&!0===r&&!u.hasClass("not-editable-cell")){0<=parseInt(i.p.iCol,10)&&0<=parseInt(i.p.iRow,10)&&(e("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),e(u).addClass("edit-cell ui-state-highlight"),e(i.rows[t]).addClass("selected-row ui-state-hover");try{o=e.unformat.call(i,u,{rowId:i.rows[t].id,colModel:l},n)}catch(c){o=l.edittype&&"textarea"==l.edittype?e(u).text():e(u).html()}i.p.autoencode&&(o=e.jgrid.htmlDecode(o)),l.edittype||(l.edittype="text"),i.p.savedRow.push({id:t,ic:n,name:s,v:o});if("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))o="";if(e.isFunction(i.p.formatCell)){var h=i.p.formatCell.call(i,i.rows[t].id,s,o,t,n);void 0!==h&&(o=h)}var h=e.extend({},l.editoptions||{},{id:t+"_"+s,name:s}),p=e.jgrid.createEl.call(i,l.edittype,h,o,!0,e.extend({},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));e(i).triggerHandler("jqGridBeforeEditCell",[i.rows[t].id,s,o,t,n]),e.isFunction(i.p.beforeEditCell)&&i.p.beforeEditCell.call(i,i.rows[t].id,s,o,t,n),e(u).html("").append(p).attr("tabindex","0"),window.setTimeout(function(){e(p).focus()},0),e("input, select, textarea",u).bind("keydown",function(r){r.keyCode===27&&(e("input.hasDatepicker",u).length>0?e(".ui-datepicker").is(":hidden")?e(i).jqGrid("restoreCell",t,n):e("input.hasDatepicker",u).datepicker("hide"):e(i).jqGrid("restoreCell",t,n));if(r.keyCode===13)return e(i).jqGrid("saveCell",t,n),!1;if(r.keyCode===9){if(i.grid.hDiv.loading)return!1;r.shiftKey?e(i).jqGrid("prevCell",t,n):e(i).jqGrid("nextCell",t,n)}r.stopPropagation()}),e(i).triggerHandler("jqGridAfterEditCell",[i.rows[t].id,s,o,t,n]),e.isFunction(i.p.afterEditCell)&&i.p.afterEditCell.call(i,i.rows[t].id,s,o,t,n)}else 0<=parseInt(i.p.iCol,10)&&0<=parseInt(i.p.iRow,10)&&(e("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),u.addClass("edit-cell ui-state-highlight"),e(i.rows[t]).addClass("selected-row ui-state-hover"),o=u.html().replace(/\&#160\;/ig,""),e(i).triggerHandler("jqGridSelectCell",[i.rows[t].id,s,o,t,n]),e.isFunction(i.p.onSelectCell)&&i.p.onSelectCell.call(i,i.rows[t].id,s,o,t,n);i.p.iCol=n,i.p.iRow=t}}})},saveCell:function(t,n){return this.each(function(){var r=this,i;if(r.grid&&!0===r.p.cellEdit){i=1<=r.p.savedRow.length?0:null;if(null!==i){var s=e("td:eq("+n+")",r.rows[t]),o,u,a=r.p.colModel[n],l=a.name,c=e.jgrid.jqID(l);switch(a.edittype){case"select":if(a.editoptions.multiple){var c=e("#"+t+"_"+c,r.rows[t]),h=[];(o=e(c).val())?o.join(","):o="",e("option:selected",c).each(function(t,n){h[t]=e(n).text()}),u=h.join(",")}else o=e("#"+t+"_"+c+" option:selected",r.rows[t]).val(),u=e("#"+t+"_"+c+" option:selected",r.rows[t]).text();a.formatter&&(u=o);break;case"checkbox":var p=["Yes","No"];a.editoptions&&(p=a.editoptions.value.split(":")),u=o=e("#"+t+"_"+c,r.rows[t]).is(":checked")?p[0]:p[1];break;case"password":case"text":case"textarea":case"button":u=o=e("#"+t+"_"+c,r.rows[t]).val();break;case"custom":try{if(!a.editoptions||!e.isFunction(a.editoptions.custom_value))throw"e1";o=a.editoptions.custom_value.call(r,e(".customelement",s),"get");if(void 0===o)throw"e2";u=o}catch(v){"e1"==v&&e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),"e2"==v?e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):e.jgrid.info_dialog(jQuery.jgrid.errors.errcap,v.message,jQuery.jgrid.edit.bClose)}}if(u!==r.p.savedRow[i].v){if(i=e(r).triggerHandler("jqGridBeforeSaveCell",[r.rows[t].id,l,o,t,n]))u=o=i;e.isFunction(r.p.beforeSaveCell)&&(i=r.p.beforeSaveCell.call(r,r.rows[t].id,l,o,t,n))&&(u=o=i);var m=e.jgrid.checkValues(o,n,r);if(!0===m[0]){i=e(r).triggerHandler("jqGridBeforeSubmitCell",[r.rows[t].id,l,o,t,n])||{},e.isFunction(r.p.beforeSubmitCell)&&((i=r.p.beforeSubmitCell.call(r,r.rows[t].id,l,o,t,n))||(i={})),0<e("input.hasDatepicker",s).length&&e("input.hasDatepicker",s).datepicker("hide");if("remote"==r.p.cellsubmit)if(r.p.cellurl){var g={};r.p.autoencode&&(o=e.jgrid.htmlEncode(o)),g[l]=o,p=r.p.prmNames,a=p.id,c=p.oper,g[a]=e.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),g[c]=p.editoper,g=e.extend(i,g),e("#lui_"+e.jgrid.jqID(r.p.id)).show(),r.grid.hDiv.loading=!0,e.ajax(e.extend({url:r.p.cellurl,data:e.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,g):g,type:"POST",complete:function(i,a){e("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1;if(a=="success"){var c=e(r).triggerHandler("jqGridAfterSubmitCell",[r,i,g.id,l,o,t,n])||[!0,""];c[0]===!0&&e.isFunction(r.p.afterSubmitCell)&&(c=r.p.afterSubmitCell.call(r,i,g.id,l,o,t,n)),c[0]===!0?(e(s).empty(),e(r).jqGrid("setCell",r.rows[t].id,n,u,!1,!1,!0),e(s).addClass("dirty-cell"),e(r.rows[t]).addClass("edited"),e(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,l,o,t,n]),e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,l,o,t,n),r.p.savedRow.splice(0,1)):(e.jgrid.info_dialog(e.jgrid.errors.errcap,c[1],e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,n))}},error:function(i,s,o){e("#lui_"+e.jgrid.jqID(r.p.id)).hide(),r.grid.hDiv.loading=!1,e(r).triggerHandler("jqGridErrorCell",[i,s,o]),e.isFunction(r.p.errorCell)?r.p.errorCell.call(r,i,s,o):e.jgrid.info_dialog(e.jgrid.errors.errcap,i.status+" : "+i.statusText+"<br/>"+s,e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,n)}},e.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else try{e.jgrid.info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,n)}catch(y){}"clientArray"==r.p.cellsubmit&&(e(s).empty(),e(r).jqGrid("setCell",r.rows[t].id,n,u,!1,!1,!0),e(s).addClass("dirty-cell"),e(r.rows[t]).addClass("edited"),e(r).triggerHandler("jqGridAfterSaveCell",[r.rows[t].id,l,o,t,n]),e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.rows[t].id,l,o,t,n),r.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){e.jgrid.info_dialog(e.jgrid.errors.errcap,o+" "+m[1],e.jgrid.edit.bClose)},100),e(r).jqGrid("restoreCell",t,n)}catch(w){}}else e(r).jqGrid("restoreCell",t,n)}e.browser.opera?e("#"+e.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus():window.setTimeout(function(){e("#"+e.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,n){return this.each(function(){var r=this,i;if(r.grid&&!0===r.p.cellEdit){i=1<=r.p.savedRow.length?0:null;if(null!==i){var s=e("td:eq("+n+")",r.rows[t]);if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",s).datepicker("hide")}catch(o){}e(s).empty().attr("tabindex","-1"),e(r).jqGrid("setCell",r.rows[t].id,n,r.p.savedRow[i].v,!1,!1,!0),e(r).triggerHandler("jqGridAfterRestoreCell",[r.rows[t].id,r.p.savedRow[i].v,t,n]),e.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.rows[t].id,r.p.savedRow[i].v,t,n),r.p.savedRow.splice(0,1)}window.setTimeout(function(){e("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,n){return this.each(function(){var r=!1;if(this.grid&&!0===this.p.cellEdit){for(var i=n+1;i<this.p.colModel.length;i++)if(!0===this.p.colModel[i].editable){r=i;break}!1!==r?e(this).jqGrid("editCell",t,r,!0):0<this.p.savedRow.length&&e(this).jqGrid("saveCell",t,n)}})},prevCell:function(t,n){return this.each(function(){var r=!1;if(this.grid&&!0===this.p.cellEdit){for(var i=n-1;0<=i;i--)if(!0===this.p.colModel[i].editable){r=i;break}!1!==r?e(this).jqGrid("editCell",t,r,!0):0<this.p.savedRow.length&&e(this).jqGrid("saveCell",t,n)}})},GridNav:function(){return this.each(function(){function t(t,n,i){if("v"==i.substr(0,1)){var s=e(r.grid.bDiv)[0].clientHeight,o=e(r.grid.bDiv)[0].scrollTop,u=r.rows[t].offsetTop+r.rows[t].clientHeight,f=r.rows[t].offsetTop;"vd"==i&&u>=s&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop+r.rows[t].clientHeight),"vu"==i&&f<o&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop-r.rows[t].clientHeight)}"h"==i&&(i=e(r.grid.bDiv)[0].clientWidth,s=e(r.grid.bDiv)[0].scrollLeft,o=r.rows[t].cells[n].offsetLeft,r.rows[t].cells[n].offsetLeft+r.rows[t].cells[n].clientWidth>=i+parseInt(s,10)?e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft+r.rows[t].cells[n].clientWidth:o<s&&(e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft-r.rows[t].cells[n].clientWidth))}function n(e,t){var n,i;if("lft"==t){n=e+1;for(i=e;0<=i;i--)if(!0!==r.p.colModel[i].hidden){n=i;break}}if("rgt"==t){n=e-1;for(i=e;i<r.p.colModel.length;i++)if(!0!==r.p.colModel[i].hidden){n=i;break}}return n}var r=this;if(r.grid&&!0===r.p.cellEdit){r.p.knv=r.p.id+"_kn";var i=e("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+r.p.knv+"'></span></span>"),s,o;e(i).insertBefore(r.grid.cDiv),e("#"+r.p.knv).focus().keydown(function(i){o=i.keyCode,"rtl"==r.p.direction&&(37===o?o=39:39===o&&(o=37));switch(o){case 38:0<r.p.iRow-1&&(t(r.p.iRow-1,r.p.iCol,"vu"),e(r).jqGrid("editCell",r.p.iRow-1,r.p.iCol,!1));break;case 40:r.p.iRow+1<=r.rows.length-1&&(t(r.p.iRow+1,r.p.iCol,"vd"),e(r).jqGrid("editCell",r.p.iRow+1,r.p.iCol,!1));break;case 37:0<=r.p.iCol-1&&(s=n(r.p.iCol-1,"lft"),t(r.p.iRow,s,"h"),e(r).jqGrid("editCell",r.p.iRow,s,!1));break;case 39:r.p.iCol+1<=r.p.colModel.length-1&&(s=n(r.p.iCol+1,"rgt"),t(r.p.iRow,s,"h"),e(r).jqGrid("editCell",r.p.iRow,s,!1));break;case 13:0<=parseInt(r.p.iCol,10)&&0<=parseInt(r.p.iRow,10)&&e(r).jqGrid("editCell",r.p.iRow,r.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(t){var n=[];return t||(t="all"),this.each(function(){var r=this,i;r.grid&&!0===r.p.cellEdit&&e(r.rows).each(function(s){var o={};e(this).hasClass("edited")&&(e("td",this).each(function(n){i=r.p.colModel[n].name;if("cb"!==i&&"subgrid"!==i)if("dirty"==t){if(e(this).hasClass("dirty-cell"))try{o[i]=e.unformat.call(r,this,{rowId:r.rows[s].id,colModel:r.p.colModel[n]},n)}catch(u){o[i]=e.jgrid.htmlDecode(e(this).html())}}else try{o[i]=e.unformat.call(r,this,{rowId:r.rows[s].id,colModel:r.p.colModel[n]},n)}catch(f){o[i]=e.jgrid.htmlDecode(e(this).html())}}),o.id=this.id,n.push(o))})}),n}})}(jQuery),function(e){e.fn.jqm=function(r){var i={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:s,ajaxText:"",target:s,modal:s,toTop:s,onShow:s,onHide:s,onLoad:s};return this.each(function(){if(this._jqm)return n[this._jqm].c=e.extend({},n[this._jqm].c,r);t++,this._jqm=t,n[t]={c:e.extend(i,e.jqm.params,r),a:s,w:e(this).addClass("jqmID"+t),s:t},i.trigger&&e(this).jqmAddTrigger(i.trigger)})},e.fn.jqmAddClose=function(e){return l(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return l(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,u){var f=n[t],l=f.c,c="."+l.closeClass,h=parseInt(f.w.css("z-index")),h=0<h?h:3e3,v=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":h-1,opacity:l.overlay/100});if(f.a)return s;f.t=u,f.a=!0,f.w.css("z-index",h),l.modal?(r[0]||setTimeout(function(){a("bind")},1),r.push(t)):0<l.overlay?l.closeoverlay&&f.w.jqmAddClose(v):v=s,f.o=v?v.addClass(l.overlayClass).prependTo("body"):s;if(i&&(e("html,body").css({height:"100%",width:"100%"}),v)){var v=v.css({position:"absolute"})[0],m;for(m in{Top:1,Left:1})v.style.setExpression(m.toLowerCase(),"(_=(document.documentElement.scroll"+m+" || document.body.scroll"+m+"))+'px'")}return l.ajax?(h=l.target||f.w,v=l.ajax,h="string"==typeof h?e(h,f.w):e(h),v="@"==v.substr(0,1)?e(u).attr(v.substring(1)):v,h.html(l.ajaxText).load(v,function(){l.onLoad&&l.onLoad.call(this,f),c&&f.w.jqmAddClose(e(c,f.w)),o(f)})):c&&f.w.jqmAddClose(e(c,f.w)),l.toTop&&f.o&&f.w.before('<span id="jqmP'+f.w[0]._jqm+'"></span>').insertAfter(f.o),l.onShow?l.onShow(f):f.w.show(),o(f),s},close:function(t){return t=n[t],t.a?(t.a=s,r[0]&&(r.pop(),r[0]||a("unbind")),t.c.toTop&&t.o&&e("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove()),s):s},params:{}};var t=0,n=e.jqm.hash,r=[],i=e.browser.msie&&"6.0"==e.browser.version,s=!1,o=function(t){var n=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});i&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(n):e("iframe.jqm",t.w)[0]||t.w.prepend(n)),u(t)},u=function(t){try{e(":input:visible",t.w)[0].focus()}catch(n){}},a=function(t){e(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var i=n[r[r.length-1]];return(t=!e(t.target).parents(".jqmID"+i.s)[0])&&u(i),!t},l=function(t,r,i){return t.each(function(){var t=this._jqm;e(r).each(function(){this[i]||(this[i]=[],e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])n[this[e][t]]&&n[this[e][t]].w[e](this);return s})),this[i].push(t)})})}}(jQuery),function(e){e.fn.jqDrag=function(e){return o(this,e,"d")},e.fn.jqResize=function(e,t){return o(this,e,"r",t)},e.jqDnR={dnr:{},e:0,drag:function(e){return"d"==n.k?r.css({left:n.X+e.pageX-n.pX,top:n.Y+e.pageY-n.pY}):(r.css({width:Math.max(e.pageX-n.pX+n.W,0),height:Math.max(e.pageY-n.pY+n.H,0)}),s&&i.css({width:Math.max(e.pageX-s.pX+s.W,0),height:Math.max(e.pageY-s.pY+s.H,0)})),!1},stop:function(){e(document).unbind("mousemove",t.drag).unbind("mouseup",t.stop)}};var t=e.jqDnR,n=t.dnr,r=t.e,i,s,o=function(t,o,l,c){return t.each(function(){o=o?e(o,t):t,o.bind("mousedown",{e:t,k:l},function(t){var o=t.data,l={};r=o.e,i=c?e(c):!1;if("relative"!=r.css("position"))try{r.position(l)}catch(h){}n={X:l.left||u("left")||0,Y:l.top||u("top")||0,W:u("width")||r[0].scrollWidth||0,H:u("height")||r[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:o.k},s=i&&"d"!=o.k?{X:l.left||a("left")||0,Y:l.top||a("top")||0,W:i[0].offsetWidth||a("width")||0,H:i[0].offsetHeight||a("height")||0,pX:t.pageX,pY:t.pageY,k:o.k}:!1;if(e("input.hasDatepicker",r[0])[0])try{e("input.hasDatepicker",r[0]).datepicker("hide")}catch(p){}return e(document).mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop),!1})})},u=function(e){return parseInt(r.css(e),10)||!1},a=function(e){return parseInt(i.css(e),10)||!1}}(jQuery),function(e){e.jgrid.extend({setSubGrid:function(){return this.each(function(){var t;this.p.subGridOptions=e.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{}),this.p.colNames.unshift(""),this.p.colModel.unshift({name:"subgrid",width:e.browser.safari?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=this.p.subGridModel;if(t[0]){t[0].align=e.extend([],t[0].align||[]);for(var n=0;n<t[0].name.length;n++)t[0].align[n]=t[0].align[n]||"left"}})},addSubGridCell:function(e,t){var n="",r,i;return this.each(function(){n=this.formatCol(e,t),i=this.p.id,r=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+i+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+n+"><a href='javascript:void(0);'><span class='ui-icon "+r+"'></span></a></td>"},addSubGrid:function(t,n){return this.each(function(){var r=this;if(r.grid){var i=function(t,n,i){n=e("<td align='"+r.p.subGridModel[0].align[i]+"'></td>").html(n),e(t).append(n)},s=function(t,n){var s,o,u,a=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),f=e("<tr></tr>");for(o=0;o<r.p.subGridModel[0].name.length;o++)s=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(s).html(r.p.subGridModel[0].name[o]),e(s).width(r.p.subGridModel[0].width[o]),e(f).append(s);return e(a).append(f),t&&(u=r.p.xmlReader.subgrid,e(u.root+" "+u.row,t).each(function(){f=e("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===u.repeatitems)e(u.cell,this).each(function(t){i(f,e(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(o=0;o<t.length;o++)i(f,e(t[o],this).text()||"&#160;",o)}e(a).append(f)})),s=e("table:first",r.grid.bDiv).attr("id")+"_",e("#"+e.jgrid.jqID(s+n)).append(a),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},o=function(t,n){var s,o,u,a,f,l=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),c=e("<tr></tr>");for(o=0;o<r.p.subGridModel[0].name.length;o++)s=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(s).html(r.p.subGridModel[0].name[o]),e(s).width(r.p.subGridModel[0].width[o]),e(c).append(s);e(l).append(c);if(t&&(a=r.p.jsonReader.subgrid,s=t[a.root],"undefined"!=typeof s))for(o=0;o<s.length;o++){u=s[o],c=e("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===a.repeatitems){a.cell&&(u=u[a.cell]);for(f=0;f<u.length;f++)i(c,u[f]||"&#160;",f)}else{var h=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(h.length)for(f=0;f<h.length;f++)i(c,u[h[f]]||"&#160;",f)}e(l).append(c)}return o=
e("table:first",r.grid.bDiv).attr("id")+"_",e("#"+e.jgrid.jqID(o+n)).append(l),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},u=function(t){var n,i,u,a;n=e(t).attr("id"),i={nd_:(new Date).getTime()},i[r.p.prmNames.subgridid]=n;if(!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(a=0;a<r.p.subGridModel[0].params.length;a++)for(u=0;u<r.p.colModel.length;u++)r.p.colModel[u].name===r.p.subGridModel[0].params[a]&&(i[r.p.colModel[u].name]=e("td:eq("+u+")",t).text().replace(/\&#160\;/ig,""));if(!r.grid.hDiv.loading)switch(r.grid.hDiv.loading=!0,e("#load_"+e.jgrid.jqID(r.p.id)).show(),r.p.subgridtype||(r.p.subgridtype=r.p.datatype),e.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,i):r.p.subgridtype=r.p.subgridtype.toLowerCase(),r.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:e.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,i):i,complete:function(t){r.p.subgridtype==="xml"?s(t.responseXML,n):o(e.jgrid.parse(t.responseText),n)}},e.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}return!1},a,f,l,h=0,p,d;e.each(r.p.colModel,function(){(!0===this.hidden||"rn"===this.name||"cb"===this.name)&&h++});var v=r.rows.length,m=1;void 0!==n&&0<n&&(m=n,v=n+1);for(;m<v;)e(r.rows[m]).hasClass("jqgrow")&&e(r.rows[m].cells[t]).bind("click",function(){var n=e(this).parent("tr")[0];d=n.nextSibling;if(e(this).hasClass("sgcollapsed")){f=r.p.id,a=n.id;if(r.p.subGridOptions.reloadOnExpand===!0||r.p.subGridOptions.reloadOnExpand===!1&&!e(d).hasClass("ui-subgrid")){l=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",p=e(r).triggerHandler("jqGridSubGridBeforeExpand",[f+"_"+a,a]),(p=p===!1||p==="stop"?!1:!0)&&e.isFunction(r.p.subGridBeforeExpand)&&(p=r.p.subGridBeforeExpand.call(r,f+"_"+a,a));if(p===!1)return!1;e(n).after("<tr role='row' class='ui-subgrid'>"+l+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+r.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(r.p.colNames.length-1-h,10)+"' class='ui-widget-content subgrid-data'><div id="+f+"_"+a+" class='tablediv'></div></td></tr>"),e(r).triggerHandler("jqGridSubGridRowExpanded",[f+"_"+a,a]),e.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,f+"_"+a,a):u(n)}else e(d).show();e(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),r.p.subGridOptions.selectOnExpand&&e(r).jqGrid("setSelection",a)}else if(e(this).hasClass("sgexpanded")){p=e(r).triggerHandler("jqGridSubGridRowColapsed",[f+"_"+a,a]),(p=p===!1||p==="stop"?!1:!0)&&e.isFunction(r.p.subGridRowColapsed)&&(a=n.id,p=r.p.subGridRowColapsed.call(r,f+"_"+a,a));if(p===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?e(d).remove(".ui-subgrid"):e(d).hasClass("ui-subgrid")&&e(d).hide(),e(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),m++;!0===r.p.subGridOptions.expandOnLoad&&e(r.rows).filter(".jqgrow").each(function(t,n){e(n.cells[0]).click()}),r.subGridXml=function(e,t){s(e,t)},r.subGridJson=function(e,t){o(e,t)}}})},expandSubGridRow:function(t){return this.each(function(){if((this.grid||t)&&!0===this.p.subGrid){var n=e(this).jqGrid("getInd",t,!0);n&&(n=e("td.sgcollapsed",n)[0])&&e(n).trigger("click")}})},collapseSubGridRow:function(t){return this.each(function(){if((this.grid||t)&&!0===this.p.subGrid){var n=e(this).jqGrid("getInd",t,!0);n&&(n=e("td.sgexpanded",n)[0])&&e(n).trigger("click")}})},toggleSubGridRow:function(t){return this.each(function(){if((this.grid||t)&&!0===this.p.subGrid){var n=e(this).jqGrid("getInd",t,!0);if(n){var r=e("td.sgcollapsed",n)[0];r?e(r).trigger("click"):(r=e("td.sgexpanded",n)[0])&&e(r).trigger("click")}}})}})}(jQuery),function(e){e.extend(e.jgrid,{template:function(t){var n=e.makeArray(arguments).slice(1),r=1;return void 0===t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){if(!isNaN(parseInt(t,10)))return r++,n[parseInt(t,10)];for(var i=n[r],s=i.length;s--;)if(t===i[s].nm)return i[s].v;r++})}}),e.jgrid.extend({groupingSetup:function(){return this.each(function(){var t=this.p.groupingView;if(null===t||"object"!=typeof t&&!e.isFunction(t))this.p.grouping=!1;else if(t.groupField.length){"undefined"==typeof t.visibiltyOnNextGrouping&&(t.visibiltyOnNextGrouping=[]),t.lastvalues=[],t.groups=[],t.counters=[];for(var n=0;n<t.groupField.length;n++)t.groupOrder[n]||(t.groupOrder[n]="asc"),t.groupText[n]||(t.groupText[n]="{0}"),"boolean"!=typeof t.groupColumnShow[n]&&(t.groupColumnShow[n]=!0),"boolean"!=typeof t.groupSummary[n]&&(t.groupSummary[n]=!1),!0===t.groupColumnShow[n]?(t.visibiltyOnNextGrouping[n]=!0,e(this).jqGrid("showCol",t.groupField[n])):(t.visibiltyOnNextGrouping[n]=e("#"+e.jgrid.jqID(this.p.id+"_"+t.groupField[n])).is(":visible"),e(this).jqGrid("hideCol",t.groupField[n]));t.summary=[];for(var n=this.p.colModel,r=0,i=n.length;r<i;r++)n[r].summaryType&&t.summary.push({nm:n[r].name,st:n[r].summaryType,v:"",sr:n[r].summaryRound,srt:n[r].summaryRoundType||"round"})}else this.p.grouping=!1})},groupingPrepare:function(t,n,r,i){return this.each(function(){for(var s=this.p.groupingView,o=this,u=s.groupField.length,l,c,h=0,p=0;p<u;p++)l=s.groupField[p],c=r[l],void 0!==c&&(0===i?(s.groups.push({idx:p,dataIndex:l,value:c,startRow:i,cnt:1,summary:[]}),s.lastvalues[p]=c,s.counters[p]={cnt:1,pos:s.groups.length-1,summary:e.extend(!0,[],s.summary)}):"object"!=typeof c&&s.lastvalues[p]!==c?(s.groups.push({idx:p,dataIndex:l,value:c,startRow:i,cnt:1,summary:[]}),s.lastvalues[p]=c,h=1,s.counters[p]={cnt:1,pos:s.groups.length-1,summary:e.extend(!0,[],s.summary)}):1===h?(s.groups.push({idx:p,dataIndex:l,value:c,startRow:i,cnt:1,summary:[]}),s.lastvalues[p]=c,s.counters[p]={cnt:1,pos:s.groups.length-1,summary:e.extend(!0,[],s.summary)}):(s.counters[p].cnt+=1,s.groups[s.counters[p].pos].cnt=s.counters[p].cnt),e.each(s.counters[p].summary,function(){this.v=e.isFunction(this.st)?this.st.call(o,this.v,this.nm,r):e(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r)}),s.groups[s.counters[p].pos].summary=s.counters[p].summary);n.push(t)}),n},groupingToggle:function(t){return this.each(function(){var n=this.p.groupingView,r=t.split("_"),i=parseInt(r[r.length-2],10);r.splice(r.length-2,2);var r=r.join("_"),s=n.minusicon,o=n.plusicon,u=e("#"+e.jgrid.jqID(t)),u=u.length?u[0].nextSibling:null,f=e("#"+e.jgrid.jqID(t)+" span.tree-wrap-"+this.p.direction),l=!1;if(f.hasClass(s)){if(n.showSummaryOnHide){if(u)for(;u&&!e(u).hasClass("jqfoot");)e(u).hide(),u=u.nextSibling}else if(u)for(;u&&!e(u).hasClass(r+"_"+(""+i))&&!e(u).hasClass(r+"_"+(""+(i-1)));)e(u).hide(),u=u.nextSibling;f.removeClass(s).addClass(o),l=!0}else{if(u)for(;u&&!e(u).hasClass(r+"_"+(""+i))&&!e(u).hasClass(r+"_"+(""+(i-1)));)e(u).show(),u=u.nextSibling;f.removeClass(o).addClass(s)}e(this).triggerHandler("jqGridGroupingClickGroup",[t,l]),e.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,t,l)}),!1},groupingRender:function(t,n){return this.each(function(){function r(e,t,n){if(0===t)return n[e];var r=n[e].idx;if(0===r)return n[e];for(;0<=e;e--)if(n[e].idx===r-t)return n[e]}var i=this,s=i.p.groupingView,o="",u="",f,l,c=s.groupCollapse?s.plusicon:s.minusicon,h,p=[],v=s.groupField.length,c=c+(" tree-wrap-"+i.p.direction);e.each(i.p.colModel,function(e,t){for(var n=0;n<v;n++)if(s.groupField[n]===t.name){p[n]=e;break}});var m=0,g=s.groupSummary;g.reverse(),e.each(s.groups,function(E,S){m++,l=i.p.id+"ghead_"+S.idx,f=l+"_"+E,u="<span style='cursor:pointer;' class='ui-icon "+c+"' onclick=\"jQuery('#"+e.jgrid.jqID(i.p.id)+"').jqGrid('groupingToggle','"+f+"');return false;\"></span>";try{h=i.formatter(f,S.value,p[S.idx],S.value)}catch(T){h=S.value}o+='<tr id="'+f+'" role="row" class= "ui-widget-content jqgroup ui-row-'+i.p.direction+" "+l+'"><td style="padding-left:'+12*S.idx+'px;" colspan="'+n+'">'+u+e.jgrid.template(s.groupText[S.idx],h,S.cnt,S.summary)+"</td></tr>";if(v-1===S.idx){for(var N=s.groups[E+1],C=void 0!==N?s.groups[E+1].startRow:t.length,L=S.startRow;L<C;L++)o+=t[L].join("");var A;if(void 0!==N){for(A=0;A<s.groupField.length&&N.dataIndex!==s.groupField[A];A++);m=s.groupField.length-A}for(N=0;N<m;N++)if(g[N]){C="",s.groupCollapse&&!s.showSummaryOnHide&&(C=' style="display:none;"'),o+="<tr"+C+' role="row" class="ui-widget-content jqfoot ui-row-'+i.p.direction+'">';for(var C=r(E,N,s.groups),O=i.p.colModel,M,_=C.cnt,D=0;D<n;D++){var P="<td "+i.formatCol(D,1,"")+">&#160;</td>",H="{0}";e.each(C.summary,function(){if(this.nm===O[D].name){O[D].summaryTpl&&(H=O[D].summaryTpl),"avg"===this.st.toLowerCase()&&this.v&&0<_&&(this.v/=_);try{M=i.formatter("",this.v,D,this)}catch(t){M=this.v}return P="<td "+i.formatCol(D,1,"")+">"+e.jgrid.format(H,M)+"</td>",!1}}),o+=P}o+="</tr>"}m=A}}),e("#"+e.jgrid.jqID(i.p.id)+" tbody:first").append(o),o=null})},groupingGroupBy:function(t,n){return this.each(function(){"string"==typeof t&&(t=[t]);var r=this.p.groupingView;this.p.grouping=!0,"undefined"==typeof r.visibiltyOnNextGrouping&&(r.visibiltyOnNextGrouping=[]);var i;for(i=0;i<r.groupField.length;i++)!r.groupColumnShow[i]&&r.visibiltyOnNextGrouping[i]&&e(this).jqGrid("showCol",r.groupField[i]);for(i=0;i<t.length;i++)r.visibiltyOnNextGrouping[i]=e("#"+e.jgrid.jqID(this.p.id)+"_"+e.jgrid.jqID(t[i])).is(":visible");this.p.groupingView=e.extend(this.p.groupingView,n||{}),r.groupField=t,e(this).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){"undefined"==typeof t&&(t=!0),this.p.grouping=!1;if(!0===t){for(var n=this.p.groupingView,r=0;r<n.groupField.length;r++)!n.groupColumnShow[r]&&n.visibiltyOnNextGrouping[r]&&e(this).jqGrid("showCol",n.groupField);e("tr.jqgroup, tr.jqfoot","#"+e.jgrid.jqID(this.p.id)+" tbody:first").remove(),e("tr.jqgrow:hidden","#"+e.jgrid.jqID(this.p.id)+" tbody:first").show()}else e(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,n,r,i,s){var o={sum:function(){return parseFloat(t||0)+parseFloat(s[n]||0)},min:function(){return""===t?parseFloat(s[n]||0):Math.min(parseFloat(t),parseFloat(s[n]||0))},max:function(){return""===t?parseFloat(s[n]||0):Math.max(parseFloat(t),parseFloat(s[n]||0))},count:function(){return""===t&&(t=0),s.hasOwnProperty(n)?t+1:0},avg:function(){return o.sum()}};if(!o[e])throw"jqGrid Grouping No such method: "+e;return e=o[e](),null!=r&&("fixed"==i?e=e.toFixed(r):(r=Math.pow(10,r),e=Math.round(e*r)/r)),e}}})}(jQuery),function(e){e.jgrid.extend({setTreeNode:function(t,n){return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)for(var i=r.p.expColInd,s=r.p.treeReader.expanded_field,o=r.p.treeReader.leaf_field,u=r.p.treeReader.level_field,f=r.p.treeReader.icon_field,l=r.p.treeReader.loaded,h,p,v,m;t<n;)m=r.p.data[r.p._index[r.rows[t].id]],"nested"==r.p.treeGridModel&&!m[o]&&(h=parseInt(m[r.p.treeReader.left_field],10),p=parseInt(m[r.p.treeReader.right_field],10),m[o]=p===h+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=m[o]),h=parseInt(m[u],10),0===r.p.tree_root_level?(v=h+1,p=h):(v=h,p=h-1),v="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+18*v+"px;'>",v+="<div style='"+("rtl"==r.p.direction?"right:":"left:")+18*p+"px;' class='ui-icon ",void 0!==m[l]&&(m[l]="true"==m[l]||!0===m[l]?!0:!1),"true"==m[o]||!0===m[o]?(v+=(void 0!==m[f]&&""!==m[f]?m[f]:r.p.treeIcons.leaf)+" tree-leaf treeclick",m[o]=!0,p="leaf"):(m[o]=!1,p=""),m[s]=("true"==m[s]||!0===m[s]?!0:!1)&&m[l],v=!1===m[s]?v+(!0===m[o]?"'":r.p.treeIcons.plus+" tree-plus treeclick'"):v+(!0===m[o]?"'":r.p.treeIcons.minus+" tree-minus treeclick'"),v+="></div></div>",e(r.rows[t].cells[i]).wrapInner("<span class='cell-wrapper"+p+"'></span>").prepend(v),h!==parseInt(r.p.tree_root_level,10)&&((m=(m=e(r).jqGrid("getNodeParent",m))&&m.hasOwnProperty(s)?m[s]:!0)||e(r.rows[t]).css("display","none")),e(r.rows[t].cells[i]).find("div.treeclick").bind("click",function(t){return t=e(t.target||t.srcElement,r.rows).closest("tr.jqgrow")[0].id,t=r.p._index[t],r.p.data[t][o]||(r.p.data[t][s]?(e(r).jqGrid("collapseRow",r.p.data[t]),e(r).jqGrid("collapseNode",r.p.data[t])):(e(r).jqGrid("expandRow",r.p.data[t]),e(r).jqGrid("expandNode",r.p.data[t]))),!1}),!0===r.p.ExpandColClick&&e(r.rows[t].cells[i]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var t=e(t.target||t.srcElement,r.rows).closest("tr.jqgrow")[0].id,n=r.p._index[t];return r.p.data[n][o]||(r.p.data[n][s]?(e(r).jqGrid("collapseRow",r.p.data[n]),e(r).jqGrid("collapseNode",r.p.data[n])):(e(r).jqGrid("expandRow",r.p.data[n]),e(r).jqGrid("expandNode",r.p.data[n]))),e(r).jqGrid("setSelection",t),!1}),t++})},setTreeGrid:function(){return this.each(function(){var t=this,n=0,r,i=!1,s,o=[];if(t.p.treeGrid){t.p.treedatatype||e.extend(t.p,{treedatatype:t.p.datatype}),t.p.subGrid=!1,t.p.altRows=!1,t.p.pgbuttons=!1,t.p.pginput=!1,t.p.gridview=!0,null===t.p.rowTotal&&(t.p.rowNum=1e4),t.p.multiselect=!1,t.p.rowList=[],t.p.expColInd=0,r="ui-icon-triangle-1-"+("rtl"==t.p.direction?"w":"e"),t.p.treeIcons=e.extend({plus:r,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{}),"nested"==t.p.treeGridModel?t.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader):"adjacency"==t.p.treeGridModel&&(t.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader));for(s in t.p.colModel)if(t.p.colModel.hasOwnProperty(s)){r=t.p.colModel[s].name,r==t.p.ExpandColumn&&!i&&(i=!0,t.p.expColInd=n),n++;for(var u in t.p.treeReader)t.p.treeReader[u]==r&&o.push(r)}e.each(t.p.treeReader,function(r,i){i&&e.inArray(i,o)===-1&&(r==="leaf_field"&&(t.p._treeleafpos=n),n++,t.p.colNames.push(i),t.p.colModel.push({name:i,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var n=this;if(n.grid&&n.p.treeGrid){var r=e(n).jqGrid("getNodeChildren",t),i=n.p.treeReader.expanded_field,s=n.rows;e(r).each(function(){var t=e.jgrid.getAccessor(this,n.p.localReader.id);e(s.namedItem(t)).css("display",""),this[i]&&e(n).jqGrid("expandRow",this)})}})},collapseRow:function(t){this.each(function(){var n=this;if(n.grid&&n.p.treeGrid){var r=e(n).jqGrid("getNodeChildren",t),i=n.p.treeReader.expanded_field,s=n.rows;e(r).each(function(){var t=e.jgrid.getAccessor(this,n.p.localReader.id);e(s.namedItem(t)).css("display","none"),this[i]&&e(n).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var t=[];return this.each(function(){var n=this;if(n.grid&&n.p.treeGrid)switch(n.p.treeGridModel){case"nested":var r=n.p.treeReader.level_field;e(n.p.data).each(function(){parseInt(this[r],10)===parseInt(n.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":var i=n.p.treeReader.parent_id_field;e(n.p.data).each(function(){(null===this[i]||"null"==(""+this[i]).toLowerCase())&&t.push(this)})}}),t},getNodeDepth:function(t){var n=null;return this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":n=parseInt(t[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":n=e(this).jqGrid("getNodeAncestors",t).length}}),n},getNodeParent:function(t){var n=null;return this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":var r=this.p.treeReader.left_field,i=this.p.treeReader.right_field,s=this.p.treeReader.level_field,o=parseInt(t[r],10),u=parseInt(t[i],10),f=parseInt(t[s],10);e(this.p.data).each(function(){if(parseInt(this[s],10)===f-1&&parseInt(this[r],10)<o&&parseInt(this[i],10)>u)return n=this,!1});break;case"adjacency":var l=this.p.treeReader.parent_id_field,h=this.p.localReader.id;e(this.p.data).each(function(){if(this[h]==t[l])return n=this,!1})}}),n},getNodeChildren:function(t){var n=[];return this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":var r=this.p.treeReader.left_field,i=this.p.treeReader.right_field,s=this.p.treeReader.level_field,o=parseInt(t[r],10),u=parseInt(t[i],10),f=parseInt(t[s],10);e(this.p.data).each(function(){parseInt(this[s],10)===f+1&&parseInt(this[r],10)>o&&parseInt(this[i],10)<u&&n.push(this)});break;case"adjacency":var l=this.p.treeReader.parent_id_field,h=this.p.localReader.id;e(this.p.data).each(function(){this[l]==t[h]&&n.push(this)})}}),n},getFullTreeNode:function(t){var n=[];return this.each(function(){var r;if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":var i=this.p.treeReader.left_field,s=this.p.treeReader.right_field,o=this.p.treeReader.level_field,u=parseInt(t[i],10),f=parseInt(t[s],10),l=parseInt(t[o],10);e(this.p.data).each(function(){parseInt(this[o],10)>=l&&parseInt(this[i],10)>=u&&parseInt(this[i],10)<=f&&n.push(this)});break;case"adjacency":if(t){n.push(t);var h=this.p.treeReader.parent_id_field,p=this.p.localReader.id;e(this.p.data).each(function(e){r=n.length;for(e=0;e<r;e++)if(n[e][p]==this[h]){n.push(this);break}})}}}),n},getNodeAncestors:function(t){var n=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=e(this).jqGrid("getNodeParent",t);r;)n.push(r),r=e(this).jqGrid("getNodeParent",r)}),n},isVisibleNode:function(t){var n=!0;return this.each(function(){if(this.grid&&this.p.treeGrid){var r=e(this).jqGrid("getNodeAncestors",t),i=this.p.treeReader.expanded_field;e(r).each(function(){n=n&&this[i];if(!n)return!1})}}),n},isNodeLoaded:function(t){var n;return this.each(function(){if(this.grid&&this.p.treeGrid){var r=this.p.treeReader.leaf_field;n=void 0!==t?void 0!==t.loaded?t.loaded:t[r]||0<e(this).jqGrid("getNodeChildren",t).length?!0:!1:!1}}),n},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var n=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,i=this.p.treeReader.loaded,s=this.p.treeReader.level_field,o=this.p.treeReader.left_field,u=this.p.treeReader.right_field;if(!t[n]){var f=e.jgrid.getAccessor(t,this.p.localReader.id),l=e("#"+e.jgrid.jqID(f),this.grid.bDiv)[0],c=this.p._index[f];e(this).jqGrid("isNodeLoaded",this.p.data[c])?(t[n]=!0,e("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[n]=!0,e("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:f,n_left:t[o],n_right:t[u],n_level:t[s]}}):e(this).jqGrid("setGridParam",{postData:{nodeid:f,parentid:t[r],n_level:t[s]}}),e(this).trigger("reloadGrid"),t[i]=!0,"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var n=this.p.treeReader.expanded_field;t[n]&&(t[n]=!1,n=e.jgrid.getAccessor(t,this.p.localReader.id),n=e("#"+e.jgrid.jqID(n),this.grid.bDiv)[0],e("div.treeclick",n).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(t,n,r,i){return this.each(function(){if(this.grid&&this.p.treeGrid){var s,o,u,f=[],l=this,h;s=e(this).jqGrid("getRootNodes"),s=e.jgrid.from(s),s.orderBy(t,n,r,i),h=s.select(),s=0;for(o=h.length;s<o;s++)u=h[s],f.push(u),e(this).jqGrid("collectChildrenSortTree",f,u,t,n,r,i);e.each(f,function(t){var n=e.jgrid.getAccessor(this,l.p.localReader.id);e("#"+e.jgrid.jqID(l.p.id)+" tbody tr:eq("+t+")").after(e("tr#"+e.jgrid.jqID(n),l.grid.bDiv))}),f=h=s=null}})},collectChildrenSortTree:function(t,n,r,i,s,o){return this.each(function(){if(this.grid&&this.p.treeGrid){var u,f,l,p;u=e(this).jqGrid("getNodeChildren",n),u=e.jgrid.from(u),u.orderBy(r,i,s,o),p=u.select(),u=0;for(f=p.length;u<f;u++)l=p[u],t.push(l),e(this).jqGrid("collectChildrenSortTree",t,l,r,i,s,o)}})},setTreeRow:function(t,n){var r=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(r=e(this).jqGrid("setRowData",t,n))}),r},delTreeNode:function(t){return this.each(function(){var n=this.p.localReader.id,r=this.p.treeReader.left_field,i=this.p.treeReader.right_field,s,o,u;if(this.grid&&this.p.treeGrid){var f=this.p._index[t];if(void 0!==f){s=parseInt(this.p.data[f][i],10),o=s-parseInt(this.p.data[f][r],10)+1,f=e(this).jqGrid("getFullTreeNode",this.p.data[f]);if(0<f.length)for(var l=0;l<f.length;l++)e(this).jqGrid("delRowData",f[l][n]);if("nested"===this.p.treeGridModel){n=e.jgrid.from(this.p.data).greater(r,s,{stype:"integer"}).select();if(n.length)for(u in n)n.hasOwnProperty(u)&&(n[u][r]=parseInt(n[u][r],10)-o);n=e.jgrid.from(this.p.data).greater(i,s,{stype:"integer"}).select();if(n.length)for(u in n)n.hasOwnProperty(u)&&(n[u][i]=parseInt(n[u][i],10)-o)}}}})},addChildNode:function(t,n,r){var i=this[0];if(r){var s=i.p.treeReader.expanded_field,o=i.p.treeReader.leaf_field,u=i.p.treeReader.level_field,a=i.p.treeReader.parent_id_field,f=i.p.treeReader.left_field,l=i.p.treeReader.right_field,c=i.p.treeReader.loaded,h,p,v,m,g;h=0;var y=n,b;if("undefined"==typeof t||null===t){g=i.p.data.length-1;if(0<=g)for(;0<=g;)h=Math.max(h,parseInt(i.p.data[g][i.p.localReader.id],10)),g--;t=h+1}var w=e(i).jqGrid("getInd",n);b=!1;if(void 0===n||null===n||""===n)y=n=null,h="last",m=i.p.tree_root_level,g=i.p.data.length+1;else if(h="after",p=i.p._index[n],v=i.p.data[p],n=v[i.p.localReader.id],m=parseInt(v[u],10)+1,g=e(i).jqGrid("getFullTreeNode",v),g.length?(y=g=g[g.length-1][i.p.localReader.id],g=e(i).jqGrid("getInd",y)+1):g=e(i).jqGrid("getInd",n)+1,v[o])b=!0,v[s]=!0,e(i.rows[w]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(i.p.treeIcons.leaf+" tree-leaf").addClass(i.p.treeIcons.minus+" tree-minus"),i.p.data[p][o]=!1,v[c]=!0;p=g+1,r[s]=!1,r[c]=!0,r[u]=m,r[o]=!0,"adjacency"===i.p.treeGridModel&&(r[a]=n);if("nested"===i.p.treeGridModel){var E;if(null!==n){o=parseInt(v[l],10),u=e.jgrid.from(i.p.data),u=u.greaterOrEquals(l,o,{stype:"integer"}),u=u.select();if(u.length)for(E in u)u.hasOwnProperty(E)&&(u[E][f]=u[E][f]>o?parseInt(u[E][f],10)+2:u[E][f],u[E][l]=u[E][l]>=o?parseInt(u[E][l],10)+2:u[E][l]);r[f]=o,r[l]=o+1}else{o=parseInt(e(i).jqGrid("getCol",l,!1,"max"),10),u=e.jgrid.from(i.p.data).greater(f,o,{stype:"integer"}).select();if(u.length)for(E in u)u.hasOwnProperty(E)&&(u[E][f]=parseInt(u[E][f],10)+2);u=e.jgrid.from(i.p.data).greater(l,o,{stype:"integer"}).select();if(u.length)for(E in u)u.hasOwnProperty(E)&&(u[E][l]=parseInt(u[E][l],10)+2);r[f]=o+1,r[l]=o+2}}if(null===n||e(i).jqGrid("isNodeLoaded",v)||b)e(i).jqGrid("addRowData",t,r,h,y),e(i).jqGrid("setTreeNode",g,p);v&&!v[s]&&e(i.rows[w]).find("div.treeclick").click()}}})}(jQuery),function(e){e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var n=this,r=function(t,r){var i=e(r.xmlGrid.config,t)[0],s=e(r.xmlGrid.data,t)[0],o;if(xmlJsonClass.xml2json&&e.jgrid.parse){var i=xmlJsonClass.xml2json(i," "),i=e.jgrid.parse(i),u;for(u in i)i.hasOwnProperty(u)&&(o=i[u]);s?(s=i.grid.datatype,i.grid.datatype="xmlstring",i.grid.datastr=t,e(n).jqGrid(o).jqGrid("setGridParam",{datatype:s})):e(n).jqGrid(o)}else alert("xml2json or parse are not present")},i=function(t,r){if(t&&"string"==typeof t){var i=!1;e.jgrid.useJSON&&(e.jgrid.useJSON=!1,i=!0);var s=e.jgrid.parse(t);i&&(e.jgrid.useJSON=!0),i=s[r.jsonGrid.config];if(s=s[r.jsonGrid.data]){var o=i.datatype;i.datatype="jsonstring",i.datastr=s,e(n).jqGrid(i).jqGrid("setGridParam",{datatype:o})}else e(n).jqGrid(i)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(i,s){"success"==s&&(r(i.responseXML,t),e(n).triggerHandler("jqGridImportComplete",[i,t]),e.isFunction(t.importComplete)&&t.importComplete(i))}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&"string"==typeof t.impstring){var s=e.jgrid.stringToDoc(t.impstring);s&&(r(s,t),e(n).triggerHandler("jqGridImportComplete",[s,t]),e.isFunction(t.importComplete)&&t.importComplete(s),t.impstring=null),s=null}break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(r){try{i(r.responseText,t),e(n).triggerHandler("jqGridImportComplete",[r,t]),e.isFunction(t.importComplete)&&t.importComplete(r)}catch(s){}}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(i(t.impstring,t),e(n).triggerHandler("jqGridImportComplete",[t.impstring,t]),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){var t=e.extend({exptype:"xmlstring",root:"grid",ident:"	"},t||{}),n=null;return this.each(function(){if(this.grid){var r=e.extend(!0,{},e(this).jqGrid("getGridParam"));r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null;if(r.treeGrid)for(var i in r.treeReader)r.treeReader.hasOwnProperty(i)&&(r.colNames.splice(r.colNames.length-1),r.colModel.splice(r.colModel.length-1));switch(t.exptype){case"xmlstring":n="<"+t.root+">"+xmlJsonClass.json2xml(r,t.ident)+"</"+t.root+">";break;case"jsonstring":n="{"+xmlJsonClass.toJson(r,t.root,t.ident,!1)+"}",void 0!==r.postData.filters&&(n=n.replace(/filters":"/,'filters":'),n=n.replace(/}]}"/,"}]}"))}}}),n},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){if(this.grid){var n;"remote"==t.exptype&&(n=e.extend({},this.p.postData),n[t.oper]=t.tag,n=jQuery.param(n),n=-1!=t.url.indexOf("?")?t.url+"&"+n:t.url+"?"+n,window.location=n)}})}})}(jQuery);var xmlJsonClass={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var n=this.toJson(this.toObj(this.removeWhite(e)),e.nodeName,"	");return"{\n"+t+(t?n.replace(/\t/g,t):n.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var n=function(e,t,r){var i="",s,o;if(e instanceof Array)if(0===e.length)i+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else{s=0;for(o=e.length;s<o;s+=1)var u=r+n(e[s],t,r+"	")+"\n",i=i+u}else if("object"==typeof e){s=!1,i+=r+"<"+t;for(o in e)e.hasOwnProperty(o)&&("@"===o.charAt(0)?i+=" "+o.substr(1)+'="'+e[o].toString()+'"':s=!0);i+=s?">":"/>";if(s){for(o in e)e.hasOwnProperty(o)&&("#text"===o?i+=e[o]:"#cdata"===o?i+="<![CDATA["+e[o]+"]]>":"@"!==o.charAt(0)&&(i+=n(e[o],o,r+"	")));i+=("\n"===i.charAt(i.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?i+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),i='""'===e.toString()||0===e.toString().length?i+(r+"<"+t+">__EMPTY_STRING_</"+t+">"):i+(r+"<"+t+">"+e.toString()+"</"+t+">"));return i},r="",i;for(i in e)e.hasOwnProperty(i)&&(r+=n(e[i],i,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(e){var t={},n=/function/i;if(1===e.nodeType){if(e.attributes.length){var r;for(r=0;r<e.attributes.length;r+=1)t["@"+e.attributes[r].nodeName]=(e.attributes[r].nodeValue||"").toString()}if(e.firstChild){var i=r=0,s=!1,o;for(o=e.firstChild;o;o=o.nextSibling)1===o.nodeType?s=!0:3===o.nodeType&&o.nodeValue.match(/[^ \f\n\r\t\v]/)?r+=1:4===o.nodeType&&(i+=1);if(s)if(2>r&&2>i){this.removeWhite(e);for(o=e.firstChild;o;o=o.nextSibling)3===o.nodeType?t["#text"]=this.escape(o.nodeValue):4===o.nodeType?n.test(o.nodeValue)?t[o.nodeName]=[t[o.nodeName],o.nodeValue]:t["#cdata"]=this.escape(o.nodeValue):t[o.nodeName]?t[o.nodeName]instanceof Array?t[o.nodeName][t[o.nodeName].length]=this.toObj(o):t[o.nodeName]=[t[o.nodeName],this.toObj(o)]:t[o.nodeName]=this.toObj(o)}else e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):t=this.escape(this.innerXml(e));else if(r)e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):(t=this.escape(this.innerXml(e)),"__EMPTY_ARRAY_"===t?t="[]":"__EMPTY_STRING_"===t&&(t=""));else if(i)if(1<i)t=this.escape(this.innerXml(e));else for(o=e.firstChild;o;o=o.nextSibling){if(n.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}t["#cdata"]=this.escape(o.nodeValue)}}!e.attributes.length&&!e.firstChild&&(t=null)}else 9===e.nodeType?t=this.toObj(e.documentElement):alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,n,r){void 0===r&&(r=!0);var i=t?'"'+t+'"':"",s="	",o="\n";r||(o=s="");if("[]"===e)i+=t?":[]":"[]";else if(e instanceof Array){var u,a,f=[];a=0;for(u=e.length;a<u;a+=1)f[a]=this.toJson(e[a],"",n+s,r);i+=(t?":[":"[")+(1<f.length?o+n+s+f.join(","+o+n+s)+o+n:f.join(""))+"]"}else if(null===e)i+=(t&&":")+"null";else if("object"==typeof e){u=[];for(a in e)e.hasOwnProperty(a)&&(u[u.length]=this.toJson(e[a],a,n+s,r));i+=(t?":{":"{")+(1<u.length?o+n+s+u.join(","+o+n+s)+o+n:u.join(""))+"}"}else i="string"==typeof e?i+((t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):i+((t&&":")+e.toString());return i},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var n=function(e){var t="",r;if(1===e.nodeType){t+="<"+e.nodeName;for(r=0;r<e.attributes.length;r+=1)t+=" "+e.attributes[r].nodeName+'="'+(e.attributes[r].nodeValue||"").toString()+'"';if(e.firstChild){t+=">";for(r=e.firstChild;r;r=r.nextSibling)t+=n(r);t+="</"+e.nodeName+">"}else t+="/>"}else 3===e.nodeType?t+=e.nodeValue:4===e.nodeType&&(t+="<![CDATA["+e.nodeValue+"]]>");return t},e=e.firstChild;e;e=e.nextSibling)t+=n(e);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var t;for(t=e.firstChild;t;)if(3===t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var n=t.nextSibling;e.removeChild(t),t=n}else 1===t.nodeType&&this.removeWhite(t),t=t.nextSibling;return e}};(function(b){b.browser.msie&&8==b.browser.version&&(b.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"==e.style.display}),b.jgrid._multiselect=!1;if(b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var m=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(e,t){var n=m.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(r)})}return n}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),b.Widget===void 0?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)}),b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(e){return this.each(function(){function t(){n.p.disableClick=!0}var n=this,r=b.jgrid.jqID(n.p.id),r={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(e){return b(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){var r=b(t.item).parent(),r=b(">th",r),i={},s=n.p.id+"_";b.each(n.p.colModel,function(e){i[this.name]=e});var o=[];r.each(function(){var e=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");e in i&&o.push(i[e])}),b(n).jqGrid("remapColumns",o,!0,!0),b.isFunction(n.p.sortable.update)&&n.p.sortable.update(o),setTimeout(function(){n.p.disableClick=!1},50)}};n.p.sortable.options?b.extend(r,n.p.sortable.options):b.isFunction(n.p.sortable)&&(n.p.sortable={update:n.p.sortable});if(r.start){var i=r.start;r.start=function(e,n){t(),i.call(this,e,n)}}else r.start=t;n.p.sortable.exclude&&(r.items=r.items+(":not("+n.p.sortable.exclude+")")),e.sortable(r).data("sortable").floating=!0})},columnChooser:function(e){function t(e,t){e&&(typeof e=="string"?b.fn[e]&&b.fn[e].apply(t,b.makeArray(arguments).slice(2)):b.isFunction(e)&&e.apply(t,b.makeArray(arguments).slice(2)))}var n=this;if(!b("#colchooser_"+b.jgrid.jqID(n[0].p.id)).length){var r=
b('<div id="colchooser_'+n[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),i=b("select",r),e=b.extend({width:420,height:240,classname:null,done:function(e){e&&n.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},b.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal?e.modal:!1,resizable:e.resizable?e.resizable:!0,width:e.width+20},e.dialog_opts||{})},apply_perm:function(){b("option",i).each(function(){this.selected?n.jqGrid("showCol",s[this.value].name):n.jqGrid("hideCol",s[this.value].name)});var t=[];b("option:selected",i).each(function(){t.push(parseInt(this.value,10))}),b.each(t,function(){delete u[s[parseInt(this,10)].name]}),b.each(u,function(){var e=parseInt(this,10),n=t,r=e;if(r>=0){var i=n.slice(),s=i.splice(r,Math.max(n.length-r,r));r>n.length&&(r=n.length),i[r]=e,t=i.concat(s)}else t=void 0}),e.done&&e.done.call(n,t)},cleanup:function(s){t(e.dlog,r,"destroy"),t(e.msel,i,"destroy"),r.remove(),s&&e.done&&e.done.call(n)},msel_opts:{}},b.jgrid.col,e||{});if(b.ui&&b.ui.multiselect&&e.msel=="multiselect"){if(!b.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}e.msel_opts=b.extend(b.ui.multiselect.defaults,e.msel_opts)}e.caption&&r.attr("title",e.caption),e.classname&&(r.addClass(e.classname),i.addClass(e.classname)),e.width&&(b(">div",r).css({width:e.width,margin:"0 auto"}),i.css("width",e.width)),e.height&&(b(">div",r).css("height",e.height),i.css("height",e.height-10));var s=n.jqGrid("getGridParam","colModel"),o=n.jqGrid("getGridParam","colNames"),u={},a=[];i.empty(),b.each(s,function(e){u[this.name]=e,this.hidedlg?this.hidden||a.push(e):i.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+jQuery.jgrid.stripHtml(o[e])+"</option>")});var f=b.isFunction(e.dlog_opts)?e.dlog_opts.call(n,e):e.dlog_opts;t(e.dlog,r,f),f=b.isFunction(e.msel_opts)?e.msel_opts.call(n,e):e.msel_opts,t(e.msel,i,f)}},sortableRows:function(e){return this.each(function(){var t=this;t.grid&&!t.p.treeGrid&&b.fn.sortable&&(e=b.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{}),e.start&&b.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&b.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(n,r){b(r.item).css("border-width","0px"),b("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width});if(t.p.subGrid){var i=b(r.item).attr("id");try{b(t).jqGrid("collapseSubGridRow",i)}catch(s){}}e._start_&&e._start_.apply(this,[n,r])},e.update=function(n,r){b(r.item).css("border-width",""),t.p.rownumbers===!0&&b("td.jqgrid-rownum",t.rows).each(function(e){b(this).html(e+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))}),e._update_&&e._update_.apply(this,[n,r])},b("tbody:first",t).sortable(e),b("tbody:first",t).disableSelection())})},gridDnD:function(e){return this.each(function(){function t(){var e=b.data(n,"dnd");b("tr.jqgrow:not(.ui-draggable)",n).draggable(b.isFunction(e.drag)?e.drag.call(b(n),e):e.drag)}var n=this;if(n.grid&&!n.p.treeGrid&&b.fn.draggable&&b.fn.droppable){b("#jqgrid_dnd").html()===null&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof e=="string"&&e=="updateDnD"&&n.p.jqgdnd===!0)t();else{e=b.extend({drag:function(e){return b.extend({start:function(t,r){if(n.p.subGrid){var i=b(r.helper).attr("id");try{b(n).jqGrid("collapseSubGridRow",i)}catch(s){}}for(i=0;i<b.data(n,"dnd").connectWith.length;i++)b(b.data(n,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")=="0"&&b(b.data(n,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight"),b("td",r.helper).each(function(e){this.style.width=n.grid.headers[e].width+"px"}),e.onstart&&b.isFunction(e.onstart)&&e.onstart.call(b(n),t,r)},stop:function(t,r){if(r.helper.dropped&&!e.dragcopy){var i=b(r.helper).attr("id");i===void 0&&(i=b(this).attr("id")),b(n).jqGrid("delRowData",i)}for(i=0;i<b.data(n,"dnd").connectWith.length;i++)b(b.data(n,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row");e.onstop&&b.isFunction(e.onstop)&&e.onstop.call(b(n),t,r)}},e.drag_opts||{})},drop:function(e){return b.extend({accept:function(e){return b(e).hasClass("jqgrow")?(e=b(e).closest("table.ui-jqgrid-btable"),e.length>0&&b.data(e[0],"dnd")!==void 0?(e=b.data(e[0],"dnd").connectWith,b.inArray("#"+b.jgrid.jqID(this.id),e)!=-1?!0:!1):!1):e},drop:function(t,r){if(b(r.draggable).hasClass("jqgrow")){var i=b(r.draggable).attr("id"),i=r.draggable.parent().parent().jqGrid("getRowData",i);if(!e.dropbyname){var s=0,o={},u,f=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(var l in i)u=f[s].name,u=="cb"||u=="rn"||u=="subgrid"||i.hasOwnProperty(l)&&f[s]&&(o[u]=i[l]),s++;i=o}catch(h){}}r.helper.dropped=!0,e.beforedrop&&b.isFunction(e.beforedrop)&&(u=e.beforedrop.call(this,t,r,i,b("#"+b.jgrid.jqID(n.p.id)),b(this)),typeof u!="undefined"&&u!==null&&typeof u=="object"&&(i=u));if(r.helper.dropped){var p;e.autoid&&(b.isFunction(e.autoid)?p=e.autoid.call(this,i):(p=Math.ceil(Math.random()*1e3),p=e.autoidprefix+p)),b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",p,i,e.droppos)}e.ondrop&&b.isFunction(e.ondrop)&&e.ondrop.call(this,t,r,i)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{});if(e.connectWith){e.connectWith=e.connectWith.split(","),e.connectWith=b.map(e.connectWith,function(e){return b.trim(e)}),b.data(n,"dnd",e),n.p.reccount!="0"&&!n.p.jqgdnd&&t(),n.p.jqgdnd=!0;for(var r=0;r<e.connectWith.length;r++)b(e.connectWith[r]).droppable(b.isFunction(e.drop)?e.drop.call(b(n),e):e.drop)}}}})},gridResize:function(a){return this.each(function(){var e=this,c=b.jgrid.jqID(e.p.id);e.grid&&b.fn.resizable&&(a=b.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&b.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(t,n){b(e).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()}),b(e).jqGrid("setGridWidth",n.size.width,a.shrinkToFit),a._stop_&&a._stop_.call(e,t,n)},a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c),delete a._alsoResize_,b("#gbox_"+c).resizable(a))})}})})(jQuery),function(e){e.jgrid.extend({searchGrid:function(t){return t=e.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,multipleSearch:!1,cloneSearchRowOnAdd:!0,sopt:null,stringResult:undefined,onClose:null,useDataProxy:!1,overlay:!0},e.jgrid.search,t||{}),this.each(function(){function s(t,n){var r=t.p.postData[n.sFilter];typeof r=="string"&&(r=e.jgrid.parse(r));if(r){r.groupOp&&t.SearchFilter.setGroupOp(r.groupOp);if(r.rules){var i,s=0,o=r.rules.length,u=!1;for(;s<o;s++)i=r.rules[s],i.field!==undefined&&i.op!==undefined&&i.data!==undefined&&(u=t.SearchFilter.setFilter({sfref:t.SearchFilter.$.find(".sf:last"),filter:e.extend({},i)}),u&&t.SearchFilter.add())}}}function o(r){if(t.onClose){var i=t.onClose(r);if(typeof i=="boolean"&&!i)return}r.hide(),t.overlay===!0&&e(".jqgrid-overlay:first","#gbox_"+n.p.id).hide()}function u(){var i=e(".ui-searchFilter").length;if(i>1){var s=e("#"+r).css("zIndex");e("#"+r).css({zIndex:parseInt(s,10)+i})}e("#"+r).show(),t.overlay===!0&&e(".jqgrid-overlay:first","#gbox_"+n.p.id).show();try{e(":input:visible","#"+r)[0].focus()}catch(o){}}function a(i){var s=i!==undefined,u=e("#"+n.p.id),a={};t.multipleSearch===!1?(a[t.sField]=i.rules[0].field,a[t.sValue]=i.rules[0].data,a[t.sOper]=i.rules[0].op,a.hasOwnProperty(t.sFilter)&&delete a[t.sFilter]):(a[t.sFilter]=i,e.each([t.sField,t.sValue,t.sOper],function(e,t){a.hasOwnProperty(t)&&delete a[t]})),u[0].p.search=s,e.extend(u[0].p.postData,a),u.trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&o(e("#"+r))}function f(i){var s=i&&i.hasOwnProperty("reload")?i.reload:!0,u=e("#"+n.p.id),a={};u[0].p.search=!1,t.multipleSearch===!1?a[t.sField]=a[t.sValue]=a[t.sOper]="":a[t.sFilter]="",e.extend(u[0].p.postData,a),s&&u.trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&o(e("#"+r))}var n=this;if(!n.grid)return;var r="fbox_"+n.p.id,i=!0;if(e.fn.searchFilter){t.recreateFilter===!0&&e("#"+r).remove();if(e("#"+r).html()!==null){e.isFunction(t.beforeShowSearch)&&(i=t.beforeShowSearch(e("#"+r)),typeof i=="undefined"&&(i=!0));if(i===!1)return;u(),e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+r))}else{var l=[],c=e("#"+n.p.id).jqGrid("getGridParam","colNames"),h=e("#"+n.p.id).jqGrid("getGridParam","colModel"),d=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],v,m,g,y=[];if(t.sopt!==null){g=0;for(v=0;v<t.sopt.length;v++)(m=e.inArray(t.sopt[v],d))!=-1&&(y[g]={op:t.sopt[v],text:t.odata[m]},g++)}else for(v=0;v<d.length;v++)y[v]={op:d[v],text:t.odata[v]};e.each(h,function(n,r){var i=typeof r.search=="undefined"?!0:r.search,s=r.hidden===!0,o=e.extend({},{text:c[n],itemval:r.index||r.name},this.searchoptions),u=o.searchhidden===!0;if(typeof o.sopt!="undefined"){g=0,o.ops=[];if(o.sopt.length>0)for(v=0;v<o.sopt.length;v++)(m=e.inArray(o.sopt[v],d))!=-1&&(o.ops[g]={op:o.sopt[v],text:t.odata[m]},g++)}typeof this.stype=="undefined"&&(this.stype="text");if(this.stype=="select"&&o.dataUrl===undefined){var a;o.value?a=o.value:this.editoptions&&(a=this.editoptions.value);if(a){o.dataValues=[];if(typeof a=="string"){var f=a.split(";"),h;for(v=0;v<f.length;v++)h=f[v].split(":"),o.dataValues[v]={value:h[0],text:h[1]}}else if(typeof a=="object"){v=0;for(var y in a)a.hasOwnProperty(y)&&(o.dataValues[v]={value:y,text:a[y]},v++)}}}(u&&i||i&&!s)&&l.push(o)});if(l.length>0){e("<div id='"+r+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+n.p.id),t.stringResult===undefined&&(t.stringResult=t.multipleSearch),n.SearchFilter=e("#"+r).searchFilter(l,{groupOps:t.groupOps,operators:y,onClose:o,resetText:t.Reset,searchText:t.Find,windowTitle:t.caption,rulesText:t.rulesText,matchText:t.matchText,onSearch:a,onReset:f,stringResult:t.stringResult,ajaxSelectOptions:e.extend({},e.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}),clone:t.cloneSearchRowOnAdd}),e(".ui-widget-overlay","#"+r).remove(),n.p.direction=="rtl"&&e(".ui-closer","#"+r).css("float","left");if(t.drag===!0){e("#"+r+" table thead tr:first td:first").css("cursor","move");if(jQuery.fn.jqDrag)e("#"+r).jqDrag(e("#"+r+" table thead tr:first td:first"));else try{e("#"+r).draggable({handle:e("#"+r+" table thead tr:first td:first")})}catch(b){}}t.multipleSearch===!1&&(e(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+r).hide(),e("select[name='groupOp']","#"+r).hide()),t.multipleSearch===!0&&t.loadDefaults===!0&&s(n,t),e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch(e("#"+r)),e.isFunction(t.beforeShowSearch)&&(i=t.beforeShowSearch(e("#"+r)),typeof i=="undefined"&&(i=!0));if(i===!1)return;u(),e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+r)),t.closeOnEscape===!0&&e("#"+r).keydown(function(t){t.which==27&&o(e("#"+r)),t.which==13&&e(".ui-search",this).click()})}}}})},updateGridRows:function(t,n,r){var i,s=!1,o;return this.each(function(){var u=this,a,f,l,c;if(!u.grid)return!1;n||(n="id"),t&&t.length>0&&e(t).each(function(t){l=this,f=u.rows.namedItem(l[n]);if(f){c=l[n];if(r===!0&&u.p.jsonReader.repeatitems===!0){u.p.jsonReader.cell&&(l=l[u.p.jsonReader.cell]);for(var h=0;h<l.length;h++)a=u.formatter(c,l[h],h,l,"edit"),o=u.p.colModel[h].title?{title:e.jgrid.stripHtml(a)}:{},u.p.treeGrid===!0&&i==u.p.ExpandColumn?e("td:eq("+h+") > span:first",f).html(a).attr(o):e("td:eq("+h+")",f).html(a).attr(o);return s=!0,!0}e(u.p.colModel).each(function(t){i=r===!0?this.jsonmap||this.name:this.name,l[i]!==undefined&&(a=u.formatter(c,l[i],t,l,"edit"),o=this.title?{title:e.jgrid.stripHtml(a)}:{},u.p.treeGrid===!0&&i==u.p.ExpandColumn?e("td:eq("+t+") > span:first",f).html(a).attr(o):e("td:eq("+t+")",f).html(a).attr(o),s=!0)})}})}),s},filterGrid:function(t,n){return n=e.extend({gridModel:!1,gridNames:!1,gridToolbar:!1,filterModel:[],formtype:"horizontal",autosearch:!0,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:!1,enableClear:!1,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:!0},n||{}),this.each(function(){var r=this;this.p=n;if(this.p.filterModel.length===0&&this.p.gridModel===!1){alert("No filter is set");return}if(!t){alert("No target grid is set!");return}this.p.gridid=t.indexOf("#")!=-1?t:"#"+t;var i=e(this.p.gridid).jqGrid("getGridParam","colModel");if(!i){alert("Could not get grid colModel");return}if(this.p.gridModel===!0){var s=e(this.p.gridid)[0],o;e.each(i,function(e,t){var n=[];this.search=this.search===!1?!1:!0,this.editrules&&this.editrules.searchhidden===!0?o=!0:this.hidden===!0?o=!1:o=!0,this.search===!0&&o===!0&&(r.p.gridNames===!0?n.label=s.p.colNames[e]:n.label="",n.name=this.name,n.index=this.index||this.name,n.stype=this.edittype||"text",n.stype!="select"&&(n.stype="text"),n.defval=this.defval||"",n.surl=this.surl||"",n.sopt=this.editoptions||{},n.width=this.width,r.p.filterModel.push(n))})}else e.each(r.p.filterModel,function(e,t){for(var n=0;n<i.length;n++)if(this.name==i[n].name){this.index=i[n].index||this.name;break}this.index||(this.index=this.name)});var u=function(){var t={},n=0,i,s=e(r.p.gridid)[0],o;s.p.searchdata={},e.isFunction(r.p.beforeSearch)&&r.p.beforeSearch(),e.each(r.p.filterModel,function(u,a){o=this.index;if(this.stype==="select"){i=e("select[name="+o+"]",r).val();if(i)t[o]=i,r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell"),n++;else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(f){}}}else{i=e("input[name="+o+"]",r).val();if(i)t[o]=i,r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell"),n++;else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(l){}}}});var u=n>0?!0:!1;e.extend(s.p.postData,t);var a;r.p.url&&(a=e(s).jqGrid("getGridParam","url"),e(s).jqGrid("setGridParam",{url:r.p.url})),e(s).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]),a&&e(s).jqGrid("setGridParam",{url:a}),e.isFunction(r.p.afterSearch)&&r.p.afterSearch()},a=function(){var t={},n,i=0,s=e(r.p.gridid)[0],o;e.isFunction(r.p.beforeClear)&&r.p.beforeClear(),e.each(r.p.filterModel,function(u,a){o=this.index,n=this.defval?this.defval:"",this.stype||(this.stype="text");switch(this.stype){case"select":var f;e("select[name="+o+"] option",r).each(function(t){t===0&&(this.selected=!0);if(e(this).text()==n)return this.selected=!0,f=e(this).val(),!1});if(f)t[o]=f,r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell"),i++;else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(l){}}break;case"text":e("input[name="+o+"]",r).val(n);if(n)t[o]=n,r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).addClass("dirty-cell"),i++;else{r.p.marksearched&&e("#jqgh_"+this.name,s.grid.hDiv).removeClass("dirty-cell");try{delete s.p.postData[this.index]}catch(c){}}}});var u=i>0?!0:!1;e.extend(s.p.postData,t);var a;r.p.url&&(a=e(s).jqGrid("getGridParam","url"),e(s).jqGrid("setGridParam",{url:r.p.url})),e(s).jqGrid("setGridParam",{search:u}).trigger("reloadGrid",[{page:1}]),a&&e(s).jqGrid("setGridParam",{url:a}),e.isFunction(r.p.afterClear)&&r.p.afterClear()},f,l=function(){var t=document.createElement("tr"),n,i,s,o,l;r.p.formtype=="horizontal"&&e(f).append(t),e.each(r.p.filterModel,function(i,s){o=document.createElement("td"),e(o).append("<label for='"+this.name+"'>"+this.label+"</label>"),l=document.createElement("td");var a=this;this.stype||(this.stype="text");switch(this.stype){case"select":if(this.surl)e(l).load(this.surl,function(){a.defval&&e("select",this).val(a.defval),e("select",this).attr({name:a.index||a.name,id:"sg_"+a.name}),a.sopt&&e("select",this).attr(a.sopt),r.p.gridToolbar===!0&&a.width&&e("select",this).width(a.width),r.p.autosearch===!0&&e("select",this).change(function(e){return u(),!1})});else if(a.sopt.value){var c=a.sopt.value,h=document.createElement("select");e(h).attr({name:a.index||a.name,id:"sg_"+a.name}).attr(a.sopt);var p,d,v;if(typeof c=="string"){p=c.split(";");for(var m=0;m<p.length;m++)d=p[m].split(":"),v=document.createElement("option"),v.value=d[0],v.innerHTML=d[1],d[1]==a.defval&&(v.selected="selected"),h.appendChild(v)}else if(typeof c=="object")for(var g in c)c.hasOwnProperty(g)&&(i++,v=document.createElement("option"),v.value=g,v.innerHTML=c[g],c[g]==a.defval&&(v.selected="selected"),h.appendChild(v));r.p.gridToolbar===!0&&a.width&&e(h).width(a.width),e(l).append(h),r.p.autosearch===!0&&e(h).change(function(e){return u(),!1})}break;case"text":var y=this.defval?this.defval:"";e(l).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+y+"'/>"),a.sopt&&e("input",l).attr(a.sopt),r.p.gridToolbar===!0&&a.width&&(e.browser.msie?e("input",l).width(a.width-4):e("input",l).width(a.width-2)),r.p.autosearch===!0&&e("input",l).keypress(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;return t==13?(u(),!1):this})}r.p.formtype=="horizontal"?(r.p.gridToolbar===!0&&r.p.gridNames===!1?e(t).append(l):e(t).append(o).append(l),e(t).append(l)):(n=document.createElement("tr"),e(n).append(o).append(l),e(f).append(n))}),l=document.createElement("td"),r.p.enableSearch===!0&&(i="<input type='button' id='sButton' class='"+r.p.buttonclass+"' value='"+r.p.searchButton+"'/>",e(l).append(i),e("input#sButton",l).click(function(){return u(),!1})),r.p.enableClear===!0&&(s="<input type='button' id='cButton' class='"+r.p.buttonclass+"' value='"+r.p.clearButton+"'/>",e(l).append(s),e("input#cButton",l).click(function(){return a(),!1}));if(r.p.enableClear===!0||r.p.enableSearch===!0)r.p.formtype=="horizontal"?e(t).append(l):(n=document.createElement("tr"),e(n).append("<td>&#160;</td>").append(l),e(f).append(n))},c=e("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>");f=e("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>"),e(c).append(f),l(),e(this).append(c),this.triggerSearch=u,this.clearSearch=a})}})}(jQuery),jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(e){return this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},e||{}),jQuery.tableDnD.makeDraggable(this)}),jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup),this},makeDraggable:function(e){var t=e.tableDnDConfig;if(e.tableDnDConfig.dragHandle){var n=jQuery("td."+e.tableDnDConfig.dragHandle,e);n.each(function(){jQuery(this).mousedown(function(n){return jQuery.tableDnD.dragObject=this.parentNode,jQuery.tableDnD.currentTable=e,jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,n),t.onDragStart&&t.onDragStart(e,this),!1})})}else{var r=jQuery("tr",e);r.each(function(){var n=jQuery(this);n.hasClass("nodrag")||n.mousedown(function(n){if(n.target.tagName=="TD")return jQuery.tableDnD.dragObject=this,jQuery.tableDnD.currentTable=e,jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,n),t.onDragStart&&t.onDragStart(e,this),!1}).css("cursor","move")})}},updateTables:function(){this.each(function(){this.tableDnDConfig&&jQuery.tableDnD.makeDraggable(this)})},mouseCoords:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(e,t){t=t||window.event;var n=this.getPosition(e),r=this.mouseCoords(t);return{x:r.x-n.x,y:r.y-n.y}},getPosition:function(e){var t=0,n=0;e.offsetHeight==0&&(e=e.firstChild);if(e&&e.offsetParent){while(e.offsetParent)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;t+=e.offsetLeft,n+=e.offsetTop}return{x:t,y:n}},mousemove:function(e){if(jQuery.tableDnD.dragObject==null)return;var t=jQuery(jQuery.tableDnD.dragObject),n=jQuery.tableDnD.currentTable.tableDnDConfig,r=jQuery.tableDnD.mouseCoords(e),i=r.y-jQuery.tableDnD.mouseOffset.y,s=window.pageYOffset;document.all&&(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"?s=document.documentElement.scrollTop:typeof document.body!="undefined"&&(s=document.body.scrollTop));if(r.y-s<n.scrollAmount)window.scrollBy(0,-n.scrollAmount);else{var o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;o-(r.y-s)<n.scrollAmount&&window.scrollBy(0,n.scrollAmount)}if(i!=jQuery.tableDnD.oldY){var u=i>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=i,n.onDragClass?t.addClass(n.onDragClass):t.css(n.onDragStyle);var a=jQuery.tableDnD.findDropTargetRow(t,i);a&&(u&&jQuery.tableDnD.dragObject!=a?jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,a.nextSibling):!u&&jQuery.tableDnD.dragObject!=a&&jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,a))}return!1},findDropTargetRow:function(e,t){var n=jQuery.tableDnD.currentTable.rows;for(var r=0;r<n.length;r++){var i=n[r],s=this.getPosition(i).y,o=parseInt(i.offsetHeight)/2;i.offsetHeight==0&&(s=this.getPosition(i.firstChild).y,o=parseInt(i.firstChild.offsetHeight)/2);if(t>s-o&&t<s+o){if(i==e)return null;var u=jQuery.tableDnD.currentTable.tableDnDConfig;if(u.onAllowDrop)return u.onAllowDrop(e,i)?i:null;var a=jQuery(i).hasClass("nodrop");return a?null:i}}return null},mouseup:function(e){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var t=jQuery.tableDnD.dragObject,n=jQuery.tableDnD.currentTable.tableDnDConfig;n.onDragClass?jQuery(t).removeClass(n.onDragClass):jQuery(t).css(n.onDropStyle),jQuery.tableDnD.dragObject=null,n.onDrop&&n.onDrop(jQuery.tableDnD.currentTable,t),jQuery.tableDnD.currentTable=null}},serialize:function(){return jQuery.tableDnD.currentTable?jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable):"Error: No Table id set, you need to set an id on your table and every row"},serializeTable:function(e){var t="",n=e.id,r=e.rows;for(var i=0;i<r.length;i++){t.length>0&&(t+="&");var s=r[i].id;s&&s&&e.tableDnDConfig&&e.tableDnDConfig.serializeRegexp&&(s=s.match(e.tableDnDConfig.serializeRegexp)[0]),t+=n+"[]="+s}return t},serializeTables:function(){var e="";return this.each(function(){e+=jQuery.tableDnD.serializeTable(this)}),e}},jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables}),function(e){function u(o,u,f){var l=i[o];r=e("#"+l.id).find("ul:first").clone(!0),r.css(l.menuStyle).find("li").css(l.itemStyle).hover(function(){e(this).css(l.itemHoverStyle)},function(){e(this).css(l.itemStyle)}).find("img").css({verticalAlign:"middle",paddingRight:"2px"}),t.html(r),!l.onShowMenu||(t=l.onShowMenu(f,t)),e.each(l.bindings,function(n,r){e("#"+n,t).bind("click",function(){a(),r(u,s)})}),t.css({left:f[l.eventPosX],top:f[l.eventPosY]}).show(),l.shadow&&n.css({width:t.width(),height:t.height(),left:f.pageX+2,top:f.pageY+2}).show(),e(document).one("click",a)}function a(){t.hide(),n.hide()}var t,n,r,i,s,o={menuStyle:{listStyle:"none",padding:"1px",margin:"0px",backgroundColor:"#fff",border:"1px solid #999",width:"100px"},itemStyle:{margin:"0px",color:"#000",display:"block",cursor:"default",padding:"3px",border:"1px solid #fff",backgroundColor:"transparent"},itemHoverStyle:{border:"1px solid #0a246a",backgroundColor:"#b6bdd2"},eventPosX:"pageX",eventPosY:"pageY",shadow:!0,onContextMenu:null,onShowMenu:null};e.fn.contextMenu=function(r,a){t||(t=e('<div id="jqContextMenu"></div>').hide().css({position:"absolute",zIndex:"500"}).appendTo("body").bind("click",function(e){e.stopPropagation()})),n||(n=e("<div></div>").css({backgroundColor:"#000",position:"absolute",opacity:.2,zIndex:499}).appendTo("body").hide()),i=i||[],i.push({id:r,menuStyle:e.extend({},o.menuStyle,a.menuStyle||{}),itemStyle:e.extend({},o.itemStyle,a.itemStyle||{}),itemHoverStyle:e.extend({},o.itemHoverStyle,a.itemHoverStyle||{}),bindings:a.bindings||{},shadow:a.shadow||a.shadow===!1?a.shadow:o.shadow,onContextMenu:a.onContextMenu||o.onContextMenu,onShowMenu:a.onShowMenu||o.onShowMenu,eventPosX:a.eventPosX||o.eventPosX,eventPosY:a.eventPosY||o.eventPosY});var f=i.length-1;return e(this).bind("contextmenu",function(e){var t=i[f].onContextMenu?i[f].onContextMenu(e):!0;s=e.target;if(t)return u(f,this,e),!1}),this},e.contextMenu={defaults:function(t){e.each(t,function(t,n){typeof n=="object"&&o[t]?e.extend(o[t],n):o[t]=n})}}}(jQuery),$(function(){$("div.contextMenu").hide()}),function(e){e.fn.extend({autocomplete:function(t,n){var r=typeof t=="string";return n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,n){function p(){var r=c.selected();if(!r)return!1;var s=r.result;o=s;if(n.multiple){var u=v(i.val());if(u.length>1){var a=n.multipleSeparator.length,f=e(t).selection().start,l,h=0;e.each(u,function(e,t){h+=t.length;if(f<=h)return l=e,!1;h+=a}),u[l]=s,s=u.join(n.multipleSeparator)}s+=n.multipleSeparator}return i.val(s),b(),i.trigger("result",[r.data,r.value]),!0}function d(e,t){if(f==r.DEL){c.hide();return}var s=i.val();if(!t&&s==o)return;o=s,s=m(s),s.length>=n.minChars?(i.addClass(n.loadingClass),n.matchCase||(s=s.toLowerCase()),E(s,w,b)):(x(),c.hide())}function v(t){return t?n.multiple?e.map(t.split(n.multipleSeparator),function(n){return e.trim(t).length?e.trim(n):null}):[e.trim(t)]:[""]}function m(r){if(!n.multiple)return r;var i=v(r);if(i.length==1)return i[0];var s=e(t).selection().start;return s==r.length?i=v(r):i=v(r.replace(r.substring(s),"")),i[i.length-1]}function g(s,u){n.autoFill&&m(i.val()).toLowerCase()==s.toLowerCase()&&f!=r.BACKSPACE&&(i.val(i.val()+u.substring(m(o).length)),e(t).selection(o.length,o.length+u.length))}function y(){clearTimeout(s),s=setTimeout(b,200)}function b(){var e=c.visible();c.hide(),clearTimeout(s),x(),n.mustMatch&&i.search(function(e){if(!e)if(n.multiple){var t=v(i.val()).slice(0,-1);i.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""))}else i.val(""),i.trigger("result",null)})}function w(e,t){t&&t.length&&a?(x(),c.display(t,e),g(e,t[0].value),c.show()):b()}function E(r,i,s){n.matchCase||(r=r.toLowerCase());var o=u.load(r);if(o&&o.length)i(r,o);else if(typeof n.url=="string"&&n.url.length>0){var a={timestamp:+(new Date)};e.each(n.extraParams,function(e,t){a[e]=typeof t=="function"?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:m(r),limit:n.max},a),success:function(e){var t=n.parse&&n.parse(e)||S(e);u.add(r,t),i(r,t)}})}else c.emptyList(),s(r)}function S(t){var r=[],i=t.split("\n");for(var s=0;s<i.length;s++){var o=e.trim(i[s]);o&&(o=o.split("|"),r[r.length]={data:o,value:o[0],result:n.formatResult&&n.formatResult(o,o[0])||o[0]})}return r}function x(){i.removeClass(n.loadingClass)}var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},i=e(t).attr("autocomplete","off").addClass(n.inputClass),s,o="",u=e.Autocompleter.Cache(n),a=0,f,l={mouseDownOnSelect:!1},c=e.Autocompleter.Select(n,t,p,l),h;e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){if(h)return h=!1,!1}),i.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){a=1,f=t.keyCode;switch(t.keyCode){case r.UP:t.preventDefault(),c.visible()?c.prev():d(0,!0);break;case r.DOWN:t.preventDefault(),c.visible()?c.next():d(0,!0);break;case r.PAGEUP:t.preventDefault(),c.visible()?c.pageUp():d(0,!0);break;case r.PAGEDOWN:t.preventDefault(),c.visible()?c.pageDown():d(0,!0);break;case n.multiple&&e.trim(n.multipleSeparator)==","&&r.COMMA:case r.TAB:case r.RETURN:if(p())return t.preventDefault(),h=!0,!1;break;case r.ESC:c.hide();break;default:clearTimeout(s),s=setTimeout(d,n.delay)}}).focus(function(){a++}).blur(function(){a=0,l.mouseDownOnSelect||y()}).click(function(){a++>1&&!c.visible()&&d(0,!0)}).bind("search",function(){function n(e,n){var r;if(n&&n.length)for(var s=0;s<n.length;s++)if(n[s].result.toLowerCase()==e.toLowerCase()){r=n[s];break}typeof t=="function"?t(r):i.trigger("result",r&&[r.data,r.value])}var t=arguments.length>1?arguments[1]:null;e.each(v(i.val()),function(e,t){E(t,n,n)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&u.populate()}).bind("unautocomplete",function(){c.unbind(),i.unbind(),e(t.form).unbind(".autocomplete")})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function i(e,n){t.matchCase||(e=e.toLowerCase());var r=e.indexOf(n);return t.matchContains=="word"&&(r=e.toLowerCase().search("\\b"+n.toLowerCase())),r==-1?!1:r==0||t.matchContains}function s(e,i){r>t.cacheLength&&u(),n[e]||r++,n[e]=i}function o(){if(!t.data)return!1;var n={},r=0;t.url||(t.cacheLength=1),n[""]=[];for(var i=0,o=t.data.length;i<o;i++){var u=t.data[i];u=typeof u=="string"?[u]:u;var a=t.formatMatch(u,i+1,t.data.length);if(a===!1)continue;var f=a.charAt(0).toLowerCase();n[f]||(n[f]=[]);var l={value:a,data:u,result:t.formatResult&&t.formatResult(u)||a};n[f].push(l),r++<t.max&&n[""].push(l)}e.each(n,function(e,n){t.cacheLength++,s(e,n)})}function u(){n={},r=0}var n={},r=0;return setTimeout(o,25),{flush:u,add:s,populate:o,load:function(s){if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){var o=[];for(var u in n)if(u.length>0){var a=n[u];e.each(a,function(e,t){i(t.value,s)&&o.push(t)})}return o}if(n[s])return n[s];if(t.matchSubset)for(var f=s.length-1;f>=t.minChars;f--){var a=n[s.substr(0,f)];if(a){var o=[];return e.each(a,function(e,t){i(t.value,s)&&(o[o.length]=t)}),o}}return null}}},e.Autocompleter.Select=function(t,n,r,i){function p(){if(!l)return;c=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),h=e("<ul/>").appendTo(c).mouseover(function(t){d(t).nodeName&&d(t).nodeName.toUpperCase()=="LI"&&(u=e("li",h).removeClass(s.ACTIVE).index(d(t)),e(d(t)).addClass(s.ACTIVE))}).click(function(t){return e(d(t)).addClass(s.ACTIVE),r(),n.focus(),!1}).mousedown(function(){i.mouseDownOnSelect=!0}).mouseup(function(){i.mouseDownOnSelect=!1}),t.width>0&&c.css("width",t.width),l=!1}function d(e){var t=e.target;while(t&&t.tagName!="LI")t=t.parentNode;return t?t:[]}function v(e){o.slice(u,u+1).removeClass(s.ACTIVE),m(e);var n=o.slice(u,u+1).addClass(s.ACTIVE);if(t.scroll){var r=0;o.slice(0,u).each(function(){r+=this.offsetHeight}),r+n[0].offsetHeight-h.scrollTop()>h[0].clientHeight?h.scrollTop(r+n[0].offsetHeight-h.innerHeight()):r<h.scrollTop()&&h.scrollTop(r)}}function m(e){u+=e,u<0?u=o.size()-1:u>=o.size()&&(u=0)}function g(e){return t.max&&t.max<e?t.max:e}function y(){h.empty();var n=g(a.length);for(var r=0;r<n;r++){if(!a[r])continue;var i=t.formatItem(a[r].data,r+1,
n,a[r].value,f);if(i===!1)continue;var l=e("<li/>").html(t.highlight(i,f)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(h)[0];e.data(l,"ac_data",a[r])}o=h.find("li"),t.selectFirst&&(o.slice(0,1).addClass(s.ACTIVE),u=0),e.fn.bgiframe&&h.bgiframe()}var s={ACTIVE:"ac_over"},o,u=-1,a,f="",l=!0,c,h;return{display:function(e,t){p(),a=e,f=t,y()},next:function(){v(1)},prev:function(){v(-1)},pageUp:function(){u!=0&&u-8<0?v(-u):v(-8)},pageDown:function(){u!=o.size()-1&&u+8>o.size()?v(o.size()-1-u):v(8)},hide:function(){c&&c.hide(),o&&o.removeClass(s.ACTIVE),u=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(o.filter("."+s.ACTIVE)[0]||t.selectFirst&&o[0])},show:function(){var r=e(n).offset();c.css({width:typeof t.width=="string"||t.width>0?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show();if(t.scroll){h.scrollTop(0),h.css({maxHeight:t.scrollHeight,overflow:"auto"});if(e.browser.msie&&typeof document.body.style.maxHeight=="undefined"){var i=0;o.each(function(){i+=this.offsetHeight});var s=i>t.scrollHeight;h.css("height",s?t.scrollHeight:i),s||o.width(h.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}}},selected:function(){var t=o&&o.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){h&&h.empty()},unbind:function(){c&&c.remove()}}},e.fn.selection=function(e,t){if(e!==undefined)return this.each(function(){if(this.createTextRange){var n=this.createTextRange();t===undefined||e==t?(n.move("character",e),n.select()):(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var n=this[0];if(n.createTextRange){var r=document.selection.createRange(),i=n.value,s="<->",o=r.text.length;r.text=s;var u=n.value.indexOf(s);return n.value=i,this.selection(u,u+o),{start:u,end:u+o}}if(n.selectionStart!==undefined)return{start:n.selectionStart,end:n.selectionEnd}}}(jQuery),function(e){var t=function(){var e={},t=function(){};return t.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){r||(this.context=t,this.buffer=[]);if(!this.includes("",e)){if(r)return e;this.send(e);return}e=this.render_pragmas(e);var i=this.render_section(e,t,n);i===!1&&(i=this.render_tags(e,t,n,r));if(r)return i;this.sendLines(i)},send:function(e){e!==""&&this.buffer.push(e)},sendLines:function(e){if(e){var t=e.split("\n");for(var n=0;n<t.length;n++)this.send(t[n])}},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(n,function(e,n,r){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};t.pragmas[n]={};if(r){var i=r.split("=");t.pragmas[n][i[0]]=i[1]}return""})},render_partial:function(e,t,n){e=this.trim(e);if(!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return typeof t[e]!="object"?this.render(n[e],t,n,!0):this.render(n[e],t[e],n,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var r=this,i=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")});return e.replace(i,function(e,i,s,o,u,a){var f=i?r.render_tags(i,t,n,!0):"",l=a?r.render(a,t,n,!0):"",c,h=r.find(o,t);return s==="^"?!h||r.is_array(h)&&h.length===0?c=r.render(u,t,n,!0):c="":s==="#"&&(r.is_array(h)?c=r.map(h,function(e){return r.render(u,r.create_context(e),n,!0)}).join(""):r.is_object(h)?c=r.render(u,r.create_context(h),n,!0):typeof h=="function"?c=h.call(t,u,function(e){return r.render(e,t,n,!0)}):h?c=r.render(u,t,n,!0):c=""),f+c+l})},render_tags:function(e,t,n,r){var i=this,s=function(){return i.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+t+"+","g")})},o=s(),u=function(e,r,u){switch(r){case"!":return"";case"=":return i.set_delimiters(u),o=s(),"";case">":return i.render_partial(u,t,n);case"{":return i.find(u,t);default:return i.escape(i.find(u,t))}},a=e.split("\n");for(var f=0;f<a.length;f++)a[f]=a[f].replace(o,u,this),r||this.send(a[f]);if(r)return a.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||e===0||e}e=this.trim(e);var r;return e.match(/([a-z_]+)\./ig)?r=n(this.walk_context(e,t)):n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]),typeof r=="function"?r.apply(t):r!==undefined?r:""},walk_context:function(e,t){var n=e.split("."),r=t[n[0]]!=undefined?t:this.context,i=r[n.shift()];while(i!=undefined&&n.length>0)r=i,i=i[n.shift()];return typeof i=="function"?i.apply(r):i},includes:function(e,t){return t.indexOf(this.otag+e)!=-1},escape:function(e){return e=String(e===null?"":e),e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}})},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&typeof e=="object"},is_array:function(e){return Object.prototype.toString.call(e)==="[object Array]"},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},map:function(e,t){if(typeof e.map=="function")return e.map(t);var n=[],r=e.length;for(var i=0;i<r;i++)n.push(t(e[i]));return n},getCachedRegex:function(t,n){var r=e[this.otag];r||(r=e[this.otag]={});var i=r[this.ctag];i||(i=r[this.ctag]={});var s=i[t];return s||(s=i[t]=n(this.otag,this.ctag)),s}},{name:"mustache.js",version:"0.4.0-dev",to_html:function(e,n,r,i){var s=new t;i&&(s.send=i),s.render(e,n||{},r);if(!i)return s.buffer.join("\n")}}}();e.mustache=function(e,n,r){return t.to_html(e,n,r)}}(jQuery),function(e,t,n){var r="function",i="password",s="maxLength",o="type",u="",a=!0,f="placeholder",l=!1,c="watermark",h=c,p="watermarkClass",d="watermarkFocus",v="watermarkSubmit",m="watermarkMaxLength",g="watermarkPassword",y="watermarkText",b=/\r/g,w="input:data("+h+"),textarea:data("+h+")",E="input:text,input:password,input[type=search],input:not([type]),textarea",S=["Page_ClientValidate"],x=l,T=f in document.createElement("input");e.watermark=e.watermark||{version:"3.1.3",runOnce:a,options:{className:c,useNative:a,hideBeforeUnload:a},hide:function(t){e(t).filter(w).each(function(){e.watermark._hide(e(this))})},_hide:function(e,n){var r=e[0],i=(r.value||u).replace(b,u),a=e.data(y)||u,f=e.data(m)||0,l=e.data(p);if(a.length&&i==a){r.value=u;if(e.data(g)&&(e.attr(o)||u)==="text"){var c=e.data(g)||[],h=e.parent()||[];c.length&&h.length&&(h[0].removeChild(e[0]),h[0].appendChild(c[0]),e=c)}f&&(e.attr(s,f),e.removeData(m)),n&&(e.attr("autocomplete","off"),t.setTimeout(function(){e.select()},1))}l&&e.removeClass(l)},show:function(t){e(t).filter(w).each(function(){e.watermark._show(e(this))})},_show:function(t){var n=t[0],r=(n.value||u).replace(b,u),f=t.data(y)||u,l=t.attr(o)||u,c=t.data(p);if(r.length!=0&&r!=f||!!t.data(d))e.watermark._hide(t);else{x=a;if(t.data(g)&&l===i){var h=t.data(g)||[],v=t.parent()||[];h.length&&v.length&&(v[0].removeChild(t[0]),v[0].appendChild(h[0]),t=h,t.attr(s,f.length),n=t[0])}if(l==="text"||l==="search"){var w=t.attr(s)||0;w>0&&f.length>w&&(t.data(m,w),t.attr(s,f.length))}c&&t.addClass(c),n.value=f}},hideAll:function(){x&&(e.watermark.hide(E),x=l)},showAll:function(){e.watermark.show(E)}},e.fn.watermark=e.fn.watermark||function(n,c){var m="string";if(!this.length)return this;var w=l,S=typeof n===m;return S&&(n=n.replace(b,u)),typeof c=="object"?(w=typeof c.className===m,c=e.extend({},e.watermark.options,c)):typeof c===m?(w=a,c=e.extend({},e.watermark.options,{className:c})):c=e.watermark.options,typeof c.useNative!==r&&(c.useNative=c.useNative?function(){return a}:function(){return l}),this.each(function(){var r="dragleave",l="dragenter",m=this,x=e(m);if(!x.is(E))return;if(x.data(h)){if(S||w)e.watermark._hide(x),S&&x.data(y,n),w&&x.data(p,c.className)}else{if(T&&c.useNative.call(m,x)&&(x.attr("tagName")||u)!=="TEXTAREA"){S&&x.attr(f,n);return}x.data(y,S?n:u),x.data(p,c.className),x.data(h,1);if((x.attr(o)||u)===i){var N=x.wrap("<span>").parent(),C=e(N.html().replace(/type=["']?password["']?/i,'type="text"'));C.data(y,x.data(y)),C.data(p,x.data(p)),C.data(h,1),C.attr(s,n.length),C.focus(function(){e.watermark._hide(C,a)}).bind(l,function(){e.watermark._hide(C)}).bind("dragend",function(){t.setTimeout(function(){C.blur()},1)}),x.blur(function(){e.watermark._show(x)}).bind(r,function(){e.watermark._show(x)}),C.data(g,x),x.data(g,C)}else x.focus(function(){x.data(d,1),e.watermark._hide(x,a)}).blur(function(){x.data(d,0),e.watermark._show(x)}).bind(l,function(){e.watermark._hide(x)}).bind(r,function(){e.watermark._show(x)}).bind("dragend",function(){t.setTimeout(function(){e.watermark._show(x)},1)}).bind("drop",function(e){var t=x[0],n=e.originalEvent.dataTransfer.getData("Text");(t.value||u).replace(b,u).replace(n,u)===x.data(y)&&(t.value=n),x.focus()});if(m.form){var L=m.form,A=e(L);A.data(v)||(A.submit(e.watermark.hideAll),L.submit?(A.data(v,L.submit),L.submit=function(t,n){return function(){var r=n.data(v);e.watermark.hideAll(),r.apply?r.apply(t,Array.prototype.slice.call(arguments)):r()}}(L,A)):(A.data(v,1),L.submit=function(t){return function(){e.watermark.hideAll(),delete t.submit,t.submit()}}(L)))}}e.watermark._show(x)})},e.watermark.runOnce&&(e.watermark.runOnce=l,e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])}}),function(t){e.fn.val=function(){var r=this;if(!r.length)return arguments.length?r:n;if(!arguments.length){if(r.data(h)){var i=(r[0].value||u).replace(b,u);return i===(r.data(y)||u)?u:i}return t.apply(r,arguments)}return t.apply(r,arguments),e.watermark.show(r),r}}(e.fn.val),S.length&&e(function(){for(var n,i,s=S.length-1;s>=0;s--)n=S[s],i=t[n],typeof i===r&&(t[n]=function(t){return function(){return e.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(i))}),e(t).bind("beforeunload",function(){e.watermark.options.hideBeforeUnload&&e.watermark.hideAll()}))}(jQuery,window),function(e){e.fn.extend({autocomplete:function(t,n){var r=typeof t=="string";return n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,n){function p(){var r=c.selected();if(!r)return!1;var s=r.result;o=s;if(n.multiple){var u=v(i.val());if(u.length>1){var a=n.multipleSeparator.length,f=e(t).selection().start,l,h=0;e.each(u,function(e,t){h+=t.length;if(f<=h)return l=e,!1;h+=a}),u[l]=s,s=u.join(n.multipleSeparator)}s+=n.multipleSeparator}return i.val(s),b(),i.trigger("result",[r.data,r.value]),!0}function d(e,t){if(f==r.DEL){c.hide();return}var s=i.val();if(!t&&s==o)return;o=s,s=m(s),s.length>=n.minChars?(i.addClass(n.loadingClass),n.matchCase||(s=s.toLowerCase()),E(s,w,b)):(x(),c.hide())}function v(t){return t?n.multiple?e.map(t.split(n.multipleSeparator),function(n){return e.trim(t).length?e.trim(n):null}):[e.trim(t)]:[""]}function m(r){if(!n.multiple)return r;var i=v(r);if(i.length==1)return i[0];var s=e(t).selection().start;return s==r.length?i=v(r):i=v(r.replace(r.substring(s),"")),i[i.length-1]}function g(s,u){n.autoFill&&m(i.val()).toLowerCase()==s.toLowerCase()&&f!=r.BACKSPACE&&(i.val(i.val()+u.substring(m(o).length)),e(t).selection(o.length,o.length+u.length))}function y(){clearTimeout(s),s=setTimeout(b,200)}function b(){var e=c.visible();c.hide(),clearTimeout(s),x(),n.mustMatch&&i.search(function(e){if(!e)if(n.multiple){var t=v(i.val()).slice(0,-1);i.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""))}else i.val(""),i.trigger("result",null)})}function w(e,t){t&&t.length&&a?(x(),c.display(t,e),g(e,t[0].value),c.show()):b()}function E(r,i,s){n.matchCase||(r=r.toLowerCase());var o=u.load(r);if(o&&o.length)i(r,o);else if(typeof n.url=="string"&&n.url.length>0){var a={timestamp:+(new Date)};e.each(n.extraParams,function(e,t){a[e]=typeof t=="function"?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:n.url,data:e.extend({q:m(r),limit:n.max},a),success:function(e){var t=n.parse&&n.parse(e)||S(e);u.add(r,t),i(r,t)}})}else c.emptyList(),s(r)}function S(t){var r=[],i=t.split("\n");for(var s=0;s<i.length;s++){var o=e.trim(i[s]);o&&(o=o.split("|"),r[r.length]={data:o,value:o[0],result:n.formatResult&&n.formatResult(o,o[0])||o[0]})}return r}function x(){i.removeClass(n.loadingClass)}var r={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},i=e(t).attr("autocomplete","off").addClass(n.inputClass),s,o="",u=e.Autocompleter.Cache(n),a=0,f,l={mouseDownOnSelect:!1},c=e.Autocompleter.Select(n,t,p,l),h;e.browser.opera&&e(t.form).bind("submit.autocomplete",function(){if(h)return h=!1,!1}),i.bind((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){a=1,f=t.keyCode;switch(t.keyCode){case r.UP:t.preventDefault(),c.visible()?c.prev():d(0,!0);break;case r.DOWN:t.preventDefault(),c.visible()?c.next():d(0,!0);break;case r.PAGEUP:t.preventDefault(),c.visible()?c.pageUp():d(0,!0);break;case r.PAGEDOWN:t.preventDefault(),c.visible()?c.pageDown():d(0,!0);break;case n.multiple&&e.trim(n.multipleSeparator)==","&&r.COMMA:case r.TAB:case r.RETURN:if(p())return t.preventDefault(),h=!0,!1;break;case r.ESC:c.hide();break;default:clearTimeout(s),s=setTimeout(d,n.delay)}}).focus(function(){a++}).blur(function(){a=0,l.mouseDownOnSelect||y()}).click(function(){a++>1&&!c.visible()&&d(0,!0)}).bind("search",function(){function n(e,n){var r;if(n&&n.length)for(var s=0;s<n.length;s++)if(n[s].result.toLowerCase()==e.toLowerCase()){r=n[s];break}typeof t=="function"?t(r):i.trigger("result",r&&[r.data,r.value])}var t=arguments.length>1?arguments[1]:null;e.each(v(i.val()),function(e,t){E(t,n,n)})}).bind("flushCache",function(){u.flush()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&u.populate()}).bind("unautocomplete",function(){c.unbind(),i.unbind(),e(t.form).unbind(".autocomplete")})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function i(e,n){t.matchCase||(e=e.toLowerCase());var r=e.indexOf(n);return t.matchContains=="word"&&(r=e.toLowerCase().search("\\b"+n.toLowerCase())),r==-1?!1:r==0||t.matchContains}function s(e,i){r>t.cacheLength&&u(),n[e]||r++,n[e]=i}function o(){if(!t.data)return!1;var n={},r=0;t.url||(t.cacheLength=1),n[""]=[];for(var i=0,o=t.data.length;i<o;i++){var u=t.data[i];u=typeof u=="string"?[u]:u;var a=t.formatMatch(u,i+1,t.data.length);if(a===!1)continue;var f=a.charAt(0).toLowerCase();n[f]||(n[f]=[]);var l={value:a,data:u,result:t.formatResult&&t.formatResult(u)||a};n[f].push(l),r++<t.max&&n[""].push(l)}e.each(n,function(e,n){t.cacheLength++,s(e,n)})}function u(){n={},r=0}var n={},r=0;return setTimeout(o,25),{flush:u,add:s,populate:o,load:function(s){if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){var o=[];for(var u in n)if(u.length>0){var a=n[u];e.each(a,function(e,t){i(t.value,s)&&o.push(t)})}return o}if(n[s])return n[s];if(t.matchSubset)for(var f=s.length-1;f>=t.minChars;f--){var a=n[s.substr(0,f)];if(a){var o=[];return e.each(a,function(e,t){i(t.value,s)&&(o[o.length]=t)}),o}}return null}}},e.Autocompleter.Select=function(t,n,r,i){function p(){if(!l)return;c=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),h=e("<ul/>").appendTo(c).mouseover(function(t){d(t).nodeName&&d(t).nodeName.toUpperCase()=="LI"&&(u=e("li",h).removeClass(s.ACTIVE).index(d(t)),e(d(t)).addClass(s.ACTIVE))}).click(function(t){return e(d(t)).addClass(s.ACTIVE),r(),n.focus(),!1}).mousedown(function(){i.mouseDownOnSelect=!0}).mouseup(function(){i.mouseDownOnSelect=!1}),t.width>0&&c.css("width",t.width),l=!1}function d(e){var t=e.target;while(t&&t.tagName!="LI")t=t.parentNode;return t?t:[]}function v(e){o.slice(u,u+1).removeClass(s.ACTIVE),m(e);var n=o.slice(u,u+1).addClass(s.ACTIVE);if(t.scroll){var r=0;o.slice(0,u).each(function(){r+=this.offsetHeight}),r+n[0].offsetHeight-h.scrollTop()>h[0].clientHeight?h.scrollTop(r+n[0].offsetHeight-h.innerHeight()):r<h.scrollTop()&&h.scrollTop(r)}}function m(e){u+=e,u<0?u=o.size()-1:u>=o.size()&&(u=0)}function g(e){return t.max&&t.max<e?t.max:e}function y(){h.empty();var n=g(a.length);for(var r=0;r<n;r++){if(!a[r])continue;var i=t.formatItem(a[r].data,r+1,n,a[r].value,f);if(i===!1)continue;var l=e("<li/>").html(t.highlight(i,f)).addClass(r%2==0?"ac_even":"ac_odd").appendTo(h)[0];e.data(l,"ac_data",a[r])}o=h.find("li"),t.selectFirst&&(o.slice(0,1).addClass(s.ACTIVE),u=0),e.fn.bgiframe&&h.bgiframe()}var s={ACTIVE:"ac_over"},o,u=-1,a,f="",l=!0,c,h;return{display:function(e,t){p(),a=e,f=t,y()},next:function(){v(1)},prev:function(){v(-1)},pageUp:function(){u!=0&&u-8<0?v(-u):v(-8)},pageDown:function(){u!=o.size()-1&&u+8>o.size()?v(o.size()-1-u):v(8)},hide:function(){c&&c.hide(),o&&o.removeClass(s.ACTIVE),u=-1},visible:function(){return c&&c.is(":visible")},current:function(){return this.visible()&&(o.filter("."+s.ACTIVE)[0]||t.selectFirst&&o[0])},show:function(){var r=e(n).offset();c.css({width:typeof t.width=="string"||t.width>0?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show();if(t.scroll){h.scrollTop(0),h.css({maxHeight:t.scrollHeight,overflow:"auto"});if(e.browser.msie&&typeof document.body.style.maxHeight=="undefined"){var i=0;o.each(function(){i+=this.offsetHeight});var s=i>t.scrollHeight;h.css("height",s?t.scrollHeight:i),s||o.width(h.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}}},selected:function(){var t=o&&o.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){h&&h.empty()},unbind:function(){c&&c.remove()}}},e.fn.selection=function(e,t){if(e!==undefined)return this.each(function(){if(this.createTextRange){var n=this.createTextRange();t===undefined||e==t?(n.move("character",e),n.select()):(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var n=this[0];if(n.createTextRange){var r=document.selection.createRange(),i=n.value,s="<->",o=r.text.length;r.text=s;var u=n.value.indexOf(s);return n.value=i,this.selection(u,u+o),{start:u,end:u+o}}if(n.selectionStart!==undefined)return{start:n.selectionStart,end:n.selectionEnd}}}(jQuery),jQuery.ui||function(e){function a(t,n,r,i){function s(r){var i=e[t][n][r]||[];return typeof i=="string"?i.split(/,?\s+/):i}var o=s("getter");return i.length==1&&typeof i[0]=="string"&&(o=o.concat(s("getterSetter"))),e.inArray(r,o)!=-1}var t=e.fn.remove,n=e.browser.mozilla&&parseFloat(e.browser.version)<1.9;e.ui={version:"1.7.3",plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")=="hidden")return!1;var r=n&&n=="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(n){var r=e.attr,i=e.fn.removeAttr,s="http://www.w3.org/2005/07/aaa",o=/^aria-/,u=/^wairole:/;e.attr=function(e,t,n){var i=n!==undefined;return t=="role"?i?r.call(this,e,t,"wairole:"+n):(r.apply(this,arguments)||"").replace(u,""):o.test(t)?i?e.setAttributeNS(s,t.replace(o,"aaa:"),n):r.call(this,e,t.replace(o,"aaa:")):r.apply(this,arguments)},e.fn.removeAttr=function(e){return o.test(e)?this.each(function(){this.removeAttributeNS(s,e.replace(o,""))}):i.call(this,e)}}e.fn.extend({remove:function(n,r){return this.each(function(){return r||(!n||e.filter(n,[this]).length)&&e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),t.call(e(this),n,r)})},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),r=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n||"area"==n?t.href||!isNaN(r):!isNaN(r))&&!e(t)["area"==n?"parents":"closest"](":hidden").length},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}}),e.widget=function(t,n){var r=t.split(".")[0];t=t.split(".")[1],e.fn[t]=function(n){var i=typeof n=="string",s=Array.prototype.slice.call(arguments,1);if(i&&n.substring(0,1)=="_")return this;if(i&&a(r,t,n,s)){var o=e.data(this[0],t);return o?o[n].apply(o,s):undefined}return this.each(function(){var o=e.data(this,t);!o&&!i&&e.data(this,t,new e[r][t](this,n))._init(),o&&i&&e.isFunction(o[n])&&o[n].apply(o,s)})},e[r]=e[r]||{},e[r][t]=function(n,i){var s=this;this.namespace=r,this.widgetName=t,this.widgetEventPrefix=e[r][t].eventPrefix||t,this.widgetBaseClass=r+"-"+t,this.options=e.extend({},e.widget.defaults,e[r][t].defaults,e.metadata&&e.metadata.get(n)[t],i),this.element=e(n).bind("setData."+t,function(e,t,r){if(e.target==n)return s._setData(t,r)}).bind("getData."+t,function(e,t){if(e.target==n)return s._getData(t)}).bind("remove",function(){return s.destroy()})},e[r][t].prototype=e.extend({},e.widget.prototype,n),e[r][t].getterSetter="option"},e.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(t,n){var r=t,i=this;if(typeof t=="string"){if(n===undefined)return this._getData(t);r={},r[t]=n}e.each(r,function(e,t){i._setData(e,t)})},_getData:function(e){return this.options[e]},_setData:function(e,t){this.options[e]=t,e=="disabled"&&this.element[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(t,n,r){var i=this.options[t],s=t==this.widgetEventPrefix?t:this.widgetEventPrefix+t;n=e.Event(n),n.type=s;if(n.originalEvent)for(var o=e.event.props.length,u;o;)u=e.event.props[--o],n[u]=n.originalEvent[u];return this.element.trigger(n,r),!(e.isFunction(i)&&i.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}},e.widget.defaults={disabled:!1},e.ui.mouse={_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(t._preventClickEvent)return t._preventClickEvent=!1,e.stopImmediatePropagation(),!1}),e.browser.msie&&(this._mouseUnselectable=this.element.attr("unselectable"),this.element.attr("unselectable","on")),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable)},_mouseDown:function(t){t.originalEvent=t.originalEvent||{};if(t.originalEvent.mouseHandled)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which==1,i=typeof this.options.cancel=="string"?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0,!0},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}},e.ui.mouse.defaults={cancel:null,distance:1,delay:0}}(jQuery),function(e){e.widget("ui.draggable",e.extend({},e.ui.mouse,{_init:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?!0:!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t),this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();this._trigger("drag",t,r),this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t),r._clear()})}else this._trigger("stop",t),this._clear();return!1},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone():this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(e){e.left!=undefined&&(this.offset.click.left=e.left+this.margins.left),e.right!=undefined&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),e.top!=undefined&&(this.offset.click.top=e.top+this.margins.top),e.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.
offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment)[0];if(!n)return;var r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var f=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+n.grid[0]:f-n.grid[0]:f:f}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,offset:this.positionAbs}}})),e.extend(e.ui.draggable,{version:"1.7.3",eventPrefix:"drag",defaults:{addClasses:!0,appendTo:"parent",axis:!1,cancel:":input,option",connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,delay:0,distance:1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n._refreshItems(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,f=t.top,l=t.left;return e.ui.isOver(i+n,s+r,f,l,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","iframeFix",{start:function(t,n){var r=e(this).data("draggable").options;e(r.iframeFix===!0?"iframe":r.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})},stop:function(t,n){e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,f=n.offset.top,l=f+r.helperProportions.height;for(var c=r.snapElements.length-1;c>=0;c--){var h=r.snapElements[c].left,p=h+r.snapElements[c].width,d=r.snapElements[c].top,v=d+r.snapElements[c].height;if(!(h-s<o&&o<p+s&&d-s<f&&f<v+s||h-s<o&&o<p+s&&d-s<l&&l<v+s||h-s<u&&u<p+s&&d-s<f&&f<v+s||h-s<u&&u<p+s&&d-s<l&&l<v+s)){r.snapElements[c].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=!1;continue}if(i.snapMode!="inner"){var m=Math.abs(d-l)<=s,g=Math.abs(v-f)<=s,y=Math.abs(h-u)<=s,b=Math.abs(p-o)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var w=m||g||y||b;if(i.snapMode!="outer"){var m=Math.abs(d-f)<=s,g=Math.abs(v-l)<=s,y=Math.abs(h-o)<=s,b=Math.abs(p-u)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[c].snapping&&(m||g||y||b||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=m||g||y||b||w}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack.group)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||r.stack.min)-(parseInt(e(n).css("zIndex"),10)||r.stack.min)});e(i).each(function(e){this.style.zIndex=r.stack.min+e}),this[0].style.zIndex=r.stack.min+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{_init:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.options.accept=this.options.accept&&e.isFunction(this.options.accept)?this.options.accept:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[this.options.scope]=e.ui.ddmanager.droppables[this.options.scope]||[],e.ui.ddmanager.droppables[this.options.scope].push(this),this.options.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable")},_setData:function(t,n){t=="accept"?this.options.accept=n&&e.isFunction(n)?n:function(e){return e.is(n)}:e.widget.prototype._setData.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.options.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.options.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.options.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,absolutePosition:e.positionAbs,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.7.3",eventPrefix:"drop",defaults:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,f=n.offset.left,l=f+n.proportions.width,c=n.offset.top,h=c+n.proportions.height;switch(r){case"fit":return f<i&&s<l&&c<o&&u<h;case"intersect":return f<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<l&&c<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<h;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,d=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,v=e.ui.isOver(d,p,c,f,n.proportions.height,n.proportions.width);return v;case"touch":return(o>=c&&o<=h||u>=c&&u<=h||o<c&&u>h)&&(i>=f&&i<=l||s>=f&&s<=l||i<f&&s>l);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].options.accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight},i=="mousedown"&&r[o]._activate.call(r[o],n)}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)),!this.options.disabled&&this.visible&&this.options.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})}}}(jQuery),function(e){e.widget("ui.resizable",e.extend({},e.ui.mouse,{_init:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(s)&&u.css({zIndex:++n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.parent().append(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).end().remove()}this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement)},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return this.options.disabled||!!n},_mouseStart:function(n){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),e.browser.opera&&/relative/.test(s.css("position"))&&s.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var o=t(this.helper.css("left")),u=t(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var h=l.apply(this,[t,a,f]),p=e.browser.msie&&e.browser.version<7,d=this.sizeDiff;if(this._aspectRatio||t.shiftKey)h=this._updateRatio(h,t);return h=this._respectSize(h,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(h),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.size.width-u,height:r.size.height-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,r=this.position,i=this.size,s=this.axis;return e.height?e.width=i.height*this.aspectRatio:e.width&&(e.height=i.width/this.aspectRatio),s=="sw"&&(e.left=r.left+(i.width-e.width),e.top=null),s=="nw"&&(e.top=r.top+(i.height-e.height),e.left=r.left+(i.width-e.width)),e},_respectSize:function(e,t){var r=this.helper,i=this.options,s=this._aspectRatio||t.shiftKey,o=this.axis,u=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,f=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,l=n(e.width)&&i.minWidth&&i.minWidth>e.width,c=n(e.height)&&i.minHeight&&i.minHeight>e.height;l&&(e.width=i.minWidth),c&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),f&&(e.height=i.maxHeight);var h=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height,d=/sw|nw|w/.test(o),v=/nw|ne|n/.test(o);l&&d&&(e.left=h-i.minWidth),u&&d&&(e.left=h-i.maxWidth),c&&v&&(e.top=p-i.minHeight),f&&v&&(e.top=p-i.maxHeight);var m=!e.width&&!e.height;return m&&!e.left&&e.top?e.top=null:m&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}})),e.extend(e.ui.resizable,{version:"1.7.3",eventPrefix:"resize",defaults:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,cancel:":input,option",containment:!1,delay:0,distance:1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options;_store=function(t){e(t).each(function(){e(this).data("resizable-alsoresize",{width:parseInt(e(this).width(),10),height:parseInt(e(this).height(),10),left:parseInt(e(this).css("left"),10),top:parseInt(e(this).css("top"),10)})})},typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],_store(i.alsoResize)):e.each(i.alsoResize,function(e,t){_store(e)}):_store(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,n){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=n&&n.length?n:["width","height","top","left"];e.each(o||["width","height","top","left"],function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),/relative/.test(t.css("position"))&&e.browser.opera&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"})),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){var r=e(this).data("resizable");r._revertToRelativePosition&&e.browser.opera&&(r._revertToRelativePosition=!1,el.css({position:"relative"})),e(this).removeData("resizable-alsoresize-start")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,h&&l?{top:h,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(n,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){l[e]=t(f.css("padding"+n))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var h=i.containerOffset,p=i.containerSize.height,d=i.containerSize.width,v=e.ui.hasScroll(a,"left")?a.scrollWidth:d,m=e.ui.hasScroll(a)?a.scrollHeight:p;i.parentData={element:a,left:h.left,top:h.top,width:v,height:m}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},h=r.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/i.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?
o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*i.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var p=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),d=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),v=r.containerElement.get(0)==r.element.parent().get(0),m=/relative|absolute/.test(r.containerElement.css("position"));v&&m&&(p-=r.parentData.left),p+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-p,f&&(r.size.height=r.size.width/r.aspectRatio)),d+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-d,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),h=f.outerWidth()-r.sizeDiff.width,p=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:h,height:p})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),h=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h,r.position.top=u.top-h):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+h,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+h,r.position.top=u.top-h,r.position.left=u.left-l)}});var t=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.extend({},e.ui.mouse,{_init:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({"z-index":100,position:"absolute",left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r)return r.$element.removeClass("ui-unselecting").addClass("ui-selecting"),r.unselecting=!1,r.selecting=!0,r.selected=!0,n._trigger("selecting",t,{selecting:r.element}),!1})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var f=o;o=i,i=f}if(s>u){var f=u;u=s,s=f}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var f=e.data(this,"selectable-item");if(!f||f.element==n.element[0])return;var l=!1;r.tolerance=="touch"?l=!(f.left>o||f.right<i||f.top>u||f.bottom<s):r.tolerance=="fit"&&(l=f.left>i&&f.right<o&&f.top>s&&f.bottom<u),l?(f.selected&&(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,n._trigger("selecting",t,{selecting:f.element}))):(f.selecting&&(t.metaKey&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),f.unselecting=!0),n._trigger("unselecting",t,{unselecting:f.element}))),f.selected&&!t.metaKey&&!f.startselected&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,n._trigger("unselecting",t,{unselecting:f.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})),e.extend(e.ui.selectable,{version:"1.7.3",defaults:{appendTo:"body",autoRefresh:!0,cancel:":input,option",delay:0,distance:0,filter:"*",tolerance:"touch"}})}(jQuery),function(e){e.widget("ui.sortable",e.extend({},e.ui.mouse,{_init:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item")},_mouseCapture:function(t,n){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var r=null,i=this,s=e(t.target).parents().each(function(){if(e.data(this,"sortable-item")==i)return r=e(this),!1});e.data(t.target,"sortable-item")==i&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp(),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem),!0},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e),this.refreshPositions()},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],"sortable");l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper"),l])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],"sortable");l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}}for(var o=i.length-1;o>=0;o--){var c=i[o][1],h=i[o][0];for(var f=0,p=h.length;f<p;f++){var d=e(h[f]);d.data("sortable-item",c),n.push({item:d,instance:c,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=this.containers.length-1;n>=0;n--)if(this._intersectsWith(this.containers[n].containerCache)){if(!this.containers[n].containerCache.over){if(this.currentContainer!=this.containers[n]){var r=1e4,i=null,s=this.positionAbs[this.containers[n].floating?"left":"top"];for(var o=this.items.length-1;o>=0;o--){if(!e.ui.contains(this.containers[n].element[0],this.items[o].item[0]))continue;var u=this.items[o][this.containers[n].floating?"left":"top"];Math.abs(u-s)<r&&(r=Math.abs(u-s),i=this.items[o])}if(!i&&!this.options.dropOnEmpty)continue;this.currentContainer=this.containers[n],i?this._rearrange(t,i,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder)}this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(e){e.left!=undefined&&(this.offset.click.left=e.left+this.margins.left),e.right!=undefined&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),e.top!=undefined&&(this.offset.click.top=e.top+this.margins.top),e.bottom!=undefined&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var f=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+n.grid[0]:f-n.grid[0]:f:f}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,absolutePosition:n.positionAbs,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})),e.extend(e.ui.sortable,{getter:"serialize toArray",version:"1.7.3",eventPrefix:"sort",defaults:{appendTo:"parent",axis:!1,cancel:":input,option",connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,delay:0,distance:1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3}})}(jQuery),function(e){e.widget("ui.accordion",{_init:function(){var t=this.options,n=this;this.running=0,t.collapsible==e.ui.accordion.defaults.collapsible&&t.alwaysOpen!=e.ui.accordion.defaults.alwaysOpen&&(t.collapsible=!t.alwaysOpen);if(t.navigation){var r=this.element.find("a").filter(t.navigationFilter);r.length&&(r.filter(t.header).length?this.active=r:(this.active=r.parent().parent().prev(),r.addClass("ui-accordion-content-active")))}this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.element[0].nodeName=="UL"&&this.element.children("li").addClass("ui-accordion-li-fix"),this.headers=this.element.find(t.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){e(this).removeClass("ui-state-focus")}),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),this.active=this._findActive(this.active||t.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),this.active.next().addClass("ui-accordion-content-active"),e("<span/>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.find(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),e.browser.msie&&this.element.find("a").css("zoom","1"),this.resize(),this.element.attr("role","tablist"),this.headers.attr("role","tab").bind("keydown",function(e){return n._keydown(e)}).next().attr("role","tabpanel"),this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide(),this.active.length?this.active.attr("aria-expanded","true").attr("tabIndex","0"):this.headers.eq(0).attr("tabIndex","0"),e.browser.safari||this.headers.find("a").attr("tabIndex","-1"),t.event&&this.headers.bind(t.event+".accordion",function(e){return n._clickHandler.call(n,e,this)})},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex"),this.headers.find("a").removeAttr("tabindex"),this.headers.children(".ui-icon").remove();var t=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");(e.autoHeight||e.fillHeight)&&t.css("height","")},_setData:function(t,n){t=="alwaysOpen"&&(t="collapsible",n=!n),e.widget.prototype._setData.apply(this,arguments)},_keydown:function(t){var n=this.options,r=e.ui.keyCode;if(n.disabled||t.altKey||t.ctrlKey)return;var i=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case r.RIGHT:case r.DOWN:o=this.headers[(s+1)%i];break;case r.LEFT:case r.UP:o=this.headers[(s-1+i)%i];break;case r.SPACE:case r.ENTER:return this._clickHandler({target:t.target},t.target)}return o?(e(t.target).attr("tabIndex","-1"),e(o).attr("tabIndex","0"),o.focus(),!1):!0},resize:function(
){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight()});var i=0;this.headers.next().each(function(){i=Math.max(i,e(this).innerHeight()-e(this).height())}).height(Math.max(0,n-i)).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).outerHeight())}).height(n))},activate:function(e){var t=this._findActive(e)[0];this._clickHandler({target:t},t)},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return!1;if(!t.target&&r.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);return this._toggle(o,i,s),!1}var u=e(t.currentTarget||n),f=u[0]==this.active[0];if(this.running||!r.collapsible&&f)return!1;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active"),f||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));var o=u.next(),i=this.active.next(),s={options:r,newHeader:f&&r.collapsible?e([]):u,oldHeader:this.active,newContent:f&&r.collapsible?e([]):o.find("> *"),oldContent:i.find("> *")},l=this.headers.index(this.active[0])>this.headers.index(u[0]);return this.active=f?e([]):u,this._toggle(o,i,s,f,l),!1},_toggle:function(t,n,r,i,s){var o=this.options,u=this;this.toShow=t,this.toHide=n,this.data=r;var f=function(){if(!u)return;return u._completed.apply(u,arguments)};this._trigger("changestart",null,this.data),this.running=n.size()===0?t.size():n.size();if(o.animated){var l={};o.collapsible&&i?l={toShow:e([]),toHide:n,complete:f,down:s,autoHeight:o.autoHeight||o.fillSpace}:l={toShow:t,toHide:n,complete:f,down:s,autoHeight:o.autoHeight||o.fillSpace},o.proxied||(o.proxied=o.animated),o.proxiedDuration||(o.proxiedDuration=o.duration),o.animated=e.isFunction(o.proxied)?o.proxied(l):o.proxied,o.duration=e.isFunction(o.proxiedDuration)?o.proxiedDuration(l):o.proxiedDuration;var c=e.ui.accordion.animations,h=o.duration,p=o.animated;c[p]||(c[p]=function(e){this.slide(e,{easing:p,duration:h||700})}),c[p](l)}else o.collapsible&&i?t.toggle():(n.hide(),t.show()),f(!0);n.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur(),t.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(e){var t=this.options;this.running=e?0:--this.running;if(this.running)return;t.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.7.3",defaults:{active:null,alwaysOpen:!0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide"},t);return}var r=t.toShow.css("overflow"),i,s={},o={},u=["height","paddingTop","paddingBottom"],f,l=t.toShow;f=l[0].style.width,l.width(parseInt(l.parent().width(),10)-parseInt(l.css("paddingLeft"),10)-parseInt(l.css("paddingRight"),10)-(parseInt(l.css("borderLeftWidth"),10)||0)-(parseInt(l.css("borderRightWidth"),10)||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css("width",f),t.toShow.css({overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})},easeslide:function(e){this.slide(e,{easing:"easeinout",duration:700})}}})}(jQuery),function(e){var t={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},n="ui-dialog ui-widget ui-widget-content ui-corner-all ";e.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var t=this,r=this.options,i=r.title||this.originalTitle||"&nbsp;",s=e.ui.dialog.getTitleId(this.element),o=(this.uiDialog=e("<div/>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&n.keyCode&&n.keyCode==e.ui.keyCode.ESCAPE&&t.close(n)}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),f=(this.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),l=e('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).mousedown(function(e){e.stopPropagation()}).click(function(e){return t.close(e),!1}).appendTo(f),h=(this.uiDialogTitlebarCloseText=e("<span/>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(l),p=e("<span/>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(f);f.find("*").add(f).disableSelection(),r.draggable&&e.fn.draggable&&this._makeDraggable(),r.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(r.buttons),this._isOpen=!1,r.bgiframe&&e.fn.bgiframe&&o.bgiframe(),r.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle)},close:function(t){var n=this;if(!1===n._trigger("beforeclose",t))return;n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):n.uiDialog.hide()&&n._trigger("close",t),e.ui.dialog.overlay.resize(),n._isOpen=!1;if(n.options.modal){var r=0;e(".ui-dialog").each(function(){this!=n.uiDialog[0]&&(r=Math.max(r,e(this).css("z-index")))}),e.ui.dialog.maxZ=r}},isOpen:function(){return this._isOpen},moveToTop:function(t,n){if(this.options.modal&&!t||!this.options.stack&&!this.options.modal)return this._trigger("focus",n);this.options.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=this.options.zIndex),this.overlay&&this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=++e.ui.dialog.maxZ);var r={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++e.ui.dialog.maxZ),this.element.attr(r),this._trigger("focus",n)},open:function(){if(this._isOpen)return;var t=this.options,n=this.uiDialog;this.overlay=t.modal?new e.ui.dialog.overlay(this):null,n.next().length&&n.appendTo("body"),this._size(),this._position(t.position),n.show(t.show),this.moveToTop(!0),t.modal&&n.bind("keypress.ui-dialog",function(t){if(t.keyCode!=e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first")[0],i=n.filter(":last")[0];t.target==i&&!t.shiftKey?setTimeout(function(){r.focus()},1):t.target==r&&t.shiftKey&&setTimeout(function(){i.focus()},1)}),e([]).add(n.find(".ui-dialog-content :tabbable:first")).add(n.find(".ui-dialog-buttonpane :tabbable:first")).add(n).filter(":first").focus(),this._trigger("open"),this._isOpen=!0},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){e('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(t).click(function(){r.apply(n.element[0],arguments)}).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}).appendTo(i)}),i.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,n=this.options,r;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){r=n.height,e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n.dragStart&&n.dragStart.apply(t.element[0],arguments)},drag:function(){n.drag&&n.drag.apply(t.element[0],arguments)},stop:function(){e(this).removeClass("ui-dialog-dragging").height(r),n.dragStop&&n.dragStop.apply(t.element[0],arguments),e.ui.dialog.overlay.resize()}})},_makeResizable:function(t){t=t===undefined?this.options.resizable:t;var n=this,r=this.options,i=typeof t=="string"?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:r.minHeight,start:function(){e(this).addClass("ui-dialog-resizing"),r.resizeStart&&r.resizeStart.apply(n.element[0],arguments)},resize:function(){r.resize&&r.resize.apply(n.element[0],arguments)},handles:i,stop:function(){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),r.resizeStop&&r.resizeStop.apply(n.element[0],arguments),e.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(t){var n=e(window),r=e(document),i=r.scrollTop(),s=r.scrollLeft(),o=i;e.inArray(t,["center","top","right","bottom","left"])>=0&&(t=[t=="right"||t=="left"?t:"center",t=="top"||t=="bottom"?t:"middle"]),t.constructor!=Array&&(t=["center","middle"]);if(t[0].constructor==Number)s+=t[0];else switch(t[0]){case"left":s+=0;break;case"right":s+=n.width()-this.uiDialog.outerWidth();break;default:case"center":s+=(n.width()-this.uiDialog.outerWidth())/2}if(t[1].constructor==Number)i+=t[1];else switch(t[1]){case"top":i+=0;break;case"bottom":i+=n.height()-this.uiDialog.outerHeight();break;default:case"middle":i+=(n.height()-this.uiDialog.outerHeight())/2}i=Math.max(i,o),this.uiDialog.css({top:i,left:s})},_setData:function(r,i){t[r]&&this.uiDialog.data(t[r],i);switch(r){case"buttons":this._createButtons(i);break;case"closeText":this.uiDialogTitlebarCloseText.text(i);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(n+i);break;case"draggable":i?this._makeDraggable():this.uiDialog.draggable("destroy");break;case"height":this.uiDialog.height(i);break;case"position":this._position(i);break;case"resizable":var s=this.uiDialog,o=this.uiDialog.is(":data(resizable)");o&&!i&&s.resizable("destroy"),o&&typeof i=="string"&&s.resizable("option","handles",i),o||this._makeResizable(i);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(i||"&nbsp;");break;case"width":this.uiDialog.width(i)}e.widget.prototype._setData.apply(this,arguments)},_size:function(){var e=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var t=this.uiDialog.css({height:"auto",width:e.width}).height();this.element.css({minHeight:Math.max(e.minHeight-t,0),height:e.height=="auto"?"auto":Math.max(e.height-t,0)})}}),e.extend(e.ui.dialog,{version:"1.7.3",defaults:{autoOpen:!0,bgiframe:!1,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:"center",resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(e){return"ui-dialog-title-"+(e.attr("id")||++this.uuid)},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){var n=e(t.target).parents(".ui-dialog").css("zIndex")||0;return n>e.ui.dialog.overlay.maxZ})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&n.keyCode&&n.keyCode==e.ui.keyCode.ESCAPE&&t.close(n)}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=e("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});return t.options.bgiframe&&e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){this.instances.splice(e.inArray(this.instances,t),1),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var n=0;e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return t<n?e(window).height()+"px":t+"px"}return e(document).height()+"px"},width:function(){if(e.browser.msie&&e.browser.version<7){var t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return t<n?e(window).width()+"px":t+"px"}return e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.widget("ui.slider",e.extend({},e.ui.mouse,{_init:function(){var t=this,n=this.options;this._keySliding=!1,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this.range=e([]),n.range&&(n.range===!0?(this.range=e("<div></div>"),n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&n.values.length!=2&&(n.values=[n.values[0],n.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),(n.range=="min"||n.range=="max")&&this.range.addClass("ui-slider-range-"+n.range),this.range.addClass("ui-widget-header")),e(".ui-slider-handle",this.element).length==0&&e('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");if(n.values&&n.values.length)while(e(".ui-slider-handle",this.element).length<n.values.length)e('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var r=!0,i=e(this).data("index.ui-slider-handle");if(t.options.disabled)return;switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r=!1,t._keySliding||(t._keySliding=!0,e(this).addClass("ui-state-active"),t._start(n,i))}var s,o,u=t._step();t.options.values&&t.options.values.length?s=o=t.values(i):s=o=t.value();switch(n.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s==t._valueMax())return;o=s+u;break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s==t._valueMin())return;o=s-u}return t._slide(n,i,o),r}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._stop(n,r),t._change(n,r),t._keySliding=!1,e(this).removeClass("ui-state-active"))}),this._refreshValue()},destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;if(n.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset();var r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,o,u=this,f;this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),f=t)}),n.range==1&&this.values(1)==n.min&&(o=e(this.handles[++f])),this._start(t,f),u._handleIndex=f,o.addClass("ui-state-active").focus();var l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle");return this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},i=this._normValueFromMouse(r),this._slide(t,f,i),!0},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,!1},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n;"horizontal"==this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));var r=n/t;r>1&&(r=1),r<0&&(r=0),"vertical"==this.orientation&&(r=1-r);var i=this._valueMax()-this._valueMin(),s=r*i,o=s%this.options.step,u=this._valueMin()+s-o;return o>this.options.step/2&&(u+=this.options.step),parseFloat(u.toFixed(5))},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r=this.handles[t];if(this.options.values&&this.options.values.length){var i=this.values(t?0:1);this.options.values.length==2&&this.options.range===!0&&(t==0&&n>i||t==1&&n<i)&&(n=i);if(n!=this.values(t)){var s=this.values();s[t]=n;var o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:s}),i=this.values(t?0:1);o!==!1&&this.values(t,n,e.type=="mousedown"&&this.options.animate,!0)}}else if(n!=this.value()){var o=this._trigger("slide",e,{handle:this.handles[t],value:n});o!==!1&&this._setData("value",n,e.type=="mousedown"&&this.options.animate)}},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)},value:function(e){return arguments.length&&(this._setData("value",e),this._change(null,0)),this._value()},values:function(e,t,n,r){return arguments.length>1&&(this.options.values[e]=t,this._refreshValue(n),r||this._change(null,e)),arguments.length?this.options.values&&this.options.values.length?this._values(e):this.value():this._values()},_setData:function(t,n,r){e.widget.prototype._setData.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled")):this.handles.removeAttr("disabled");case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(r);break;case"value":this._refreshValue(r)}},_step:function(){var e=this.options.step;return e},_value:function(){var e=this.options.value;return e<this._valueMin()&&(e=this._valueMin()),e>this._valueMax()&&(e=this._valueMax()),e},_values:function(e){if(arguments.length){var t=this.options.values[e];return t<this._valueMin()&&(t=this._valueMin()),t>this._valueMax()&&(t=this._valueMax()),t}return this.options.values},_valueMin:function(){var e=this.options.min;return e},_valueMax:function(){var e=this.options.max;return e},_refreshValue:function(t){var n=this.options.range,r=this.options,i=this;if(this.options.values&&this.options.values.length){var s,o;this.handles.each(function(n,s){var o=(i.values(n)-i._valueMin())/(i._valueMax()-i._valueMin())*100,u={};u[i.orientation=="horizontal"?"left":"bottom"]=o+"%",e(this).stop(1,1)[t?"animate":"css"](u,r.animate),i.options.range===!0&&(i.orientation=="horizontal"?(n==0&&i.range.stop(1,1)[t?"animate":"css"]({left:o+"%"},r.animate),n==1&&i.range[t?"animate":"css"]({width:o-lastValPercent+"%"},{queue:!1,duration:r.animate})):(n==0&&i.range.stop(1,1)[t?"animate":"css"]({bottom:o+"%"},r.animate),n==1&&i.range[t?"animate":"css"]({height:o-lastValPercent+"%"},{queue:!1,duration:r.animate}))),lastValPercent=o})}else{var u=this.value(),f=this._valueMin(),l=this._valueMax(),c=l!=f?(u-f)/(l-f)*100:0,h={};h[i.orientation=="horizontal"?"left":"bottom"]=c+"%",this.handle.stop(1,1)[t?"animate":"css"](h,r.animate),n=="min"&&this.orientation=="horizontal"&&this.range.stop(1,1)[t?"animate":"css"]({width:c+"%"},r.animate),n=="max"&&this.orientation=="horizontal"&&this.range[t?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:r.animate}),n=="min"&&this.orientation=="vertical"&&this.range.stop(1,1)[t?"animate":"css"]({height:c+"%"},r.animate),n=="max"&&this.orientation=="vertical"&&this.range[t?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:r.animate})}}})),e.extend(e.ui.slider,{getter:"value values",version:"1.7.3",eventPrefix:"slide",defaults:{animate:!1,delay:0,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null}})}(jQuery),function(e){var n=0,r=0;e.widget("ui.tabs",{_init:function(){this.options.deselectable!==undefined&&(this.options.collapsible=this.options.deselectable),this._tabify(!0)},_setData:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,e=="deselectable"&&(this.options.collapsible=t),this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++r);return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function h(t,n){t.css({display:""}),e.browser.msie&&n.opacity&&t[0].style.removeAttribute("filter")}this.list=this.element.children("ul:first"),this.lis=e("li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]);var n=this,r=this.options,i=/^#.+/;this.anchors.each(function(t,s){var o=e(s).attr("href"),u=o.split("#")[0],a;u&&(u===location.toString().split("#")[0]||(a=e("base")[0])&&u===a.href)&&(o=s.hash,s.href=o);if(i.test(o))n.panels=n.panels.add(n._sanitizeSelector(o));else if(o!="#"){e.data(s,"href.tabs",o),e.data(s,"load.tabs",o.replace(/#.*$/,""));var f=n._tabId(s);s.href="#"+f;var l=e("#"+f);l.length||(l=e(r.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(n.panels[t-1]||n.list),l.data("destroy.tabs",!0)),n.panels=n.panels.add(l)}else r.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),r.selected===undefined?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return r.selected=e,!1}),typeof r.selected!="number"&&r.cookie&&(r.selected=parseInt(n._cookie(),10)),typeof r.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),r.selected=r.selected||0):r.selected===null&&(r.selected=-1),r.selected=r.selected>=0&&this.anchors[r.selected]||r.selected<0?r.selected:0,r.disabled=e.unique(r.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return n.lis.index(e)}))).sort(),e.inArray(r.selected,r.disabled)!=-1&&r.disabled.splice(e.inArray(r.selected,r.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),r.selected>=0&&this.anchors.length&&(this.panels.eq(r.selected).removeClass("ui-tabs-hide"),this.lis.eq(r.selected).addClass("ui-tabs-selected ui-state-active"),n.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[r.selected],n.panels[r.selected]))}),this.load(r.selected)),e(window).bind("unload",function(){n.lis.add(n.anchors).unbind(".tabs"),n.lis=n.anchors=n.panels=null})):r.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[r.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),r.cookie&&this._cookie(r.selected,r.cookie);for(var s=0,o;o=this.lis[s];s++)e(o)[e.inArray(s,r.disabled)!=-1&&!e(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");r.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(r.event!="mouseover"){var u=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},a=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){u("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){a("hover",e(this))}),this.anchors.bind("focus.tabs",function(){u("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){a("focus",e(this).closest("li"))})}var f,l;r.fx&&(e.isArray(r.fx)?(f=r.fx[0],l=r.fx[1]):f=l=r.fx);var p=l?function(t,r){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),r.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){h(r,l),n._trigger("show",null,n._ui(t,r[0]))})}:function(t,r){e(t).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active"),r.removeClass("ui-tabs-hide"),n._trigger("show",null,n._ui(t,r[0]))},d=f?function(e,t){t.animate(f,f.duration||"normal",function(){n.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),h(t,f),n.element.dequeue("tabs")})}:function(e,t,r){n.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default"),t.addClass("ui-tabs-hide"),n.element.dequeue("tabs")};this.anchors.bind(r.event+".tabs",function(){var t=this,i=e(this).closest("li"),s=n.panels.filter(":not(.ui-tabs-hide)"),o=e(n._sanitizeSelector(this.hash));if(i.hasClass("ui-tabs-selected")&&!r.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||n._trigger("select",null,n._ui(this,o[0]))===!1)return this.blur(),!1;r.selected=n.anchors.index(this),n.abort();if(r.collapsible){if(i.hasClass("ui-tabs-selected"))return r.selected=-1,r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){d(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return r.cookie&&n._cookie(r.selected,r.cookie),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),this.blur(),!1}r.cookie&&n._cookie(r.selected,r.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&n.element.queue("tabs",function(){d(t,s)}),n.element.queue("tabs",function(){p(t,o)}),n.load(n.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},destroy:function(){var t=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie)},add:function(t,n,r){r===undefined&&(r=this.anchors.length);var i=this,s=this.options,o=e(s.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,n)),u=t.indexOf("#")?this._tabId(e("a",o)[0]):t.replace("#","");o.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var a=e("#"+u);a.length||(a=e(s.panelTemplate).attr("id",u).data("destroy.tabs",!0)),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(o.appendTo(this.list),a.appendTo(this.list[0].parentNode)):(o.insertBefore(this.lis[r]),a.insertBefore(this.panels[r])),s.disabled=e.map(s.disabled,function(e,t){return e>=r?++e:e}),this._tabify(),this.anchors.length==1&&(o.addClass("ui-tabs-selected ui-state-active"),a.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){i._trigger("show",null,i._ui(i.anchors[0],i.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r]))},remove:function(t){var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0]))},enable:function(t){var n=this.options;if(e.inArray(t,n.disabled)==-1)return;this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(e){var t=this,n=this.options;e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e])))},select:function(e){typeof e=="string"?e=this.anchors.index(this.anchors.filter("[href$="+e+"]")):e===null&&(e=-1),e==-1&&this.options.collapsible&&(e=this
.options.selected),this.anchors.eq(e).trigger(this.options.event+".tabs")},load:function(t){var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){e(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}n.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]),this.panels.stop(!1,!0),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup()},url:function(e,t){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t)},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.7.3",getter:"length",defaults:{ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,n){var r=this,i=this.options,s=r._rotate||(r._rotate=function(t){clearTimeout(r.rotation),r.rotation=setTimeout(function(){var e=i.selected;r.select(++e<r.anchors.length?e:0)},e),t&&t.stopPropagation()}),o=r._unrotate||(r._unrotate=n?function(e){t=i.selected,s()}:function(e){e.clientX&&r.rotate(null)});e?(this.element.bind("tabsshow",s),this.anchors.bind(i.event+".tabs",o),s()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",s),this.anchors.unbind(i.event+".tabs",o),delete this._rotate,delete this._unrotate)}})}(jQuery),function($){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1},this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,showMonthAfterYear:!1,yearRange:"-10:+10",showOtherMonths:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}function isArray(e){return e&&($.browser.safari&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.7.3"}});var PROP_NAME="datepicker";$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(target.id="dp"+ ++this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;var r=this._get(t,"appendText"),i=this._get(t,"isRTL");r&&(t.append=$('<span class="'+this._appendClass+'">'+r+"</span>"),n[i?"before":"after"](t.append));var s=this._get(t,"showOn");(s=="focus"||s=="both")&&n.focus(this._showDatepicker);if(s=="button"||s=="both"){var o=this._get(t,"buttonText"),u=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:u,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(u==""?o:$("<img/>").attr({src:u,alt:o,title:o}))),n[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(e),!1})}n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t)},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t)),this._updateDatepicker(t),this._updateAlternate(t)},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){var o="dp"+ ++this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" size="1" style="position: absolute; top: -100px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker(null);var s=this._getDateDatepicker(e);extendRemove(r.settings,i),this._setDateDatepicker(e,s),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t,n){var r=this._getInst(e);r&&(this._setDate(r,t,n),this._updateDatepicker(r),this._updateAlternate(r))},_getDateDatepicker:function(e){var t=this._getInst(e);return t&&!t.inline&&this._setDateFromField(t),t?this._getDate(t):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:var i=$("td."+$.datepicker._dayOverClass+", td."+$.datepicker._currentClass,t.dpDiv);return i[0]?$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]):$.datepicker._hideDatepicker(null,$.datepicker._get(t,"duration")),!1;case 27:$.datepicker._hideDatepicker(null,$.datepicker._get(t,"duration"));break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||r<" "||!n||n.indexOf(r)>-1}},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e),n=$.datepicker._get(t,"beforeShow");extendRemove(t.settings,n?n.apply(e,[e,t]):{}),$.datepicker._hideDatepicker(null,""),$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each(function(){return r|=$(this).css("position")=="fixed",!r}),r&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var i={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.rangeStart=null,t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),i=$.datepicker._checkOffset(t,i,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"});if(!t.inline){var s=$.datepicker._get(t,"showAnim")||"show",o=$.datepicker._get(t,"duration"),u=function(){$.datepicker._datepickerShowing=!0,$.browser.msie&&parseInt($.browser.version,10)<7&&$("iframe.ui-datepicker-cover").css({width:t.dpDiv.width()+4,height:t.dpDiv.height()+4})};$.effects&&$.effects[s]?t.dpDiv.show(s,$.datepicker._get(t,"showOptions"),o,u):t.dpDiv[s](o,u),o==""&&u(),t.input[0].type!="hidden"&&t.input[0].focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){var t={width:e.dpDiv.width()+4,height:e.dpDiv.height()+4},n=this;e.dpDiv.empty().append(this._generateHTML(e)).find("iframe.ui-datepicker-cover").css({width:t.width,height:t.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){n._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var r=this._getNumberOfMonths(e),i=r[1],s=17;i>1?e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"):e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e.input&&e.input[0].type!="hidden"&&e==$.datepicker._curInst&&$(e.input[0]).focus()},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+$(document).scrollLeft(),a=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=t.left+r>u&&u>r?Math.abs(t.left+r-u):0,t.top-=t.top+i>a&&a>i?Math.abs(t.top+i+o*2-a):0,t},_findPos:function(e){while(e&&(e.type=="hidden"||e.nodeType!=1))e=e.nextSibling;var t=$(e).offset();return[t.left,t.top]},_hideDatepicker:function(e,t){var n=this._curInst;if(!n||e&&n!=$.data(e,PROP_NAME))return;n.stayOpen&&this._selectDate("#"+n.id,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)),n.stayOpen=!1;if(this._datepickerShowing){t=t!=null?t:this._get(n,"duration");var r=this._get(n,"showAnim"),i=function(){$.datepicker._tidyDialog(n)};t!=""&&$.effects&&$.effects[r]?n.dpDiv.hide(r,$.datepicker._get(n,"showOptions"),t,i):n.dpDiv[t==""?"hide":r=="slideDown"?"slideUp":r=="fadeIn"?"fadeOut":"hide"](t,i),t==""&&this._tidyDialog(n);var s=this._get(n,"onClose");s&&s.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}this._curInst=null},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target);t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)&&$.datepicker._hideDatepicker(null,"")},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i._selectingMonthYear=!1,i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_clickMonthYear:function(e){var t=$(e),n=this._getInst(t[0]);n.input&&n._selectingMonthYear&&!$.browser.msie&&n.input[0].focus(),n._selectingMonthYear=!n._selectingMonthYear},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,s.stayOpen&&(s.endDay=s.endMonth=s.endYear=null),this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)),s.stayOpen&&(s.rangeStart=this._daylightSavingAdjust(new Date(s.currentYear,s.currentMonth,s.currentDay)),this._updateDatepicker(s))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);n.stayOpen=!1,n.endDay=n.endMonth=n.endYear=n.rangeStart=null,this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):r.stayOpen||(this._hideDatepicker(null,this._get(r,"duration")),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input[0].focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e);dateStr=this.formatDate(n,r,this._getFormatConfig(e)),$(t).each(function(){$(this).val(dateStr)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),0,4),r=n.getDay()||7;n.setDate(n.getDate()+1-r);if(r<4&&t<n)return t.setDate(t.getDate()-3),$.datepicker.iso8601Week(t);if(t>new Date(t.getFullYear(),11,28)){r=(new Date(t.getFullYear()+1,0,4)).getDay()||7;if(r>4&&(t.getDay()||7)<r-3)return 1}return Math.floor((t-n)/864e5/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){p(e);var n=e=="@"?14:e=="y"?4:e=="o"?3:2,r=n,i=0;while(r>0&&g<t.length&&t.charAt(g)>="0"&&t.charAt(g)<="9")i=i*10+parseInt(t.charAt(g++),10),r--;if(r==n)throw"Missing number at position "+g;return i},v=function(e,n,r){var i=p(e)?r:n,s=0;for(var o=0;o<i.length;o++)s=Math.max(s,i[o].length);var u="",a=g;while(s>0&&g<t.length){u+=t.charAt(g++);for(var f=0;f<i.length;f++)if(u==i[f])return f+1;s--}throw"Unknown name at position "+a},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var w=this._getDaysInMonth(a,f-1);if(l<=w)break;f++,l-=w}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":var p=t.getDate();for(var d=t.getMonth()-1;d>=0;d--)p+=this._getDaysInMonth(t.getFullYear(),d);l+=a("o",p,3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1;for(var r=0;r<e.length;r++)if(n)e.charAt(r)=="'"&&!lookAhead("'")?n=!1:t+=e.charAt(r);else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?t+="'":n=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e){var t=this._get(e,"dateFormat"),n=e.input?e.input.val():null;e.endDay=e.endMonth=e.endYear=null;var r=defaultDate=this._getDefaultDate(e),i=this._getFormatConfig(e);try{r=this.parseDate(t,n,i)||defaultDate}catch(s){this.log(s),r=defaultDate}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){var t=this._determineDate(this._get(e,"defaultDate"),new Date),n=this._getMinMaxDate(e,"min",!0),r=this._getMinMaxDate(e,"max");return t=n&&t<n?n:t,t=r&&t>r?r:t,t},_determineDate:function(e,t){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(e,t){var n=new Date,r=n.getFullYear(),i=n.getMonth(),s=n.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=o.exec(e);while(u){switch(u[2]||"d"){case"d":case"D":s+=parseInt(u[1],10);break;case"w":case"W":s+=parseInt(u[1],10)*7;break;case"m":case"M":i+=parseInt(u[1],10),s=Math.min(s,t(r,i));break;case"y":case"Y":r+=parseInt(u[1],10),s=Math.min(s,t(r,i))}u=o.exec(e)}return new Date(r,i,s)};return e=e==null?t:typeof e=="string"?r(e,this._getDaysInMonth):typeof e=="number"?isNaN(e)?t:n(e):e,e=e&&e.toString()=="Invalid Date"?t:e,e&&(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),this._daylightSavingAdjust(e)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear;t=this._determineDate(t,new Date),e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=this._get(e,"stepBigMonths"),l=o[0]!=1||o[1]!=1,c=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min",!0),p=this._getMinMaxDate(e,"max"),d=e.drawMonth-u,v=e.drawYear;d<0&&(d+=12,v--);if(p){var m=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[1]+1,p.getDate()));m=h&&m<h?h:m;while(this._daylightSavingAdjust(new Date(v,d,1))>m)d--,d<0&&(d=11,v--)}e.drawMonth=d,e.drawYear=v;var g=this._get(e,"prevText");g=s?this.formatDate(g,this._daylightSavingAdjust(new Date(v,d-a,1)),this._getFormatConfig(e)):g;var y=this._canAdjustMonth(e,-1,v,d)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+e.id+"', -"+a+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>",b=this._get(e,"nextText");b=s?this.formatDate(b,this._daylightSavingAdjust(new Date(v,d+a,1)),this._getFormatConfig(e)):b;var w=this._canAdjustMonth(e,1,v,d)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+e.id+"', +"+a+", 'M');\" title=\""+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+b+"</span></a>",E=this._get(e,"currentText"),S=this._get(e,"gotoCurrent")&&e.currentDay?c:t;E=s?this.formatDate(E,S,this._getFormatConfig(e)):E;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",T=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?x:"")+(this._isInRange(e,S)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#'+e.id+"');\">"+E+"</button>":"")+(n?"":x)+"</div>":"",N=parseInt(this._get(e,"firstDay"),10);N=isNaN(N)?0:N;var C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"calculateWeek")||this.iso8601Week,P=e.endDay?this._daylightSavingAdjust(new Date(e.endYear,e.endMonth,e.endDay)):c,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(v,d,e.selectedDay)),R=" ui-corner-all",U="";if(l){U+='<div class="ui-datepicker-group ui-datepicker-group-';switch(I){case 0:U+="first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+="last",R=" ui-corner-"+(n?"left":"right");break;default:U+="middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?w:y:"")+(/all|right/.test(R)&&j==0?n?y:w:"")+this._generateMonthYearHeader(e,d,v,h,p,q,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z="";for(var W=0;W<7;W++){var X=(W+N)%7;z+="<th"+((W+N+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(v,d);v==e.selectedYear&&d==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(v,d)-N+7)%7,K=l?6:Math.ceil((J+V)/7),Q=this._daylightSavingAdjust(new Date(v,d,1-J));for(var G=0;G<K;G++){U+="<tr>";var Y="";for(var W=0;W<7;W++){var Z=M?M.apply(e.input?e.input[0]:null,[Q]):[!0,""],et=Q.getMonth()!=d,tt=et||!Z[0]||h&&Q<h||p&&Q>p;Y+='<td class="'+((W+N+6)%7>=5?" ui-datepicker-week-end":"")+(et?" ui-datepicker-other-month":"")+(Q.getTime()==q.getTime()&&d==e.selectedMonth&&e._keyEvent||H.getTime()==Q.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(tt?" "+this._unselectableClass+" ui-state-disabled":"")+(et&&!_?"":" "+Z[1]+(Q.getTime()>=c.getTime()&&Q.getTime()<=P.getTime()?" "+this._currentClass:"")+(Q.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!et||_)&&Z[2]?' title="'+Z[2]+'"':"")+(tt?"":" onclick=\"DP_jQuery.datepicker._selectDay('#"+e.id+"',"+d+","+v+', this);return false;"')+">"+(et?_?Q.getDate():"&#xa0;":tt?'<span class="ui-state-default">'+Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==t.getTime()?" ui-state-highlight":"")+(Q.getTime()>=c.getTime()&&Q.getTime()<=P.getTime()?" ui-state-active":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>",Q.setDate(Q.getDate()+1),Q=this._daylightSavingAdjust(Q)}U+=Y+"</tr>"}d++,d>11&&(d=0,v++),U+="</tbody></table>"+(l?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=T+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u,a){r=e.rangeStart&&r&&s<r?s:r;var f=this._get(e,"changeMonth"),l=this._get(e,"changeYear"),c=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',p="";if(o||!f)p+='<span class="ui-datepicker-month">'+u[t]+"</span> ";else{var d=r&&r.getFullYear()==n,v=i&&i.getFullYear()==n;p+='<select class="ui-datepicker-month" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+e.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+e.id+"');\">";for(var m=0;m<12;m++)(!d||m>=r.getMonth())&&(!v||m<=i.getMonth())&&(p+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");p+="</select>"}c||(h+=p+((o||f||l)&&(!f||!l)?"&#xa0;":""));if(o||!l)h+='<span class="ui-datepicker-year">'+n+"</span>";else{var g=this._get(e,"yearRange").split(":"),y=0,b=0;g.length!=2?(y=n-10,b=n+10):g[0].charAt(0)=="+"||g[0].charAt(0)=="-"?(y=n+parseInt(g[0],10),b=n+parseInt(g[1],10)):(y=parseInt(g[0],10),b=parseInt(g[1],10)),y=r?Math.max(y,r.getFullYear()):y,b=i?Math.min(b,i.getFullYear()):b,h+='<select class="ui-datepicker-year" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+e.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+e.id+"');\">";for(;y<=b;y++)h+='<option value="'+y+'"'+(y==n?' selected="selected"':"")+">"+y+"</option>";h+="</select>"}return c&&(h+=(o||f||l?"&#xa0;":"")+p),h+="</div>",h},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?
t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._daylightSavingAdjust(new Date(r,i,s)),u=this._getMinMaxDate(e,"min",!0),a=this._getMinMaxDate(e,"max");o=u&&o<u?u:o,o=a&&o>a?a:o,e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t,n){var r=this._determineDate(this._get(e,t+"Date"),null);return!n||!e.rangeStart?r:!r||e.rangeStart>r?e.rangeStart:r},_getDaysInMonth:function(e,t){return 32-(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=e.rangeStart?this._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)):null;n=n&&e.rangeStart<n?e.rangeStart:n;var r=n||this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!r||t>=r)&&(!i||t<=i)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.7.3",window.DP_jQuery=$}(jQuery),function(e){e.widget("ui.progressbar",{_init:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()}),this.valueDiv=e('<div class="ui-progressbar-value ui-widget-header ui-corner-left"></div>').appendTo(this.element),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeData("progressbar").unbind(".progressbar"),this.valueDiv.remove(),e.widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===undefined?this._value():(this._setData("value",e),this)},_setData:function(t,n){switch(t){case"value":this.options.value=n,this._refreshValue(),this._trigger("change",null,{})}e.widget.prototype._setData.apply(this,arguments)},_value:function(){var e=this.options.value;return e<this._valueMin()&&(e=this._valueMin()),e>this._valueMax()&&(e=this._valueMax()),e},_valueMin:function(){var e=0;return e},_valueMax:function(){var e=100;return e},_refreshValue:function(){var e=this.value();this.valueDiv[e==this._valueMax()?"addClass":"removeClass"]("ui-corner-right"),this.valueDiv.width(e+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.7.3",defaults:{value:0}})}(jQuery),jQuery.effects||function(e){function t(t,n){var r=t[1]&&t[1].constructor==Object?t[1]:{};n&&(r.mode=n);var i=t[1]&&t[1].constructor!=Object?t[1]:r.duration?r.duration:t[2];i=e.fx.off?0:typeof i=="number"?i:e.fx.speeds[i]||e.fx.speeds._default;var s=r.callback||e.isFunction(t[1])&&t[1]||e.isFunction(t[2])&&t[2]||e.isFunction(t[3])&&t[3];return[t[0],r,i,s]}function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=e.curCSS(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}e.effects={version:"1.7.3",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var t={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")};e.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var n=e.parent();if(e.css("position")=="static")n.css({position:"relative"}),e.css({position:"relative"});else{var r=e.css("top");isNaN(parseInt(r,10))&&(r="auto");var i=e.css("left");isNaN(parseInt(i,10))&&(i="auto"),n.css({position:e.css("position"),top:r,left:i,zIndex:e.css("z-index")}).show(),e.css({position:"relative",top:0,left:0})}return n.css(t),n},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(i[n]=unit[0]*r+unit[1])}),i},animateClass:function(t,n,r,i){var s=typeof r=="function"?r:i?i:null,o=typeof r=="string"?r:null;return this.each(function(){var r={},i=e(this),u=i.attr("style")||"";typeof u=="object"&&(u=u.cssText),t.toggle&&(i.hasClass(t.toggle)?t.remove=t.toggle:t.add=t.toggle);var a=e.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);t.add&&i.addClass(t.add),t.remove&&i.removeClass(t.remove);var l=e.extend({},document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle);t.add&&i.removeClass(t.add),t.remove&&i.addClass(t.remove);for(var c in l)typeof l[c]!="function"&&l[c]&&c.indexOf("Moz")==-1&&c.indexOf("length")==-1&&l[c]!=a[c]&&(c.match(/color/i)||!c.match(/color/i)&&!isNaN(parseInt(l[c],10)))&&(a.position!="static"||a.position=="static"&&!c.match(/left|top|bottom|right/))&&(r[c]=l[c]);i.animate(r,n,o,function(){typeof e(this).attr("style")=="object"?(e(this).attr("style").cssText="",e(this).attr("style").cssText=u):e(this).attr("style",u),t.add&&e(this).addClass(t.add),t.remove&&e(this).removeClass(t.remove),s&&s.apply(this,arguments)})})}},e.fn.extend({_show:e.fn.show,_hide:e.fn.hide,__toggle:e.fn.toggle,_addClass:e.fn.addClass,_removeClass:e.fn.removeClass,_toggleClass:e.fn.toggleClass,effect:function(t,n,r,i){return e.effects[t]?e.effects[t].call(this,{method:t,options:n||{},duration:r,callback:i}):null},show:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._show.apply(this,arguments):this.effect.apply(this,t(arguments,"show"))},hide:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])?this._hide.apply(this,arguments):this.effect.apply(this,t(arguments,"hide"))},toggle:function(){return!arguments[0]||arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])||e.isFunction(arguments[0])||typeof arguments[0]=="boolean"?this.__toggle.apply(this,arguments):this.effect.apply(this,t(arguments,"toggle"))},addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},toggleClass:function(t,n,r,i){return typeof n!="boolean"&&n?e.effects.animateClass.apply(this,[{toggle:t},n,r,i]):this._toggleClass(t,n)},morph:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.state==0&&(e.start=r(e.elem,i),e.end=n(e.end)),e.elem.style[i]="rgb("+[Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0),Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)].join(",")+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=s=="vertical"?"height":"width",f=s=="vertical"?o.height():o.width();i=="show"&&o.css(u,0);var l={};l[u]=i=="show"?f:0,o.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",o=t.options.distance||20,u=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",o=t.options.distance||(l=="top"?n.outerHeight({margin:!0})/3:n.outerWidth({margin:!0})/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-o:o),i=="hide"&&(o/=u*2),i!="hide"&&u--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+o,n.animate(h,f/2,t.options.easing),o/=2,u--}for(var p=0;p<u;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),o=i=="hide"?o*2:o/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+o,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=n[0].tagName=="IMG"?o:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?u.height():u.width();i=="show"&&(u.css(f.size,0),u.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,u.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight({margin:!0})/2:n.outerWidth({margin:!0})/2);i=="show"&&n.css("opacity",0).css(o,u=="pos"?-f:f);var l={opacity:i=="show"?1:0};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var o=i.outerWidth(!0),u=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(o/r),top:-f*(u/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/r,height:u/n,left:s.left+l*(o/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(o/r):0),top:s.top+f*(u/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(u/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(o/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(o/r)),top:s.top+f*(u/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(u/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,o=!!t.options.horizFirst,u=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=o,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(o?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,u,t.options.easing).animate(v,u,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.color||"#ffff99",o=n.css("backgroundColor");e.effects.save(n,r),n.show(),n.css({backgroundImage:"none",backgroundColor:s});var u={backgroundColor:o};i=="hide"&&(u.opacity=0),n.animate(u,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&e.browser.msie&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show"),i=t.options.times||5,s=t.duration?t.duration/2:e.fx.speeds._default/2;r=="hide"&&i--,n.is(":hidden")&&(n.css("opacity",0),n.show(),n.animate({opacity:1},s,t.options.easing),i-=2);for(var o=0;o<i;o++)n.animate({opacity:0},s,t.options.easing).animate({opacity:1},s,t.options.easing);r=="hide"?n.animate({opacity:0},s,t.options.easing,function(){n.hide(),t.callback&&t.callback.apply(this,arguments)}):n.animate({opacity:0},s,t.options.easing).animate({opacity:1},s,t.options.easing,function(){t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"hide"),s=parseInt(t.options.percent,10)||150;r.fade=!0;var o={height:n.height(),width:n.width()},u=s/100;n.from=i=="hide"?o:{height:o.height*u,width:o.width*u},r.from=n.from,r.percent=i=="hide"?s:100,r.mode=i,n.effect("scale",r,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),o=t.options.direction||"both",u=t.options.origin;i!="effect"&&(r.origin=u||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:o!="horizontal"?s/100:1,x:o!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","left","width","height","overflow","opacity"],i=["position","top","left","overflow","opacity"],s=["width","height","overflow"],o=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(o),n.from=e.effects.setTransition(n,o,m.from.y,n.from),n.to=e.effects.setTransition(n,o,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")u=u.concat(["marginTop","marginBottom"]).concat(o),f=f.concat(["marginLeft","marginRight"]),s=r.concat(u).concat(f),n.find("*[width]").each(function(){child=e(this),c&&e.effects.save(child,s);var n={height:child.height(),width:child.width()};child.from={height:n.height*m.from.y,width:n.width*m.from.x},child.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,u,m.from.y,child.from),child.to=e.effects.setTransition(child,u,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,f,m.from.x,child.from),child.to=e.effects.setTransition(child,f,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){c&&e.effects.restore(child,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",o=t.options.distance||20,u=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+o,p[l]=(c=="pos"?"+=":"-=")+o*2,d[l]=(c=="pos"?"-=":"+=")+o*2,n.animate(h,f,t.options.easing);for(var v=1;v<u;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight({margin:!0}):n.outerWidth({margin:!0}));i=="show"&&n.css(o,u=="pos"?-f:f);var l={};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},o=n.offset(),u=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){u.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery);var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!0,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,n){return e[t]!==null&&e[t]!==n},I18n.lookup=function(e,t){var t=t||{},n=e,r=this.prepareOptions(I18n.translations),i=r[t.locale||I18n.currentLocale()],t=this.prepareOptions(t),s;if(!i)return;typeof e=="object"&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);while(e.length>0){s=e.shift(),i=i[s];if(!i){I18n.fallbacks&&!t.fallback&&(i=I18n.lookup(n,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}}return!i&&this.isValidNode(t,"defaultValue")&&(i=t.defaultValue),i},I18n.prepareOptions=function(){var e={},t,n=arguments.length;for(var r=0;r<n;r++){t=arguments[r];if(!t)continue;for(var i in t)this.isValidNode(e,i)||(e[i]=t[i])}return e},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var n=e.match(this.PLACEHOLDER),r,i,s;if(!n)return e;for(var o=0;r=n[o];o++)s=r.replace(this.PLACEHOLDER,"$1"),i=t[s],this.isValidNode(t,s)||(i="[missing "+r+" value]"),regex=new RegExp(r.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,i);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var n=this.lookup(e,t);try{return typeof n=="object"?typeof t.count=="number"?this.pluralize(t.count,e,t):n:this.interpolate(n,t)}catch(r){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,n;if(typeof e=="object")return e;t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/);if(t){for(var r=1;r<=6;r++)t[r]=parseInt(t[r],10)||0;t[2]-=1,t[7]?n=new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):n=new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else typeof e=="number"?(n=new Date,n.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(n=new Date,n.setTime(Date.parse(e))):(n=new Date,n.setTime(Date.parse(e)));return n},I18n.toTime=function(e,t){var n=this.parseDate(t),r=this.lookup(e);return n.toString().match(/invalid/i)?n.toString():r?this.strftime(n,r):n.toString()},I18n.strftime=function(e,t){var n=this.lookup("date");if(!n)return e.toString();n.meridian=n.meridian||["AM","PM"];var r=e.getDay(),i=e.getDate(),s=e.getFullYear(),o=e.getMonth()+1,u=e.getHours(),a=u,f=u>11?1:0,l=e.getSeconds(),c=e.getMinutes(),h=e.getTimezoneOffset(),p=Math.floor(Math.abs(h/60)),d=Math.abs(h)-p*60,v=(h>0?"-":"+")+(p.toString().length<2?"0"+p:p)+(d.toString().length<2?"0"+d:d);a>12?a-=12:a===0&&(a=12);var m=function(e){var t="0"+e.toString();return t.substr(t.length-2)},g=t;return g=g.replace("%a",n.abbr_day_names[r]),g=g.replace("%A",n.day_names[r]),g=g.replace("%b",n.abbr_month_names[o]),g=g.replace("%B",n.month_names[o]),g=g.replace("%d",m(i)),g=g.replace("%e",i),g=g.replace("%-d",i),g=g.replace("%H",m(u)),g=g.replace("%-H",u),g=g.replace("%I",m(a)),g=g.replace("%-I",a),g=g.replace("%m",m(o)),g=g.replace("%-m",o),g=g.replace("%M",m(c)),g=g.replace("%-M",c),g=g.replace("%p",n.meridian[f]),g=g.replace("%S",m(l)),g=g.replace("%-S",l),g=g.replace("%w",r),g=g.replace("%y",m(s)),g=g.replace("%-y",m(s).replace(/^0+/,"")),g=g.replace("%Y",s),g=g.replace("%z",v),g},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var n=e<0,r=Math.abs(e).toFixed(t.precision).toString(),i=r.split("."),s,o=[],u;e=i[0],s=i[1];while(e.length>0)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);u=o.join(t.delimiter),t.precision>0&&(u+=t.separator+i[1]),n&&(u="-"+u);if(t.strip_insignificant_zeros){var a={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};u=u.replace(a.zeros,"").replace(a.separator,"")}return u},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e),e},I18n.toHumanSize=function(e,t){var n=1024,r=e,i=0,s,o;while(r>=n&&i<4)r/=n,i+=1;return i===0?(s=this.t("number.human.storage_units.units.byte",{count:r}),o=0):(s=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][i]),o=r-Math.floor(r)===0?0:1),t=this.prepareOptions(t,{precision:o,format:"%n%u",delimiter:""}),e=this.toNumber(r,t),e=t.format.replace("%u",s).replace("%n",e),e},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,n){var r;try{r=this.lookup(t,n)}catch(i){}if(!r)return this.missingTranslation(t);var s;n=this.prepareOptions(n),n.count=e.toString();switch(Math.abs(e)){case 0:s=this.isValidNode(r,"zero")?r.zero:this.isValidNode(r,"none")?r.none:this.isValidNode(r,"other")?r.other:this.missingTranslation(t,"zero");break;case 1:s=this.isValidNode(r,"one")?r.one:this.missingTranslation(t,"one");break;default:s=this.isValidNode(r,"other")?r.other:this.missingTranslation(t,"other")}return this.interpolate(s,n)},I18n.missingTranslation=function(){var e='[missing "'+this.currentLocale(),t=arguments.length;for(var n=0;n<t;n++)e+="."+arguments[n];
return e+='" translation]',e},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize,function(e){Backstop.form_for=function(t){function n(t){var n='<form id="{{id}}" class="grid-filter"><fieldset class="standard"></fieldset><fieldset class="advanced"><fieldset class="buttons"><input type="submit" class="filtersubmit submit applySubmit" /><input type="submit" class="filtersubmit clear clearSubmit" /></fieldset></fieldset></form>',r=e.mustache(n,{id:t});return e(r)}e("input.applySubmit").val(I18n.t("attachables.apply")),e("input.clearSubmit").val(I18n.t("attachables.clear"));var r=e(t),i=r.attr("id")+"-form",s=e("form#"+i);return s.size()===0&&(s=n(i),r.before(s)),s}}(jQuery),function(e){var t={jqGridOptions:function(){var t={ajaxGridOptions:{error:function(t,n,r){if(t.responseText===""&&t.status===0)return;try{var i=e.parseJSON(t.responseText);!Backstop.isnull(i)&&i.redirect_to?window.location=i.redirect_to:e(".loading").html("<p>An Error has occurred.</p><p>"+i.error+"</p>")}catch(s){e(".loading").html("An Unknown Error has occurred. Data could not be loaded.")}}},advanced_search:"hidden",autowidth:!0,cellEdit:!1,cellurl:"",datatype:"json",editurl:"",gridview:!1,height:"100%",imgpath:"/images/themes/lightness/images",jsonReader:{root:"rows",page:"page",total:"total",repeatitems:!1,userdata:"rows",id:"id"},loadComplete:function(e){},multiselect:!1,rowList:[10,25,50,100],rowNum:25,rownumbers:!1,scrollrows:!0,sortorder:"DESC",subGrid:!1,toppager:!1,viewrecords:!0};return e.extend(t,this.options)},_init:function(){var t=this,n=this.element.attr("data-src"),r=this.element.attr("title");if(typeof n=="undefined"||n===null)n="";if(typeof r=="undefined"||r===null)r="";var i=e.extend({url:n,caption:r},this.options);e.extend(i,this._parseColumns(this.options.columns)),this.options=i,typeof this.options.loadComplete=="undefined"&&(this.options.loadComplete=function(e){t._trigger(".loaded",0,e)}),typeof this.options.onCellSelect=="undefined"&&(this.options.onCellSelect=function(e,n,r){t._trigger(".cellSelected",0,arguments)}),this.table=e("<table/>").addClass("scroll").attr("id",this.element.attr("id")+"_grid"),this.pager=e("<div/>").attr("id",this.pagerId()),this.options.pager="#"+this.pagerId(),Backstop.isnull(this.options.url.match(/\?/))&&(this.options.url=this.options.url+"?q=1"),this.element.append(this.table),this.element.append(this.pager),this.element.bind("reload",function(e){t.reload()}),this._setup_jqgrid(),this._addFilters(this.options.filter||{},this.options.advanced_search),this._trigger(".initialized",0,t)},_create:function(){},_destroy:function(){},gridId:function(){return this.table.attr("id")},pagerId:function(){var e=this.element.attr("id");return e+"_pager"},gridTable:function(){return this.table},searchScope:function(e,t){if(Backstop.isnull(e))throw"Argument Error: No scope key provided.";if(typeof t=="undefined"){var n=this._regex(e).exec(this._gridUrl());if(typeof n=="undefined"||n===null)return null;var r=n[1];return r}this._removeSearchScope(e);if(t===null||t==="")return this.element;var i=this._gridUrl().replace(/&$/,"")+"&search_scope["+e+"]="+encodeURIComponent(t);return this._gridUrl(i),this.element},selectedRowIds:function(){return this.table.getGridParam("selarrrow")},selectedRows:function(){var t=this.table,n=this.selectedRowIds();return e.map(n,function(e){var n=t.jqGrid("getInd",e)-1,r=t.getGridParam("userData")[n];for(var i in r){var s=/^(.*)_json$/.exec(i);if(s){var o=s[0],u=s[1];r[u]=r[o]}}return r})},createFilter:function(e,t){var n=this._currentFilters();if(Backstop.isnull(t))return n;Backstop.isnull(e)&&(e="TypeAheadFilter");var r=t.field;return!Backstop.isnull(r)&&!n[r]?(n[r]=new Backstop.Grid[e](this.element,t),n[r]):n},filter:function(e,t){return this.createFilter("TypeAheadFilter",{field:e,label:t,advanced:!0})},select:function(e,t){return this.createFilter("SelectFilter",{field:e,label:t})},reload:function(){return this.gridTable().setGridParam({page:1}),this.gridTable().trigger("reloadGrid")},_currentFilters:function(){return Backstop.isnull(this.__current_filters)&&(this.__current_filters={}),this.__current_filters},_setup_jqgrid:function(){var t=this.table.jqGrid(this.jqGridOptions());t.navGrid(this.options.pager,{edit:!1,add:!1,del:!1,search:!1,refresh:!0}).navButtonAdd(this.options.pager,{caption:"",title:"Toggle Search Toolbar",buttonicon:"ui-icon-search",onClickButton:function(){t[0].toggleToolbar()}}),t.filterToolbar(),this.options.showSearchByDefault||t[0].toggleToolbar(),this.searchPanel=e(this.options.pager+"_left table").clone(!0).attr("style",""),this.element.find(".ui-jqgrid-titlebar-close").before(this.searchPanel),Backstop.isnull(this.options.date_search)||this._setup_calendar_search()},_addFilters:function(t,n){var r=this;e.each(t,function(e,t){var n=t.type+"Filter";r.createFilter(n,t)});var i=Backstop.form_for(this.element);i.submit(function(t){t.preventDefault(),e.each(r.filter(),function(e,t){t.commit()}),r.element.trigger("reload")}),i.find(".buttons input.clear").click(function(t){e.each(r.filter(),function(e,t){t.reset()})}),i.hide(),i.find(".advanced").hide(),this.element.bind("backstopGrid.loaded",function(e){r._applyToggleTo(i,n)})},_applyToggleTo:function(t,n){var r=e(t),i=e("a#toggle-"+r.attr("id")),s=r.find('fieldset.advanced input[type!="submit"]').size()>0,o=r.find(':input[type!="submit"]').size()>0;o&&e(t).show();if((parseInt(i.size())===0||isNaN(parseInt(i.size())))&&s&&(!n||n!=="disabled")){i=e('<a href="#"></a>').text(I18n.t("attachables.show_advanced")).addClass("show-advanced").attr("id","toggle-"+r.attr("id")).click(function(e){e.preventDefault(),u()});var u=function(){r.find("fieldset.advanced").toggle(),r.find("fieldset.advanced").is(":visible")?i.text(I18n.t("attachables.hide_advanced")).addClass("hide-advanced"):i.text(I18n.t("attachables.show_advanced")).removeClass("hide-advanced")};n&&n==="true"&&u(),r.before(i)}return i},_setup_calendar_search:function(){var e=this.options.date_search.column,t,n,r=I18n.t("attachables.search_by_date");e?(t=this.options.date_search.defaultFrom,n=this.options.date_search.defaultTo):e=this.options.date_search,this.createFilter("CalendarRangeFilter",{field:e,label:r,advanced:!0,defaultFrom:t,defaultTo:n})},_regex:function(e){return new RegExp("search_scope\\["+e.replace(/([\[\]])/g,"\\$1")+"\\]=([^&]*)")},_removeSearchScope:function(e){this._gridUrl(this._gridUrl().replace(this._regex(e),""))},_gridUrl:function(e){return typeof e=="undefined"?this.gridTable().getGridParam("url"):(this.gridTable().jqGrid("setGridParam",{url:e}),e)},_parseColumns:function(t){var n={};return t===undefined?n:(n.colNames=e.map(t,function(e){return e.label}),n.colModel=e.map(t,function(t){return e.extend(t,{name:t.field,index:t.index||t.field})}),n)}};Backstop.Grid=Backstop.Grid?Backstop.Grid:t,e.widget("bs.backstopGrid",Backstop.Grid),e.extend(e.bs.backstopGrid,{getter:["gridTable","searchScope","selectedRows","selectedRowIds"]}),e(window).resize(function(){grid=e(".ui-jqgrid-btable:visible"),grid.each(function(t){gridId=e(this).attr("id"),gridParentWidth=e("#gbox_"+gridId).parent().width(),e("#"+gridId).setGridWidth(gridParentWidth)})})}(window.jQuery),function(e){Filter=function(){},Backstop.Grid.Filter=Filter,Filter.prototype={init:function(t,n){var r=this;this.options=n,this.grid=e(t),this.gridId=this.grid.attr("id");if(this.grid.size()===0)throw"Attempted to filter a non-existent grid: "+t;return this.hidden=n.hidden||!1,this.columnName=n.field,this.labelText=n.label,this.filterId=this.columnName+"_"+this.grid.attr("id"),this.defaultFrom=n.defaultFrom,this.defaultTo=n.defaultTo,this.grid.bind("backstopGrid.loaded",function(e,t){r._updateFilterData(this,t)}),this.element=this._createElements(this.columnName,this.filterId,this.labelText,this.defaultFrom,this.defaultTo),this},commit:function(){var t=this,n=this.inputs();e.each(n,function(n,r){var i=e(r).val(),s=e(r).attr("name");typeof s!="undefined"&&t.grid.backstopGrid("searchScope",s,i)})},reset:function(){var t=this.inputs();e.each(t,function(t,n){e(n).val("")})},form:function(){return Backstop.form_for(this.grid)},inputs:function(){return this.element.find(':input[type!="submit"][type!="button"]')},addToForm:function(e,t){var n=this.form();t?n.find("fieldset.advanced .buttons").before(e):n.find("fieldset.standard").append(e)},_createElements:function(){throw new Error("undefined")},_updateFilterData:function(){throw new Error("undefined")}},Filter.defineFilterType=function(t){function n(t,n){var r=function(){t.prototype.init.apply(this,arguments)};return r.prototype=e.extend(new t,n),r.prototype.constructor=r,r}return n(Filter,t)}}(jQuery),function(e){Backstop.Grid.CalendarRangeFilter=Backstop.Grid.Filter.defineFilterType({template:'<dl id="date_search_{{id}}" class="date-filter">  <dt>{{label}}</dt>  <dd><input name="{{column}}_min" class="filter date min"/></dd>  <dd><input name="{{column}}_max" class="filter date max"/></dd>  <dd><input type="submit" class="filtersubmit submit date-submit" /></dd></dl>',_createElements:function(t,n,r,i,s){var o=this,u={column:t,id:n,label:r},a=e(e.mustache(this.template,u));this.addToForm(a,this.options.advanced),a.find("input.date").datepicker({dateFormat:"yy/mm/dd",changeYear:!0,changeMonth:!0}).addClass("magnifying-glass");var f=I18n.t("attachables.from"),l=I18n.t("attachables.to"),c=i?i:f,h=s?s:l;return a.find("input.date.min").watermark(c),a.find("input.date.max").watermark(h),a.find(".clear").click(function(e){a.find("input.date").val("")}),e("input.date-submit").val(I18n.t("attachables.set")),a},_updateFilterData:function(){}})}(jQuery),function(e){var t=function(t,n){this.grid=t,this.element=e(n),e(n).click(e.proxy(this.edit,this))};Backstop.Grid.EditController=t,t.prototype={edit:function(){var e=this.grid.backstopGrid("selectedRowIds");if(e.length===0)return undefined;this.confirm(e)},doDelete:function(t){this.element.attr("disabled",!0),this.grid.bind("backstopGrid.loaded",e.proxy(this.editComplete,this)),e.ajax({type:"DELETE",data:{ids:t},url:this.element.data("href"),context:this,error:function(t,n,r){var i;try{i=jQuery.parseJSON(t.responseText).messages}catch(s){i=n}var o=e("<p>"+(i||"There was a problem deleting your documents.")+"</p>");e("#flash-div .error").html(o),o.fadeIn("fast")},complete:function(){this.grid.trigger("reload")}})},editComplete:function(){this.element.attr("disabled",!1)},confirm:function(t){var n=this,r="<p>You are about to delete {{count}} documents.</p><p>Are you sure?</p>",i=e("<div/>").attr("title","Confirm Delete").html(e.mustache(r,{count:t.length}));e(i).dialog({modal:!0,buttons:{Delete:function(){e(this).dialog("close"),n.doDelete(t)},Cancel:function(){e(this).dialog("close")}}})}}}(jQuery),Backstop.Grid.SelectFilter=Filter.defineFilterType({fieldsTemplate:'  <dl class="{{columnName}}">\n    <dd><select name="{{columnName}}" id="{{filterId}}">\n    </select>\n</dd>  </dl>\n',_createElements:function(e,t){var n=this,r={columnName:e,filterId:this.filterId,text:this.labelText},i=$($.mustache(this.fieldsTemplate,r)).hide();return this.select=i.find("select"),this.addToForm(i,this.options.advanced),this.select.change(function(e){e.preventDefault(),n.commit(),n.grid.trigger("reload")}),i},_updateFilterData:function(e,t){if(Backstop.isnull(t)||Backstop.isnull(t[this.columnName]))return;var n=this,r=$.unique(t[this.columnName]).sort(function(e,t){var n=(""+e.name).toLowerCase(),r=(""+t.name).toLowerCase();return n>r?1:n<r?-1:0}),i=this.form().find("."+this.columnName);i.toggle(!this.hidden&&r.length>1),this.select.empty(),this.select.append($("<option/>").text(this.labelText).val("")),$.each(r,function(e,t){var r=$("<option/>").text(t.name).val(t.id);n.select.append(r)});var s=$(e).backstopGrid("searchScope",this.columnName);Backstop.isnull(s)||this.select.val(String(s))}}),Backstop.Grid.SimpleFilter=Filter.defineFilterType({fieldsTemplate:'<dl class="{{column}}"> <dt><label for="{{id}}">{{label}}</label></dt> <dd><input name="{{column}}" id="{{id}}" class="magnifying-glass"></input></dd></dl>',_createElements:function(e,t,n){var r=this,i={column:e,id:t,label:n},s=$($.mustache(this.fieldsTemplate,i));return this.addToForm(s,this.options.advanced),s.find("input").change(function(e){e.preventDefault(),r.commit(),r.grid.trigger("reload")}),s},_updateFilterData:function(){}}),Backstop.Grid.TypeAheadFilter=Filter.defineFilterType({reset:function(){this.currentSelection=null,this.input.val("")},fieldsTemplate:'<dl class="{{name}}">\n  <dt><label for="{{id}}">{{label}}</label>\n</dt>  <dd><input id="{{id}}" name="{{name}}" class="filter magnifying-glass"/>\n</dd></dl>\n',commit:function(){var e=jQuery.Event("keydown");e.keyCode=$.ui.keyCode.ENTER,this.input.trigger(e);if(this.currentSelection)this.grid.backstopGrid("searchScope",this.columnName,this.currentSelection.value),this.grid.backstopGrid("searchScope",this.currentSelection.name,this.currentSelection.extra_value);else{var t=this.input.val();this.grid.backstopGrid("searchScope","link_type",""),this.grid.backstopGrid("searchScope",this.columnName,t)}},_createElements:function(e,t){var n=this,r={id:t,name:e,label:this.labelText},i=$($.mustache(this.fieldsTemplate,r)).hide();return this.input=i.find("input.filter").change(function(e){$(this).val()===""&&(n.currentSelection=null)}).autocomplete([],{selectFirst:!0,matchContains:!0}),this.addToForm(i,this.options.advanced),i},_updateFilterData:function(e,t){if(Backstop.isnull(t)||Backstop.isnull(t[this.columnName]))return;if(!Backstop.isnull(this[this.columnName]))return;var n=$.unique(t[this.columnName]).sort(),r=this.form().find("."+this.columnName);n[0]&&typeof n[0]!="string"&&this._create_additional_inputs(n[0],r),r.toggle(!this.hidden&&n.length>1);var i=$(e).backstopGrid("searchScope",this.columnName);Backstop.isnull(i)||this.input.val(i),this[this.columnName]=n,this.input.setOptions({data:n})},_create_additional_inputs:function(e,t){if(typeof e.extra_value=="undefined")return t;var n=this,r=function(e,t,n,r){return e.value+" ("+e.display+") "};return this.input.setOptions({formatItem:r,formatMatch:r}),this.input.bind("result",function(e,t,r){n.currentSelection=t,n.input.val(r),n.form().submit()}),t}}),function(e){var t,n,r,i,s,o,u,a,f,l,c=0,h={},p=[],d=0,v={},m=[],g=null,y=new Image,b=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,w=/[^\.]\.(swf)\s*$/i,E,S=1,x=0,T="",N,C,k=!1,L=e.extend(e("<div/>")[0],{prop:0}),A=e.browser.msie&&e.browser.version<7&&!window.XMLHttpRequest,O=function(){n.hide(),y.onerror=y.onload=null,g&&g.abort(),t.empty()},M=function(){if(!1===h.onError(p,c,h)){n.hide(),k=!1;return}h.titleShow=!1,h.width="auto",h.height="auto",t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),D()},_=function(){var r=p[c],i,s,u,a,f,l;O(),h=e.extend({},e.fn.fancybox.defaults,typeof e(r).data("fancybox")=="undefined"?h:e(r).data("fancybox")),l=h.onStart(p,c,h);if(l===!1){k=!1;return}typeof l=="object"&&(h=e.extend(h,l)),u=h.title||(r.nodeName?e(r).attr("title"):r.title)||"",r.nodeName&&!h.orig&&(h.orig=e(r).children("img:first").length?e(r).children("img:first"):e(r)),u===""&&h.orig&&h.titleFromAlt&&(u=h.orig.attr("alt")),i=h.href||(r.nodeName?e(r).attr("href"):r.href)||null;if(/^(?:javascript)/i.test(i)||i=="#")i=null;h.type?(s=h.type,i||(i=h.content)):h.content?s="html":i&&(i.match(b)?s="image":i.match(w)?s="swf":e(r).hasClass("iframe")?s="iframe":i.indexOf("#")===0?s="inline":s="ajax");if(!s){M();return}s=="inline"&&(r=i.substr(i.indexOf("#")),s=e(r).length>0?"inline":"ajax"),h.type=s,h.href=i,h.title=u,h.autoDimensions&&(h.type=="html"||h.type=="inline"||h.type=="ajax"?(h.width="auto",h.height="auto"):h.autoDimensions=!1),h.modal&&(h.overlayShow=!0,h.hideOnOverlayClick=!1,h.hideOnContentClick=!1,h.enableEscapeButton=!1,h.showCloseButton=!1),h.padding=parseInt(h.padding,10),h.margin=parseInt(h.margin,10),t.css("padding",h.padding+h.margin),e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(o.children())});switch(s){case"html":t.html(h.content),D();break;case"inline":if(e(r).parent().is("#fancybox-content")===!0){k=!1;return}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(r)).bind("fancybox-cleanup",function(){e(this).replaceWith(o.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())}),e(r).appendTo(t),D();break;case"image":k=!1,e.fancybox.showActivity(),y=new Image,y.onerror=function(){M()},y.onload=function(){k=!0,y.onerror=y.onload=null,P()},y.src=i;break;case"swf":h.scrolling="no",a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+h.width+'" height="'+h.height+'"><param name="movie" value="'+i+'"></param>',f="",e.each(h.swf,function(e,t){a+='<param name="'+e+'" value="'+t+'"></param>',f+=" "+e+'="'+t+'"'}),a+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+h.width+'" height="'+h.height+'"'+f+"></embed></object>",t.html(a),D();break;case"ajax":k=!1,e.fancybox.showActivity(),h.ajax.win=h.ajax.success,g=e.ajax(e.extend({},h.ajax,{url:i,data:h.ajax.data||{},error:function(e,t,n){e.status>0&&M()},success:function(e,r,s){var o=typeof s=="object"?s:g;if(o.status==200){if(typeof h.ajax.win=="function"){l=h.ajax.win(i,e,r,s);if(l===!1){n.hide();return}if(typeof l=="string"||typeof l=="object")e=l}t.html(e),D()}}}));break;case"iframe":H()}},D=function(){var n=h.width,r=h.height;n.toString().indexOf("%")>-1?n=parseInt((e(window).width()-h.margin*2)*parseFloat(n)/100,10)+"px":n=n=="auto"?"auto":n+"px",r.toString().indexOf("%")>-1?r=parseInt((e(window).height()-h.margin*2)*parseFloat(r)/100,10)+"px":r=r=="auto"?"auto":r+"px",t.wrapInner('<div style="width:'+n+";height:"+r+";overflow: "+(h.scrolling=="auto"?"auto":h.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>'),h.width=t.width(),h.height=t.height(),H()},P=function(){h.width=y.width,h.height=y.height,e("<img />").attr({id:"fancybox-img",src:y.src,alt:h.title}).appendTo(t),H()},H=function(){var s,g;n.hide();if(i.is(":visible")&&!1===v.onCleanup(m,d,v)){e.event.trigger("fancybox-cancel"),k=!1;return}k=!0,e(o.add(r)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),i.is(":visible")&&v.titlePosition!=="outside"&&i.css("height",i.height()),m=p,d=c,v=h,v.overlayShow?(r.css({"background-color":v.overlayColor,opacity:v.overlayOpacity,cursor:v.hideOnOverlayClick?"pointer":"auto",height:e(document).height()}),r.is(":visible")||(A&&e("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),r.show())):r.hide(),C=z(),j();if(i.is(":visible")){e(u.add(f).add(l)).hide(),s=i.position(),N={top:s.top,left:s.left,width:i.width(),height:i.height()},g=N.width==C.width&&N.height==C.height,o.fadeTo(v.changeFade,.3,function(){var n=function(){o.html(t.contents()).fadeTo(v.changeFade,1,I)};e.event.trigger("fancybox-change"),o.empty().removeAttr("filter").css({"border-width":v.padding,width:C.width-v.padding*2,height:h.autoDimensions?"auto":C.height-x-v.padding*2}),g?n():(L.prop=0,e(L).animate({prop:1},{duration:v.changeSpeed,easing:v.easingChange,step:R,complete:n}))});return}i.removeAttr("style"),o.css("border-width",v.padding);if(v.transitionIn=="elastic"){N=X(),o.html(t.contents()),i.show(),v.opacity&&(C.opacity=0),L.prop=0,e(L).animate({prop:1},{duration:v.speedIn,easing:v.easingIn,step:R,complete:I});return}v.titlePosition=="inside"&&x>0&&a.show(),o.css({width:C.width-v.padding*2,height:h.autoDimensions?"auto":C.height-x-v.padding*2}).html(t.contents()),i.css(C).fadeIn(v.transitionIn=="none"?0:v.speedIn,I)},B=function(e){return e&&e.length?v.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+e+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+v.titlePosition+'">'+e+"</div>":!1},j=function(){T=v.title||"",x=0,a.empty().removeAttr("style").removeClass();if(v.titleShow===!1){a.hide();return}T=e.isFunction(v.titleFormat)?v.titleFormat(T,m,d,v):B(T);if(!T||T===""){a.hide();return}a.addClass("fancybox-title-"+v.titlePosition).html(T).appendTo("body").show();switch(v.titlePosition){case"inside":a.css({width:C.width-v.padding*2,marginLeft:v.padding,marginRight:v.padding}),x=a.outerHeight(!0),a.appendTo(s),C.height+=x;break;case"over":a.css({marginLeft:v.padding,width:C.width-v.padding*2,bottom:v.padding}).appendTo(s);break;case"float":a.css("left",parseInt((a.width()-C.width-40)/2,10)*-1).appendTo(i);break;default:a.css({width:C.width-v.padding*2,paddingLeft:v.padding,paddingRight:v.padding}).appendTo(i)}a.hide()},F=function(){(v.enableEscapeButton||v.enableKeyboardNav)&&e(document).bind("keydown.fb",function(t){t.keyCode==27&&v.enableEscapeButton?(t.preventDefault(),e.fancybox.close()):(t.keyCode==37||t.keyCode==39)&&v.enableKeyboardNav&&t.target.tagName!=="INPUT"&&t.target.tagName!=="TEXTAREA"&&t.target.tagName!=="SELECT"&&(t.preventDefault(),e.fancybox[t.keyCode==37?"prev":"next"]())});if(!v.showNavArrows){f.hide(),l.hide();return}(v.cyclic&&m.length>1||d!==0)&&f.show(),(v.cyclic&&m.length>1||d!=m.length-1)&&l.show()},I=function(){e.support.opacity||(o.get(0).style.removeAttribute("filter"),i.get(0).style.removeAttribute("filter")),h.autoDimensions&&o.css("height","auto"),i.css("height","auto"),T&&T.length&&a.show(),v.showCloseButton&&u.show(),F(),v.hideOnContentClick&&o.bind("click",e.fancybox.close),v.hideOnOverlayClick&&r.bind("click",e.fancybox.close),e(window).bind("resize.fb",e.fancybox.resize),v.centerOnScroll&&e(window).bind("scroll.fb",e.fancybox.center),v.type=="iframe"&&e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+' scrolling="'+h.scrolling+'" src="'+v.href+'"></iframe>').appendTo(o),i.show(),k=!1,e.fancybox.center(),v.onComplete(m,d,v),q()},q=function(){var e,t;m.length-1>d&&(e=m[d+1].href,typeof e!="undefined"&&e.match(b)&&(t=new Image,t.src=e)),d>0&&(e=m[d-1].href,typeof e!="undefined"&&e.match(b)&&(t=new Image,t.src=e))},R=function(e){var t={width:parseInt(N.width+(C.width-N.width)*e,10),height:parseInt(N.height+(C.height-N.height)*e,10),top:parseInt(N.top+(C.top-N.top)*e,10),left:parseInt(N.left+(C.left-N.left)*e,10)};typeof C.opacity!="undefined"&&(t.opacity=e<.5?.5:e),i.css(t),o.css({width:t.width-v.padding*2,height:t.height-x*e-v.padding*2})},U=function(){return[e(window).width()-v.margin*2,e(window).height()-v.margin*2,e(document).scrollLeft()+v.margin,e(document).scrollTop()+v.margin]},z=function(){var e=U(),t={},n=v.autoScale,r=v.padding*2,i;return v.width.toString().indexOf("%")>-1?t.width=parseInt(e[0]*parseFloat(v.width)/100,10):t.width=v.width+r,v.height.toString().indexOf("%")>-1?t.height=parseInt(e[1]*parseFloat(v.height)/100,10):t.height=v.height+r,n&&(t.width>e[0]||t.height>e[1])&&(h.type=="image"||h.type=="swf"?(i=v.width/v.height,t.width>e[0]&&(t.width=e[0],t.height=parseInt((t.width-r)/i+r,10)),t.height>e[1]&&(t.height=e[1],t.width=parseInt((t.height-r)*i+r,10))):(t.width=Math.min(t.width,e[0]),t.height=Math.min(t.height,e[1]))),t.top=parseInt(Math.max(e[3]-20,e[3]+(e[1]-t.height-40)*.5),10),t.left=parseInt(Math.max(e[2]-20,e[2]+(e[0]-t.width-40)*.5),10),t},W=function(e){var t=e.offset();return t.top+=parseInt(e.css("paddingTop"),10)||0,t.left+=parseInt(e.css("paddingLeft"),10)||0,t.top+=parseInt(e.css("border-top-width"),10)||0,t.left+=parseInt(e.css("border-left-width"),10)||0,t.width=e.width(),t.height=e.height(),t},X=function(){var t=h.orig?e(h.orig):!1,n={},r,i;return t&&t.length?(r=W(t),n={width:r.width+v.padding*2,height:r.height+v.padding*2,top:r.top-v.padding-20,left:r.left-v.padding-20}):(i=U(),n={width:v.padding*2,height:v.padding*2,top:parseInt(i[3]+i[1]*.5,10),left:parseInt(i[2]+i[0]*.5,10)}),n},V=function(){if(!n.is(":visible")){clearInterval(E);return}e("div",n).css("top",S*-40+"px"),S=(S+1)%12};e.fn.fancybox=function(t){return e(this).length?(e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){t.preventDefault();if(k)return;k=!0,e(this).blur(),p=[],c=0;var n=e(this).attr("rel")||"";!n||n==""||n==="nofollow"?p.push(this):(p=e("a[rel="+n+"], area[rel="+n+"]"),c=p.index(this)),_();return}),this):this},e.fancybox=function(t){var n;if(k)return;k=!0,n=typeof arguments[1]!="undefined"?arguments[1]:{},p=[],c=parseInt(n.index,10)||0;if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++)typeof t[r]=="object"?e(t[r]).data("fancybox",e.extend({},n,t[r])):t[r]=e({}).data("fancybox",e.extend({content:t[r]},n));p=jQuery.merge(p,t)}else typeof t=="object"?e(t).data("fancybox",e.extend({},n,t)):t=e({}).data("fancybox",e.extend({content:t},n)),p.push(t);if(c>p.length||c<0)c=0;_()},e.fancybox.showActivity=function(){clearInterval(E),n.show(),E=setInterval(V,66)},e.fancybox.hideActivity=function(){n.hide()},e.fancybox.next=function(){return e.fancybox.pos(d+1)},e.fancybox.prev=function(){return e.fancybox.pos(d-1)},e.fancybox.pos=function(e){if(k)return;e=parseInt(e),p=m,e>-1&&e<m.length?(c=e,_()):v.cyclic&&m.length>1&&(c=e>=m.length?0:m.length-1,_());return},e.fancybox.cancel=function(){if(k)return;k=!0,e.event.trigger("fancybox-cancel"),O(),h.onCancel(p,c,h),k=!1},e.fancybox.close=function(){function t(){r.fadeOut("fast"),a.empty().hide(),i.hide(),e.event.trigger("fancybox-cleanup"),o.empty(),v.onClosed(m,d,v),m=h=[],d=c=0,v=h={},k=!1}if(k||i.is(":hidden"))return;k=!0;if(v&&!1===v.onCleanup(m,d,v)){k=!1;return}O(),e(u.add(f).add(l)).hide(),e(o.add(r)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),o.find("iframe").attr("src",A&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),v.titlePosition!=="inside"&&a.empty(),i.stop();if(v.transitionOut=="elastic"){N=X();var n=i.position();C={top:n.top,left:n.left,width:i.width(),height:i.height()},v.opacity&&(C.opacity=1),a.empty().hide(),L.prop=1,e(L).animate({prop:0},{duration:v.speedOut,easing:v.easingOut,step:R,complete:t})}else i.fadeOut(v.transitionOut=="none"?0:v.speedOut,t)},e.fancybox.resize=function(){r.is(":visible")&&r.css("height",e(document).height()),e.fancybox.center(!0)},e.fancybox.center=function(){var e,t;if(k)return;t=arguments[0]===!0?1:0,e=U();if(!t&&(i.width()>e[0]||i.height()>e[1]))return;i.stop().animate({top:parseInt(Math.max(e[3]-20,e[3]+(e[1]-o.height()-40)*.5-v.padding)),left:parseInt(Math.max(e[2]-20,e[2]+(e[0]-o.width()-40)*.5-v.padding))},typeof arguments[0]=="number"?arguments[0]:200)},e.fancybox.init=function(){if(e("#fancybox-wrap").length)return;e("body").append(t=e('<div id="fancybox-tmp"></div>'),n=e('<div id="fancybox-loading"><div></div></div>'),r=e('<div id="fancybox-overlay"></div>'),i=e('<div id="fancybox-wrap"></div>')),s=e('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(i),s.append(o=e('<div id="fancybox-content"></div>'),u=e('<a id="fancybox-close"></a>'),a=e('<div id="fancybox-title"></div>'),f=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),l=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),u.click(e.fancybox.close),n.click(e.fancybox.cancel),f.click(function(t){t.preventDefault(),e.fancybox.prev()}),l.click(function(t){t.preventDefault(),e.fancybox.next()}),e.fn.mousewheel&&i.bind("mousewheel.fb",function(t,n){if(k)t.preventDefault();else if(e(t.target).get(0).clientHeight==0||e(t.target).get(0).scrollHeight===e(t.target).get(0).clientHeight)t.preventDefault(),e.fancybox[n>0?"prev":"next"]()}),e.support.opacity||i.addClass("fancybox-ie"),A&&(n.addClass("fancybox-ie6"),i.addClass("fancybox-ie6"),e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(s))},e.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},e(document).ready(function(){e.fancybox.init()})}(jQuery),function(e){e(function(){e.fn.fancybox.defaults.onError=function(e,t,n){return window.location.reload(),!1}})}(jQuery),function(){function e(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function t(){var e,t=arguments.length,n={},r=function(e,t){var n,i;for(i in t)t.hasOwnProperty(i)&&(n=t[i],typeof e!="object"&&(e={}),e[i]=n&&typeof n=="object"&&Object.prototype.toString.call(n)!=="[object Array]"&&typeof n.nodeType!="number"?r(e[i]||{},n):t[i]);return e};for(e=0;e<t;e++)n=r(n,arguments[e]);return n}function n(e,t){return parseInt(e,t||10)}function r(e){return typeof e=="string"}function i(e){return typeof e=="object"}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){return typeof e=="number"}function u(e){return X.log(e)/X.LN10}function a(e){return X.pow(10,e)}function f(e,t){for(var n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}}function l(e){return e!==U&&e!==null}function c(e,t,n){var s,o;if(r(t))l(n)?e.setAttribute(t,n):e&&e.getAttribute&&(o=e.getAttribute(t));else if(l(t)&&i(t))for(s in t)e.setAttribute(s,t[s]);return o}function h(e){return s(e)?e:[e]}function p(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++)if(n=e[t],typeof n!="undefined"&&n!==null)return n}function d(t,n){it&&n&&n.opacity!==U&&(n.filter="alpha(opacity="+n.opacity*100+")"),e(t.style,n)}function v(t,n,r,i,s){return t=z.createElement(t),n&&e(t,n),s&&d(t,{padding:0,border:Ct,margin:0}),r&&d(t,r),i&&i.appendChild(t),t}function m(t,n){var r=function(){};return r.prototype=new t,e(r.prototype,n),r}function g(e,t,r,i){var s=yt.lang,o=e;t===-1?(t=(e||0).toString(),e=t.indexOf(".")>-1?t.split(".")[1].length:0):e=isNaN(t=G(t))?2:t;var t=e,r=r===void 0?s.decimalPoint:r,i=i===void 0?s.thousandsSep:i,s=o<0?"-":"",e=String(n(o=G(+o||0).toFixed(t))),u=e.length>3?e.length%3:0;return s+(u?e.substr(0,u)+i:"")+e.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i)+(t?r+G(o-e).toFixed(t).slice(2):"")}function y(e,t){return Array((t||2)+1-String(e).length).join(0)+e}function b(e,t){for(var n="{",r=!1,i,s,o,u,a,f=[];(n=e.indexOf(n))!==-1;){i=e.slice(0,n);if(r){s=i.split(":"),o=s.shift().split("."),a=o.length,i=t;for(u=0;u<a;u++)i=i[o[u]];s.length&&(s=s.join(":"),o=/\.([0-9])/,u=yt.lang,a=void 0,/f$/.test(s)?(a=(a=s.match(o))?a[1]:6,i=g(i,a,u.decimalPoint,s.indexOf(",")>-1?u.thousandsSep:"")):i=bt(s,i))}f.push(i),e=e.slice(n+1),n=(r=!r)?"}":"{"}return f.push(e),f.join("")}function w(e,t,n,r){var i,n=p(n,1);i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(r=0;r<t.length;r++)if(e=t[r],i<=(t[r]+(t[r+1]||t[r]))/2)break;return e*=n,e}function E(e,t){var n=t||[[Lt,[1,2,5,10,20,25,50,100,200,500]],[At,[1,2,5,10,15,30]],[Ot,[1,2,5,10,15,30]],[Mt,[1,2,3,4,6,8,12]],[_t,[1,2]],[Dt,[1,2]],[Pt,[1,2,3,4,6]],[Ht,null]],r=n[n.length-1],i=St[r[0]],s=r[1],o;for(o=0;o<n.length;o++)if(r=n[o],i=St[r[0]],s=r[1],n[o+1]&&e<=(i*s[s.length-1]+St[n[o+1][0]])/2)break;return i===St[Ht]&&e<5*i&&(s=[1,2,5]),i===St[Ht]&&e<5*i&&(s=[1,2,5]),n=w(e/i,s),{unitRange:i,count:n,unitName:r[0]}}function S(t,n,r,i){var s=[],o={},u=yt.global.useUTC,a,f=new Date(n),c=t.unitRange,h=t.count;if(l(n)){c>=St[At]&&(f.setMilliseconds(0),f.setSeconds(c>=St[Ot]?0:h*$(f.getSeconds()/h))),c>=St[Ot]&&f[Wt](c>=St[Mt]?0:h*$(f[Ft]()/h)),c>=St[Mt]&&f[Xt](c>=St[_t]?0:h*$(f[It]()/h)),c>=St[_t]&&f[Vt](c>=St[Pt]?1:h*$(f[Rt]()/h)),c>=St[Pt]&&(f[$t](c>=St[Ht]?0:h*$(f[Ut]()/h)),a=f[zt]()),c>=St[Ht]&&(a-=a%h,f[Jt](
a)),c===St[Dt]&&f[Vt](f[Rt]()-f[qt]()+p(i,1)),n=1,a=f[zt]();for(var i=f.getTime(),d=f[Ut](),v=f[Rt](),f=u?0:(864e5+f.getTimezoneOffset()*6e4)%864e5;i<r;)s.push(i),c===St[Ht]?i=jt(a+n*h,0):c===St[Pt]?i=jt(a,d+n*h):!!u||c!==St[_t]&&c!==St[Dt]?(i+=c*h,c<=St[Mt]&&i%St[_t]===f&&(o[i]=_t)):i=jt(a,d,v+n*h*(c===St[_t]?1:7)),n++;s.push(i)}return s.info=e(t,{higherRanks:o,totalRange:c*h}),s}function x(){this.symbol=this.color=0}function T(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function N(e){for(var t=e.length,n=e[0];t--;)e[t]<n&&(n=e[t]);return n}function C(e){for(var t=e.length,n=e[0];t--;)e[t]>n&&(n=e[t]);return n}function k(e,t){for(var n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function L(e){gt||(gt=v(Nt)),e&&gt.appendChild(e),gt.innerHTML=""}function A(e,t){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw n;W.console&&console.log(n)}function O(e){return parseFloat(e.toPrecision(14))}function M(e,t){wt=p(e,t.animation)}function _(){var e=yt.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";jt=e?Date.UTC:function(e,t,n,r,i,s){return(new Date(e,t,p(n,1),p(r,0),p(i,0),p(s,0))).getTime()},Ft=t+"Minutes",It=t+"Hours",qt=t+"Day",Rt=t+"Date",Ut=t+"Month",zt=t+"FullYear",Wt=n+"Minutes",Xt=n+"Hours",Vt=n+"Date",$t=n+"Month",Jt=n+"FullYear"}function D(){}function P(e,t,n,r){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,!n&&!r&&this.addLabel()}function H(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)}function B(e,t,n,r,i,s){var o=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.stack=i,this.percent=s==="percent",this.alignOptions={align:t.align||(o?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(o?"middle":n?"bottom":"top"),y:p(t.y,o?4:n?14:-6),x:p(t.x,o?n?-6:6:0)},this.textAlign=t.textAlign||(o?n?"right":"left":"center")}function j(){this.init.apply(this,arguments)}function F(){this.init.apply(this,arguments)}function I(e,t){this.init(e,t)}function q(e,t){this.init(e,t)}function R(){this.init.apply(this,arguments)}var U,z=document,W=window,X=Math,V=X.round,$=X.floor,J=X.ceil,K=X.max,Q=X.min,G=X.abs,Y=X.cos,Z=X.sin,et=X.PI,tt=et*2/360,nt=navigator.userAgent,rt=W.opera,it=/msie/i.test(nt)&&!rt,st=z.documentMode===8,ot=/AppleWebKit/.test(nt),ut=/Firefox/.test(nt),at=/(Mobile|Android|Windows Phone)/.test(nt),ft="http://www.w3.org/2000/svg",lt=!!z.createElementNS&&!!z.createElementNS(ft,"svg").createSVGRect,ct=ut&&parseInt(nt.split("Firefox/")[1],10)<4,ht=!lt&&!it&&!!z.createElement("canvas").getContext,pt,dt=z.documentElement.ontouchstart!==U,vt={},mt=0,gt,yt,bt,wt,Et,St,xt=function(){},Tt=[],Nt="div",Ct="none",kt="rgba(192,192,192,"+(lt?1e-4:.002)+")",Lt="millisecond",At="second",Ot="minute",Mt="hour",_t="day",Dt="week",Pt="month",Ht="year",Bt="stroke-width",jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt={};W.Highcharts=W.Highcharts?A(16,!0):{},bt=function(t,n,r){if(!l(n)||isNaN(n))return"Invalid date";var t=p(t,"%Y-%m-%d %H:%M:%S"),i=new Date(n),s,o=i[It](),u=i[qt](),a=i[Rt](),f=i[Ut](),c=i[zt](),h=yt.lang,d=h.weekdays,i=e({a:d[u].substr(0,3),A:d[u],d:y(a),e:a,b:h.shortMonths[f],B:h.months[f],m:y(f+1),y:c.toString().substr(2,2),Y:c,H:y(o),I:y(o%12||12),l:o%12||12,M:y(i[Ft]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:y(i.getSeconds()),L:y(V(n%1e3),3)},Highcharts.dateFormats);for(s in i)for(;t.indexOf("%"+s)!==-1;)t=t.replace("%"+s,typeof i[s]=="function"?i[s](n):i[s]);return r?t.substr(0,1).toUpperCase()+t.substr(1):t},x.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},St=function(){for(var e=0,t=arguments,n=t.length,r={};e<n;e++)r[t[e++]]=t[e];return r}(Lt,1,At,1e3,Ot,6e4,Mt,36e5,_t,864e5,Dt,6048e5,Pt,26784e5,Ht,31556952e3),Et={init:function(e,t,n){var t=t||"",r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,t=t.split(" "),n=[].concat(n),u,a,f=function(e){for(o=e.length;o--;)e[o]==="M"&&e.splice(o+1,0,e[o+1],e[o+2],e[o+1],e[o+2])};i&&(f(t),f(n)),e.isArea&&(u=t.splice(t.length-6,6),a=n.splice(n.length-6,6));if(r<=n.length/s)for(;r--;)n=[].concat(n).splice(0,s).concat(n);e.shift=0;if(t.length)for(e=n.length;t.length<e;)r=[].concat(t).splice(t.length-s,s),i&&(r[s-6]=r[s-2],r[s-5]=r[s-1]),t=t.concat(r);return u&&(t=t.concat(u),n=n.concat(a)),[t,n]},step:function(e,t,n,r){var i=[],s=e.length;if(n===1)i=r;else if(s===t.length&&n<1)for(;s--;)r=parseFloat(e[s]),i[s]=isNaN(r)?e[s]:n*parseFloat(t[s]-r)+r;else i=t;return i}},function(t){W.HighchartsAdapter=W.HighchartsAdapter||t&&{init:function(e){var n=t.fx,i=n.step,s,o=t.Tween,u=o&&o.propHooks;t.extend(t.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),t.each(["cur","_default","width","height","opacity"],function(e,t){var r=i,s,a;t==="cur"?r=n.prototype:t==="_default"&&o&&(r=u[t],t="set"),(s=r[t])&&(r[t]=function(n){return n=e?n:this,a=n.elem,a.attr?a.attr(n.prop,t==="cur"?U:n.now):s.apply(this,arguments)})}),s=function(t){var n=t.elem,r;t.started||(r=e.init(n,n.d,n.toD),t.start=r[0],t.end=r[1],t.started=!0),n.attr("d",e.step(t.start,t.end,t.pos,n.toD))},o?u.d={set:s}:i.d=s,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n},t.fn.highcharts=function(){var e="Chart",t=arguments,n,i;return r(t[0])&&(e=t[0],t=Array.prototype.slice.call(t,1)),n=t[0],n!==U&&(n.chart=n.chart||{},n.chart.renderTo=this[0],new Highcharts[e](n,t[1]),i=this),n===U&&(i=Tt[c(this[0],"data-highcharts-chart")]),i}},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,n){return t(e)[n]()},grep:t.grep,map:function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},offset:function(e){return t(e).offset()},addEvent:function(e,n,r){t(e).bind(n,r)},removeEvent:function(e,n,r){var i=z.removeEventListener?"removeEventListener":"detachEvent";z[i]&&!e[i]&&(e[i]=function(){}),t(e).unbind(n,r)},fireEvent:function(n,r,i,s){var o=t.Event(r),u="detached"+r,a;!it&&i&&(delete i.layerX,delete i.layerY),e(o,i),n[r]&&(n[u]=n[r],n[r]=null),t.each(["preventDefault","stopPropagation"],function(e,t){var n=o[t];o[t]=function(){try{n.call(o)}catch(e){t==="preventDefault"&&(a=!0)}}}),t(n).trigger(o),n[u]&&(n[r]=n[u],n[u]=null),s&&!o.isDefaultPrevented()&&!a&&s(o)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===U&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(e,n,r){var i=t(e);n.d&&(e.toD=n.d,n.d=1),i.stop(),n.opacity!==U&&e.attr&&(n.opacity+="px"),i.animate(n,r)},stop:function(e){t(e).stop()}}}(W.jQuery);var Qt=W.HighchartsAdapter,Gt=Qt||{};Qt&&Qt.init.call(Qt,Et);var Yt=Gt.adapterRun,Zt=Gt.getScript,en=Gt.inArray,tn=Gt.each,nn=Gt.grep,rn=Gt.offset,sn=Gt.map,on=Gt.addEvent,un=Gt.removeEvent,an=Gt.fireEvent,fn=Gt.washMouseEvent,ln=Gt.animate,cn=Gt.stop,Gt={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};yt={colors:"#2f7ed8,#0d233a,#8bbc21,#910000,#1aadce,#492970,#f28f43,#77a1e5,#c42525,#a6c96a".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.0/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.0/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:t(Gt,{enabled:!1,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:lt,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:at?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var hn=yt.plotOptions,Qt=hn.line;_();var pn=function(e){var r=[],i,s;return function(e){e&&e.stops?s=sn(e.stops,function(e){return pn(e[1])}):(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e))?r=[n(i[1]),n(i[2]),n(i[3]),parseFloat(i[4],10)]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?r=[n(i[1],16),n(i[2],16),n(i[3],16),1]:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))&&(r=[n(i[1]),n(i[2]),n(i[3]),1])}(e),{get:function(n){var i;return s?(i=t(e),i.stops=[].concat(i.stops),tn(s,function(e,t){i.stops[t]=[i.stops[t][0],e.get(n)]})):i=r&&!isNaN(r[0])?n==="rgb"?"rgb("+r[0]+","+r[1]+","+r[2]+")":n==="a"?r[3]:"rgba("+r.join(",")+")":e,i},brighten:function(e){if(s)tn(s,function(t){t.brighten(e)});else if(o(e)&&e!==0){var t;for(t=0;t<3;t++)r[t]+=n(e*255),r[t]<0&&(r[t]=0),r[t]>255&&(r[t]=255)}return this},rgba:r,setOpacity:function(e){return r[3]=e,this}}};D.prototype={init:function(e,t){this.element=t==="span"?v(t):z.createElementNS(ft,t),this.renderer=e,this.attrSetters={}},opacity:1,animate:function(e,n,r){n=p(n,wt,!0),cn(this),n?(n=t(n),r&&(n.complete=r),ln(this,e,n)):(this.attr(e),r&&r())},attr:function(e,t){var i,s,o,u,a=this.element,f=a.nodeName.toLowerCase(),h=this.renderer,p,d=this.attrSetters,v=this.shadows,m,g,y=this;r(e)&&l(t)&&(i=e,e={},e[i]=t);if(r(e))i=e,f==="circle"?i={x:"cx",y:"cy"}[i]||i:i==="strokeWidth"&&(i="stroke-width"),y=c(a,i)||this[i]||0,i!=="d"&&i!=="visibility"&&(y=parseFloat(y));else{for(i in e)if(p=!1,s=e[i],o=d[i]&&d[i].call(this,s,i),o!==!1){o!==U&&(s=o);if(i==="d")s&&s.join&&(s=s.join(" ")),/(NaN| {2}|^$)/.test(s)&&(s="M 0 0");else if(i==="x"&&f==="text")for(o=0;o<a.childNodes.length;o++)u=a.childNodes[o],c(u,"x")===c(a,"x")&&c(u,"x",s);else if(!this.rotation||i!=="x"&&i!=="y")if(i==="fill")s=h.color(s,a,i);else if(f!=="circle"||i!=="x"&&i!=="y")if(f==="rect"&&i==="r")c(a,{rx:s,ry:s}),p=!0;else if(i==="translateX"||i==="translateY"||i==="rotation"||i==="verticalAlign"||i==="scaleX"||i==="scaleY")p=g=!0;else if(i==="stroke")s=h.color(s,a,i);else if(i==="dashstyle"){if(i="stroke-dasharray",s=s&&s.toLowerCase(),s==="solid")s=Ct;else if(s){s=s.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(o=s.length;o--;)s[o]=n(s[o])*e["stroke-width"];s=s.join(",")}}else i==="width"?s=n(s):i==="align"?(i="text-anchor",s={left:"start",center:"middle",right:"end"}[s]):i==="title"&&(o=a.getElementsByTagName("title")[0],o||(o=z.createElementNS(ft,"title"),a.appendChild(o)),o.textContent=s);else i={x:"cx",y:"cy"}[i]||i;else g=!0;i==="strokeWidth"&&(i="stroke-width");if(i==="stroke-width"||i==="stroke")this[i]=s,this.stroke&&this["stroke-width"]?(c(a,"stroke",this.stroke),c(a,"stroke-width",this["stroke-width"]),this.hasStroke=!0):i==="stroke-width"&&s===0&&this.hasStroke&&(a.removeAttribute("stroke"),this.hasStroke=!1),p=!0;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(m||(this.symbolAttr(e),m=!0),p=!0);if(v&&/^(width|height|visibility|x|y|d|transform)$/.test(i))for(o=v.length;o--;)c(v[o],i,i==="height"?K(s-(v[o].cutHeight||0),0):s);(i==="width"||i==="height")&&f==="rect"&&s<0&&(s=0),this[i]=s,i==="text"?(s!==this.textStr&&delete this.bBox,this.textStr=s,this.added&&h.buildText(this)):p||c(a,i,s)}g&&this.updateTransform()}return y},addClass:function(e){return c(this.element,"class",c(this.element,"class")+" "+e),this},symbolAttr:function(e){var t=this;tn("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){t[n]=p(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":Ct)},crisp:function(e,t,n,r,i){var s,o={},u={},a,e=e||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;a=V(e)%2/2,u.x=$(t||this.x||0)+a,u.y=$(n||this.y||0)+a,u.width=$((r||this.width||0)-2*a),u.height=$((i||this.height||0)-2*a),u.strokeWidth=e;for(s in u)this[s]!==u[s]&&(this[s]=o[s]=u[s]);return o},css:function(t){var n=this.element,n=t&&t.width&&n.nodeName.toLowerCase()==="text",r,i="",s=function(e,t){return"-"+t.toLowerCase()};t&&t.color&&(t.fill=t.color),this.styles=t=e(this.styles,t),ht&&n&&delete t.width;if(it&&!lt)n&&delete t.width,d(this.element,t);else{for(r in t)i+=r.replace(/([A-Z])/g,s)+":"+t[r]+";";this.attr({style:i})}return n&&this.added&&this.renderer.buildText(this),this},on:function(e,t){return dt&&e==="click"&&(this.element.ontouchstart=function(e){e.preventDefault(),t()}),this.element["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){return this.inverted=!0,this.updateTransform(),this},htmlCss:function(t){var n=this.element;if(n=t&&n.tagName==="SPAN"&&t.width)delete t.width,this.textWidth=n,this.updateTransform();return this.styles=e(this.styles,t),d(this.element,t),this},htmlGetBBox:function(){var e=this.element,t=this.bBox;return t||(e.nodeName==="text"&&(e.style.position="absolute"),t=this.bBox={x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}),t},htmlUpdateTransform:function(){if(this.added){var e=this.renderer,t=this.element,r=this.translateX||0,i=this.translateY||0,s=this.x||0,o=this.y||0,u=this.textAlign||"left",a={left:0,center:.5,right:1}[u],f=u&&u!=="left",c=this.shadows;if(r||i)d(t,{marginLeft:r,marginTop:i}),c&&tn(c,function(e){d(e,{marginLeft:r+1,marginTop:i+1})});this.inverted&&tn(t.childNodes,function(n){e.invertChild(n,t)});if(t.tagName==="SPAN"){var h,v,c=this.rotation,m,g=0,y=1,g=0,b;m=n(this.textWidth);var w=this.xCorr||0,E=this.yCorr||0,S=[c,u,t.innerHTML,this.textWidth].join(",");h={},S!==this.cTT&&(l(c)&&(e.isSVG?(w=it?"-ms-transform":ot?"-webkit-transform":ut?"MozTransform":rt?"-o-transform":"",h[w]=h.transform="rotate("+c+"deg)"):(g=c*tt,y=Y(g),g=Z(g),h.filter=c?["progid:DXImageTransform.Microsoft.Matrix(M11=",y,", M12=",-g,", M21=",g,", M22=",y,", sizingMethod='auto expand')"].join(""):Ct),d(t,h)),h=p(this.elemWidth,t.offsetWidth),v=p(this.elemHeight,t.offsetHeight),h>m&&/[ \-]/.test(t.textContent||t.innerText)&&(d(t,{width:m+"px",display:"block",whiteSpace:"normal"}),h=m),m=e.fontMetrics(t.style.fontSize).b,w=y<0&&-h,E=g<0&&-v,b=y*g<0,w+=g*m*(b?1-a:a),E-=y*m*(c?b?a:1-a:1),f&&(w-=h*a*(y<0?-1:1),c&&(E-=v*a*(g<0?-1:1)),d(t,{textAlign:u})),this.xCorr=w,this.yCorr=E),d(t,{left:s+w+"px",top:o+E+"px"}),ot&&(v=t.offsetHeight),this.cTT=S}}else this.alignOnAdd=!0},updateTransform:function(){var e=this.translateX||0,t=this.translateY||0,n=this.scaleX,r=this.scaleY,i=this.inverted,s=this.rotation,o=[];i&&(e+=this.attr("width"),t+=this.attr("height")),(e||t)&&o.push("translate("+e+","+t+")"),i?o.push("rotate(90) scale(-1,1)"):s&&o.push("rotate("+s+" "+(this.x||0)+" "+(this.y||0)+")"),(l(n)||l(r))&&o.push("scale("+p(n,1)+" "+p(r,1)+")"),o.length&&c(this.element,"transform",o.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var i,s,o,u,a={};s=this.renderer,o=s.alignedObjects;if(e){if(this.alignOptions=e,this.alignByTranslate=t,!n||r(n))this.alignTo=i=n||"renderer",f(o,this),o.push(this),n=null}else e=this.alignOptions,t=this.alignByTranslate,i=this.alignTo;n=p(n,s[i],s),i=e.align,s=e.verticalAlign,o=(n.x||0)+(e.x||0),u=(n.y||0)+(e.y||0);if(i==="right"||i==="center")o+=(n.width-(e.width||0))/{right:1,center:2}[i];a[t?"translateX":"x"]=V(o);if(s==="bottom"||s==="middle")u+=(n.height-(e.height||0))/({bottom:1,middle:2}[s]||1);return a[t?"translateY":"y"]=V(u),this[this.placed?"animate":"attr"](a),this.placed=!0,this.alignAttr=a,this},getBBox:function(){var t=this.bBox,n=this.renderer,r,i=this.rotation;r=this.element;var s=this.styles,o=i*tt;if(!t){if(r.namespaceURI===ft||n.forExport){try{t=r.getBBox?e({},r.getBBox()):{width:r.offsetWidth,height:r.offsetHeight}}catch(u){}if(!t||t.width<0)t={width:0,height:0}}else t=this.htmlGetBBox();n.isSVG&&(n=t.width,r=t.height,it&&s&&s.fontSize==="11px"&&r.toPrecision(3)===22.7&&(t.height=r=14),i&&(t.width=G(r*Z(o))+G(n*Y(o)),t.height=G(r*Y(o))+G(n*Z(o)))),this.bBox=t}return t},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.hide()}})},add:function(e){var t=this.renderer,r=e||t,i=r.element||t.box,s=i.childNodes,o=this.element,u=c(o,"zIndex"),a;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,this.textStr!==void 0&&t.buildText(this),u&&(r.handleZ=!0,u=n(u));if(r.handleZ)for(r=0;r<s.length;r++)if(e=s[r],t=c(e,"zIndex"),e!==o&&(n(t)>u||!l(u)&&l(t))){i.insertBefore(o,e),a=!0;break}return a||i.appendChild(o),this.added=!0,an(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r,i;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=t.point=null,cn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(i=0;i<e.stops.length;i++)e.stops[i]=e.stops[i].destroy();e.stops=null}e.safeRemoveChild(t),n&&tn(n,function(t){e.safeRemoveChild(t)}),e.alignTo&&f(e.renderer.alignedObjects,e);for(r in e)delete e[r];return null},shadow:function(e,t,n){var r=[],i,s,o=this.element,u,a,f,l;if(e){a=p(e.width,3),f=(e.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+p(e.offsetX,1)+", "+p(e.offsetY,1)+")";for(i=1;i<=a;i++)s=o.cloneNode(0),u=a*2+1-2*i,c(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":f*i,"stroke-width":u,transform:"translate"+l,fill:Ct}),n&&(c(s,"height",K(c(s,"height")-u,0)),s.cutHeight=u),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this}};var dn=function(){this.init.apply(this,arguments)};dn.prototype={Element:D,init:function(e,t,n,r){var i=location,s;s=this.createElement("svg").attr({xmlns:ft,version:"1.1"}),e.appendChild(s.element),this.isSVG=!0,this.box=s.element,this.boxWrapper=s,this.alignedObjects=[],this.url=(ut||ot)&&z.getElementsByTagName("base").length?i.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(z.createTextNode("Created with Highcharts 3.0.0")),this.defs=this.createElement("defs").add(),this.forExport=r,this.gradients={},this.setSize(t,n,!1);var o;ut&&e.getBoundingClientRect&&(this.subPixelFix=t=function(){d(e,{left:0,top:0}),o=e.getBoundingClientRect(),d(e,{left:J(o.left)-o.left+"px",top:J(o.top)-o.top+"px"})},t(),on(W,"resize",t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),k(this.gradients||{}),this.gradients=null,e&&(this.defs=e.destroy()),this.subPixelFix&&un(W,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t=e.element,r=this,i=r.forExport,s=p(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),o=t.childNodes,u=/style="([^"]+)"/,a=/href="([^"]+)"/,f=c(t,"x"),l=e.styles,h=l&&l.width&&n(l.width),v=l&&l.lineHeight,m=o.length;m--;)t.removeChild(o[m]);h&&!e.added&&this.box.appendChild(t),s[s.length-1]===""&&s.pop(),tn(s,function(n,s){var o,p=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");o=n.split("|||"),tn(o,function(n){if(n!==""||o.length===1){var m={},g=z.createElementNS(ft,"tspan"),y;u.test(n)&&(y=n.match(u)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),c(g,"style",y)),a.test(n)&&!i&&(c(g,"onclick",'location.href="'+n.match(a)[1]+'"'),d(g,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),g.appendChild(z.createTextNode(n)),p?m.dx=0:m.x=f,c(g,m),!p&&s&&(!lt&&i&&d(g,{display:"block"}),c(g,"dy",v||r.fontMetrics(/px$/.test(g.style.fontSize)?g.style.fontSize:l.fontSize).h,ot&&g.offsetHeight)),t.appendChild(g),p++;if(h)for(var n=n.replace(/([^\^])-/g,"$1- ").split(" "),b,w=[];n.length||w.length;)delete e.bBox,b=e.getBBox().width,m=b>h,!m||n.length===1?(n=w,w=[],n.length&&(g=z.createElementNS(ft,"tspan"),c(g,{dy:v||16,x:f}),y&&c(g,"style",y),t.appendChild(g),b>h&&(h=b))):(g.removeChild(g.firstChild),w.unshift(n.pop())),n.length&&g.appendChild(z.createTextNode(n.join(" ").replace(/- /g,"-")))}})})},button:function(n,r,i,s,o,u,a){var f=this.label(n,r,i,null,null,null,null,null,"button"),l=0,c,h,p,d,v,n={x1:0,y1:0,x2:0,y2:1},o=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:n,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},o);return p=o.style,delete o.style,u=t(o,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#FFF"],[1,"#ACF"]]}},u),d=u.style,delete u.style,a=t(o,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),v=a.style,delete a.style,on(f.element,"mouseenter",function(){f.attr(u).css(d)}),on(f.element,"mouseleave",function(){c=[o,u,a][l],h=[p,d,v][l],f.attr(c).css(h)}),f.setState=function(e){(l=e)?e===2&&f.attr(a).css(v):f.attr(o).css(p)},f.on("click",function(){s.call(f)}).attr(o).css(e({cursor:"default"},p))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=V(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=V(e[2])+t%2/2),e},path:function(t){var n={fill:Ct};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("path").attr(n)},circle:function(e,t,n){return e=i(e)?e:{x:e,y:t,r:n},this.createElement("circle").attr(e)},arc:function(e,t,n,r,s,o){return i(e)&&(t=e.y,n=e.r,r=e.innerR,s=e.start,o=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:s||0,end:o||0})},rect:function(e,t,n,r,s,o){return s=i(e)?e.r:s,s=this.createElement("rect").attr({rx:s,ry:s,fill:Ct}),s.attr(i(e)?e:s.crisp(o,e,t,K(n,0),K(r,0)))},setSize:function(e,t,n){var r=this.alignedObjects,i=r.length;this.width=e,this.height=t;for(this.boxWrapper[p(n,!0)?"animate":"attr"]({width:e,height:t});i--;)r[i].align()},g:function(e){var t=this.createElement("g");return l(e)?t.attr({"class":"highcharts-"+e}):t},image:function(t,n,r,i,s){var o={preserveAspectRatio:Ct};return arguments.length>1&&e(o,{x:n,y:r,width:i,height:s}),o=this.createElement("image").attr(o),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,n,r,i,s,o){var u,a=this.symbols[t],a=a&&a(V(n),V(r),i,s,o),f=/^url\((.*?)\)$/,l,c;return a?(u=this.path(a),e(u,{symbolName:t,x:n,y:r,width:i,height:s}),o&&e(u,o)):f.test(t)&&(c=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(V((i-t[0])/2),V((s-t[1])/2)))},l=t.match(f)[1],t=vt[l],u=this.image(l).attr({x:n,y:r}),t?c(u,t):(u.attr({width:0,height:0}),v("img",{onload:function(){c(u,vt[l]=[this.width,this.height])},src:l}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return["M",e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return["M",e,t,"L",e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return["M",e+n/2,t,"L",e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,n=i.r||n||r,o=i.end-.001,r=i.innerR,u=i.open,a=Y(s),f=Z(s),l=Y(o),o=Z(o),i=i.end-s<et?0:1;return["M",e+n*a,t+n*f,"A",n,n,0,i,1,e+n*l,t+n*o,u?"M":"L",e+r*l,t+r*o,"A",r,r,0,i,0,e+r*a,t+r*f,u?"":"Z"]}},clipRect:function(e,t,n,r){var i="highcharts-"+mt++,s=this.createElement("clipPath").attr({id:i}).add(this.defs),e=this.rect(e,t,n,r,0).add(s);return e.id=i,e.clipPath=s,e},color:function(e,n,r){var i=this,o,u=/^rgba/,a,f,h,p,d,v,m,g=[];e&&e.linearGradient?a="linearGradient":e&&e.radialGradient&&(a="radialGradient");if(a){r=e[a],f=i.gradients,p=e.stops,n=n.radialReference,s(r)&&(e[a]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),a==="radialGradient"&&n&&!l(r.gradientUnits)&&(r=t(r,{cx:n[0]-n[2]/2+r.cx*n[2],cy:n[1]-n[2]/2+r.cy*n[2],r:r.r*n[2],gradientUnits:"userSpaceOnUse"}));for(m in r)m!=="id"&&g.push(m,r[m]);for(m in p)g.push(p[m]);return g=g.join(","),f[g]?e=f[g].id:(r.id=e="highcharts-"+mt++,f[g]=h=i.createElement(a).attr(r).add(i.defs),h.stops=[],tn(p,function(e){u.test(e[1])?(o=pn(e[1]),d=o.get("rgb"),v=o.get("a")):(d=e[1],v=1),e=i.createElement("stop").attr({offset:e[0],"stop-color":d,"stop-opacity":v}).add(h),h.stops.push(e)})),"url("+i.url+"#"+e+")"}return u.test(e)?(o=pn(e),c(n,r+"-opacity",o.get("a")),o.get("rgb")):(n.removeAttribute(r+"-opacity"),e)},text:function(e,t,n,r){var i=yt.chart.style,s=ht||!lt&&this.forExport;return r&&!this.forExport?this.html(e,t,n):(t=V(p(t,0)),n=V(p(n,0)),e=this.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:i.fontFamily,fontSize:i.fontSize}),s&&e.css({position:"absolute"}),e.x=t,e.y=n,e)},html:function(t,n,r){var i=yt.chart.style,s=this.createElement("span"),o=s.attrSetters,u=s.element,a=s.renderer;return o.text=function(e){return e!==u.innerHTML&&delete this.bBox,u.innerHTML=e,!1},o.x=o.y=o.align=function(e,t){return t==="align"&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform(),!1},s.attr({text:t,x:V(n),y:V(r)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:i.fontFamily,fontSize:i.fontSize}),s.css=s.htmlCss,a.isSVG&&(s.add=function(t){var n,r=a.box.parentNode,i=[];if(t){if(n=t.div,!n){for(;t;)i.push(t),t=t.parentGroup;tn(i.reverse(),function(t){var i;n=t.div=t.div||v(Nt,{className:c(t.element,"class")},{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px"},n||r),i=n.style,e(t.attrSetters,{translateX:function(e){i.left=e+"px"},translateY:function(e){i.top=e+"px"},visibility:function(e,t){i[t]=e}})})}}else n=r;return n.appendChild(u),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s},fontMetrics:function(e){var e=n(e||11),e=e<24?e+4:V(e*1.2),t=V(e*.8);return{h:e,b:t}},label:function(n,r,i,s,o,u,a,f,c){function h(){var e,n;e=y.element.style,w=(T===void 0||N===void 0||g.styles.textAlign)&&y.getBBox(),g.width=(T||w.width||0)+2*S+x,g.height=(N||w.height||0)+2*S,O=S+m.fontMetrics(e&&e.fontSize).b,M&&(b||(e=V(-E*S),n=f?-O:0,g.box=b=s?m.symbol(s,e,n,g.width,g.height):m.rect(e,n,g.width,g.height,0,A[Bt]),b.add(g)),b.attr(t({width:g.width,height:g.height},A)),A=null)}function p(){var e=g.styles,e=e&&e.textAlign,t=x+S*(1-E),n;n=f?0:O,l(T)&&(e==="center"||e==="right")&&(t+={center:.5,right:1}[e]*(T-w.width)),(t!==y.x||n!==y.y)&&y.attr({x:t,y:n}),y.x=t,y.y=n}function d(e,t){b?b.attr(e,t):A[e]=t}function v(){y.add(g),g.attr({text:n,x:r,y:i}),b&&l(o)&&g.attr({anchorX:o,anchorY:u})}var m=this,g=m.g(c),y=m.text("",0,0,a).attr({zIndex:1}),b,w,E=0,S=3,x=0,T,N,C,k,L=0,A={},O,a=g.attrSetters,M;on(g,"add",v),a.width=function(e){return T=e,!1},a.height=function(e){return N=e,!1},a.padding=function(e){return l(e)&&e!==S&&(S=e,p()),!1},a.paddingLeft=function(e){return l(e)&&e!==x&&(x=e,p()),!1},a.align=function(e){return E={left:0,center:.5,right:1}[e],!1},a.text=function(e,t){return y.attr(t,e),h(),p(),!1},a[Bt]=function(e,t){return M=!0,L=e%2/2,d(t,e),!1},a.stroke=a.fill=a.r=function(e,t){return t==="fill"&&(M=!0),d(t,e),!1},a.anchorX=function(e,t){return o=e,d(t,e+L-C),!1},a.anchorY=function(e,t){return u=e,d(t,e-k),!1},a.x=function(e){return g.x=e,e-=E*((T||w.width)+S),C=V(e),g.attr("translateX",C),!1},a.y=function(e){return k=g.y=V(e),g.attr("translateY",k),!1};var _=g.css;return e(g,{css:function(e){if(e){var n={},e=t(e);tn("fontSize,fontWeight,fontFamily,color,lineHeight,width".split(","),function(t){e[t]!==U&&(n[t]=e[t],delete e[t])}),y.css(n)}return _.call(g,e)},getBBox:function(){return{width:w.width+2*S,height:w.height+2*S,x:w.x-S,y:w.y-S}},shadow:function(e){return b&&b.shadow(e),g},destroy:function(){un(g,"add",v),un(g.element,"mouseenter"),un(g.element,"mouseleave"),y&&(y=y.destroy()),b&&(b=b.destroy()),D.prototype.destroy.call(g),g=m=h=p=d=v=null}})}},pt=dn;var vn;if(!lt&&!ht){Highcharts.VMLElement=vn={init:function(e,t){var n=["<",t,' filled="f" stroked="f"'],r=["position: ","absolute",";"],i=t===Nt;(t==="shape"||i)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",i?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),t&&(n=i||t==="span"||t==="img"?n.join(""):e.prepVML(n),this.element=v(n)),this.renderer=e,this.attrSetters={}},add:function(e){var t=this.renderer,n=this.element,r=t.box,r=e?e.element||e:r;return e&&e.inverted&&t.invertChild(n,r),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),an(this,"add"),this},updateTransform:D.prototype.htmlUpdateTransform,attr:function(e,t){var n,i,s,u=this.element||{},a=u.style,f=u.nodeName,h=this.renderer,p=this.symbolName,d,m=this.shadows,g,y=this.attrSetters,b=this;r(e)&&l(t)&&(n=e,e={},e[n]=t);if(r(e))n=e,b=n==="strokeWidth"||n==="stroke-width"?this.strokeweight:this[n];else for(n in e)if(i=e[n],g=!1,s=y[n]&&y[n].call(this,i,n),s!==!1&&i!==null){s!==U&&(i=s);if(p&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(n))d||(this.symbolAttr(e),d=!0),g=!0;else if(n==="d"){i=i||[],this.d=i.join(" "),s=i.length;for(g=[];s--;)if(o(i[s]))g[s]=V(i[s]*10)-5;else if(i[s]==="Z")g[s]="x";else if(g[s]=i[s],i[s]==="wa"||i[s]==="at")g[s+5]===g[s+7]&&(g[s+7]-=1),g[s+6]===g[s+8]&&(g[s+8]-=1);i=g.join(" ")||"x",u.path=i;if(m)for(s=m.length;s--;)m[s].path=m[s].cutOff?this.cutOffPath(i,m[s].cutOff):i;g=!0}else if(n==="visibility"){if(m)for(s=m.length;s--;)m[s].style[n]=i;f==="DIV"&&(i=i==="hidden"?"-999em":0,st||(a[n]=i?"hidden":"visible"),n="top"),a[n]=i,g=!0}else n==="zIndex"?(i&&(a[n]=i),g=!0):en(n,["x","y","width","height"])!==-1?(this[n]=i,n==="x"||n==="y"?n={x:"left",y:"top"}[n]:i=K(0,i),this.updateClipping?(this[n]=i,this.updateClipping()):a[n]=i,g=!0):n==="class"&&f==="DIV"?u.className=i:n==="stroke"?(i=h.color(i,u,n),n="strokecolor"):n==="stroke-width"||n==="strokeWidth"?(u.stroked=i?!0:!1,n="strokeweight",this[n]=i,o(i)&&(i+="px")):n==="dashstyle"?((u.getElementsByTagName("stroke")[0]||v(h.prepVML(["<stroke/>"]),null,null,u))[n]=i||"solid",this.dashstyle=i,g=!0):n==="fill"?f==="SPAN"?a.color=i:f!=="IMG"&&
(u.filled=i!==Ct?!0:!1,i=h.color(i,u,n,this),n="fillcolor"):n==="opacity"?g=!0:f==="shape"&&n==="rotation"?(this[n]=i,u.style.left=-V(Z(i*tt)+1)+"px",u.style.top=V(Y(i*tt))+"px"):n==="translateX"||n==="translateY"||n==="rotation"?(this[n]=i,this.updateTransform(),g=!0):n==="text"&&(this.bBox=null,u.innerHTML=i,g=!0);g||(st?u[n]=i:c(u,n,i))}return b},clip:function(e){var t=this,n;return e?(n=e.members,f(n,t),n.push(t),t.destroyClip=function(){f(n,t)},e=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),e={clip:st?"inherit":"rect(auto)"}),t.css(e)},css:D.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&L(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),D.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=W.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var r,e=e.split(/[ ,]/);r=e.length;if(r===9||r===11)e[r-4]=e[r-2]=n(e[r-2])-10*t;return e.join(" ")},shadow:function(e,t,r){var i=[],s,o=this.element,u=this.renderer,a,f=o.style,l,c=o.path,h,d,m,g;c&&typeof c.value!="string"&&(c="x"),d=c;if(e){m=p(e.width,3),g=(e.opacity||.15)/m;for(s=1;s<=3;s++)h=m*2+1-2*s,r&&(d=this.cutOffPath(c.value,h+.5)),l=['<shape isShadow="true" strokeweight="',h,'" filled="false" path="',d,'" coordsize="10 10" style="',o.style.cssText,'" />'],a=v(u.prepVML(l),null,{left:n(f.left)+p(e.offsetX,1),top:n(f.top)+p(e.offsetY,1)}),r&&(a.cutOff=h+1),l=['<stroke color="',e.color||"black",'" opacity="',g*s,'"/>'],v(u.prepVML(l),null,null,a),t?t.element.appendChild(a):o.parentNode.insertBefore(a,o),i.push(a);this.shadows=i}return this}},vn=m(D,vn);var mn={Element:vn,isIE8:nt.indexOf("MSIE 8.0")>-1,init:function(e,t,n){var r,i;this.alignedObjects=[],r=this.createElement(Nt),i=r.element,i.style.position="relative",e.appendChild(r.element),this.isVML=!0,this.box=i,this.boxWrapper=r,this.setSize(t,n,!1),z.namespaces.hcv||(z.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),z.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,n,r,s){var o=this.createElement(),u=i(t);return e(o,{members:[],left:u?t.x:t,top:u?t.y:n,width:u?t.width:r,height:u?t.height:s,getCSS:function(t){var n=t.element,r=n.nodeName,t=t.inverted,i=this.top-(r==="shape"?n.offsetTop:0),s=this.left,n=s+this.width,o=i+this.height,i={clip:"rect("+V(t?s:i)+"px,"+V(t?o:n)+"px,"+V(t?n:o)+"px,"+V(t?i:s)+"px)"};return!t&&st&&r==="DIV"&&e(i,{width:n+"px",height:o+"px"}),i},updateClipping:function(){tn(o.members,function(e){e.css(o.getCSS(e))})}})},color:function(e,t,n,r){var i=this,s,o=/^rgba/,u,a,f=Ct;e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern");if(a){var l,c,h=e.linearGradient||e.radialGradient,p,d,m,g,y,b="",e=e.stops,w,E=[],S=function(){u=['<fill colors="'+E.join(",")+'" opacity="',m,'" o:opacity2="',d,'" type="',a,'" ',b,'focus="100%" method="any" />'],v(i.prepVML(u),null,null,t)};p=e[0],w=e[e.length-1],p[0]>0&&e.unshift([0,p[1]]),w[0]<1&&e.push([1,w[1]]),tn(e,function(e,t){o.test(e[1])?(s=pn(e[1]),l=s.get("rgb"),c=s.get("a")):(l=e[1],c=1),E.push(e[0]*100+"% "+l),t?(m=c,g=l):(d=c,y=l)});if(n==="fill")if(a==="gradient")n=h.x1||h[0]||0,e=h.y1||h[1]||0,p=h.x2||h[2]||0,h=h.y2||h[3]||0,b='angle="'+(90-X.atan((h-e)/(p-n))*180/et)+'"',S();else{var f=h.r,x=f*2,T=f*2,N=h.cx,C=h.cy,k=t.radialReference,L,f=function(){k&&(L=r.getBBox(),N+=(k[0]-L.x)/L.width-.5,C+=(k[1]-L.y)/L.height-.5,x*=k[2]/L.width,T*=k[2]/L.height),b='src="'+yt.global.VMLRadialGradientURL+'" size="'+x+","+T+'" origin="0.5,0.5" position="'+N+","+C+'" color2="'+y+'" ',S()};r.added?f():on(r,"add",f),f=g}else f=l}else o.test(e)&&t.tagName!=="IMG"?(s=pn(e),u=["<",n,' opacity="',s.get("a"),'"/>'],v(this.prepVML(u),null,null,t),f=s.get("rgb")):(f=t.getElementsByTagName(n),f.length&&(f[0].opacity=1,f[0].type="solid"),f=e);return f},prepVML:function(e){var t=this.isIE8,e=e.join("");return t?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=e.indexOf('style="')===-1?e.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):e.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):e=e.replace("<","<hcv:"),e},text:dn.prototype.html,path:function(t){var n={coordsize:"10 10"};return s(t)?n.d=t:i(t)&&e(n,t),this.createElement("shape").attr(n)},circle:function(e,t,n){return i(e)&&(n=e.r,t=e.y,e=e.x),this.symbol("circle").attr({x:e-n,y:t-n,width:2*n,height:2*n})},g:function(e){var t;return e&&(t={className:"highcharts-"+e,"class":"highcharts-"+e}),this.createElement(Nt).attr(t)},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},rect:function(e,t,n,r,s,o){i(e)&&(t=e.y,n=e.width,r=e.height,o=e.strokeWidth,e=e.x);var u=this.symbol("rect");return u.r=s,u.attr(u.crisp(o,e,t,K(n,0),K(r,0)))},invertChild:function(e,t){var r=t.style;d(e,{flip:"x",left:n(r.width)-1,top:n(r.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,n=i.innerR,r=Y(s),a=Z(s),f=Y(o),l=Z(o);return o-s===0?["x"]:(s=["wa",e-u,t-u,e+u,t+u,e+u*r,t+u*a,e+u*f,t+u*l],i.open&&!n&&s.push("e","M",e,t),s.push("at",e-n,t-n,e+n,t+n,e+n*f,t+n*l,e+n*r,t+n*a,"x","e"),s)},circle:function(e,t,n,r){return["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){var s=e+n,o=t+r,u;return!l(i)||!i.r?s=dn.prototype.symbols.square.apply(0,arguments):(u=Q(i.r,n,r),s=["M",e+u,t,"L",s-u,t,"wa",s-2*u,t,s,t+2*u,s-u,t,s,t+u,"L",s,o-u,"wa",s-2*u,o-2*u,s,o,s,o-u,s-u,o,"L",e+u,o,"wa",e,o-2*u,e+2*u,o,e+u,o,e,o-u,"L",e,t+u,"wa",e,t,e+2*u,t+2*u,e,t+u,e+u,t,"x","e"]),s}}};Highcharts.VMLRenderer=vn=function(){this.init.apply(this,arguments)},vn.prototype=t(dn.prototype,mn),pt=vn}var gn;ht&&(Highcharts.CanVGRenderer=vn=function(){ft="http://www.w3.org/1999/xhtml"},vn.prototype.symbols={},gn=function(){function e(){var e=t.length,n;for(n=0;n<e;n++)t[n]();t=[]}var t=[];return{push:function(n,r){t.length===0&&Zt(r,e),t.push(n)}}}(),pt=vn),P.prototype={addLabel:function(){var t=this.axis,n=t.options,r=t.chart,i=t.horiz,s=t.categories,u=t.series[0]&&t.series[0].names,f=this.pos,c=n.labels,h=t.tickPositions,i=i&&s&&!c.step&&!c.staggerLines&&!c.rotation&&r.plotWidth/h.length||!i&&r.plotWidth/2,d=f===h[0],v=f===h[h.length-1],u=s?p(s[f],u&&u[f],f):f,s=this.label,h=h.info,m;t.isDatetimeAxis&&h&&(m=n.dateTimeLabelFormats[h.higherRanks[f]||h.unitName]),this.isFirst=d,this.isLast=v,n=t.labelFormatter.call({axis:t,chart:r,isFirst:d,isLast:v,dateTimeLabelFormat:m,value:t.isLog?O(a(u)):u}),f=i&&{width:K(1,V(i-2*(c.padding||10)))+"px"},f=e(f,c.style),l(s)?s&&s.attr({text:n}).css(f):(i={align:c.align},o(c.rotation)&&(i.rotation=c.rotation),this.label=l(n)&&c.enabled?r.renderer.text(n,0,0,c.useHTML).attr(i).css(f).add(t.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.axis.options.labels,t=this.labelBBox.width,e=t*{left:0,center:.5,right:1}[e.align]-e.x;return[-e,t-e]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=r.chart,s=this.isFirst,o=this.isLast,u=t.x,a=r.reversed,f=r.tickPositions;if(s||o){var l=this.getLabelSides(),c=l[0],l=l[1],i=i.plotLeft,h=i+r.len,f=(r=r.ticks[f[e+(s?1:-1)]])&&r.label.xy&&r.label.xy.x+r.getLabelSides()[s?0:1];s&&!a||o&&a?u+c<i&&(u=i-c,r&&u+l>f&&(n=!1)):u+l>h&&(u=h-l,r&&u+c<f&&(n=!1)),t.x=u}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,r,i,s,o,u,a){var f=this.axis,c=f.transA,h=f.reversed,f=f.staggerLines,e=e+s.x-(o&&i?o*c*(h?-1:1):0),t=t+s.y-(o&&!i?o*c*(h?1:-1):0);return l(s.y)||(t+=n(r.styles.lineHeight)*.9-r.getBBox().height/2),f&&(t+=u/(a||1)%f*16),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine(["M",e,t,"L",e+(i?0:-n),t+(i?n:0)],r)},render:function(e,t,n){var r=this.axis,i=r.options,s=r.chart.renderer,o=r.horiz,u=this.type,a=this.label,f=this.pos,l=i.labels,c=this.gridLine,h=u?u+"Grid":"grid",d=u?u+"Tick":"tick",v=i[h+"LineWidth"],m=i[h+"LineColor"],g=i[h+"LineDashStyle"],y=i[d+"Length"],h=i[d+"Width"]||0,b=i[d+"Color"],w=i[d+"Position"],d=this.mark,E=l.step,S=!0,x=r.tickmarkOffset,T=this.getPosition(o,f,x,t),N=T.x,T=T.y,C=o&&N===r.pos||!o&&T===r.pos+r.len?-1:1,k=r.staggerLines;this.isActive=!0,v&&(f=r.getPlotLinePath(f+x,v*C,t,!0),c===U&&(c={stroke:m,"stroke-width":v},g&&(c.dashstyle=g),u||(c.zIndex=1),t&&(c.opacity=0),this.gridLine=c=v?s.path(f).attr(c).add(r.gridGroup):null),!t&&c&&f&&c[this.isNew?"attr":"animate"]({d:f,opacity:n})),h&&y&&(w==="inside"&&(y=-y),r.opposite&&(y=-y),t=this.getMarkPath(N,T,y,h*C,o,s),d?d.animate({d:t,opacity:n}):this.mark=s.path(t).attr({stroke:b,"stroke-width":h,opacity:n}).add(r.axisGroup)),a&&!isNaN(N)&&(a.xy=T=this.getLabelPosition(N,T,a,o,l,x,e,E),this.isFirst&&!p(i.showFirstLabel,1)||this.isLast&&!p(i.showLastLabel,1)?S=!1:!k&&o&&l.overflow==="justify"&&!this.handleOverflow(e,T)&&(S=!1),E&&e%E&&(S=!1),S&&!isNaN(T.y)?(T.opacity=n,a[this.isNew?"attr":"animate"](T),this.isNew=!1):a.attr("y",-9999))},destroy:function(){k(this,this.axis)}},H.prototype={render:function(){var e=this,n=e.axis,r=n.horiz,i=(n.pointRange||0)/2,s=e.options,o=s.label,a=e.label,f=s.width,c=s.to,h=s.from,d=l(h)&&l(c),v=s.value,m=s.dashStyle,g=e.svgElem,y=[],b,w=s.color,E=s.zIndex,S=s.events,x=n.chart.renderer;n.isLog&&(h=u(h),c=u(c),v=u(v));if(f){if(y=n.getPlotLinePath(v,f),i={stroke:w,"stroke-width":f},m)i.dashstyle=m}else{if(!d)return;if(h=K(h,n.min-i),c=Q(c,n.max+i),y=n.getPlotBandPath(h,c,s),i={fill:w},s.borderWidth)i.stroke=s.borderColor,i["stroke-width"]=s.borderWidth}l(E)&&(i.zIndex=E);if(g)y?g.animate({d:y},null,g.onGetPath):(g.hide(),g.onGetPath=function(){g.show()});else if(y&&y.length&&(e.svgElem=g=x.path(y).attr(i).add(),S))for(b in s=function(t){g.on(t,function(n){S[t].apply(e,[n])})},S)s(b);return o&&l(o.text)&&y&&y.length&&n.width>0&&n.height>0?(o=t({align:r&&d&&"center",x:r?!d&&4:10,verticalAlign:!r&&d&&"middle",y:r?d?16:10:d?6:-4,rotation:r&&!d&&90},o),a||(e.label=a=x.text(o.text,0,0).attr({align:o.textAlign||o.align,rotation:o.rotation,zIndex:E}).css(o.style).add()),n=[y[1],y[4],p(y[6],y[1])],y=[y[2],y[5],p(y[7],y[2])],r=N(n),d=N(y),a.align(o,!1,{x:r,y:d,width:C(n)-r,height:C(y)-d}),a.show()):a&&a.hide(),e},destroy:function(){f(this.axis.plotLinesAndBands,this),k(this,this.axis)}},B.prototype={destroy:function(){k(this,this.axis)},setTotal:function(e){this.cum=this.total=e},render:function(e){var t=this.options,n=t.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,0,0,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(e)},setOffset:function(e,t){var n=this.axis,r=n.chart,i=r.inverted,s=this.isNegative,o=n.translate(this.percent?100:this.total,0,0,0,1),n=n.translate(0),n=G(o-n),u=r.xAxis[0].translate(this.x)+e,a=r.plotHeight,s={x:i?s?o:o-n:u,y:i?a-u-t:s?a-o-n:a-o,width:i?n:t,height:i?t:n};if(i=this.label)i.align(this.alignOptions,null,s),s=i.alignAttr,i.attr({visibility:this.options.crop===!1||r.isInsidePlot(s.x,s.y)?lt?"inherit":"visible":"hidden"})}},j.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Gt,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:Gt.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(e,t){var n=t.isX;this.horiz=e.inverted?!n:n,this.xOrY=(this.isXAxis=n)?"x":"y",this.opposite=t.opposite,this.side=this.horiz?this.opposite?0:2:this.opposite?1:3,this.setOptions(t);var r=this.options,i=r.type;this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.staggerLines=this.horiz&&r.labels.staggerLines,this.userOptions=t,this.minPixelPadding=0,this.chart=e,this.reversed=r.reversed,this.zoomEnabled=r.zoomEnabled!==!1,this.categories=r.categories||i==="category",this.isLog=i==="logarithmic",this.isDatetimeAxis=i==="datetime",this.isLinked=l(r.linkedTo),this.tickmarkOffset=this.categories&&r.tickmarkPlacement==="between"?.5:0,this.ticks={},this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this._stacksTouched=0,this.min=this.max=null;var s,r=this.options.events;en(this,e.axes)===-1&&(e.axes.push(this),e[n?"xAxis":"yAxis"].push(this)),this.series=this.series||[],e.inverted&&n&&this.reversed===U&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(s in r)on(this,s,r[s]);this.isLog&&(this.val2lin=u,this.lin2val=a)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(yt[this.isXAxis?"xAxis":"yAxis"],e))},update:function(e,n){var r=this.chart,e=r.options[this.xOrY+"Axis"][this.options.index]=t(this.userOptions,e);this.destroy(),this._addedPlotLB=!1,this.init(r,e),r.isDirtyBox=!0,p(n,!0)&&r.redraw()},remove:function(e){var t=this.chart,n=this.xOrY+"Axis";tn(this.series,function(e){e.remove(!1)}),f(t.axes,this),f(t[n],this),t.options[n].splice(this.options.index,1),this.destroy(),t.isDirtyBox=!0,p(e,!0)&&t.redraw()},defaultLabelFormatter:function(){var e=this.axis,t=this.value,n=e.categories,r=this.dateTimeLabelFormat,i=yt.lang.numericSymbols,s=i&&i.length,o,u=e.options.labels.format,e=e.isLog?t:e.tickInterval;if(u)o=b(u,this);else if(n)o=t;else if(r)o=bt(r,t);else if(s&&e>=1e3)for(;s--&&o===U;)n=Math.pow(1e3,s+1),e>=n&&i[s]!==null&&(o=g(t/n,-1)+i[s]);return o===U&&(o=t>=1e3?g(t,0):g(t,-1)),o},getSeriesExtremes:function(){var e=this,t=e.chart,n=e.stacks,r=[],i=[],s=e._stacksTouched+=1,o,u;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=null,tn(e.series,function(o){if(o.visible||!t.options.chart.ignoreHiddenSeries){var a=o.options,f,c,h,d,v,m,g,y,b,w=a.threshold,E,S=[],x=0;e.hasVisibleSeries=!0,e.isLog&&w<=0&&(w=a.threshold=null);if(e.isXAxis){if(a=o.xData,a.length)e.dataMin=Q(p(e.dataMin,a[0]),N(a)),e.dataMax=K(p(e.dataMax,a[0]),C(a))}else{var T,k,L,A=o.cropped,M=o.xAxis.getExtremes(),_=!!o.modifyValue;f=a.stacking,e.usePercentage=f==="percent",f&&(v=a.stack,d=o.type+p(v,""),m="-"+d,o.stackKey=d,c=r[d]||[],r[d]=c,h=i[m]||[],i[m]=h),e.usePercentage&&(e.dataMin=0,e.dataMax=99),a=o.processedXData,g=o.processedYData,E=g.length;for(u=0;u<E;u++){y=a[u],b=g[u],f&&(k=(T=b<w)?h:c,L=T?m:d,l(k[y])?(k[y]=O(k[y]+b),b=[b,k[y]]):k[y]=b,n[L]||(n[L]={}),n[L][y]||(n[L][y]=new B(e,e.options.stackLabels,T,y,v,f)),n[L][y].setTotal(k[y]),n[L][y].touched=s);if(b!==null&&b!==U&&(!e.isLog||b>0))if(_&&(b=o.modifyValue(b)),o.getExtremesFromAll||A||(a[u+1]||y)>=M.min&&(a[u-1]||y)<=M.max)if(y=b.length)for(;y--;)b[y]!==null&&(S[x++]=b[y]);else S[x++]=b}!e.usePercentage&&S.length&&(o.dataMin=f=N(S),o.dataMax=o=C(S),e.dataMin=Q(p(e.dataMin,f),f),e.dataMax=K(p(e.dataMax,o),o)),l(w)&&(e.dataMin>=w?(e.dataMin=w,e.ignoreMinPadding=!0):e.dataMax<w&&(e.dataMax=w,e.ignoreMaxPadding=!0))}}});for(o in n)for(u in n[o])n[o][u].touched<s&&(n[o][u].destroy(),delete n[o][u])},translate:function(e,t,n,r,i,s){var o=this.len,u=1,a=0,f=r?this.oldTransA:this.transA,r=r?this.oldMin:this.min,l=this.minPixelPadding,i=(this.options.ordinal||this.isLog&&i)&&this.lin2val;return f||(f=this.transA),n&&(u*=-1,a=o),this.reversed&&(u*=-1,a-=u*o),t?(e=e*u+a,e-=l,e=e/f+r,i&&(e=this.lin2val(e))):(i&&(e=this.val2lin(e)),e=u*(e-r)*f+a+u*l+(s?f*this.pointRange/2:0)),e},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,n,r){var i=this.chart,s=this.left,o=this.top,u,a,f,e=this.translate(e,null,null,n),l=n&&i.oldChartHeight||i.chartHeight,c=n&&i.oldChartWidth||i.chartWidth,h;u=this.transB,n=a=V(e+u),u=f=V(l-e-u);if(isNaN(e))h=!0;else if(this.horiz){if(u=o,f=l-this.bottom,n<s||n>s+this.width)h=!0}else if(n=s,a=c-this.right,u<o||u>o+this.height)h=!0;return h&&!r?null:i.renderer.crispLine(["M",n,u,"L",a,f],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},getLinearTickPositions:function(e,t,n){for(var r,t=O($(t/e)*e),n=O(J(n/e)*e),i=[];t<=n;){i.push(t),t=O(t+e);if(t===r)break;r=t}return i},getLogTickPositions:function(e,t,n,r){var i=this.options,s=this.len,o=[];r||(this._minorAutoInterval=null);if(e>=.5)e=V(e),o=this.getLinearTickPositions(e,t,n);else if(e>=.08)for(var s=$(t),f,l,c,h,d,i=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];s<n+1&&!d;s++){l=i.length;for(f=0;f<l&&!d;f++)c=u(a(s)*i[f]),c>t&&h<=n&&o.push(h),h>n&&(d=!0),h=c}else if(t=a(t),n=a(n),e=i[r?"minorTickInterval":"tickInterval"],e=p(e==="auto"?null:e,this._minorAutoInterval,(n-t)*(i.tickPixelInterval/(r?5:1))/((r?s/this.tickPositions.length:s)||1)),e=w(e,null,X.pow(10,$(X.log(e)/X.LN10))),o=sn(this.getLinearTickPositions(e,t,n),u),!r)this._minorAutoInterval=e/5;return r||(this.tickInterval=e),o},getMinorTickPositions:function(){var e=this.options,t=this.tickPositions,n=this.minorTickInterval,r=[],i;if(this.isLog){i=t.length;for(e=1;e<i;e++)r=r.concat(this.getLogTickPositions(n,t[e-1],t[e],!0))}else if(this.isDatetimeAxis&&e.minorTickInterval==="auto")r=r.concat(S(E(n),this.min,this.max,e.startOfWeek)),r[0]<this.min&&r.shift();else for(t=this.min+(t[0]-this.min)%n;t<=this.max;t+=n)r.push(t);return r},adjustForMinRange:function(){var e=this.options,t=this.min,n=this.max,r,i=this.dataMax-this.dataMin>=this.minRange,s,o,u,a,f;this.isXAxis&&this.minRange===U&&!this.isLog&&(l(e.min)||l(e.max)?this.minRange=null:(tn(this.series,function(e){a=e.xData;for(o=f=e.xIncrement?1:a.length-1;o>0;o--)if(u=a[o]-a[o-1],s===U||u<s)s=u}),this.minRange=Q(s*5,this.dataMax-this.dataMin)));if(n-t<this.minRange){var c=this.minRange;r=(c-n+t)/2,r=[t-r,p(e.min,t-r)],i&&(r[2]=this.dataMin),t=C(r),n=[t+c,p(e.max,t+c)],i&&(n[2]=this.dataMax),n=N(n),n-t<c&&(r[0]=n-c,r[1]=p(e.min,n-c),t=C(r))}this.min=t,this.max=n},setAxisTranslation:function(e){var t=this.max-this.min,n=0,r,i=0,s=0,o=this.linkedParent,u=this.transA;this.isXAxis&&(o?(i=o.minPointOffset,s=o.pointRangePadding):tn(this.series,function(e){var o=e.pointRange,u=e.options.pointPlacement,a=e.closestPointRange;o>t&&(o=0),n=K(n,o),i=K(i,u?0:o/2),s=K(s,u==="on"?0:o),!e.noSharedTooltip&&l(a)&&(r=l(r)?Q(r,a):a)}),this.minPointOffset=i,this.pointRangePadding=s,this.pointRange=Q(n,t),this.closestPointRange=r),e&&(this.oldTransA=u),this.translationSlope=this.transA=u=this.len/(t+s||1),this.transB=this.horiz?this.left:this.bottom,this.minPixelPadding=u*i},setTickPositions:function(e){var t=this,n=t.chart,r=t.options,i=t.isLog,s=t.isDatetimeAxis,o=t.isXAxis,a=t.isLinked,f=t.options.tickPositioner,c=r.maxPadding,h=r.minPadding,d=r.tickInterval,v=r.minTickInterval,m=r.tickPixelInterval,g=t.categories;a?(t.linkedParent=n[o?"xAxis":"yAxis"][r.linkedTo],n=t.linkedParent.getExtremes(),t.min=p(n.min,n.dataMin),t.max=p(n.max,n.dataMax),r.type!==t.linkedParent.options.type&&A(11,1)):(t.min=p(t.userMin,r.min,t.dataMin),t.max=p(t.userMax,r.max,t.dataMax)),i&&(!e&&Q(t.min,p(t.dataMin,t.min))<=0&&A(10,1),t.min=O(u(t.min)),t.max=O(u(t.max))),t.range&&(t.userMin=t.min=K(t.min,t.max-t.range),t.userMax=t.max,e)&&(t.range=null),t.beforePadding&&t.beforePadding(),t.adjustForMinRange(),!g&&!t.usePercentage&&!a&&l(t.min)&&l(t.max)&&(n=t.max-t.min)&&(!l(r.min)&&!l(t.userMin)&&h&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=n*h),!l(r.max)&&!l(t.userMax)&&c&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=n*c)),t.tickInterval=t.min===t.max||t.min===void 0||t.max===void 0?1:a&&!d&&m===t.linkedParent.options.tickPixelInterval?t.linkedParent.tickInterval:p(d,g?1:(t.max-t.min)*m/(t.len||1)),o&&!e&&tn(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(!0),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),!d&&t.tickInterval<v&&(t.tickInterval=v),!s&&!i&&(e=X.pow(10,$(X.log(t.tickInterval)/X.LN10)),!d)&&(t.tickInterval=w(t.tickInterval,null,e,r)),t.minorTickInterval=r.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:r.minorTickInterval,t.tickPositions=f=r.tickPositions?[].concat(r.tickPositions):f&&f.apply(t,[t.min,t.max]),f||(f=s?(t.getNonLinearTimeTicks||S)(E(t.tickInterval,r.units),t.min,t.max,r.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):i?t.getLogTickPositions(t.tickInterval,t.min,t.max):t.getLinearTickPositions(t.tickInterval,t.min,t.max),t.tickPositions=f),a||(i=f[0],s=f[f.length-1],a=t.minPointOffset||0,r.startOnTick?t.min=i:t.min-a>i&&f.shift(),r.endOnTick?t.max=s:t.max+a<s&&f.pop(),f.length===1&&(t.min-=.001,t.max+=.001))},setMaxTicks:function(){var e=this.chart,t=e.maxTicks||{},n=this.tickPositions,r=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(t[r]||0)&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this._maxTicksKey,t=this.tickPositions,n=this.chart.maxTicks;if(n&&n[e]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1){var r=this.tickAmount,i=t.length;this.tickAmount=e=n[e];if(i<e){for(;t.length<e;)t.push(O(t[t.length-1]+this.tickInterval));this.transA*=(i-1)/(e-1),this.max=t[t.length-1]}l(r)&&e!==r&&(this.isDirty=!0)}},setScale:function(){var e=this.stacks,t,n,r,i;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),i=this.len!==this.oldAxisLength,tn(this.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)r=!0});if(i||r||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax)if(this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,!this.isDirty)this.isDirty=i||this.min!==this.oldMin||this.max!==this.oldMax;if(!this.isXAxis)for(t in e)for(n in e[t])e[t][n].cum=e[t][n].total;this.setMaxTicks()},setExtremes:function(t,n,r,i,s){var o=this,u=o.chart,r=p(r,!0),s=e(s,{min:t,max:n});an(o,"setExtremes",s,function(){o.userMin=t,o.userMax=n,o.isDirtyExtremes=!0,r&&u.redraw(i)})},zoom:function(e,t){return e<=this.dataMin&&(e=U),t>=this.dataMax&&(t=U),this.displayBtn=e!==U||t!==U,this.setExtremes(e,t,!1,U,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,n=t.offsetLeft||0,r=t.offsetRight||0,i=this.horiz,s,o;this.left=o=p(t.left,e.plotLeft+n),this.top=s=p(t.top,e.plotTop),this.width=n=p(t.width,e.plotWidth-n+r),this.height=t=p(t.height,e.plotHeight),this.bottom=e.chartHeight-t-s,this.right=e.chartWidth-n-o,this.len=K(i?n:t,0),this.pos=i?o:s},getExtremes:function(){var e=this.isLog;return{min:e?O(a(this.min)):this.min,max:e?O(a(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(e){var t=this.isLog,n=t?a(this.min):this.min,t=t?a(this.max):this.max;return n>e||e===null?e=n:t<e&&(e=t),this.translate(e,0,1,0,1)},addPlotBand:function(e){this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var n=(new H(this,e)).render(),r=this.userOptions;return t&&(r[t]=r[t]||[],r[t].push(e)),this.plotLinesAndBands.push(n),n},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,u=e.side,a=t.inverted?[1,0,3,2][u]:u,f,c=0,h,d=0,v=r.title,m=r.labels,g=0,y=t.axisOffset,b=t.clipOffset,w=[-1,1,1,-1][u],E;e.hasData=t=e.hasVisibleSeries||l(e.min)&&l(e.max)&&!!i,e.showAxis=f=t||p(r.showEmpty,!0),e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:m.zIndex||7}).add());if(t||e.isLinked)tn(i,function(t){s[t]?s[t].addLabel():s[t]=new P(e,t)}),tn(i,function(e){if(u===0||u===2||{1:"left",3:"right"}[u]===m.align)g=K(s[e].getLabelSize(),g)}),e.staggerLines&&(g+=(e.staggerLines-1)*16);else for(E in s)s[E].destroy(),delete s[E];v&&v.text&&v.enabled!==!1&&(e.axisTitle||(e.axisTitle=n.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).css(v.style).add(e.axisGroup),e.axisTitle.isNew=!0),f&&(c=e.axisTitle.getBBox()[o?"height":"width"],d=p(v.margin,o?5:10),h=v.offset),e.axisTitle[f?"show":"hide"]()),e.offset=w*p(r.offset,y[u]),e.axisTitleMargin=p(h,g+d+(u!==2&&g&&w*r.labels[o?"y":"x"])),y[u]=K(y[u],e.axisTitleMargin+c+w*e.offset),b[a]=K(b[a],r.lineWidth)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r;return this.lineTop=r=t.chartHeight-this.bottom-(n?this.height:0)+r,n||(e*=-1),t.renderer.crispLine(["M",i?this.left:s,i?r:this.top,"L",i?t.chartWidth-this.right:s,i?r:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,r=this.top,i=this.len,s=this.options.title,o=e?t:r,u=this.opposite,a=this.offset,f=n(s.style.fontSize||12),i={low:o+(e?0:i),middle:o+i/2,high:o+(e?i:0)}[s.align],t=(e?r+this.height:t)+(e?1:-1)*(u?-1:1)*this.axisTitleMargin+(this.side===2?f:0);return{x:e?i:t+(u?this.width:0)+a+(s.x||0),y:e?t-(u?this.height:0)+a:i+(s.y||0)}},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.isLog,s=e.isLinked,o=e.tickPositions,u=e.axisTitle,f=e.stacks,c=e.ticks,h=e.minorTicks,p=e.alternateBands,d=r.stackLabels,v=r.alternateGridColor,m=e.tickmarkOffset,g=r.lineWidth,y,b=t.hasRendered&&l(e.oldMin)&&!isNaN(e.oldMin),w=e.showAxis,E,S;if(e.hasData||s)if(tn([c,h,p],function(e){for(var t in e)e[t].isActive=!1}),e.minorTickInterval&&!e.categories&&tn(e.getMinorTickPositions(),function(t){h[t]||(h[t]=new P(e,t,"minor")),b&&h[t].isNew&&h[t].render(null,!0),h[t].render(null,!1,1)}),o.length&&(tn(o.slice(1).concat([o[0]]),function(t,n){n=n===o.length-1?0:n+1;if(!s||t>=e.min&&t<=e.max)c[t]||(c[t]=new P(e,t)),b&&c[t].isNew&&c[t].render(n,!0),c[t].render(n,!1,1)}),m&&e.min===0&&(c[-1]||(c[-1]=new P(e,-1,null,!0)),c[-1].render(-1))),v&&tn(o,function(t,n){n%2===0&&t<e.max&&(p[t]||(p[t]=new H(e)),E=t+m,S=o[n+1]!==U?o[n+1]+m:e.max,p[t].options={from:i?a(E):E,to:i?a(S):S,color:v},p[t].render(),p[t].isActive=!0)}),!e._addedPlotLB)tn((r.plotLines||[]).concat(r.plotBands||[]),function(t){e.addPlotBandOrLine(t)}),e._addedPlotLB=!0;tn([c,h,p],function(e){var n,r,i=[],s=wt?wt.duration||500:0,o=function(){for(r=i.length;r--;)e[i[r]]&&!e[i[r]].isActive&&(e[i[r]].destroy(),delete e[i[r]])};for(n in e)e[n].isActive||(e[n].render(n,!1,0),e[n].isActive=!1,i.push(n));e===p||!t.hasRendered||!s?o():s&&setTimeout(o,s)}),g&&(y=e.getLinePath(g),e.axisLine?e.axisLine.animate({d:y}):e.axisLine=n.path(y).attr({stroke:r.lineColor,"stroke-width":g,zIndex:7}).add(e.axisGroup),e.axisLine[w?"show":"hide"]()),u&&w&&(u[u.isNew?"attr":"animate"](e.getTitlePosition()),u.isNew=!1);if(d&&d.enabled){var x,T,r=e.stackTotalGroup;r||(e.stackTotalGroup=r=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),r.translate(t.plotLeft,t.plotTop);for(x in f)for(T in n=f[x],n)n[T].render(r)}e.isDirty=!1},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,n=t.length;n--;)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){this.update({title:e},t)},redraw:function(){var e=this.chart.pointer;e.reset&&e.reset(!0),this.render(),tn(this.plotLinesAndBands,function(e){e.render()}),tn(this.series,function(e){e.isDirty=!0})},setCategories:function(e,t){this.update({categories:e},t)},destroy:function(){var e=this,t=e.stacks,n;un(e);for(n in t)k(t[n]),t[n]=null;tn([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(e){k(e)}),tn("stackTotalGroup,axisLine,axisGroup,gridGroup,labelGroup,axisTitle".split(","),function(t){e[t]&&(e[t]=e[t].destroy())})}},F.prototype={init:function(e,t){var r=t.borderWidth,i=t.style,s=n(i.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:s,fill:t.backgroundColor,"stroke-width":r,r:t.borderRadius,zIndex:8}).css(i).css({padding:0}).hide().add(),ht||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){tn(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(t,n,r,i){var s=this,o=s.now,u=s.options.animation!==!1&&!s.isHidden;e(o,{x:u?(2*o.x+t)/3:t,y:u?(o.y+n)/2:n,anchorX:u?(2*o.anchorX+r)/3:r,anchorY:u?(o.anchorY+i)/2:i}),s.label.attr(o),u&&(G(t-o.x)>1||G(n-o.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(t,n,r,i)},32))},hide:function(){var e=this,t;this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},p(this.options.hideDelay,500)),t&&tn(t,function(e){e.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){tn(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(e,t){var n,r=this.chart,i=r.inverted,s=r.plotTop,o=0,u=0,a,e=h(e);return n=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===U&&(t=r.pointer.normalize(t)),n=[t.chartX-r.plotLeft,t.chartY-s]),n||(tn(e,function(e){a=e.series.yAxis,o+=e.plotX,u+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!i&&a?a.top-s:0)}),o/=e.length,u/=e.length,n=[i?r.plotWidth-u:o,this.shared&&!i&&e.length>1&&t?t.chartY-s:i?r.plotHeight-o:u]),sn(n,V)},getPosition:function(e,t,n){var r=this.chart,i=r.plotLeft,s=r.plotTop,o=r.plotWidth,u=r.plotHeight,a=p(this.options.distance,12),f=n.plotX,n=n.plotY,r=f+i+(r.inverted?a:-e-a),l=n-t+s+15,c;return r<7&&(r=i+K(f,0)+a),r+e>i+o&&(r-=r+e-(i+o),l=n-t+s-a,c=!0),l<s+5&&(l=s+5,c&&n>=l&&n<=l+t&&(l=n+s+a)),l+t>s+u&&(l=K(s,s+u-t-a)),{x:r,y:l}},defaultFormatter:function(e){var t=this.points||h(this),n=t[0].series,r;return r=[n.tooltipHeaderFormatter(t[0])],tn(t,function(e){n=e.series,r.push(n.tooltipFormatter&&n.tooltipFormatter(e)||e.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),r.push(e.options.footerFormat||""),r.join("")},refresh:function(e,t){var n=this.chart,r=this.label,i=this.options,s,o,u,a={},f,l=[];f=i.formatter||this.defaultFormatter;var a=n.hoverPoints,c,d=i.crosshairs;u=this.shared,clearTimeout(this.hideTimer),this.followPointer=h(e)[0].series.tooltipOptions.followPointer,o=this.getAnchor(e,t),s=o[0],o=o[1],u&&(!e.series||!e.series.noSharedTooltip)?(n.hoverPoints=e,a&&tn(a,function(e){e.setState()}),tn(e,function(e){e.setState("hover"),l.push(e.getLabelConfig())}),a={x:e[0].category,y:e[0].y},a.points=l,e=e[0]):a=e.getLabelConfig(),f=f.call(a,this),a=e.series,u=u||!a.isCartesian||a.tooltipOutsidePlot||n.isInsidePlot(s,o),f===!1||!u?this.hide():(this.isHidden&&(cn(r),r.attr("opacity",1).show()),r.attr({text:f}),c=i.borderColor||e.color||a.color||"#606060",r.attr({stroke:c}),this.updatePosition({plotX:s,plotY:o}),this.isHidden=!1);if(d){d=h(d);for(r=d.length;r--;)if(i=e.series[r?"yAxis":"xAxis"],d[r]&&i)(i=i.getPlotLinePath(r?p(e.stackY,e.y):e.x,1),this.crosshairs[r])?this.crosshairs[r].attr({d:i,visibility:"visible"}):(u={"stroke-width":d[r].width||1,stroke:d[r].color||"#C0C0C0",zIndex:d[r].zIndex||2},d[r].dashStyle&&(u.dashstyle=d[r].dashStyle),this.crosshairs[r]=n.renderer.path(i)
.attr(u).add())}an(n,"tooltipRefresh",{text:f,x:s+n.plotLeft,y:o+n.plotTop,borderColor:c})},updatePosition:function(e){var t=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,e);this.move(V(n.x),V(n.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)}},I.prototype={init:function(e,t){var n=ht?"":t.chart.zoomType,r=e.inverted,i;this.options=t,this.chart=e,this.zoomX=i=/x/.test(n),this.zoomY=n=/y/.test(n),this.zoomHor=i&&!r||n&&r,this.zoomVert=n&&!r||i&&r,this.pinchDown=[],this.lastValidTouch={},t.tooltip.enabled&&(e.tooltip=new F(e,t.tooltip)),this.setDOMEvents()},normalize:function(t){var n,r,i,t=t||W.event;return t.target||(t.target=t.srcElement),t=fn(t),i=t.touches?t.touches.item(0):t,this.chartPosition=n=rn(this.chart.container),i.pageX===U?(r=t.x,n=t.y):(r=i.pageX-n.left,n=i.pageY-n.top),e(t,{chartX:V(r),chartY:V(n)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return tn(this.chart.axes,function(n){t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},runPointActions:function(e){var t=this.chart,n=t.series,r=t.tooltip,i,s=t.hoverPoint,o=t.hoverSeries,u,a,f=t.chartWidth,l=this.getIndex(e);if(r&&this.options.tooltip.shared&&(!o||!o.noSharedTooltip)){i=[],u=n.length;for(a=0;a<u;a++)n[a].visible&&n[a].options.enableMouseTracking!==!1&&!n[a].noSharedTooltip&&n[a].tooltipPoints.length&&(t=n[a].tooltipPoints[l],t.series)&&(t._dist=G(l-t.clientX),f=Q(f,t._dist),i.push(t));for(u=i.length;u--;)i[u]._dist>f&&i.splice(u,1);i.length&&i[0].clientX!==this.hoverX&&(r.refresh(i,e),this.hoverX=i[0].clientX)}o&&o.tracker?(t=o.tooltipPoints[l])&&t!==s&&t.onMouseOver(e):r&&r.followPointer&&!r.isHidden&&(e=r.getAnchor([{}],e),r.updatePosition({plotX:e[0],plotY:e[1]}))},reset:function(e){var t=this.chart,n=t.hoverSeries,r=t.hoverPoint,i=t.tooltip,t=i&&i.shared?t.hoverPoints:r;(e=e&&i&&t)&&h(t)[0].plotX===U&&(e=!1),e?i.refresh(t):(r&&r.onMouseOut(),n&&n.onMouseOut(),i&&(i.hide(),i.hideCrosshairs()),this.hoverX=null)},scaleGroups:function(e,t){var n=this.chart;tn(n.series,function(r){r.xAxis.zoomEnabled&&(r.group.attr(e),r.markerGroup&&(r.markerGroup.attr(e),r.markerGroup.clip(t?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(e))}),n.clipRect.attr(t||n.clipBox)},pinchTranslateDirection:function(e,t,n,r,i,s,o){var u=this.chart,a=e?"x":"y",f=e?"X":"Y",l="chart"+f,c=e?"width":"height",h=u["plot"+(e?"Left":"Top")],p,d,v=1,m=u.inverted,g=u.bounds[e?"h":"v"],y=t.length===1,b=t[0][l],w=n[0][l],E=!y&&t[1][l],S=!y&&n[1][l],x,n=function(){!y&&G(b-E)>20&&(v=G(w-S)/G(b-E)),d=(h-w)/v+b,p=u["plot"+(e?"Width":"Height")]/v};n(),t=d,t<g.min?(t=g.min,x=!0):t+p>g.max&&(t=g.max-p,x=!0),x?(w-=.8*(w-o[a][0]),y||(S-=.8*(S-o[a][1])),n()):o[a]=[w,S],m||(s[a]=d-h,s[c]=p),s=m?1/v:v,i[c]=p,i[a]=t,r[m?e?"scaleY":"scaleX":"scale"+f]=v,r["translate"+f]=s*h+(w-s*b)},pinch:function(t){var n=this,r=n.chart,i=n.pinchDown,s=t.touches,o=n.lastValidTouch,u=n.zoomHor||n.pinchHor,a=n.zoomVert||n.pinchVert,f=n.selectionMarker,l={},c={};t.type==="touchstart"&&(n.inClass(t.target,"highcharts-tracker")?r.runTrackerClick||t.preventDefault():r.runChartClick||t.preventDefault()),sn(s,function(e){return n.normalize(e)}),t.type==="touchstart"?(tn(s,function(e,t){i[t]={chartX:e.chartX,chartY:e.chartY}}),o.x=[i[0].chartX,i[1]&&i[1].chartX],o.y=[i[0].chartY,i[1]&&i[1].chartY],tn(r.axes,function(e){if(e.zoomEnabled){var t=r.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,i=e.toPixels(e.dataMin),s=e.toPixels(e.dataMax),o=Q(i,s),i=K(i,s);t.min=Q(e.pos,o-n),t.max=K(e.pos+e.len,i+n)}})):i.length&&(f||(n.selectionMarker=f=e({destroy:xt},r.plotBox)),u&&n.pinchTranslateDirection(!0,i,s,l,f,c,o),a&&n.pinchTranslateDirection(!1,i,s,l,f,c,o),n.hasPinched=u||a,n.scaleGroups(l,c))},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,this.mouseDownY=e.chartY},drag:function(e){var t=this.chart,n=t.options.chart,r=e.chartX,e=e.chartY,i=this.zoomHor,s=this.zoomVert,o=t.plotLeft,u=t.plotTop,a=t.plotWidth,f=t.plotHeight,l,c=this.mouseDownX,h=this.mouseDownY;r<o?r=o:r>o+a&&(r=o+a),e<u?e=u:e>u+f&&(e=u+f),this.hasDragged=Math.sqrt(Math.pow(c-r,2)+Math.pow(h-e,2)),this.hasDragged>10&&(l=t.isInsidePlot(c-o,h-u),t.hasCartesianSeries&&(this.zoomX||this.zoomY)&&l&&!this.selectionMarker&&(this.selectionMarker=t.renderer.rect(o,u,i?1:a,s?1:f,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&i&&(i=r-c,this.selectionMarker.attr({width:G(i),x:(i>0?0:i)+c})),this.selectionMarker&&s&&(i=e-h,this.selectionMarker.attr({height:G(i),y:(i>0?0:i)+h})),l&&!this.selectionMarker&&n.panning&&t.pan(r))},drop:function(t){var n=this.chart,r=this.hasPinched;if(this.selectionMarker){var i={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},s=this.selectionMarker,o=s.x,u=s.y,a;if(this.hasDragged||r)tn(n.axes,function(e){if(e.zoomEnabled){var t=e.horiz,n=e.minPixelPadding,r=e.toValue((t?o:u)+n),t=e.toValue((t?o+s.width:u+s.height)-n);!isNaN(r)&&!isNaN(t)&&(i[e.xOrY+"Axis"].push({axis:e,min:Q(r,t),max:K(r,t)}),a=!0)}}),a&&an(n,"selection",i,function(t){n.zoom(e(t,r?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy(),r&&this.scaleGroups({translateX:n.plotLeft,translateY:n.plotTop,scaleX:1,scaleY:1})}n&&(d(n.container,{cursor:"auto"}),n.cancelClick=this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){this.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,n=this.chartPosition,r=t.hoverSeries,e=fn(e);n&&r&&r.isCartesian&&!t.isInsidePlot(e.pageX-n.left-t.plotLeft,e.pageY-n.top-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(e){var t=this.chart,e=this.normalize(e);e.returnValue=!1,t.mouseIsDown==="mousedown"&&this.drag(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&this.runPointActions(e)},inClass:function(e,t){for(var n;e;){if(n=c(e,"class")){if(n.indexOf(t)!==-1)return!0;if(n.indexOf("highcharts-container")!==-1)return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries;t&&!t.options.stickyTracking&&!this.inClass(e.toElement||e.relatedTarget,"highcharts-tooltip")&&t.onMouseOut()},onContainerClick:function(t){var n=this.chart,r=n.hoverPoint,i=n.plotLeft,s=n.plotTop,o=n.inverted,u,a,f,t=this.normalize(t);t.cancelBubble=!0,n.cancelClick||(r&&this.inClass(t.target,"highcharts-tracker")?(u=this.chartPosition,a=r.plotX,f=r.plotY,e(r,{pageX:u.left+i+(o?n.plotWidth-f:a),pageY:u.top+s+(o?n.plotHeight-a:f)}),an(r.series,"click",e(t,{point:r})),r.firePointEvent("click",t)):(e(t,this.getCoordinates(t)),n.isInsidePlot(t.chartX-i,t.chartY-s)&&an(n,"click",t)))},onContainerTouchStart:function(e){var t=this.chart;e.touches.length===1?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&(this.runPointActions(e),this.pinch(e))):e.touches.length===2&&this.pinch(e)},onContainerTouchMove:function(e){(e.touches.length===1||e.touches.length===2)&&this.pinch(e)},onDocumentTouchEnd:function(e){this.drop(e)},setDOMEvents:function(){var e=this,t=e.chart.container,n;this._events=n=[[t,"onmousedown","onContainerMouseDown"],[t,"onmousemove","onContainerMouseMove"],[t,"onclick","onContainerClick"],[t,"mouseleave","onContainerMouseLeave"],[z,"mousemove","onDocumentMouseMove"],[z,"mouseup","onDocumentMouseUp"]],dt&&n.push([t,"ontouchstart","onContainerTouchStart"],[t,"ontouchmove","onContainerTouchMove"],[z,"touchend","onDocumentTouchEnd"]),tn(n,function(t){e["_"+t[2]]=function(n){e[t[2]](n)},t[1].indexOf("on")===0?t[0][t[1]]=e["_"+t[2]]:on(t[0],t[1],e["_"+t[2]])})},destroy:function(){var e=this;tn(e._events,function(t){t[1].indexOf("on")===0?t[0][t[1]]=null:un(t[0],t[1],e["_"+t[2]])}),delete e._events,clearInterval(e.tooltipTimeout)}},q.prototype={init:function(e,r){var i=this,s=r.itemStyle,o=p(r.padding,8),u=r.itemMarginTop||0;this.options=r,r.enabled&&(i.baseline=n(s.fontSize)+3+u,i.itemStyle=s,i.itemHiddenStyle=t(s,r.itemHiddenStyle),i.itemMarginTop=u,i.padding=o,i.initialItemX=o,i.initialItemY=o-5,i.maxItemWidth=0,i.chart=e,i.itemHeight=0,i.lastLineHeight=0,i.render(),on(i.chart,"endResize",function(){i.positionCheckboxes()}))},colorizeItem:function(e,t){var n=this.options,r=e.legendItem,i=e.legendLine,s=e.legendSymbol,o=this.itemHiddenStyle.color,n=t?n.itemStyle.color:o,u=t?e.color:o,o=e.options&&e.options.marker,a={stroke:u,fill:u},f;r&&r.css({fill:n,color:n}),i&&i.attr({stroke:u});if(s){if(o)for(f in o=e.convertAttribs(o),o)r=o[f],r!==U&&(a[f]=r);s.attr(a)}},positionItem:function(e){var t=this.options,n=t.symbolPadding,t=!t.rtl,r=e._legendItemPos,i=r[0],r=r[1],s=e.checkbox;e.legendGroup&&e.legendGroup.translate(t?i:this.legendWidth-i-2*n-4,r),s&&(s.x=i,s.y=r)},destroyItem:function(e){var t=e.checkbox;tn(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&L(e.checkbox)},destroy:function(){var e=this.group,t=this.box;t&&(this.box=t.destroy()),e&&(this.group=e.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,tn(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,d(s,{left:t.translateX+i.legendItemWidth+s.x-20+"px",top:o+"px",display:o>n-6&&o<n+r-6?"":Ct}))}))},renderTitle:function(){var e=this.padding,t=this.options.title,n=0;t.text&&(this.title||(this.title=this.chart.renderer.label(t.text,e-3,e-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(t.style).add(this.group)),n=this.title.getBBox().height,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(e){var n,r=this,i=r.chart,s=i.renderer,o=r.options,u=o.layout==="horizontal",a=o.symbolWidth,f=o.symbolPadding,l=r.itemStyle,c=r.itemHiddenStyle,h=r.padding,p=!o.rtl,d=o.width,m=o.itemMarginBottom||0,g=r.itemMarginTop,y=r.initialItemX,w=e.legendItem,E=e.series||e,S=E.options,x=S.showCheckbox,T=o.useHTML;!w&&(e.legendGroup=s.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),E.drawLegendSymbol(r,e),e.legendItem=w=s.text(o.labelFormat?b(o.labelFormat,e):o.labelFormatter.call(e),p?a+f:-f,r.baseline,T).css(t(e.visible?l:c)).attr({align:p?"left":"right",zIndex:2}).add(e.legendGroup),(T?w:e.legendGroup).on("mouseover",function(){e.setState("hover"),w.css(r.options.itemHoverStyle)}).on("mouseout",function(){w.css(e.visible?l:c),e.setState()}).on("click",function(t){var n=function(){e.setVisible()},t={browserEvent:t};e.firePointEvent?e.firePointEvent("legendItemClick",t,n):an(e,"legendItemClick",t,n)}),r.colorizeItem(e,e.visible),S&&x)&&(e.checkbox=v("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},o.itemCheckboxStyle,i.container),on(e.checkbox,"click",function(t){an(e,"checkboxClick",{checked:t.target.checked},function(){e.select()})})),s=w.getBBox(),n=e.legendItemWidth=o.itemWidth||a+f+s.width+h+(x?20:0),o=n,r.itemHeight=a=s.height,u&&r.itemX-y+o>(d||i.chartWidth-2*h-y)&&(r.itemX=y,r.itemY+=g+r.lastLineHeight+m,r.lastLineHeight=0),r.maxItemWidth=K(r.maxItemWidth,o),r.lastItemY=g+r.itemY+m,r.lastLineHeight=K(a,r.lastLineHeight),e._legendItemPos=[r.itemX,r.itemY],u?r.itemX+=o:(r.itemY+=g+a+m,r.lastLineHeight=a),r.offsetWidth=d||K(u?r.itemX-y:o,r.offsetWidth)},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.group,s,o,u,a,f=t.box,c=t.options,h=t.padding,p=c.borderWidth,d=c.backgroundColor;t.itemX=t.initialItemX,t.itemY=t.initialItemY,t.offsetWidth=0,t.lastItemY=0,i||(t.group=i=r.g("legend").attr({zIndex:7}).add(),t.contentGroup=r.g().attr({zIndex:1}).add(i),t.scrollGroup=r.g().add(t.contentGroup),t.clipRect=r.clipRect(0,0,9999,n.chartHeight),t.contentGroup.clip(t.clipRect)),t.renderTitle(),s=[],tn(n.series,function(e){var t=e.options;t.showInLegend&&!l(t.linkedTo)&&(s=s.concat(e.legendItems||(t.legendType==="point"?e.data:e)))}),T(s,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),c.reversed&&s.reverse(),t.allItems=s,t.display=o=!!s.length,tn(s,function(e){t.renderItem(e)}),u=c.width||t.offsetWidth,a=t.lastItemY+t.lastLineHeight+t.titleHeight,a=t.handleOverflow(a);if(p||d)u+=h,a+=h,f?u>0&&a>0&&(f[f.isNew?"attr":"animate"](f.crisp(null,null,null,u,a)),f.isNew=!1):(t.box=f=r.rect(0,0,u,a,c.borderRadius,p||0).attr({stroke:c.borderColor,"stroke-width":p||0,fill:d||Ct}).add(i).shadow(c.shadow),f.isNew=!0),f[o?"show":"hide"]();t.legendWidth=u,t.legendHeight=a,tn(s,function(e){t.positionItem(e)}),o&&i.align(e({width:u,height:a},c),!0,"spacingBox"),n.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i=this.options,s=i.y,s=n.spacingBox.height+(i.verticalAlign==="top"?-s:s)-this.padding,o=i.maxHeight,u=this.clipRect,a=i.navigation,f=p(a.animation,!0),l=a.arrowSize||12,c=this.nav;return i.layout==="horizontal"&&(s/=2),o&&(s=Q(s,o)),e>s&&!i.useHTML?(this.clipHeight=n=s-20-this.titleHeight,this.pageCount=J(e/n),this.currentPage=p(this.currentPage,1),this.fullHeight=e,u.attr({height:n}),c||(this.nav=c=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,l,l).on("click",function(){t.scroll(-1,f)}).add(c),this.pager=r.text("",15,10).css(a.style).add(c),this.down=r.symbol("triangle-down",0,0,l,l).on("click",function(){t.scroll(1,f)}).add(c)),t.scroll(0),e=s):c&&(u.attr({height:n.chartHeight}),c.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var n=this.pageCount,r=this.currentPage+e,i=this.clipHeight,s=this.options.navigation,o=s.activeColor,u=s.inactiveColor,s=this.pager,a=this.padding;r>n&&(r=n),r>0&&(t!==U&&M(t,this.chart),this.nav.attr({translateX:a,translateY:i+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:r===1?u:o}).css({cursor:r===1?"default":"pointer"}),s.attr({text:r+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===n?u:o}).css({cursor:r===n?"default":"pointer"}),i=-Q(i*(r-1),this.fullHeight-i+a)+1,this.scrollGroup.animate({translateY:i}),s.attr({text:r+"/"+n}),this.currentPage=r,this.positionCheckboxes(i))}},R.prototype={init:function(e,n){var r,s=e.series;e.series=null,r=t(yt,e),r.series=e.series=s;var s=r.chart,o=s.margin,o=i(o)?o:[o,o,o,o];this.optionsMarginTop=p(s.marginTop,o[0]),this.optionsMarginRight=p(s.marginRight,o[1]),this.optionsMarginBottom=p(s.marginBottom,o[2]),this.optionsMarginLeft=p(s.marginLeft,o[3]),this.runChartClick=(o=s.events)&&!!o.click,this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=s.showAxes;var u=this,a;u.index=Tt.length,Tt.push(u),s.reflow!==!1&&on(u,"load",function(){u.initReflow()});if(o)for(a in o)on(u,a,o[a]);u.xAxis=[],u.yAxis=[],u.animation=ht?!1:p(s.animation,!0),u.pointCount=0,u.counters=new x,u.firstRender()},initSeries:function(e){var t=this.options.chart;return(t=Kt[e.type||t.type||t.defaultSeriesType])||A(17,!0),t=new t,t.init(this,e),t},addSeries:function(e,t,n){var r,i=this;return e&&(t=p(t,!0),an(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,t&&i.redraw(n)})),r},addAxis:function(e,n,r,i){var n=n?"xAxis":"yAxis",s=this.options;new j(this,t(e,{index:this[n].length})),s[n]=h(s[n]||{}),s[n].push(e),p(r,!0)&&this.redraw(i)},isInsidePlot:function(e,t,n){var r=n?t:e,e=n?e:t;return r>=0&&r<=this.plotWidth&&e>=0&&e<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&tn(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t=this.axes,n=this.series,r=this.pointer,i=this.legend,s=this.isDirtyLegend,o,u=this.isDirtyBox,a=n.length,f=a,l=this.renderer,c=l.isHidden(),h=[];M(e,this);for(c&&this.cloneRenderTo();f--;)if(e=n[f],e.isDirty&&e.options.stacking){o=!0;break}if(o)for(f=a;f--;)if(e=n[f],e.options.stacking)e.isDirty=!0;tn(n,function(e){e.isDirty&&e.options.legendType==="point"&&(s=!0)}),s&&i.options.enabled&&(i.render(),this.isDirtyLegend=!1),this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,tn(t,function(e){e.setScale()})),this.adjustTickAmounts(),this.getMargins(),tn(t,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,h.push(function(){an(e,"afterSetExtremes",e.getExtremes())}));if(e.isDirty||u||o)e.redraw(),u=!0})),u&&this.drawChartBox(),tn(n,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),r&&r.reset&&r.reset(!0),l.draw(),an(this,"redraw"),c&&this.cloneRenderTo(!0),tn(h,function(e){e.call()})},showLoading:function(t){var n=this.options,r=this.loadingDiv,i=n.loading;r||(this.loadingDiv=r=v(Nt,{className:"highcharts-loading"},e(i.style,{left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px",zIndex:10,display:Ct}),this.container),this.loadingSpan=v("span",null,i.labelStyle,r)),this.loadingSpan.innerHTML=t||n.lang.loading,this.loadingShown||(d(r,{opacity:0,display:""}),ln(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&ln(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){d(t,{display:Ct})}}),this.loadingShown=!1},get:function(e){var t=this.axes,n=this.series,r,i;for(r=0;r<t.length;r++)if(t[r].options.id===e)return t[r];for(r=0;r<n.length;r++)if(n[r].options.id===e)return n[r];for(r=0;r<n.length;r++){i=n[r].points||[];for(t=0;t<i.length;t++)if(i[t].id===e)return i[t]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis=h(t.xAxis||{}),t=t.yAxis=h(t.yAxis||{});tn(n,function(e,t){e.index=t,e.isX=!0}),tn(t,function(e,t){e.index=t}),n=n.concat(t),tn(n,function(t){new j(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return tn(this.series,function(t){e=e.concat(nn(t.points,function(e){return e.selected}))}),e},getSelectedSeries:function(){return nn(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=yt.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,s)},zoomOut:function(){var e=this;an(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,n=this.pointer,r=!1,s;!e||e.resetSelection?tn(this.axes,function(e){t=e.zoom()}):tn(e.xAxis.concat(e.yAxis),function(e){var i=e.axis,s=i.isXAxis;if(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])t=i.zoom(e.min,e.max),i.displayBtn&&(r=!0)}),s=this.resetZoomButton,r&&!s?this.showResetZoom():!r&&i(s)&&(this.resetZoomButton=s.destroy()),t&&this.redraw(p(this.options.chart.animation,e&&e.animation,this.pointCount<100))},pan:function(e){var t=this.xAxis[0],n=this.mouseDownX,r=t.pointRange/2,i=t.getExtremes(),s=t.translate(n-e,!0)+r,n=t.translate(n+this.plotWidth-e,!0)-r;(r=this.hoverPoints)&&tn(r,function(e){e.setState()}),t.series.length&&s>Q(i.dataMin,i.min)&&n<K(i.dataMax,i.max)&&t.setExtremes(s,n,!0,!1,{trigger:"pan"}),this.mouseDownX=e,d(this.container,{cursor:"move"})},setTitle:function(e,n){var r,i=this,s=i.options,o;o=s.title=t(s.title,e),r=s.subtitle=t(s.subtitle,n),s=r,tn([["title",e,o],["subtitle",n,s]],function(e){var t=e[0],n=i[t],r=e[1],e=e[2];n&&r&&(i[t]=n=n.destroy()),e&&e.text&&!n&&(i[t]=i.renderer.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":"highcharts-"+t,zIndex:e.zIndex||4}).css(e.style).add().align(e,!1,"spacingBox"))})},getChartSize:function(){var e=this.options.chart,t=this.renderToClone||this.renderTo;this.containerWidth=Yt(t,"width"),this.containerHeight=Yt(t,"height"),this.chartWidth=K(0,e.width||this.containerWidth||600),this.chartHeight=K(0,p(e.height,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,n=this.container;e?t&&(this.renderTo.appendChild(n),L(t),delete this.renderToClone):(n&&this.renderTo.removeChild(n),this.renderToClone=t=this.renderTo.cloneNode(0),d(t,{position:"absolute",top:"-9999px",display:"block"}),z.body.appendChild(t),n&&t.appendChild(n))},getContainer:function(){var t,i=this.options.chart,s,o,u;this.renderTo=t=i.renderTo,u="highcharts-"+mt++,r(t)&&(this.renderTo=t=z.getElementById(t)),t||A(13,!0),s=n(c(t,"data-highcharts-chart")),!isNaN(s)&&Tt[s]&&Tt[s].destroy(),c(t,"data-highcharts-chart",this.index),t.innerHTML="",t.offsetWidth||this.cloneRenderTo(),this.getChartSize(),s=this.chartWidth,o=this.chartHeight,this.container=t=v(Nt,{className:"highcharts-container"+(i.className?" "+i.className:""),id:u},e({position:"relative",overflow:"hidden",width:s+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0},i.style),this.renderToClone||t),this.renderer=i.forExport?new dn(t,s,o,!0):new pt(t,s,o),ht&&this.renderer.create(this,t,s,o)},getMargins:function(){var e=this.options.chart,t=e.spacingTop,n=e.spacingRight,r=e.spacingBottom,e=e.spacingLeft,i,s=this.legend,o=this.optionsMarginTop,u=this.optionsMarginLeft,a=this.optionsMarginRight,f=this.optionsMarginBottom,c=this.options.title,h=this.options.subtitle,d=this.options.legend,v=p(d.margin,10),m=d.x,g=d.y,y=d.align,b=d.verticalAlign;this.resetMargins(),i=this.axisOffset,(this.title||this.subtitle)&&!l(this.optionsMarginTop)&&(h=K(this.title&&!c.floating&&!c.verticalAlign&&c.y||0,this.subtitle&&!h.floating&&!h.verticalAlign&&h.y||0))&&(this.plotTop=K(this.plotTop,h+p(c.margin,15)+t)),s.display&&!d.floating&&(y==="right"?l(a)||(this.marginRight=K(this.marginRight,s.legendWidth-m+v+n)):y==="left"?l(u)||(this.plotLeft=K(this.plotLeft,s.legendWidth+m+v+e)):b==="top"?l(o)||(this.plotTop=K(this.plotTop,s.legendHeight+g+v+t)):b==="bottom"&&!l(f)&&(this.marginBottom=K(this.marginBottom,s.legendHeight-g+v+r))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&tn(this.axes,function(e){e.getOffset()}),l(u)||(this.plotLeft+=i[3]),l(o)||(this.plotTop+=i[0]),l(f)||(this.marginBottom+=i[2]),l(a)||(this.marginRight+=i[1]),this.setChartSize()},initReflow:function(){function e(e){var s=n.width||Yt(r,"width"),o=n.height||Yt(r,"height"),e=e?e.target:W;if(!t.hasUserSize&&s&&o&&(e===W||e===z)){if(s!==t.containerWidth||o!==t.containerHeight)clearTimeout(i),t.reflowTimeout=i=setTimeout(function(){t.container&&(t.setSize(s,o,!1),t.hasUserSize=null)},100);t.containerWidth=s,t.containerHeight=o}}var t=this,n=t.options.chart,r=t.renderTo,i;on(W,"resize",e),on(t,"destroy",function(){un(W,"resize",e)})},setSize:function(e,t,n){var r=this,i,s,o;r.isResizing+=1,o=function(){r&&an(r,"endResize",null,function(){r.isResizing-=1})},M(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,l(e)&&(r.chartWidth=i=K(0,V(e)),r.hasUserSize=!!i),l(t)&&(r.chartHeight=s=K(0,V(t))),d(r.container,{width:i+"px",height:s+"px"}),r.setChartSize(!0),r.renderer.setSize(i,s,n),r.maxTicks=null,tn(r.axes,function(e){e.isDirty=!0,e.setScale()}),tn(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.getMargins(),r.redraw(n),r.oldChartHeight=null,an(r,"resize"),wt===!1?o():setTimeout(o,wt&&wt.duration||500)},setChartSize:function(e){var t=this.inverted,n=this.renderer,r=this.chartWidth,i=this.chartHeight,s=this.options.chart,o=s.spacingTop,u=s.spacingRight,a=s.spacingBottom,f=s.spacingLeft,l=this.clipOffset,c,h,p,d;this.plotLeft=c=V(this.plotLeft),this.plotTop=h=V(this.plotTop),this.plotWidth=p=K(0,V(r-c-this.marginRight)),this.plotHeight=d=K(0,V(i-h-this.marginBottom)),this.plotSizeX=t?d:p,this.plotSizeY=t?p:d,this.plotBorderWidth=t=s.plotBorderWidth||0,this.spacingBox=n.spacingBox={x:f,y:o,width:r-f-u,height:i-o-a},this.plotBox=n.plotBox={x:c,y:h,width:p,height:d},n=J(K(t,l[3])/2),r=J(K(t,l[0])/2),this.clipBox={x:n,y:r,width:$(this.plotSizeX-K(t,l[1])/2-n),height:$(this.plotSizeY-K(t,l[2])/2-r)},e||tn(this.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this.options.chart,t=e.spacingRight,n=e.spacingBottom,r=e.spacingLeft;this.plotTop=p(this.optionsMarginTop,e.spacingTop),this.marginRight=p(this.optionsMarginRight,t),this.marginBottom=p(this.optionsMarginBottom,n),this.plotLeft=p(this.optionsMarginLeft,r),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var e=this.options.chart,t=this.renderer,n=this.chartWidth,r=this.chartHeight,i=this.chartBackground,s=this.plotBackground,o=this.plotBorder,u=this.plotBGImage,a=e.borderWidth||0,f=e.backgroundColor,l=e.plotBackgroundColor,c=e.plotBackgroundImage,h=e.plotBorderWidth||0,p,d=this.plotLeft,v=this.plotTop,m=this.plotWidth,g=this.plotHeight,y=this.plotBox,b=this.clipRect,w=this.clipBox;p=a+(e.shadow?8:0);if(a||f)i?i.animate(i.crisp(null,null,null,n-p,r-p)):(i={fill:f||Ct},a&&(i.stroke=e.borderColor,i["stroke-width"]=a),this.chartBackground=t.rect(p/2,p/2,n-p,r-p,e.borderRadius,a).attr(i).add().shadow(e.shadow));l&&(s?s.animate(y):this.plotBackground=t.rect(d,v,m,g,0).attr({fill:l}).add().shadow(e.plotShadow)),c&&(u?u.animate(y):this.plotBGImage=t.image(c,d,v,m,g).add()),b?b.animate({width:w.width,height:w.height}):this.clipRect=t.clipRect(w),h&&(o?o.animate(o.crisp(null,d,v,m,g)):this.plotBorder=t.rect(d,v,m,g,0,h).attr({stroke:e.plotBorderColor,"stroke-width":h,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;tn(["inverted","angular","polar"],function(o){n=Kt[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o];for(i=r&&r.length;!s&&i--;)(n=Kt[r[i].type])&&n.prototype[o]&&(s=!0);e[o]=s})},render:function(){var t=this,r=t.axes,i=t.renderer,s=t.options,o=s.labels,u=s.credits,a;t.setTitle(),t.legend=new q(t,s.legend),tn(r,function(e){e.setScale()}),t.getMargins(),t.maxTicks=null,tn(r,function(e){e.setTickPositions(!0),e.setMaxTicks()}),t.adjustTickAmounts(),t.getMargins(),t.drawChartBox(),t.hasCartesianSeries&&tn(r,function(e){e.render()}),t.seriesGroup||(t.seriesGroup=i.g("series-group").attr({zIndex:3}).add()),tn(t.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),o.items&&tn(o.items,function(r){var s=e(o.style,r.style),u=n(s.left)+t.plotLeft,a=n(s.top)+t.plotTop+12;delete s.left,delete s.top,i.text(r.html,u,a).attr({zIndex:2}).css(s).add()}),u.enabled&&!t.credits&&(a=u.href,t.credits=i.text(u.text,0,0).on("click",function(){a&&(location.href=a)}).attr({align:u.position.align,zIndex:8}).css(u.style).add().align(u.position)),t.hasRendered=!0},destroy:function(){var e=this,t=e.axes,n=e.series,r=e.container,i,s=r&&r.parentNode;an(e,"destroy"),Tt[e.index]=U,e.renderTo.removeAttribute("data-highcharts-chart"),un(e);for(i=t.length;i--;)t[i]=t[i].destroy();for(i=n.length;i--;)n[i]=n[i].destroy();tn("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())}),r&&(r.innerHTML="",un(r),s&&L(r));for(i in e)delete e[i]},isReadyToRender:function(){var e=this;return!lt&&W==W.top&&z.readyState!=="complete"||ht&&!W.canvg?(ht?gn.push(function(){e.firstRender()},e.options.global.canvasToolsURL):z.attachEvent("onreadystatechange",function(){z.detachEvent("onreadystatechange",e.firstRender),z.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;e.isReadyToRender()&&(e.getContainer(),an(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),tn(t.series||[],function(t){e.initSeries(t)}),an(e,"beforeRender"),e.pointer=new I(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),tn(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),an(e,"load"))}},R.prototype.callbacks=[];var yn=function(){};yn.prototype={init:function(e,t,n){return this.series=e,this.applyOptions(t,n),this.pointAttr={},e.options.colorByPoint&&(t=e.options.colors||e.chart.options.colors,this.color=this.color||t[e.colorCounter++],e.colorCounter===t.length)&&(e.colorCounter=0),e.chart.pointCount++,this},applyOptions:function(t,n){var r=this.series,i=r.pointValKey,t=yn.prototype.optionsToObject.call(this,t);return e(this,t),this.options=this.options?e(this.options,t):t,i&&(this.y=this[i]),this.x===U&&r&&(this.x=n===U?r.autoIncrement():n),this},optionsToObject:function(e){var t,n=this.series,r=n.pointArrayMap||["y"],i=r.length,o=0,u=0;if(typeof e=="number"||e===null)t={y:e};else if(s(e)){t={},e.length>i&&(n=typeof e[0],n==="string"?t.name=e[0]:n==="number"&&(t.x=e[0]),o++);for(;u<i;)t[r[u++]]=e[o++]}else typeof e=="object"&&(t=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return t},destroy:function(){var e=this.series.chart,t=e.hoverPoints,n;e.pointCount--,t&&(this.setState(),f(t,this),!t.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut();if(this.graphic||this.dataLabel)un(this),this.destroyElements();this.legendItem&&e.legend.destroyItem(this);for(n in this)this[n]=null},destroyElements:function(){for(var e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),t,n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(e,t){var n=this,r=n.series,i=r.chart,e=p(e,!n.selected);n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=n.options.selected=e,r.options.data[en(n,r.data)]=n.options,n.setState(e&&"select"),t||tn(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=e.options.selected=!1,r.options.data[en(e,r.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this.series,n=t.chart,r=n.tooltip,i=n.hoverPoint;i&&i!==this&&i.onMouseOut(),this.firePointEvent("mouseOver"),r&&(!r.shared||t.noSharedTooltip)&&r.refresh(this,e),this.setState("hover"),n.hoverPoint=this},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;if(!t||en(this,t)===-1)this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null},tooltipFormatter:function(e){var t=this.series,n=t.tooltipOptions,r=n.valueDecimals,i=n.valuePrefix||"",s=n.valueSuffix||"";return tn(t.pointArrayMap||["y"],function(t){t="{point."+t;if(i||s)e=e.replace(t+"}",i+t+"}"+s);o(r)&&(e=e.replace(t+"}",t+":,."+r+"f}"))}),b(e,{point:this,series:this.series})},update:function(e,t,n){var r=this,s=r.series,o=r.graphic,u,a=s.data,f=s.chart,t=p(t,!0);r.firePointEvent("update",{options:e},function(){r.applyOptions(e),i(e)&&(s.getAttribs(),o&&o.attr(r.pointAttr[s.state])),u=en(r,a),s.xData[u]=r.x,s.yData[u]=s.toYData?s.toYData(r):r.y,s.zData[u]=r.z,s.options.data[u]=r.options,s.isDirty=!0,s.isDirtyData=!0,t&&f.redraw(n)})},remove:function(e,t){var n=this,r=n.series,i=r.chart,s,o=r.data;M(t,i),e=p(e,!0),n.firePointEvent("remove",null,function(){s=en(n,o),o.splice(s,1),r.options.data.splice(s,1),r.xData.splice(s,1),r.yData.splice(s,1),r.zData.splice(s,1),n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&i.redraw()})},firePointEvent:function(e,t,n){var r=this,i=this.series.options;(i.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&i.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),an(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e=t(this.series.options.point,this.options).events,n;this.events=e;for(n in e)on(this,n,e[n]);this.hasImportedEvents=!0}},setState:function(e){var n=this.plotX,r=this.plotY,i=this.series,s=i.options.states,o=hn[i.type].marker&&i.options.marker,u=o&&!o.enabled,a=o&&o.states[e],f=a&&a.enabled===!1,l=i.stateMarkerGraphic,c=this.marker||{},h=i.chart,p=this.pointAttr,e=e||"";e===this.state||this.selected&&e!=="select"||s[e]&&s[e].enabled===!1||e&&(f||u&&!a.enabled)||(this.graphic?(s=o&&this.graphic.symbolName&&p[e].r,this.graphic.attr(t(p[e],s?{x:n-s,y:r-s,width:2*s,height:2*s}:{}))):(e&&a&&(s=a.radius,c=c.symbol||i.symbol,l&&l.currentSymbol!==c&&(l=l.destroy()),l?l.attr({x:n-s,y:r-s}):(i.stateMarkerGraphic=l=h.renderer.symbol(c,n-s,r-s,2*s,2*s).attr(p[e]).add(i.markerGroup),l.currentSymbol=c)),l&&l[e&&h.isInsidePlot(n,r)?"show":"hide"]()),this.state=e)}};var bn=function(){};bn.prototype={isCartesian:!0,type:"line",pointClass:yn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(t,n){var i,s,o=t.series;this.chart=t,this.options=n=this
.setOptions(n),this.bindAxes(),e(this,{name:n.name,state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),ht&&(n.animation=!1),s=n.events;for(i in s)on(this,i,s[i]);if(s&&s.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)t.runTrackerClick=!0;this.getColor(),this.getSymbol(),this.setData(n.data,!1),this.isCartesian&&(t.hasCartesianSeries=!0),o.push(this),this._i=o.length-1,T(o,function(e,t){return p(e.options.index,e._i)-p(t.options.index,e._i)}),tn(o,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)}),i=n.linkedTo,this.linkedSeries=[],r(i)&&(i=i===":previous"?o[this.index-1]:t.get(i))&&(i.linkedSeries.push(this),this.linkedParent=i)},bindAxes:function(){var e=this,t=e.options,n=e.chart,r;e.isCartesian&&tn(["xAxis","yAxis"],function(i){tn(n[i],function(n){r=n.options;if(t[i]===r.index||t[i]!==U&&t[i]===r.id||t[i]===U&&r.index===0)n.series.push(e),e[i]=n,n.isDirty=!0}),e[i]||A(17,!0)})},autoIncrement:function(){var e=this.options,t=this.xIncrement,t=p(t,e.pointStart,0);return this.pointInterval=p(this.pointInterval,e.pointInterval,1),this.xIncrement=t+this.pointInterval,t},getSegments:function(){var e=-1,t=[],n,r=this.points,i=r.length;if(i)if(this.options.connectNulls){for(n=i;n--;)r[n].y===null&&r.splice(n,1);r.length&&(t=[r])}else tn(r,function(n,s){n.y===null?(s>e+1&&t.push(r.slice(e+1,s)),e=s):s===i-1&&t.push(r.slice(e+1,s+1))});this.segments=t},setOptions:function(e){var n=this.chart.options,r=n.plotOptions,i=r[this.type];return this.userOptions=e,e=t(i,r.series,e),this.tooltipOptions=t(n.tooltip,e.tooltip),i.marker===null&&delete e.marker,e},getColor:function(){var e=this.options,t=this.userOptions,n=this.chart.options.colors,r=this.chart.counters,i;i=e.color||hn[this.type].color,!i&&!e.colorByPoint&&(l(t._colorIndex)?e=t._colorIndex:(t._colorIndex=r.color,e=r.color++),i=n[e]),this.color=i,r.wrapColor(n.length)},getSymbol:function(){var e=this.userOptions,t=this.options.marker,n=this.chart,r=n.options.symbols,n=n.counters;this.symbol=t.symbol,this.symbol||(l(e._symbolIndex)?e=e._symbolIndex:(e._symbolIndex=n.symbol,e=n.symbol++),this.symbol=r[e]),/^url/.test(this.symbol)&&(t.radius=0),n.wrapSymbol(r.length)},drawLegendSymbol:function(e){var t=this.options,n=t.marker,r=e.options.symbolWidth,i=this.chart.renderer,s=this.legendGroup,e=e.baseline,o;t.lineWidth&&(o={"stroke-width":t.lineWidth},t.dashStyle&&(o.dashstyle=t.dashStyle),this.legendLine=i.path(["M",0,e-4,"L",r,e-4]).attr(o).add(s)),n&&n.enabled&&(t=n.radius,this.legendSymbol=i.symbol(this.symbol,r/2-t,e-4-t,2*t,2*t).add(s))},addPoint:function(e,t,n,r){var i=this.options,s=this.data,o=this.graph,u=this.area,a=this.chart,f=this.xData,l=this.yData,c=this.zData,h=this.names,d=o&&o.shift||0,v=i.data;M(r,a),o&&n&&(o.shift=d+1),u&&(n&&(u.shift=d+1),u.isArea=!0),t=p(t,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[e]),f.push(r.x),l.push(this.toYData?this.toYData(r):r.y),c.push(r.z),h&&(h[r.x]=r.name),v.push(e),i.legendType==="point"&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),f.shift(),l.shift(),c.shift(),v.shift())),this.getAttribs(),this.isDirtyData=this.isDirty=!0,t&&a.redraw()},setData:function(e,t){var n=this.points,i=this.options,u=this.chart,a=null,f=this.xAxis,l=f&&f.categories&&!f.categories.length?[]:null,c;this.xIncrement=null,this.pointRange=f&&f.categories?1:i.pointRange,this.colorCounter=0;var h=[],d=[],v=[],m=e?e.length:[],g=(c=this.pointArrayMap)&&c.length,y=!!this.toYData;if(m>(i.turboThreshold||1e3)){for(c=0;a===null&&c<m;)a=e[c],c++;if(o(a)){a=p(i.pointStart,0),i=p(i.pointInterval,1);for(c=0;c<m;c++)h[c]=a,d[c]=e[c],a+=i;this.xIncrement=a}else if(s(a))if(g)for(c=0;c<m;c++)i=e[c],h[c]=i[0],d[c]=i.slice(1,g+1);else for(c=0;c<m;c++)i=e[c],h[c]=i[0],d[c]=i[1]}else for(c=0;c<m;c++)e[c]!==U&&(i={series:this},this.pointClass.prototype.applyOptions.apply(i,[e[c]]),h[c]=i.x,d[c]=y?this.toYData(i):i.y,v[c]=i.z,l&&i.name)&&(l[c]=i.name);this.requireSorting&&h.length>1&&h[1]<h[0]&&A(15),r(d[0])&&A(14,!0),this.data=[],this.options.data=e,this.xData=h,this.yData=d,this.zData=v,this.names=l;for(c=n&&n.length||0;c--;)n[c]&&n[c].destroy&&n[c].destroy();f&&(f.minRange=f.userMinRange),this.isDirty=this.isDirtyData=u.isDirtyBox=!0,p(t,!0)&&u.redraw(!1)},remove:function(e,t){var n=this,r=n.chart,e=p(e,!0);n.isRemoving||(n.isRemoving=!0,an(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,e&&r.redraw(t)})),n.isRemoving=!1},processData:function(e){var t=this.xData,n=this.yData,r=t.length,i=0,s=r,o,u,a=this.xAxis,f=this.options,l=f.cropThreshold,c=this.isCartesian;if(c&&!this.isDirty&&!a.isDirty&&!this.yAxis.isDirty&&!e)return!1;if(c&&this.sorted&&(!l||r>l||this.forceCrop))if(e=a.getExtremes(),a=e.min,l=e.max,t[r-1]<a||t[0]>l)t=[],n=[];else if(t[0]<a||t[r-1]>l){for(e=0;e<r;e++)if(t[e]>=a){i=K(0,e-1);break}for(;e<r;e++)if(t[e]>l){s=e+1;break}t=t.slice(i,s),n=n.slice(i,s),o=!0}for(e=t.length-1;e>0;e--)if(r=t[e]-t[e-1],r>0&&(u===U||r<u))u=r;this.cropped=o,this.cropStart=i,this.processedXData=t,this.processedYData=n,f.pointRange===null&&(this.pointRange=u||1),this.closestPointRange=u},generatePoints:function(){var e=this.options.data,t=this.data,n,r=this.processedXData,i=this.processedYData,s=this.pointClass,o=r.length,u=this.cropStart||0,a,f=this.hasGroupedData,l,c=[],p;!t&&!f&&(t=[],t.length=e.length,t=this.data=t);for(p=0;p<o;p++)a=u+p,f?c[p]=(new s).init(this,[r[p]].concat(h(i[p]))):(t[a]?l=t[a]:e[a]!==U&&(t[a]=l=(new s).init(this,e[a],r[p])),c[p]=l);if(t&&(o!==(n=t.length)||f))for(p=0;p<n;p++)if(p===u&&!f&&(p+=o),t[p])t[p].destroyElements(),t[p].plotX=U;this.data=t,this.points=c},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var e=this.options,t=e.stacking,n=this.xAxis,r=n.categories,i=this.yAxis,s=this.points,o=s.length,u=!!this.modifyValue,a,f=i.series,c=f.length,h=e.pointPlacement==="between",e=e.threshold;c--;)if(f[c].visible){f[c]===this&&(a=!0);break}for(c=0;c<o;c++){var f=s[c],d=f.x,v=f.y,m=f.low,g=i.stacks[(v<e?"-":"")+this.stackKey];i.isLog&&v<=0&&(f.y=v=null),f.plotX=n.translate(d,0,0,0,1,h),t&&this.visible&&g&&g[d]&&(m=g[d],g=m.total,m.cum=m=m.cum-v,v=m+v,a&&(m=p(e,i.min)),i.isLog&&m<=0&&(m=null),t==="percent"&&(m=g?m*100/g:0,v=g?v*100/g:0),f.percentage=g?f.y*100/g:0,f.total=f.stackTotal=g,f.stackY=v),f.yBottom=l(m)?i.translate(m,0,1,0,1):null,u&&(v=this.modifyValue(v,f)),f.plotY=typeof v=="number"&&v!==Infinity?V(i.translate(v,0,1,0,1)*10)/10:U,f.clientX=h?n.translate(d,0,0,0,1):f.plotX,f.negative=f.y<(e||0),f.category=r&&r[f.x]!==U?r[f.x]:f.x}this.getSegments()},setTooltipPoints:function(e){var t=[],n,r,i=(n=this.xAxis)?n.tooltipLen||n.len:this.chart.plotSizeX,s,o,u=[];if(this.options.enableMouseTracking!==!1){e&&(this.tooltipPoints=null),tn(this.segments||this.points,function(e){t=t.concat(e)}),n&&n.reversed&&(t=t.reverse()),e=t.length;for(o=0;o<e;o++){s=t[o],n=t[o-1]?r+1:0;for(r=t[o+1]?K(0,$((s.clientX+(t[o+1]?t[o+1].clientX:i))/2)):i;n>=0&&n<=r;)u[n++]=s}this.tooltipPoints=u}},tooltipHeaderFormatter:function(e){var t=this.tooltipOptions,n=t.xDateFormat,r=this.xAxis,i=r&&r.options.type==="datetime",s=t.headerFormat,u;if(i&&!n)for(u in St)if(St[u]>=r.closestPointRange){n=t.dateTimeLabelFormats[u];break}return i&&n&&o(e.key)&&(s=s.replace("{point.key}","{point.key:"+n+"}")),b(s,{point:e,series:this})},onMouseOver:function(){var e=this.chart,t=e.hoverSeries;t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&an(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this},onMouseOut:function(){var e=this.options,t=this.chart,n=t.tooltip,r=t.hoverPoint;r&&r.onMouseOut(),this&&e.events.mouseOut&&an(this,"mouseOut"),n&&!e.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),this.setState(),t.hoverSeries=null},animate:function(t){var n=this,r=n.chart,s=r.renderer,o;o=n.options.animation;var u=r.clipBox,a=r.inverted,f;o&&!i(o)&&(o=hn[n.type].animation),f="_sharedClip"+o.duration+o.easing;if(t)t=r[f],o=r[f+"m"],t||(r[f]=t=s.clipRect(e(u,{width:0})),r[f+"m"]=o=s.clipRect(-99,a?-r.plotLeft:-r.plotTop,99,a?r.chartWidth:r.chartHeight)),n.group.clip(t),n.markerGroup.clip(o),n.sharedClipKey=f;else{if(t=r[f])t.animate({width:r.plotSizeX},o),r[f+"m"].animate({width:r.plotSizeX+99},o);n.animate=null,n.animationTimeout=setTimeout(function(){n.afterAnimate()},o.duration)}},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group;n&&this.options.clip!==!1&&(n.clip(e.clipRect),this.markerGroup.clip()),setTimeout(function(){t&&e[t]&&(e[t]=e[t].destroy(),e[t+"m"]=e[t+"m"].destroy())},100)},drawPoints:function(){var t,n=this.points,r=this.chart,i,s,o,u,a,f,l,c,h=this.options.marker,d,v=this.markerGroup;if(h.enabled||this._hasPointMarkers)for(o=n.length;o--;)(u=n[o],i=u.plotX,s=u.plotY,c=u.graphic,f=u.marker||{},t=h.enabled&&f.enabled===U||f.enabled,d=r.isInsidePlot(i,s,r.inverted),t&&s!==U&&!isNaN(s)&&u.y!==null)?(t=u.pointAttr[u.selected?"select":""],a=t.r,f=p(f.symbol,this.symbol),l=f.indexOf("url")===0,c)?c.attr({visibility:d?lt?"inherit":"visible":"hidden"}).animate(e({x:i-a,y:s-a},c.symbolName?{width:2*a,height:2*a}:{})):d&&(a>0||l)&&(u.graphic=r.renderer.symbol(f,i-a,s-a,2*a,2*a).attr(t).add(v)):c&&(u.graphic=c.destroy())},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={},e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=p(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var t=this,n=t.options,r=hn[t.type].marker?n.marker:n,i=r.states,s=i.hover,o,u=t.color,a={stroke:u,fill:u},f=t.points||[],c=[],h,p=t.pointAttrToOptions,d=n.negativeColor,v;n.marker?(s.radius=s.radius||r.radius+2,s.lineWidth=s.lineWidth||r.lineWidth+1):s.color=s.color||pn(s.color||u).brighten(s.brightness).get(),c[""]=t.convertAttribs(r,a),tn(["hover","select"],function(e){c[e]=t.convertAttribs(i[e],c[""])}),t.pointAttr=c;for(u=f.length;u--;){a=f[u],(r=a.options&&a.options.marker||a.options)&&r.enabled===!1&&(r.radius=0),a.negative&&(a.color=a.fillColor=d),o=n.colorByPoint||a.color;if(a.options)for(v in p)l(r[p[v]])&&(o=!0);o?(r=r||{},h=[],i=r.states||{},o=i.hover=i.hover||{},n.marker||(o.color=pn(o.color||a.color).brighten(o.brightness||s.brightness).get()),h[""]=t.convertAttribs(e({color:a.color},r),c[""]),h.hover=t.convertAttribs(i.hover,c.hover,h[""]),h.select=t.convertAttribs(i.select,c.select,h[""]),a.negative&&n.marker&&(h[""].fill=h.hover.fill=h.select.fill=t.convertAttribs({fillColor:d}).fill)):h=c,a.pointAttr=h}},update:function(n,r){var i=this.chart,s=this.type,n=t(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},n);this.remove(!1),e(this,Kt[n.type||s].prototype),this.init(i,n),p(r,!0)&&i.redraw(!1)},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(nt),r,i,s=e.data||[],o,u,a;an(e,"destroy"),un(e),tn(["xAxis","yAxis"],function(t){if(a=e[t])f(a.series,e),a.isDirty=a.forceRedraw=!0}),e.legendItem&&e.chart.legend.destroyItem(e);for(i=s.length;i--;)(o=s[i])&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),tn("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(t){e[t]&&(r=n&&t==="group"?"hide":"destroy",e[t][r]())}),t.hoverSeries===e&&(t.hoverSeries=null),f(t.series,e);for(u in e)delete e[u]},drawDataLabels:function(){var e=this,n=e.options.dataLabels,r=e.points,i,s,o,u;if(n.enabled||e._hasPointLabels)e.dlProcessOptions&&e.dlProcessOptions(n),u=e.plotGroup("dataLabelsGroup","data-labels",e.visible?"visible":"hidden",n.zIndex||6),s=n,tn(r,function(r){var a,f=r.dataLabel,c,h,d=r.connector,v=!0;i=r.options&&r.options.dataLabels,a=s.enabled||i&&i.enabled;if(f&&!a)r.dataLabel=f.destroy();else if(a){a=n.rotation,n=t(s,i),c=r.getLabelConfig(),o=n.format?b(n.format,c):n.formatter.call(c,n),n.style.color=p(n.color,n.style.color,e.color,"black");if(f){if(l(o))f.attr({text:o}),v=!1;else if(r.dataLabel=f=f.destroy(),d)r.connector=d.destroy()}else if(l(o)){f={fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth,r:n.borderRadius||0,rotation:a,padding:n.padding,zIndex:1};for(h in f)f[h]===U&&delete f[h];f=r.dataLabel=e.chart.renderer[a?"text":"label"](o,0,-999,null,null,null,n.useHTML).attr(f).css(n.style).add(u).shadow(n.shadow)}f&&e.alignDataLabel(r,f,n,null,v)}})},alignDataLabel:function(t,n,r,i,s){var o=this.chart,u=o.inverted,a=p(t.plotX,-999),t=p(t.plotY,-999),f=n.getBBox(),i=e({x:u?o.plotWidth-t:a,y:V(u?o.plotHeight-a:t),width:0,height:0},i);e(r,{width:f.width,height:f.height}),r.rotation?(i={align:r.align,x:i.x+r.x+i.width/2,y:i.y+r.y+i.height/2},n[s?"attr":"animate"](i)):n.align(r,null,i),n.attr({visibility:r.crop===!1||o.isInsidePlot(a,t,u)?o.renderer.isSVG?"inherit":"visible":"hidden"})},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return tn(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?"L":"M"),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return tn(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t},drawGraph:function(){var e=this,t=this.options,n=[["graph",t.lineColor||this.color]],r=t.lineWidth,i=t.dashStyle,s=this.getGraphPath(),o=t.negativeColor;o&&n.push(["graphNeg",o]),tn(n,function(n,o){var u=n[0],a=e[u];a?(cn(a),a.animate({d:s})):r&&s.length&&(a={stroke:n[1],"stroke-width":r,zIndex:1},i&&(a.dashstyle=i),e[u]=e.chart.renderer.path(s).attr(a).add(e.group).shadow(!o&&t.shadow))})},clipNeg:function(){var e=this.options,t=this.chart,n=t.renderer,r=e.negativeColor,i,s=this.posClip,o=this.negClip;i=t.chartWidth;var u=t.chartHeight,a=K(i,u);r&&this.graph&&(r=J(this.yAxis.len-this.yAxis.translate(e.threshold||0)),e={x:0,y:0,width:a,height:r},a={x:0,y:r,width:a,height:a-r},t.inverted&&n.isVML&&(e={x:t.plotWidth-r-t.plotLeft,y:0,width:i,height:u},a={x:r+t.plotLeft-i,y:0,width:t.plotLeft+r,height:i}),this.yAxis.reversed?(t=a,i=e):(t=e,i=a),s?(s.animate(t),o.animate(i)):(this.posClip=s=n.clipRect(t),this.graph.clip(s),this.negClip=o=n.clipRect(i),this.graphNeg.clip(o),this.area&&(this.area.clip(s),this.areaNeg.clip(o))))},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};tn(["group","markerGroup"],function(n){t[n]&&t[n].attr(e).invert()})}var t=this,n=t.chart;on(n,"resize",e),on(t,"destroy",function(){un(n,"resize",e)}),e(),t.invertGroups=e},plotGroup:function(e,t,n,r,i){var s=this[e],o=!s,u=this.chart,a=this.xAxis,f=this.yAxis;return o&&(this[e]=s=u.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s[o?"attr":"animate"]({translateX:a?a.left:u.plotLeft,translateY:f?f.top:u.plotTop}),s},render:function(){var e=this.chart,t,n=this.options,r=n.animation&&!!this.animate&&e.renderer.isSVG,i=this.visible?"visible":"hidden",s=n.zIndex,o=this.hasRendered,u=e.seriesGroup;t=this.plotGroup("group","series",i,s,u),this.markerGroup=this.plotGroup("markerGroup","markers",i,s,u),r&&this.animate(!0),this.getAttribs(),t.inverted=e.inverted,this.drawGraph&&(this.drawGraph(),this.clipNeg()),this.drawDataLabels(),this.drawPoints(),this.options.enableMouseTracking!==!1&&this.drawTracker(),e.inverted&&this.invertGroups(),n.clip!==!1&&!this.sharedClipKey&&!o&&t.clip(e.clipRect),r?this.animate():o||this.afterAnimate(),this.isDirty=this.isDirtyData=!1,this.hasRendered=!0},redraw:function(){var e=this.chart,t=this.isDirtyData,n=this.group,r=this.xAxis,i=this.yAxis;n&&(e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight}),n.animate({translateX:p(r&&r.left,e.plotLeft),translateY:p(i&&i.top,e.plotTop)})),this.translate(),this.setTooltipPoints(!0),this.render(),t&&an(this,"updatedData")},setState:function(e){var t=this.options,n=this.graph,r=this.graphNeg,i=t.states,t=t.lineWidth,e=e||"";this.state!==e&&(this.state=e,i[e]&&i[e].enabled===!1||(e&&(t=i[e].lineWidth||t+1),n&&!n.dashstyle&&(e={"stroke-width":t},n.attr(e),r&&r.attr(e))))},setVisible:function(e,t){var n=this,r=n.chart,i=n.legendItem,s,o=r.options.chart.ignoreHiddenSeries,u=n.visible;s=(n.visible=e=n.userOptions.visible=e===U?!u:e)?"show":"hide",tn(["group","dataLabelsGroup","markerGroup","tracker"],function(e){n[e]&&n[e][s]()}),r.hoverSeries===n&&n.onMouseOut(),i&&r.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&tn(r.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),tn(n.linkedSeries,function(t){t.setVisible(e,!1)}),o&&(r.isDirtyBox=!0),t!==!1&&r.redraw(),an(n,s)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=e===U?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),an(this,e?"select":"unselect")},drawTracker:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.pointer,u=s.renderer,a=s.options.tooltip.snap,f=e.tracker,l=t.cursor,l=l&&{cursor:l},c=e.singlePoints,h,p=function(){s.hoverSeries!==e&&e.onMouseOver()};if(i&&!n)for(h=i+1;h--;)r[h]==="M"&&r.splice(h+1,0,r[h+1]-a,r[h+2],"L"),(h&&r[h]==="M"||h===i)&&r.splice(h,0,"L",r[h-2]+a,r[h-1]);for(h=0;h<c.length;h++)i=c[h],r.push("M",i.plotX-a,i.plotY,"L",i.plotX+a,i.plotY);f?f.attr({d:r}):(e.tracker=f=u.path(r).attr({"class":"highcharts-tracker","stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:kt,fill:n?kt:Ct,"stroke-width":t.lineWidth+(n?0:2*a),zIndex:2}).addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(e){o.onTrackerMouseOut(e)}).css(l).add(e.markerGroup),dt)&&f.on("touchstart",p)}},Gt=m(bn),Kt.line=Gt,hn.area=t(Qt,{threshold:0}),Gt=m(bn,{type:"area",getSegments:function(){var e=[],t=this.yAxis.stacks[this.stackKey],n={},r,i;r=this.points;var s;if(this.options.stacking&&!this.cropped){for(i=0;i<r.length;i++)n[r[i].x]=r[i];for(s in t)n[s]?e.push(n[s]):(r=this.xAxis.translate(s),i=this.yAxis.toPixels(t[s].cum,!0),e.push({y:null,plotX:r,clientX:r,plotY:i,yBottom:i,onMouseOver:xt}));e=[e]}else bn.prototype.getSegments.call(this),e=this.segments;this.segments=e},getSegmentPath:function(e){var t=bn.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options;t.length===3&&n.push("L",t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)r<e.length-1&&i.step&&n.push(e[r+1].plotX,e[r].yBottom),n.push(e[r].plotX,e[r].yBottom);else this.closeSegment(n,e);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t){var n=this.yAxis.getThreshold(this.options.threshold);e.push("L",t[t.length-1].plotX,n,"L",t[0].plotX,n)},drawGraph:function(){this.areaPath=[],bn.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,n=this.options,r=[["area",this.color,n.fillColor]];n.negativeColor&&r.push(["areaNeg",n.negativeColor,n.negativeFillColor]),tn(r,function(r){var i=r[0],s=e[i];s?s.animate({d:t}):e[i]=e.chart.renderer.path(t).attr({fill:p(r[2],pn(r[1]).setOpacity(n.fillOpacity||.75).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}}),Kt.area=Gt,hn.spline=t(Qt),vn=m(bn,{type:"spline",getPointSpline:function(e,t,n){var r=t.plotX,i=t.plotY,s=e[n-1],o=e[n+1],u,a,f,l;if(s&&o){e=s.plotY,f=o.plotX;var o=o.plotY,c;u=(1.5*r+s.plotX)/2.5,a=(1.5*i+e)/2.5,f=(1.5*r+f)/2.5,l=(1.5*i+o)/2.5,c=(l-a)*(f-r)/(f-u)+i-l,a+=c,l+=c,a>e&&a>i?(a=K(e,i),l=2*i-a):a<e&&a<i&&(a=Q(e,i),l=2*i-a),l>o&&l>i?(l=K(o,i),a=2*i-l):l<o&&l<i&&(l=Q(o,i),a=2*i-l),t.rightContX=f,t.rightContY=l}return n?(t=["C",s.rightContX||s.plotX,s.rightContY||s.plotY,u||r,a||i,r,i],s.rightContX=s.rightContY=null):t=["M",r,i],t}}),Kt.spline=vn,hn.areaspline=t(hn.area),mn=Gt.prototype,vn=m(vn,{type:"areaspline",closedStacks:!0,getSegmentPath:mn.getSegmentPath,closeSegment:mn.closeSegment,drawGraph:mn.drawGraph}),Kt.areaspline=vn,hn.column=t(Qt,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0}),vn=m(bn,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){bn.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&tn(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e=this,t=e.chart,n=e.options,r=this.xAxis,i=r.reversed,s,o={},u,a=0;n.grouping===!1?a=1:tn(t.series,function(t){var n=t.options;t.type===e.type&&t.visible&&e.options.group===n.group&&(n.stacking?(s=t.stackKey,o[s]===U&&(o[s]=a++),u=o[s]):n.grouping!==!1&&(u=a++),t.columnIndex=u)});var t=Q(G(r.transA)*(r.ordinalSlope||n.pointRange||r.closestPointRange||1),r.len),r=t*n.groupPadding,f=(t-2*r)/a,c=n.pointWidth,n=l(c)?(f-c)/2:f*n.pointPadding,c=p(c,f-2*n);return e.columnMetrics={width:c,offset:n+(r+((i?a-(e.columnIndex||0):e.columnIndex)||0)*f-t/2)*(i?-1:1)}},translate:function(){var e=this,t=e.chart,n=e.options,r=n.stacking,i=n.borderWidth,s=e.yAxis,o=e.translatedThreshold=s.getThreshold(n.threshold),u=p(n.minPointLength,5),n=e.getColumnMetrics(),a=n.width,f=J(K(a,1+2*i)),l=n.offset;bn.prototype.translate.apply(e),tn(e.points,function(n){var c=Q(K(-999,n.plotY),s.len+999),h=p(n.yBottom,o),d=n.plotX+l,v=J(Q(c,h)),c=J(K(c,h)-v),m=s.stacks[(n.y<0?"-":"")+e.stackKey];r&&e.visible&&m&&m[n.x]&&m[n.x].setOffset(l,f),G(c)<u&&u&&(c=u,v=G(v-o)>u?h-u:o-(s.translate(n.y,0,1,0,1)<=o?u:0)),n.barX=d,n.pointWidth=a,n.shapeType="rect",n.shapeArgs=n=t.renderer.Element.prototype.crisp.call(0,i,d,v,f,c),i%2&&(n.y-=1,n.height+=1)})},getSymbol:xt,drawLegendSymbol:Gt.prototype.drawLegendSymbol,drawGraph:xt,drawPoints:function(){var e=this,n=e.options,r=e.chart.renderer,i;tn(e.points,function(s){var o=s.plotY,u=s.graphic;o!==U&&!isNaN(o)&&s.y!==null?(i=s.shapeArgs,u?(cn(u),u.animate(t(i))):s.graphic=r[s.shapeType](i).attr(s.pointAttr[s.selected?"select":""]).add(e.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius)):u&&(s.graphic=u.destroy())})},drawTracker:function(){var e=this,t=e.chart.pointer,n=e.options.cursor,r=n&&{cursor:n},i=function(t){var n=t.target,r;for(e.onMouseOver();n&&!r;)r=n.point,n=n.parentNode;r!==U&&r.onMouseOver(t)};tn(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking?e._hasTracking=!0:tn(e.trackerGroups,function(n){e[n]&&(e[n].addClass("highcharts-tracker").on("mouseover",i).on("mouseout",function(e){t.onTrackerMouseOut(e)}).css(r),dt)&&e[n].on("touchstart",i)})},alignDataLabel:function(e,n,r,i,s){var o=this.chart,u=o.inverted,a=e.dlBox||e.shapeArgs,f=e.below||e.plotY>p(this.translatedThreshold,o.plotSizeY),l=p(r.inside,!!this.options.stacking);a&&(i=t(a),u&&(i={x:o.plotWidth-i.y-i.height,y:o.plotHeight-i.x-i.width,width:i.height,height:i.width}),!l)&&(u?(i.x+=f?0:i.width,i.width=0):(i.y+=f?i.height:0,i.height=0)),r.align=p(r.align,!u||l?"center":f?"right":"left"),r.verticalAlign=p(r.verticalAlign,u||l?"middle":f?"top":"bottom"),bn.prototype.alignDataLabel.call(this,e,n,r,i,s)},animate:function(e){var t=this.yAxis,n=this.options,r=this.chart.inverted,i={};lt&&(e?(i.scaleY=.001,e=Q(t.pos+t.len,K(t.pos,t.toPixels(n.threshold))),r?i.translateX=e-t.len:i.translateY=e,this.group.attr(i)):(i.scaleY=1,i[r?"translateX":"translateY"]=t.pos,this.group.animate(i,this.options.animation),this.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&tn(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),bn.prototype.remove.apply(e,arguments)}}),Kt.column=vn,hn.bar=t(hn.column),mn=m(vn,{type:"bar",inverted:!0}),Kt.bar=mn,hn.scatter=t(Qt,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1}),mn=m(bn,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:vn.prototype.drawTracker,setTooltipPoints:xt}),Kt.scatter=mn,hn.pie=t(Qt,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),Qt={type:"pie",isCartesian:!1,pointClass:m(yn,{init:function(){yn.prototype.init.apply(this,arguments);var t=this,n;return t.y<0&&(t.y=null),e(t,{visible:t.visible!==!1,name:p(t.name,"Slice")}),n=function(){t.slice()},on(t,"select",n),on(t,"unselect",n),t},setVisible:function(e){var t=this,n=t.series,r=n.chart,i;t.visible=t.options.visible=e=e===U?!t.visible:e,n.options.data[en(t,n.data)]=t.options,i=e?"show":"hide",tn(["graphic","dataLabel","connector","shadowGroup"],function(e){t[e]&&t[e][i]()}),t.legendItem&&r.legend.colorizeItem(t,e),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,r.redraw())},slice:function(e,t,n){var r=this.series;M(n,r.chart),p(t,!0),this.sliced=this.options.sliced=e=l(e)?e:!this.sliced,r.options.data[en(this,r.data)]=this.options,e=e?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(e),this.shadowGroup&&this.shadowGroup.animate(e)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:xt,animate:function(e){var t=this,n=t.points,r=t.startAngleRad;e||(tn(n,function(e){var n=e.graphic,e=e.shapeArgs;n&&(n.attr({r:t.center[3]/2,start:r,end:r}),n.animate({r:e.r,start:e.start,end:e.end},t.options.animation))}),t.animate=null)},setData:function(e,t){bn.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),p(t,!0)&&this.chart.redraw()},getCenter:function(){var e=this.options,t=this.chart,r=2*(e.dataLabels&&e.dataLabels.enabled?0:e.slicedOffset||0),i=t.plotWidth-2*r,s=t.plotHeight-2*r,t=e.center,e=[p(t[0],"50%"),p(t[1],"50%"),e.size||"100%",e.innerSize||0],o=Q(i,s),u;return sn(e,function(e,t){return u=/%$/.test(e),(u?[i,s,o,o][t]*n(e)/100:e)+(t<3?r:0)})},translate:function(e){this.generatePoints();var t=0,n=0,r=this.options,i=r.slicedOffset,s=i+r.borderWidth,o,u,a,f=this.startAngleRad=et/180*((r.startAngle||0)%360-90),l=this.points,c=2*et,h=r.dataLabels.distance,p=r.ignoreHiddenPoint,d,v=l.length,m;e||(this.center=e=this.getCenter()),this.getX=function(t,n){return a=X.asin((t-e[1])/(e[2]/2+h)),e[0]+(n?-1:1)*Y(a)*(e[2]/2+h)};for(d=0;d<v;d++)m=l[d],t+=p&&!m.visible?0:m.y;for(d=0;d<v;d++){m=l[d],r=t?m.y/t:0,o=V((f+n*c)*1e3)/1e3;if(!p||m.visible)n+=r;u=V((f+n*c)*1e3)/1e3,m.shapeType="arc",m.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:o,end:u},a=(u+o)/2,a>.75*c&&(a-=2*et),m.slicedTranslation={translateX:V(Y(a)*i),translateY:V(Z(a)*i)},o=Y(a)*e[2]/2,u=Z(a)*e[2]/2,m.tooltipPos=[e[0]+o*.7,e[1]+u*.7],m.half=a<c/4?0:1,m.angle=a,m.labelPos=[e[0]+o+Y(a)*h,e[1]+u+Z(a)*h,e[0]+o+Y(a)*s,e[1]+u+Z(a)*s,e[0]+o,e[1]+u,h<0?"center":m.half?"right":"left",a],m.percentage=r*100,m.total=t}this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var t=this,n=t.chart.renderer,r,i,s=t.options.shadow,o,u;s&&!t.shadowGroup&&(t.shadowGroup=n.g("shadow").add(t.group)),tn(t.points,function(a){i=a.graphic,u=a.shapeArgs,o=a.shadowGroup,s&&!o&&(o=a.shadowGroup=n.g("shadow").add(t.shadowGroup)),r=a.sliced?a.slicedTranslation:{translateX:0,translateY:0},o&&o.attr(r),i?i.animate(e(u,r)):a.graphic=i=n.arc(u).setRadialReference(t.center).attr(a.pointAttr[a.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(r).add(t.group).shadow(s,o),a.visible===!1&&a.setVisible(!1)})},drawDataLabels:function(){var e=this,t=e.data,n,r=e.chart,i=e.options.dataLabels,s=p(i.connectorPadding,10),o=p(i.connectorWidth,1),u=r.plotWidth,r=r.plotHeight,a,f,l=p(i.softConnector,!0),c=i.distance,h=e.center,d=h[2]/2,v=h[1],m=c>0,g,y,b,w,E=[[],[]],S,x,T,N,k,L=[0,0,0,0],A=function(e,t){return t.y-e.y},O=function(e,t){e.sort(function(e,n){return e.angle!==void 0&&(n.angle-e.angle)*t})};if(i.enabled||e._hasPointLabels){bn.prototype.drawDataLabels.apply(e),tn(t,function(e){e.dataLabel&&E[e.half].push(e)});for(N=0;!w&&t[N];)w=t[N]&&t[N].dataLabel&&(t[N].dataLabel.getBBox().height||21),N++;for(N=2;N--;){var t=[],M=[],_=E[N],D=_.length,P;O(_,N-.5);if(c>0){for(k=v-d-c;k<=v+d+c;k+=w)t.push(k);y=t.length;if(D>y){n=[].concat(_),n.sort(A);for(k=D;k--;)n[k].rank=k;for(k=D;k--;)_[k].rank>=y&&_.splice(k,1);D=_.length}for(k=0;k<D;k++){n=_[k],b=n.labelPos,n=9999;var H,B;for(B=0;B<y;B++)H=G(t[B]-b[1]),H<n&&(n=H,P=B);if(P<k&&t[k]!==null)P=k;else for(y<D-k+P&&t[k]!==null&&(P=y-D+k);t[P]===null;)P++;M.push({i:P,y:t[P]}),t[P]=null}M.sort(A)}for(k=0;k<D;k++){n=_[k],b=n.labelPos,g=n.dataLabel,T=n.visible===!1?"hidden":"visible",n=b[1];if(c>0){if(y=M.pop(),P=y.i,x=y.y,n>x&&t[P+1]!==null||n<x&&t[P-1]!==null)x=n}else x=n;S=i.justify?h[0]+(N?-1:1)*(d+c):e.getX(P===0||P===t.length-1?n:x,N),g._attr={visibility:T,align:b[6]},g._pos={x:S+i.x+({left:s,right:-s}[b[6]]||0),y:x+i.y-10},g.connX=S,g.connY=x,this.options.size===null&&(y=g.width,S-y<s?L[3]=K(V(y-S+s),L[3]):S+y>u-s&&(L[1]=K(V(S+y-u+s),L[1])),x-w/2<0?L[0]=K(V(-x+w/2),L[0]):x+w/2>r&&(L[2]=K(V(x+w/2-r),L[2])))}}if(C(L)===0||this.verifyDataLabelOverflow(L))this.placeDataLabels(),m&&o&&tn(this.points,function(t){a=t.connector,b=t.labelPos,(g=t.dataLabel)&&g._pos?(S=g.connX,x=g.connY,f=l?["M",S+(b[6]==="left"?5:-5),x,"C",S,x,2*b[2]-b[4],2*b[3]-b[5],b[2],b[3],"L",b[4],b[5]]:["M",S+(b[6]==="left"?5:-5),x,"L",b[2],b[3],"L",b[4],b[5]],a?(a.animate({d:f}),a.attr("visibility",T)):t.connector=a=e.chart.renderer.path(f).attr({"stroke-width":o,stroke:i.connectorColor||t.color||"#606060",visibility:T}).add(e.group)):a&&(t.connector=a.destroy())})}},verifyDataLabelOverflow:function(e){var t=this.center,n=this.options,r=n.center,i=n=n.minSize||80,s;return r[0]!==null?i=K(t[2]-K(e[1],e[3]),n):(i=K(t[2]-e[1]-e[3],n),t[0]+=(e[3]-e[1])/2),r[1]!==null?i=K(Q(i,t[2]-K(e[0],e[2])),n):(i=K(Q(i,t[2]-e[0]-e[2]),n),t[1]+=(e[0]-e[2])/2),i<t[2]?(t[2]=i,this.translate(t),tn(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels()):s=!0,s},placeDataLabels:function(){tn(this.points,function(e){var e=e.dataLabel,t;e&&((t=e._pos)?(e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-999}))})},alignDataLabel:xt,drawTracker:vn.prototype.drawTracker,drawLegendSymbol:Gt.prototype.drawLegendSymbol,getSymbol:xt},Qt=m(bn,Qt),Kt.pie=Qt,e(Highcharts,{Axis:j,Chart:R,Color:pn,Legend:q,Pointer:I,Point:yn,Tick:P,Tooltip:F,Renderer:pt,Series:bn,SVGElement:D,SVGRenderer:dn,arrayMin:N,arrayMax:C,charts:Tt,dateFormat:bt,format:b,pathAnim:Et,getOptions:function(){return yt},hasBidiBug:ct,isTouchDevice:at,numberFormat:g,seriesTypes:Kt,setOptions:function(e){return yt=t(yt,e),_(),yt},addEvent:on,removeEvent:un,createElement:v,discardElement:L,css:d,each:tn,extend:e,map:sn,merge:t,pick:p,splat:h,extendClass:m,pInt:n,wrap:function(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}},svg:lt,canvas:ht,vml:!lt&&!ht,product:"Highcharts",version:"3.0.0"})}(),function(e){var t=e.Chart,n=e.addEvent,r=e.removeEvent,i=e.createElement,s=e.discardElement,o=e.css,u=e.merge,a=e.each,f=e.extend,l=Math.max,c=document,h=window,p=e.isTouchDevice,d=e.Renderer.prototype.symbols,v=e.getOptions(),m;f(v.lang,{downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),v.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:p?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},v.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{text:"Print chart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG"
,onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},e.post=function(e,t){var n,r;r=i("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:"none"},c.body);for(n in t)i("input",{type:"hidden",name:n,value:t[n]},null,r);r.submit(),s(r)},f(t.prototype,{getSVG:function(t){var n=this,r,o,l,h,p=u(n.options,t);return c.createElementNS||(c.createElementNS=function(e,t){return c.createElement(t)}),t=i("div",null,{position:"absolute",top:"-9999em",width:n.chartWidth+"px",height:n.chartHeight+"px"},c.body),o=n.renderTo.style.width,h=n.renderTo.style.height,o=p.exporting.sourceWidth||p.chart.width||/px$/.test(o)&&parseInt(o,10)||600,h=p.exporting.sourceHeight||p.chart.height||/px$/.test(h)&&parseInt(h,10)||400,f(p.chart,{animation:!1,renderTo:t,forExport:!0,width:o,height:h}),p.exporting.enabled=!1,p.chart.plotBackgroundImage=null,p.series=[],a(n.series,function(e){l=u(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),l.isInternal||p.series.push(l)}),r=new e.Chart(p,n.callback),a(["xAxis","yAxis"],function(e){a(n[e],function(t,n){var i=r[e][n],s=t.getExtremes(),o=s.userMin,s=s.userMax;(o!==void 0||s!==void 0)&&i.setExtremes(o,s,!0,!1)})}),o=r.container.innerHTML,p=null,r.destroy(),s(t),o=o.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),o=o.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),o.match(/ xmlns="/g).length===2&&(o=o.replace(/xmlns="[^"]+"/,"")),o},exportChart:function(t,n){var t=t||{},r=this.getSVG(u({chart:{borderRadius:0}},this.options.exporting.chartOptions,n,{exporting:{sourceWidth:t.sourceWidth,sourceHeight:t.sourceHeight}})),t=u(this.options.exporting,t);e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale||2,svg:r})},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=c.body,s=i.childNodes;e.isPrinting||(e.isPrinting=!0,a(s,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display="none")}),i.appendChild(t),h.focus(),h.print(),setTimeout(function(){r.appendChild(t),a(s,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1},1e3))},contextMenu:function(e,t,r,s,u,c,h){var p=this,d=p.options.navigation,v=d.menuItemStyle,m=p.chartWidth,g=p.chartHeight,y="cache-"+e,b=p[y],w=l(u,c),E,S,x;b||(p[y]=b=i("div",{className:"highcharts-"+e},{position:"absolute",zIndex:1e3,padding:w+"px"},p.container),E=i("div",null,f({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},d.menuStyle),b),S=function(){o(b,{display:"none"}),h&&h.setState(0)},n(b,"mouseleave",function(){x=setTimeout(S,500)}),n(b,"mouseenter",function(){clearTimeout(x)}),a(t,function(e){if(e){var t=e.separator?i("hr",null,null,E):i("div",{onmouseover:function(){o(this,d.menuItemHoverStyle)},onmouseout:function(){o(this,v)},onclick:function(){S(),e.onclick.apply(p,arguments)},innerHTML:e.text||p.options.lang[e.textKey]},f({cursor:"pointer"},v),E);p.exportDivElements.push(t)}}),p.exportDivElements.push(E,b),p.exportMenuWidth=b.offsetWidth,p.exportMenuHeight=b.offsetHeight),e={display:"block"},r+p.exportMenuWidth>m?e.right=m-r-u-w+"px":e.left=r-w+"px",s+c+p.exportMenuHeight>g?e.bottom=g-s-w+"px":e.top=s+c-w+"px",o(b,e)},addButton:function(t){var n=this,r=n.renderer,t=u(n.options.navigation.buttonOptions,t),i=t.onclick,s=t.menuItems,o,a,l={stroke:t.symbolStroke,fill:t.symbolFill},c=t.symbolSize||12;n.btnCount||(n.btnCount=0),n.btnCount++,n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]);if(t.enabled!==!1){var h=t.theme,p=h.states,d=p&&p.hover,p=p&&p.select,v;delete h.states,i?v=function(){i.apply(n,arguments)}:s&&(v=function(){n.contextMenu("contextmenu",s,a.translateX,a.translateY,a.width,a.height,a),a.setState(2)}),t.text&&t.symbol?h.paddingLeft=e.pick(h.paddingLeft,25):t.text||f(h,{width:t.width,height:t.height,padding:0}),a=r.button(t.text,0,0,v,h,d,p).attr({title:n.options.lang[t._titleKey],"stroke-linecap":"round"}),t.symbol&&(o=r.symbol(t.symbol,t.symbolX-c/2,t.symbolY-c/2,c,c).attr(f(l,{"stroke-width":t.symbolStrokeWidth||1,zIndex:1})).add(a)),a.add().align(f(t,{width:a.width,x:m}),!0,"spacingBox"),m+=(a.width+t.buttonSpacing)*(t.align==="right"?-1:1),n.exportSVGElements.push(a,o)}},destroyExport:function(e){var e=e.target,t,n;for(t=0;t<e.exportSVGElements.length;t++)n=e.exportSVGElements[t],n.onclick=n.ontouchstart=null,e.exportSVGElements[t]=n.destroy();for(t=0;t<e.exportDivElements.length;t++)n=e.exportDivElements[t],r(n,"mouseleave"),e.exportDivElements[t]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,s(n)}}),d.menu=function(e,t,n,r){return["M",e,t+2.5,"L",e+n,t+2.5,"M",e,t+r/2+.5,"L",e+n,t+r/2+.5,"M",e,t+r-1.5,"L",e+n,t+r-1.5]},t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;m=0;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})}(Highcharts),function(e){if(e===undefined)throw new Error("jQuery is required.");var t=function(){this.properties={}};Backstop.HighChartBase=t,t.prototype={retrieveData:function(){var t=this;e.ajax({type:"GET",url:this.properties.dataPath,async:!1,complete:function(e){t.data=jQuery.parseJSON(e.responseText).rows}})},format:function(e,t,n,r){var i;r||(r=this.properties.defaultCurrencySymbol),n||(n=this.properties.format);if(n=="MONEY"){!t&&t!==0&&(t=2),i=e.toFixed(t);var s=(""+i).split("."),o=s[0],u=o.length-3;for(;u>0;u-=3)o=o.slice(0,u)+","+o.slice(u);return r+o+(t===0?"":"."+s[1])}if(n=="PERCENTAGE"){!t&&t!==0&&(t=2);var a=e*100;return i=a.toFixed(t),i+"%"}return""+e}}}(window.jQuery),function(e){var t=window.Backstop||{};if(e===undefined)throw new Error("jQuery is required.");window.Backstop===undefined&&(window.Backstop=t),e.fn.createGrowthAssetChart=function(n){var r={divId:e(this).attr("id"),title:"",subTitle:"",width:null,height:600,format:"MONEY",yTitle:"",y2Title:"",defaultCurrencySymbol:"$"},i=new t.HighGrowthAssetChart(e.extend(r,n));i.render()};var n=function(e){if(!e.dataPath||!e.xLabelsField||!e.ySeriesField||!e.y2SeriesField)throw"Missing necessary information for growth-asset chart.";this.properties=e};t.HighGrowthAssetChart=n,n.prototype=new t.HighChartBase,n.prototype.render=function(){var e=this;(!e.xLabels||!e.ySeries||!e.y2Series)&&e.processData();var t=e.xLabels.length,n=t<36?6:t<60?12:t<324?24:48,r=new Highcharts.Chart({chart:{renderTo:e.properties.divId,zoomType:"xy"},credits:{enabled:!1},lang:{contextButtonTitle:I18n.t("charts.export_chart")},title:{text:e.properties.title},subtitle:{text:e.properties.subTitle},xAxis:[{categories:e.xLabels,labels:{step:n,y:20}}],yAxis:[{title:{text:e.properties.y2Title,style:{color:"#4572A7"}},labels:{formatter:function(){return e.format(this.value,0,"MONEY")},style:{color:"#4572A7"}}},{title:{text:e.properties.yTitle,style:{color:"#89A54E"}},labels:{formatter:function(){return e.format(this.value,0,"MONEY")},style:{color:"#89A54E"}},opposite:!0}],tooltip:{formatter:function(){return this.series.name=="AUM"?this.x+": "+e.format(this.y)+" (mm)":this.x+": "+e.format(this.y)}},legend:{layout:"vertical",align:"left",x:75,verticalAlign:"top",y:50,floating:!0,backgroundColor:"#FFFFFF"},exporting:{url:"https://charts.backstopsolutions.com/highcharts-export/"},series:[{name:e.properties.yTitle,color:"#89A54E",type:"area",yAxis:1,data:e.ySeries,marker:{enabled:!1},lineWidth:1},{name:e.properties.y2Title,color:"#4572A7",type:"line",yAxis:0,data:e.y2Series,marker:{enabled:!1},lineWidth:3}]})},n.prototype.processData=function(){var e=this;e.data||e.retrieveData(),e.xLabels=this.data[e.properties.xLabelsField],e.ySeries=this.data[e.properties.ySeriesField],e.y2Series=this.data[e.properties.y2SeriesField]}}(window.jQuery),function(e){var t=window.Backstop||{};if(e===undefined)throw new Error("jQuery is required.");window.Backstop===undefined&&(window.Backstop=t),e.fn.createHistogramChart=function(n){var r={divId:e(this).attr("id"),title:"",yTitle:"",colors:Highcharts.getOptions().colors,xSeries:null,width:null,height:600,seriesField:"returns",multiSeriesTitle:"title",multiSeriesData:"data",seriesTitle:"",defaultCurrencySymbol:"$",fontFamily:"inherit !important",borderRadius:"0",backgroundColor:"white",plotBackgroundColor:"white",xAxisColor:"#666",yAxisColor:"#666",labelColor:Highcharts.getOptions().colors[0],yTitleColor:Highcharts.getOptions().colors[0],legendColor:Highcharts.getOptions().colors[0]},i=new t.HighHistogramChart(e.extend(r,n));i.render()};var n=function(e){if(!e.dataPath||!e.xSeries||!e.seriesField)throw"Missing necessary information for histogram chart.";this.properties=e};t.HighHistogramChart=n,n.prototype=new t.HighChartBase,n.prototype.render=function(){var e=this;(!e.xLabels||!e.seriesData)&&e.processData();var t=[{name:e.properties.seriesTitle,color:e.properties.colors[0],data:e.seriesData}],n=new Highcharts.Chart({chart:{renderTo:e.properties.divId,type:"column",height:e.properties.height,width:e.properties.width,borderRadius:e.properties.borderRadius,backgroundColor:e.properties.backgroundColor,plotBackgroundColor:e.properties.plotBackgroundColor,style:{fontFamily:e.properties.fontFamily}},credits:{enabled:!1},title:{text:e.properties.title,style:{color:e.properties.labelColor}},legend:{itemStyle:{color:e.properties.legendColor}},lang:{contextButtonTitle:I18n.t("charts.export_chart")},xAxis:{categories:e.xLabels,labels:{rotation:-90,align:"right",style:{color:e.properties.xAxisColor}}},yAxis:{min:0,title:{text:e.properties.yTitle,style:{color:e.properties.yTitleColor}},labels:{style:{color:e.properties.yAxisColor}}},tooltip:{formatter:function(){return this.x+": "+this.y+" mth(s)"}},plotOptions:{column:{pointPadding:.1,borderWidth:0}},exporting:{url:"https://charts.backstopsolutions.com/highcharts-export/"},series:t})},n.prototype.processData=function(){var e=this;e.xLabels=[];if(e.properties.xSeries.length<1)throw new Error("You must have at least one x category.");e.seriesData=[0,0],e.xLabels.push(e.properties.xSeries[0]+" and below");for(var t=0;t<e.properties.xSeries.length-1;t++)e.xLabels.push(e.properties.xSeries[t]+" to "+e.properties.xSeries[t+1]),e.seriesData.push(0);e.xLabels.push(e.properties.xSeries[t]+" and up"),e.data||e.retrieveData();var n=e.properties.xSeries.length==1?0:e.properties.xSeries[1]-e.properties.xSeries[0],r=0-e.properties.xSeries[0];jQuery.each(e.data[e.properties.seriesField],function(t,i){t=i/n*100,t=t+r/n+1,t=Math.floor(t),t=t<0?0:t>e.seriesData.length-1?e.seriesData.length-1:t,e.seriesData[t]++})}}(window.jQuery),function(e){var t=window.Backstop||{};if(e===undefined)throw new Error("jQuery is required.");window.Backstop===undefined&&(window.Backstop=t),e.fn.createPieChart=function(n){var r={divId:e(this).attr("id"),title:"",colors:Highcharts.getOptions().colors,chartPercentageField:null,format:"MONEY",sizeInner:"75%",sizeOuter:"75%",distanceInner:-30,distanceOuter:30,colorInner:"white",colorOuter:"grey",width:null,height:600,borderRadius:0,defaultCurrencySymbol:"$",style:{fontFamily:"inherit !important"}},i=new t.HighPieChart(e.extend(r,n));i.render()};var n=function(e){if(!e.dataPath||!e.seriesCategories||!e.dataField)throw"Missing necessary information for pie chart.";this.properties=e,this.properties.seriesCategories=this.properties.seriesCategories.split(","),this.properties.chartPercentageField||(this.properties.chartPercentageField=e.dataField)};t.HighPieChart=n,n.prototype=new t.HighChartBase,n.prototype.render=function(){var e=this;e.resolveLevelData();var t=[];t.push({name:e.properties.seriesCategories[0],data:e.levelOneData,size:e.properties.sizeInner,dataLabels:{formatter:function(){},color:e.properties.colorInner,distance:e.properties.distanceInner}});var n=this.properties.seriesCategories.length>1;n&&t.push({name:e.properties.seriesCategories[0],data:e.levelTwoData,innerSize:e.properties.sizeOuter,dataLabels:{formatter:function(){return this.point.value>1?"<b>"+this.point.name+"</b><br/>"+e.format(this.point.value):null},color:e.properties.colorOuter,distance:e.properties.distanceOuter}}),Highcharts.setOptions({chart:{style:e.properties.style}});var r=new Highcharts.Chart({chart:{renderTo:e.properties.divId,type:"pie",width:e.properties.width,height:e.properties.height,borderWidth:e.properties.borderWidth,borderColor:e.properties.borderColor,borderRadius:e.properties.borderRadius},credits:{enabled:!1},title:{text:e.properties.title},lang:{contextButtonTitle:I18n.t("charts.export_chart")},yAxis:{title:{text:e.properties.title}},plotOptions:{pie:{shadow:!1}},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+e.format(this.point.value)}},exporting:{url:"https://charts.backstopsolutions.com/highcharts-export/"},series:t})},n.prototype.processData=function(){var e=this;e.data||e.retrieveData(),e.sortData(),e.processedData=[];var t=e.properties.seriesCategories.length>1,n=e.properties.seriesCategories[0],r=t?e.properties.seriesCategories[1]:null,i=0,s,o,u,a;jQuery.each(this.data,function(f,l){s!=l[n]?(f>0&&(e.processedData.push({name:s,y:o,value:u,color:e.properties.colors[i],levelTwo:t?a:null}),i=i==e.properties.colors.length-1?0:i+1),s=l[n],o=e.checkFloat(l[e.properties.chartPercentageField]),u=e.checkFloat(l[e.properties.dataField]),a=t?{names:[l[r]],percentage:[e.checkFloat(l[e.properties.chartPercentageField])],values:[e.checkFloat(l[e.properties.dataField])]}:null):(o+=e.checkFloat(l[e.properties.chartPercentageField]),u+=e.checkFloat(l[e.properties.dataField]),t&&(a.names.push(l[r]),a.percentage.push(e.checkFloat(l[e.properties.chartPercentageField])),a.values.push(e.checkFloat(l[e.properties.dataField]))))});var f;jQuery.each(e.processedData,function(e,t){t.y>0&&!f&&(f=t)}),e.processedData.length>1&&f&&e.properties.colors[i]==f.color&&i++,e.processedData.push({name:s,y:o,value:u,color:e.properties.colors[i],levelTwo:t?a:null})},n.prototype.checkFloat=function(e){return isNaN(parseFloat(e))?0:parseFloat(e)},n.prototype.resolveLevelData=function(){var e=this;e.processedData||e.processData(),e.levelOneData=[];var t=e.properties.seriesCategories.length>1;e.levelTwoData=t?[]:null;for(var n=0;n<e.processedData.length;n++){thisData=e.processedData[n],e.levelOneData.push({name:thisData.name,y:thisData.y,value:thisData.value,color:thisData.color});if(t)for(var r=0;r<thisData.levelTwo.values.length;r++){var i=.2-r/thisData.levelTwo.values.length/5;e.levelTwoData.push({name:thisData.levelTwo.names[r],y:thisData.levelTwo.percentage[r],value:thisData.levelTwo.values[r],color:Highcharts.Color(thisData.color).brighten(i).get()})}}},n.prototype.sortData=function(){var e=this,t=function(t,n){var r=e.properties.seriesCategories[0],i=e.properties.seriesCategories[1];return t[r]==n[r]?t[i]==n[i]?0:t[i]>n[i]||t[i]===null?1:-1:t[r]>n[r]||t[r]===null?1:-1};e.data=e.data.sort(t)}}(window.jQuery),function(e){var t=window.Backstop||{};if(e===undefined)throw new Error("jQuery is required.");window.Backstop===undefined&&(window.Backstop=t),e.fn.createReturnsChart=function(n){var r={divId:e(this).attr("id"),title:"",yTitle:"",colors:Highcharts.getOptions().colors,width:null,height:600,format:"PERCENTAGE",seriesField:"returns",multiSeriesTitle:"title",multiSeriesData:"data",seriesTitle:"",borderColor:"#cdcccc",borderRadius:1,defaultCurrencySymbol:"",fontFamily:"inherit !important",backgroundColor:"white",plotBackgroundColor:"white",xAxisColor:"#666",yAxisColor:"#666",labelColor:Highcharts.getOptions().colors[0],yTitleColor:Highcharts.getOptions().colors[0],legendColor:Highcharts.getOptions().colors[0],subTitleColor:Highcharts.getOptions().colors[0],markersEnabled:!1},i=new t.HighReturnsChart(e.extend(r,n));i.render()};var n=function(e){if(!e.dataPath||!e.xLabelsField||!e.seriesField)throw"Missing necessary information for returns chart.";this.properties=e};t.HighReturnsChart=n,n.prototype=new t.HighChartBase,n.prototype.render=function(){var e=this;(!e.xLabels||!e.seriesData)&&e.processData();var t=[{name:e.properties.seriesTitle,color:e.properties.colors[0],type:"line",data:e.seriesData,marker:{enabled:e.properties.markersEnabled},lineWidth:3,backgroundColor:e.properties.backgroundColor,borderWidth:e.properties.borderWidth,borderColor:e.properties.borderColor,borderRadius:e.properties.borderRadius}],n=1;jQuery.each(e.additionalSeries,function(r,i){t.push({name:i.title,color:e.properties.colors[n],type:"line",data:i.data,marker:{enabled:!1},lineWidth:3}),n=n==e.properties.colors.length-1?0:n+1});var r=e.xLabels.length,i=r<36?6:r<60?12:r<324?24:48,s=new Highcharts.Chart({chart:{renderTo:e.properties.divId,zoomType:"xy",height:e.properties.height,width:e.properties.width,backgroundColor:e.properties.backgroundColor,plotBackgroundColor:e.properties.plotBackgroundColor,style:{fontFamily:e.properties.fontFamily}},credits:{enabled:!1},lang:{contextButtonTitle:I18n.t("charts.export_chart")},title:{text:e.properties.title,style:{color:e.properties.labelColor}},subtitle:{text:e.xLabels[0]+" - "+e.xLabels[r-1],style:{color:e.properties.subTitleColor}},xAxis:[{categories:e.xLabels,labels:{step:i,rotation:45,y:40,style:{color:e.properties.xAxisColor}}}],yAxis:[{labels:{formatter:function(){return e.format(this.value,0)},style:{color:e.properties.yAxisColor}},title:{text:e.properties.yTitle,style:{color:e.properties.yTitleColor}}}],tooltip:{formatter:function(){return this.x+": "+e.format(this.y)}},legend:{layout:"vertical",align:"left",x:33,verticalAlign:"top",y:45,floating:!0,backgroundColor:"none",borderWidth:0,itemStyle:{color:e.properties.legendColor}},exporting:{url:"https://charts.backstopsolutions.com/highcharts-export/"},series:t})},n.prototype.processData=function(){var e=this;e.data||e.retrieveData();var t=e.properties.seriesField=="value_of_1000";e.xLabels=e.data[e.properties.xLabelsField],e.seriesData=e.data[e.properties.seriesField],t&&(e.xLabels.unshift(e.xLabels[0]),e.seriesData.unshift(1e3)),e.additionalSeries=[],e.properties.multiSeriesField&&e.data[e.properties.multiSeriesField]&&jQuery.each(e.data[e.properties.multiSeriesField],function(n,r){values=r[e.properties.multiSeriesData],t&&values.unshift(1e3),e.additionalSeries.push({title:r[e.properties.multiSeriesTitle],data:values})})}}(window.jQuery),function(){function k(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&x.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&x.isFunction(t.isEqual))return t.isEqual(e);var r=f.call(e);if(r!=f.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&k(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(l.call(e,u)){s++;if(!(o=l.call(t,u)&&k(e[u],t[u],n)))break}if(o){for(u in t)if(l.call(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.concat,a=r.unshift,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return new A(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):typeof define=="function"&&define.amd?define("underscore",function(){return x}):e._=x,x.VERSION="1.2.3";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(l.call(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=x.toArray(e).reverse();return r&&!i&&(t=x.bind(t,r)),i?x.reduce(s,t,n,r):x.reduce(s,t)},x.find=x.detect=function(e,t,n){var r;return N(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){var r=[];return e==null?r:(T(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},x.every=x.all=function(e,t,r){var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var N=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.include=x.contains=function(e,t){var n=!1;return e==null?n:y&&e.indexOf===y?e.indexOf(t)!=-1:(n=N(e,function(e){return e===t}),n)},x.invoke=function(e,t){var n=o.call(arguments,2);return x.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.max=function(e,t,n){if(!t&&x.isArray(e))return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e))return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t=[],n;return T(e,function(e,r,i){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},x.sortBy=function(e,t,n){return x.pluck(x.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},x.groupBy=function(e,t){var n={},r=x.isFunction(t)?t:function(e){return e[t]};return T(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},x.sortedIndex=function(e,t,n){n||(n=x.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},x.toArray=function(e){return e?e.toArray?e.toArray():x.isArray(e)?o.call(e):x.isArguments(e)?o.call(e):x.values(e):[]},x.size=function(e){return x.toArray(e).length},x.first=x.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},x.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,function(e){return!!e})},x.flatten=function(e,t){return x.reduce(e,function(e,n){return x.isArray(n)?e.concat(t?n:x.flatten(n)):(e[e.length]=n,e)},[])},x.without=function(e){return x.difference(e,o.call(arguments,1))},x.uniq=x.unique=function(e,t,n){var r=n?x.map(e,n):e,i=[];return x.reduce(r,function(n,r,s){if(0==s||(t===!0?x.last(n)!=r:!x.include(n,r)))n[n.length]=r,i[i.length]=e[s];return n},[]),i},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(e){var t=o.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=x.flatten(o.call(arguments,1));return x.filter(e,function(e){return!x.include(t,e)})},x.zip=function(){var e=o.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;if(y&&e.indexOf===y)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},x.lastIndexOf=function(e,t){if(e==null)return-1;if(b&&e.lastIndexOf===b)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var C=function(){};x.bind=function(t,n){var r,i;if(t.bind===S&&S)return S.apply(t,o.call(arguments,1));if(!x.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){C.prototype=t.prototype;var e=new C,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},x.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return l.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(o.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o,u=x.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var a=function(){i=null,o&&e.apply(n,r),u()};i||(i=setTimeout(a,t)),s?o=!0:e.apply(n,r),u(),s=!0}},x.debounce=function(e,t){var n;return function(){var r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},x.wrap=function(e,t){return function(){var n=u.apply([e],arguments);return t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)l.call(e,n)&&(t[t.length]=n);return t},x.values=function(e){return x.map(e,x.identity)},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(o.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])}),e},x.defaults=function(e){return T(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isEqual=function(e,t){return k(e,t,[])},x.isEmpty=function(e){if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(l.call(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType==1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},x.isArguments=function(e){return f.call(e)=="[object Arguments]"},x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!l.call(e,"callee")}),x.isFunction=function(e){return f.call(e)=="[object Function]"},x.isString=function(e){return f.call(e)=="[object String]"},x.isNumber=function(e){return f.call(e)=="[object Number]"},x.isNaN=function(e){return e!==e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isDate=function(e){return f.call(e)=="[object Date]"},x.isRegExp=function(e){return f.call(e)=="[object RegExp]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},x.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.mixin=function(e){T(x.functions(e),function(t){M(t,x[t]=e[t])})};var L=0;x.uniqueId=function(e){var t=L++;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},x.template=function(e,t){var n=x.templateSettings,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape,function(e,t){return"',_.escape("+t.replace(/\\'/g,"'")+"),'"}).replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",i=new Function("obj","_",r);return t?i(t,x):function(e){return i.call(this,e,x)}};var A=function(e){this._wrapped=e};x.prototype=A.prototype;var O=function(e,t){return t?x(e).chain():e},M=function(e,t){A.prototype[e]=function(){var e=o.call(arguments);return a.call(e,this._wrapped),O(t.apply(x,e),this._chain)}};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];A.prototype[e]=function(){return t.apply(this._wrapped,arguments),O(this._wrapped,this._chain)}}),T(["concat","join","slice"],function(e){var t=r[e];A.prototype[e]=function(){return O(t.apply(this._wrapped,arguments),this._chain)}}),A.prototype.chain=function(){return this._chain=!0,this},A.prototype.value=function(){return this._wrapped}}.call(this),function(){var e=this,t=e.Backbone,n;typeof exports!="undefined"?n=exports:n=e.Backbone={},n.VERSION="0.5.3";var r=e._;!r&&typeof require!="undefined"&&(r=require("underscore")._);var i=e.jQuery||e.Zepto;n.noConflict=function(){return e.Backbone=t,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.Events={bind:function(e,t,n){var r=this._callbacks||(this._callbacks={}),i=r[e]||(r[e]=[]);return i.push([t,n]),this},unbind:function(e,t){var n;if(!e)this._callbacks={};else if(n=this._callbacks)if(!t)n[e]=[];else{var r=n[e];if(!r)return this;for(var i=0,s=r.length;i<s;i++)if(r[i]&&t===r[i][0]){r[i]=null;break}}return this},trigger:function(e){var t,n,r,i,s,o=2;if(!(n=this._callbacks))return this;while(o--){r=o?e:"all";if(t=n[r])for(var u=0,a=t.length;u<a;u++)(i=t[u])?(s=o?Array.prototype.slice.call(arguments,1):arguments,i[0].apply(i[1]||this,s)):(t.splice(u,1),u--,a--)}return this}},n.Model=function(e,t){var n;e||(e={});if(n=this.defaults)r.isFunction(n)&&(n=n.call(this)),e=r.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=r.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},r.extend(n.Model.prototype,n.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.attributes[e];return this._escapedAttributes[e]=S(n==null?"":""+n)},has:function(e){return this.attributes[e]!=null},set:function(e,t){t||(t={});if(!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var s=this._changing;this._changing=!0;for(var o in e){var u=e[o];r.isEqual(n[o],u)||(n[o]=u,delete i[o],this._changed=!0,t.silent||this.trigger("change:"+o,this,u,t))}return!s&&!t.silent&&this._changed&&this.change(t),this._changing=!1,this},unset:function(e,t){if(e in this.attributes){t||(t={});var n=this.attributes[e],r={};return r[e]=void 0,!t.silent&&this.validate&&!this._performValidation(r,t)?!1:(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change
(t)),this)}return this},clear:function(e){e||(e={});var t,n=this.attributes,r={};for(t in n)r[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(r,e))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){if(!t.set(t.parse(n,s),e))return!1;r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},save:function(e,t){t||(t={});if(e&&!this.set(e,t))return!1;var r=this,i=t.success;t.success=function(e,n,s){if(!r.set(r.parse(e,s),t))return!1;i&&i(r,e,s)},t.error=E(t.error,r,t);var s=this.isNew()?"create":"update";return(this.sync||n.sync).call(this,s,this,t)},destroy:function(e){e||(e={});if(this.isNew())return this.trigger("destroy",this,this.collection,e);var t=this,r=e.success;return e.success=function(n){t.trigger("destroy",t,t.collection,e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"delete",this,e)},url:function(){var e=b(this.collection)||this.urlRoot||w();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(e){this.trigger("change",this,e),this._previousAttributes=r.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1;for(var i in e)r.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return!e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return r.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),n.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),r.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},r.extend(n.Collection.prototype,n.Events,{model:n.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){t[e.add?"add":"reset"](t.parse(n,s),e),r&&r(t,n)},e.error=E(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var r=t.success;return t.success=function(e,i,s){n.add(e,t),r&&r(e,i,s)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return r(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof n.Model)e.collection||(e.collection=this);else{var r=e;e=new this.model(r,{collection:this}),e.validate&&!e._performValidation(r,t)&&(e=!1)}return e},_add:function(e,t){t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var n=this.getByCid(e);if(n)throw new Error(["Can't add the same model to a set twice",n.id]);this._byId[e.id]=e,this._byCid[e.cid]=e;var r=t.at!=null?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length;return this.models.splice(r,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),e=this.getByCid(e)||this.get(e),e?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this._remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];r.each(s,function(e){n.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var o=/:([\w\d]+)/g,u=/\*([\w\d]+)/g,a=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(n.Router.prototype,n.Events,{initialize:function(){},route:function(e,t,i){n.history||(n.history=new n.History),r.isRegExp(e)||(e=this._routeToRegExp(e)),n.history.route(e,r.bind(function(n){var r=this._extractParameters(e,n);i.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r))},this))},navigate:function(e,t){n.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(a,"\\$&").replace(o,"([^/]*)").replace(u,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),n.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")};var f=/^#*/,l=/msie [\w.]+/,c=!1;r.extend(n.History.prototype,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),e.indexOf(this.options.root)==0&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(f,""))},start:function(e){if(c)throw new Error("Backbone.history has already been started");this.options=r.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,s=l.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);s&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?i(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!s?i(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=t,c=!0;var o=window.location,u=o.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&o.hash&&(this.fragment=o.hash.replace(f,""),window.history.replaceState({},document.title,o.protocol+"//"+o.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.iframe.location.hash));if(t==this.fragment||t==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){var n=(e||"").replace(f,"");if(this.fragment==n||this.fragment==decodeURIComponent(n))return;if(this._hasPushState){var r=window.location;n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,r.protocol+"//"+r.host+n)}else window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=n);t&&this.loadUrl(e)}}),n.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var h=function(e){return i(e,this.el)},p=/^(\S+)\s*(.*)$/,d=["model","collection","el","id","attributes","className","tagName"];r.extend(n.View.prototype,n.Events,{tagName:"div",$:h,initialize:function(){},render:function(){return this},remove:function(){return i(this.el).remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&i(r).attr(t),n&&i(r).html(n),r},delegateEvents:function(e){if(!e&&!(e=this.events))return;r.isFunction(e)&&(e=e.call(this)),i(this.el).unbind(".delegateEvents"+this.cid);for(var t in e){var n=this[e[t]];if(!n)throw new Error('Event "'+e[t]+'" does not exist');var s=t.match(p),o=s[1],u=s[2];n=r.bind(n,this),o+=".delegateEvents"+this.cid,u===""?i(this.el).bind(o,n):i(this.el).delegate(u,o,n)}},_configure:function(e){this.options&&(e=r.extend({},this.options,e));for(var t=0,n=d.length;t<n;t++){var i=d[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(!this.el){var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}else r.isString(this.el)&&(this.el=i(this.el).get(0))}});var v=function(e,t){var n=y(this,e,t);return n.extend=this.extend,n};n.Model.extend=n.Collection.extend=n.Router.extend=n.View.extend=v;var m={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};n.sync=function(e,t,s){var o=m[e],u=r.extend({type:o,dataType:"json"},s);return u.url||(u.url=b(t)||w()),!u.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),n.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),n.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(n.emulateJSON&&(u.data._method=o),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),u.type!=="GET"&&!n.emulateJSON&&(u.processData=!1),i.ajax(u)};var g=function(){},y=function(e,t,n){var i;return t&&t.hasOwnProperty("constructor")?i=t.constructor:i=function(){return e.apply(this,arguments)},r.extend(i,e),g.prototype=e.prototype,i.prototype=new g,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},b=function(e){return!e||!e.url?null:r.isFunction(e.url)?e.url():e.url},w=function(){throw new Error('A "url" property or function must be specified')},E=function(e,t,n){return function(r){e?e(t,r,n):t.trigger("error",t,r,n)}},S=function(e){return e.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),function(e){"use strict";function n(e,t){var r=[];return _.each(e.participants,function(s,o){s.participants.length>0?r=r.concat(n(s,t)):r.push({plain_name:s.name,name:s.name,y:Math.max(s.percent_of_group,0),value:s.plain_amount,parentIndex:t,brightness:.2-o/e.participants.length/5})}),r}Backstop.Charts=Backstop.Charts||{};var t=Backstop.Charts;t.AssetGroupParticipantContributions=Backbone.Model.extend({url:function(){return this.get("url")},save:function(){throw new Error("Attempt to mutate Chart model.")},title:function(){return"Asset Type Contributions"},seriesData:function(){var e=[],t=_.map(this.get("types"),function(t,r){return e=e.concat(n(t,r)),{name:t.name,y:Math.max(t.percent_of_group,0),value:t.plain_amount}});return[t,e]},parse:function(e){return e.asset_group}})}(undefined),function(e){"use strict";Backstop.Charts=Backstop.Charts||{};var t=Backstop.Charts;t.Holdings=Backbone.Model.extend({url:function(){return this.get("url")},save:function(){throw new Error("Attempt to mutate Chart model.")},title:function(){return"Holdings"},seriesData:function(){var e={},t;_.map(this.get("rows"),function(n,r){var i=n.asset_type||n.type;_.isUndefined(e[i])&&(e[i]=0),e[i]+=Math.max(n.value,0),t=n.currency_symbol});var n=_.keys(e),r=_.reduce(_.values(e),function(e,t){return e+t},0),i=_.map(this.get("rows"),function(e,t){var i=t/n.length*.02;return{name:e.name,plain_name:e.plain_name,currency_symbol:e.currency_symbol,y:Math.max(e.value/r,0),value:Math.max(e.value,0),parentIndex:n.indexOf(e.asset_type||e.type),brightness:i}});i=i.sort(function(e,t){return e.parentIndex-t.parentIndex});var s=_.map(_.keys(e),function(n,i){var s=n,o=e[n];return{name:s,y:Math.max(o/r,0),value:Math.max(o.toFixed(2),0),currency_symbol:t}});return[s,i]},parse:function(e){return e}})}(undefined),function(e){"use strict";function n(e,t){var n;"plain_name"in e?e.plain_name.length>=40?n=e.plain_name.substr(0,37)+". . .":n=e.plain_name:n=e.name;var r=e.currency_symbol||"$",i=e.value||t,s=""+(t*100).toFixed(2)+"%";return{name:e.name,displayName:n,currencySymbol:r,value:Highcharts.numberFormat(i),percentOfGroup:s}}Backstop.Charts=Backstop.Charts||{};var t=Backstop.Charts;Backstop.Charts.innerDataDefaultTemplate="<b>{{{name}}}</b>",Backstop.Charts.outerDataDefaultTemplate="<b>{{{displayName}}}</b><br/>{{{currencySymbol}}}{{{value}}}",Backstop.Charts.toolTipDefaultTemplate="<b>{{{displayName}}}</b><br/>{{{currencySymbol}}}{{{value}}}<br/>{{{percentOfGroup}}}",t.Pie=Backbone.View.extend({initialize:function(e){this.model.bind("all",this.render,this),this.targetId=e.targetId||"pie-chart",this.title=e.title||"",this.width=parseInt(e.width)||null,this.height=parseInt(e.height)||null,this.colorInner=e.colorInner||"white",this.colorOuter=e.colorOuter||"grey",this.borderWidth=parseInt(e.borderWidth)||0,this.borderColor=e.borderColor||"black",this.borderRadius=parseInt(e.borderRadius)||0,this.backgroundColor=e.backgroundColor||"white",this.plotBackgroundColor=e.plotBackgroundColor||e.backgroundColor,this.fontFamily=e.fontFamily||"inherit !important",this.colors=e.colors||Highcharts.getOptions().colors,this.innerDataTemplate=e.innerDataTemplate||Backstop.Charts.innerDataDefaultTemplate,this.outerDataTemplate=e.outerDataTemplate||Backstop.Charts.outerDataDefaultTemplate,this.toolTipTemplate=e.toolTipTemplate||Backstop.Charts.toolTipDefaultTemplate},render:function(){var t=this.colorize(this.model.seriesData()),n=e("#"+this.targetId);Highcharts.setOptions({lang:{contextButtonTitle:I18n.t("charts.export_chart")}}),this.chart=new Highcharts.Chart({chart:{renderTo:this.targetId,width:this.width,height:this.height,type:"pie",borderColor:this.borderColor,borderWidth:this.borderWidth,borderRadius:this.borderRadius,backgroundColor:this.backgroundColor,plotBackgroundColor:this.plotBackgroundColor,style:{fontFamily:this.fontFamily}},plotOptions:{pie:{shadow:!1}},title:{text:this.title},yAxis:{title:{text:this.title}},exporting:{url:"https://charts.backstopsolutions.com/highcharts-export/"},credits:{enabled:!1},tooltip:{formatter:this.tooltipFormatter(this.toolTipTemplate)},series:[{data:t[0],size:"65%",dataLabels:{formatter:this.dataFormatter(this.innerDataTemplate),color:this.colorInner,distance:-30}},{data:t[1],size:"80%",innerSize:"65%",dataLabels:{formatter:this.dataFormatter(this.outerDataTemplate,.01),color:this.colorOuter,distance:30}}]})},colorsByIndex:function(e){return e%=this.colors.length,this.colors[e]},colorize:function(e){var t=this,n=e[0],r=e[1],i=n.length===this.colors.length+1;return n=_.map(n,function(e,r){var s=r===n.length-1,o=i&&s?r+1:r;return e.color=t.colorsByIndex(o),e}),r=_.map(r,function(e,r){var s=e.parentIndex==n.length-1,o=i&&s?e.parentIndex+1:e.parentIndex,u=t.colorsByIndex(o);return e.color=Highcharts.Color(u).brighten(e.brightness).get(),e}),[n,r]},dataFormatter:function(t,r){return function(){return this.y<(r||.2)?null:e.mustache(t,n(this.point,this.y))}},tooltipFormatter:function(t){return function(){return e.mustache(t,n(this.point,this.y))}}}),e(function(){e(".js-pie-chart").each(function(){var t=e(this),n=t.data("model"),r=t.data("url"),i=t.attr("id"),s=t.data("title"),o=t.data("width"),u=t.data("height"),a=t.data("border-color"),f=t.data("color-inner"),l=t.data("color-outer"),c=t.data("border-radius"),h=t.data("background-color"),p=t.data("plot-background-color"),d=t.data("font-family"),v=t.data("inner-data-template"),m=t.data("outer-data-template"),g=t.data("tool-tip-template"),y;t.attr("data-colors")&&(y=t.data("colors").split(","));var b=new Backstop.Charts[n]({url:r});b.fetch(),new Backstop.Charts.Pie({model:b,targetId:i,title:s,height:u,width:o,borderColor:a,colorInner:f,colorOuter:l,borderRadius:c,backgroundColor:h,plotBackgroundColor:p,fontFamily:d,colors:y,innerDataTemplate:v,outerDataTemplate:m,toolTipTemplate:g})})})}(window.jQuery);var I18n=I18n||{};I18n.translations={en:{date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y",long_month_year:"%B %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "}},errors:{format:"%{attribute} %{message}",messages:{inclusion:"is not included in the list",exclusion:"is reserved",invalid:"is invalid",confirmation:"doesn't match confirmation",accepted:"must be accepted",empty:"can't be empty",blank:"can't be blank",too_long:"is too long (maximum is %{count} characters)",too_short:"is too short (minimum is %{count} characters)",wrong_length:"is the wrong length (should be %{count} characters)",not_a_number:"is not a number",not_an_integer:"must be an integer",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",equal_to:"must be equal to %{count}",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",odd:"must be odd",even:"must be even",in_between:"must be in between %{min} and %{max}",already_confirmed:"was already confirmed, please try signing in",confirmation_period_expired:"needs to be confirmed within %{period}, please request a new one",expired:"has expired, please request a new one",not_found:"not found",not_locked:"was not locked",not_saved:{one:"1 error prohibited this %{resource} from being saved:",other:"%{count} errors prohibited this %{resource} from being saved:"}}},activerecord:{errors:{messages:{taken:"has already been taken",record_invalid:"Validation failed: %{errors}"},models:{account_value:{attributes:{investment_id:{taken:"You cannot save more than one account value to the same account for the same period"}}},document:{attributes:{filename:{blank:"must be present for each Document"}}},page:{attributes:{title:{taken:"has already been taken. Please choose another title."},name:{taken:"has already been taken. Please choose another name.",no_route_clobber:"'%{name}' is already used by the system. Please choose another Short URL for the page.",not_just_numeric:"'%{name}' must contain non-numeric characters.",no_forward_slashes:"'%{name}' can not contan a forward slash."}}}}},models:{fund:"Product",hedge_fund:"HedgeFund"},attributes:{form:{send_to:"Email Recipient"},group:{identifier:"Name"},page:{name:"Slug",template:"Template File"},user:{identifier:"Email"},owner:{incoming_email_address:"Email from this site for you will be sent to",outgoing_email_address:'When this site sends email to users, the "From" address will be',outgoing_email_name:'When this site sends email to users, the "From" name will be',bcc_email_address:"Email address that receives a copy of all emails sent from InvestorBridge"}}},number:{format:{separator:".",delimiter:",",precision:3,significant:!1,strip_insignificant_zeros:!1},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2,significant:!1,strip_insignificant_zeros:!1}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}},human:{format:{delimiter:"",precision:3,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},kb:"KB",mb:"MB",gb:"GB",tb:"TB"}},decimal_units:{format:"%n %u",units:{unit:"",thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion"}}}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"about 1 month",other:"about %{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},over_x_years:{one:"over 1 year",other:"over %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}},helpers:{select:{prompt:"Please select"},submit:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}"},button:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}"}},will_paginate:{previous_label:"&#8592; Previous",next_label:"Next &#8594;",page_gap:"&hellip;",page_entries_info:{single_page:{zero:"No %{model} found",one:"Displaying 1 %{model}",other:"Displaying all %{count} %{model}"},single_page_html:{zero:"No %{model} found",one:"Displaying <b>1</b> %{model}",other:"Displaying <b>all&nbsp;%{count}</b> %{model}"},multi_page:"Displaying %{model} %{from} - %{to} of %{count} in total",multi_page_html:"Displaying %{model} <b>%{from}&nbsp;-&nbsp;%{to}</b> of <b>%{count}</b> in total"}},devise:{confirmations:{confirmed:"Your account was successfully confirmed. You are now signed in.",send_instructions:"You will receive an email with instructions about how to confirm your account in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes."},failure:{already_authenticated:"You are already signed in.",inactive:"Invalid email or password.",invalid:"Invalid email or password.",invalid_token:"Invalid authentication token.",locked:"Your account is locked.",not_found_in_database:"Invalid email or password.",timeout:"Your session expired, please sign in again to continue.",unauthenticated:"You need to sign in or sign up before continuing.",unconfirmed:"You have to confirm your account before continuing."},mailer:{confirmation_instructions:{subject:"Confirmation instructions"},reset_password_instructions:{subject:"Reset password instructions"},unlock_instructions:{subject:"Unlock Instructions"}},omniauth_callbacks:{failure:'Could not authenticate you from %{kind} because "%{reason}".',success:"Successfully authenticated from %{kind} account."},passwords:{no_token:"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.",send_instructions:"You will receive an email with instructions about how to reset your password in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",updated:"Your password was changed successfully. You are now signed in.",updated_not_active:"Your password was changed successfully."},registrations:{destroyed:"Bye! Your account was successfully cancelled. We hope to see you again soon.",signed_up:"Welcome! You have signed up successfully.",signed_up_but_inactive:"You have signed up successfully. However, we could not sign you in because your account is not yet activated.",signed_up_but_locked:"You have signed up successfully. However, we could not sign you in because your account is locked.",signed_up_but_unconfirmed:"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.",update_needs_confirmation:"You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address.",updated:"You updated your account successfully."},sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully.",locked:'Too many unsuccessful logins have been attempted for this username. The account has been temporarily disabled. If you have forgotten your password, please click "Forgot your Password?" to immediately reactivate your account.'},unlocks:{send_instructions:"You will receive an email with instructions about how to unlock your account in a few minutes.",send_paranoid_instructions:"If your account exists, you will receive an email with instructions about how to unlock it in a few minutes.",unlocked:"Your account has been unlocked successfully. Please sign in to continue."}},account_pretty_name:"Account",accounts_pretty_name:"Accounts",assetgroup_pretty_name:"Asset Group",asset_type:"Asset Type",attachable:"Documents",attachable_pretty_name:"Document",call_pretty_name:"Call",date_pretty:"Date",email:"Email",formsubmission_pretty_name:"Submitted Document",fund_pretty_name:"Fund",fund_values_pretty_name:"Fund Values",funds_pretty_name:"Funds",group_pretty_name:"Group",hedgefund_pretty_name:"Hedge Fund",hedgefundholding_pretty_name:"Hedge Fund Holding",holding_pretty_name:"Holding",holdings_pretty_name:"Holdings",investment_pretty_name:"Account",managedaccount_pretty_name:"Managed Account",managedholding_pretty_name:"Managed Holding",meeting_pretty_name:"Meeting",name:"Name",none:"None",note_pretty_name:"Note",organization_pretty_name:"Management Company",privateequityfund_pretty_name:"Private Equity Fund",privateequityholding_pretty_name:"Private Equity Holding",product_pretty_name:"Product",strategy:"Strategy",user_pretty_name:"User",author_pretty_name:"User",transactions:{CALL:"Call",COMMITMENT:"Commitment",DISTRIBUTION:"Distribution",PURCHASE:"Purchase",Purchase:"Purchase",REDEEM:"Redeem",Redemption:"Redemption",Sale:"Sale",Subscription:"Subscription",SUBSCRIPTION:"Subscription",TRANSFER:"Transfer",TRANSFER_PURCHASE:"Transfer Purchase",TRANSFER_SALE:"Transfer Sale"},attachables:{apply:"Apply",associated_with:"Associated With",attachments:"Attachments",attendees:"Attendees",clear:"Clear",correspondence:"Correspondence",direct_link:"direct link",effective_date:"Date",date:"Date",from:"From",hide_advanced:"Hide Advanced",import_date:"Import Date",imported_during:"Correspondence imported during the most recent %{calendar_days} calendar days.",imported_since:"imported since",location:"Location",recent:"Recent",recent_correspondence:"Recent Correspondence",search_by_association:"Search by Association",search_by_date:"Search by Date",set:"Set",show_advanced:"Show Advanced",title:"Title",to:"To",type:"Type",view_all_tags:"View All Correspondence Types",viewed_by:"Viewed by"},attachable_types:{Call:"Call",Document:"Document",Email:"Email",Meeting:"Meeting",Note:"Note"},funds:{fund_size:"Fund Size",vintage_year:"Vintage Year",regional_focus:"Regional Focus"},investments:{"3_year_annualized":"3 Year Ann","5_year_annualized":"5 Year Ann","10_year_annualized":"10 Year Ann",account_details:"Account Details",account_documents:"Account Documents",account_name:"Account Name",account_values:"Account Values",accounts_in_fund:"Accounts in Fund",amount:"Amount",appreciation:"Appreciation",asset_group_name:"Asset Group Name",asset_group_values:"Asset Group Values",asset_types:"Asset Types",aum:"AUM",aum_history:"AUM History",aum_millions:"Assets Under Management (in millions)",benchmark:"Benchmark",breakdown_asset:"Breakdown by Asset Type",closing_value:"Closing Value",contributed_amount:"Contributed Amount",currency:"Currency",current_value:"Current Value",date_added:"Date Added",date_removed:"Date Removed",denotes_estimate:"Denotes an Estimate",denotes_partial:"Denotes a Partial Period Estimate",details:"Details",end_date:"End Date",fees:"Fees",fund_name:"Fund Name",hedge_fund_name:"Hedge Fund Name",hedge_funds:"Hedge Funds",historic_and_aum:"Historic Returns and AUM",historic_performance:"Historic Performance",holding_name:"Holding Name",investment_values:"Investment Values",investments_by_strategy:"Investments by Strategy",is_return_estimate:"Is the Return an Estimate",label_aum:"Assets Under Management (in millions)",label_return:"Returns",ltd:"LTD",ltd_compounded:"LTD Comp",ltd_irr:"Life to Date IRR",ltd_return:"LTD Return",ltd_total_redeemed:"LTD Total Redeemed",ltd_year_annualized:"LTD Year Ann",management_company:"Management Company",most_recent_appreciation:"Most Recent Net Appreciation",most_recent_period:"Most Recent Period",most_recent_return:"Most Recent Reported Return",mtd:"MTD",mtd_compounded:"MTD Comp",mtd_return:"MTD Return",net_appreciation:"Net Appreciation",net_income_for_month:"Net Income for Month",participant_name:"Participant Name",participant_since:"Participant Since",participant_type:"Participant Type",participants:"Participants",participants_for:"Participants for",percent_contribution:"Percent Contribution",percent_of_group:"Percent of Group",performance:"Performance",performance_snapshot:"Performance Snapshot",period:"Period",portfolio:"Portfolio",portfolio_name:"Portfolio Name",private_equity_fund_name:"Private Equity Fund Name",private_equity_funds:"Private Equity Funds",product_name:"Product Name",prospect_type:"Prospect Type",prospective_funds:"Prospective Funds",qtd:"QTD",qtd_compounded:"QTD Comp",related_funds:"Related Funds",reported_return:"Reported Return","return":"Return",return_history:"Return History",start_date:"Start Date",starting_value:"Starting Value",stop_date:"Stop Date",terms:"Terms",total_invested:"Total Invested",transactions:"Transactions",underlying_asset:"Underlying Asset",underlying_type:"Underlying Type",value_as_of:"Value as Of",values:"Values",values_for_fund:"Values for Fund",values_for_hedge_fund:"Values for Hedge Fund",view_accounts:"View Accounts",view_funds:"View Funds",view_hf_details:"To view individual hedge fund details click on the hedge fund name",view_holdings:"View Holdings",view_hf_holdings:"View Hedge Fund Holdings",view_pe_holdings:"View Private Equity Holdings",view_participants:"View Participants",view_pe_funds:"View Private Equity Funds",year:"Year",your_accounts:"Your Accounts in",ytd:"YTD",ytd_compounded:"YTD Comp",ytd_return:"YTD Return"},fund_details:{"Accepting New Investments":"Accepting New Investments","Additional Investment":"Additional Investment",Clawback:"Clawback","Date Closed":"Date Closed",Gate:"Gate","Gate Percent":"Gate Percent","High Water Mark":"High Water Mark","High Water Terms":"High Water Terms","Hurdle Rate":"Hurdle Rate","Hurdle Terms":"Hurdle Terms","Incentive Fee Percent":"Incentive Fee","Inception Date":"Inception Date","Initial Lockup Months":"Initial Lockup Months","Ltd Compounded Return":"Ltd Compounded Return","Management Fee Percent":"Management Fee","Maximum Side Pocket Percent":"Maximum Side Pocket","Minimum Investment":"Minimum Investment","Offering Memorandum Date":"Offering Memorandum Date","Other Fees":"Other Fees","Redemption Fee":"Redemption Fee","Redemption Notice":"Redemption Notice",Redemptions:"Redemptions","Regional Focus":"Regional Focus","Registration Type":"Registration Type","Sales Fee":"Sales Fee","Sector Industry":"Sector Industry","Side Pocket":"Side Pocket","Soft Lockup":"Soft Lockup","Soft Lockup Months":"Soft Lockup Months",Subscriptions:"Subscriptions","Us Taxable":"Us Taxable","Use Of Leverage":"Use Of Leverage","Uses Leverage"
:"Uses Leverage","Ytd Compounded Return":"Ytd Compounded Return"},hedgefund_details:{"3 Month Rolling Compounded Return":"3 Month Rolling Compounded Return","6 Month Rolling Compounded Return":"6 Month Rolling Compounded Return","12 Month Rolling Compounded Return":"12 Month Rolling Compounded Return","24 Month Largest Drawdown":"24 Month Largest Drawdown","24 Month Rolling Compounded Return":"24 Month Rolling Compounded Return","24 Month Standard Deviation":"24 Month Standard Deviation","Asset Type":"Strategy","Backstop Id":"Backstop Id","Benchmark A Name":"Benchmark A Name","Benchmark A Symbol":"Benchmark A Symbol","Benchmark B Name":"Benchmark B Name","Benchmark B Symbol":"Benchmark B Symbol",Currency:"Currency",Description:"Description","Firm AUM":"Firm AUM","Fund Manager":"Fund Manager","Incentive Fee":"Incentive Fee","Inception Date":"Inception Date","Investment Details":"Investment Details","Is Product?":"Is Product?","Management Company":"Management Company","Management Fee":"Management Fee","Manager Bio":"Manager Bio","Tracked Since":"Tracked Since"},asset_details:{"Asset Group Name":"Asset Group Name","Benchmark A":"Benchmark A","Benchmark A Name":"Benchmark A Name","Benchmark A Symbol":"Benchmark A Symbol","Benchmark B":"Benchmark B","Benchmark B Name":"Benchmark B Name","Benchmark B Symbol":"Benchmark B Symbol","Benchmark C":"Benchmark C","Benchmark C Name":"Benchmark C Name","Benchmark C Symbol":"Benchmark C Symbol","Benchmark D":"Benchmark D","Benchmark D Name":"Benchmark D Name","Benchmark D Symbol":"Benchmark D Symbol","Benchmark E":"Benchmark E","Benchmark E Name":"Benchmark E Name","Benchmark E Symbol":"Benchmark E Symbol","Benchmark F":"Benchmark F","Benchmark F Name":"Benchmark F Name","Benchmark G":"Benchmark G","Benchmark G Name":"Benchmark G Name","Benchmark H":"Benchmark H","Benchmark H Name":"Benchmark H Name","Currency Code":"Currency Code","Current Month Compounded Return":"Current Month Compounded Return","Current Value":"Current Value","LTD Compounded Return":"LTD Compounded Return","LTD IRR":"LTD IRR","LTD Total Invested Over Period":"LTD Total Invested Over Period","LTD Total Redeemed Over Period":"LTD Total Redeemed Over Period","QTD Compounded Return":"QTD Compounded Return","Risk Free Benchmark":"Risk Free Benchmark","YTD Compounded Return":"YTD Compounded Return"},investment_details:{"Annualized IRR":"Annualized IRR","Annualized Return":"Annualized Return","Annualized Standard Deviation":"Annualized Standard Deviation","Average Monthly Gain":"Average Monthly Gain","Average Monthly Loss":"Average Monthly Loss","Current Month % Of Profitable Months":"Current Month % Of Profitable Months","Current Month Annualized Return":"Current Month Annualized Return","Current Month Average Gain":"Current Month Average Gain","Current Month Average Loss":"Current Month Average Loss","Current Month IRR":"Current Month IRR",Earnings:"Earnings",Gate:"Gate","Hedge Fund":"Hedge Fund","Incentive Fee":"Incentive Fee","Investor Since":"Investor Since","LTD Alpha":"LTD Alpha","LTD Beta":"LTD Beta","LTD Compound":"LTD Compound","LTD Correlation":"LTD Correlation (r)","LTD Earnings":"LTD Earnings","LTD Sharpe Ratio":"LTD Sharpe Ratio","LTD Sortino Ratio":"LTD Sortino Ratio","Last Valuation":"Last Valuation","Management Fee":"Management Fee","Maximum Drawdown":"Maximum Drawdown","Maximum Side Pocket":"Maximum Side Pocket","Percent of Portfolio":"Percent of Portfolio","Profitable Percentage":"Profitable Percentage","QTD Return":"QTD Return","Returns and Risk":"Returns & Risk","Total Invested":"Total Invested","Total Redemptions":"Total Redemptions",Type:"Type","YTD Return":"YTD Return"},charts:{distibution_title:"Distribution of Returns Chart",frequency:"Frequency (months)",monthly_returns:"Monthly Returns",value_of_1000:"Value of $1000",vami_title:"VAMI chart",export_chart:"Export Chart"},excel_export:{link_text:"Export to Excel",button_text:"Export to Excel"},user:{back_to_top:"Back to Top",logout:"Log Out",menu:"Menu",printed_by:"Printed by",welcome:"Welcome"},password:{accept_our:"Accept our",confirm_password:"Submit",enter_pw:"Set Your Password",enter_pw_text:"Enter in a new password here",fair_def:"Fair - contains two of the above parameters",forgot_password:"Forgot Password?",good_def:"Good - contains four of the above parameters",has_6:"Has more than 6 characters",has_12:"Has more than 12 characters",includes_lower:"Includes lower case letters",includes_numbers:"Includes numbers",includes_special:"Includes special characters, such as @ # $ % ^ & * ? ~ - ( )",includes_upper:"Includes upper case letters",medium_def:"Medium - contains three of the above parameters",minimum_strength:"The required minimum strength level for your password is",password:"Password",password_confirmation:"Confirm Password",password_reset:"Password Reset",reset_instructions:"Please enter your email address in the field below, then click the Reset Password button. A new invitation message will be sent to your email address.",reset_password:"Reset Password",secure_def:"Secure - contains five of the above parameters",strength_indicator:"This level is indicated by the hash mark in the meter that appears once you start typing in the Password field",strength_levels:"The strength levels and the requirements for each are",submit:"Submit",terms_of_use:"Terms of Use",user:"User",very_secure_def:"Very Secure - contains all six of the above parameters",weak_def:"Weak - contains only one of the above parameters",what_makes_pw_secure:"What makes a password more secure"},drm:{about_secure_pdf:"About Secure PDFs",about_secure_text:"This website uses a secure file encryption system to control access to certain PDF documents. To view an encrypted PDF file you must be logged in to the website, and you must open it using Adobe Reader/Acrobat with the FileOpen plug-in installed. The FileOpen plug-in allow users to view the PDF, but limits the ability to save, print or forward a readable copy of the file.",adobe_link:"download Adobe Reader",adobe_text:"If you do not have Adobe Reader/Acrobat, you will need to",document_download:"Document Download",download_error:"Error(s) Occurred Downloading This Document",fileopen_link:"download FileOpen",fileopen_text1:"If you do not have the FileOpen plug-in,",fileopen_text2:"(You should be prompted to install the plug-in when you download your first secure PDF.)",if_clicking:"If clicking on the link above does not open the document, right-click on the link, save the document to your computer and open it in Adobe Reader/Acrobat. If you continue to have difficulty, please read the configuration and troubleshooting details below.",if_not:"If not please try this",secure_document_download:"Secure Document Download",start_download:"Start Download",taken_to_document:"You will be taken to your Document shortly"},instructions:{search_attachable:"Please choose the Document Type you would like to view in the drop down menu.  Clicking on the magnifying icon in the document table to open search options.  Clicking on the calendar in the document table will open a Date Filter."},messages:{bad_login:"<br/>Email and Password combination was not found.<br/><br/>\nIf you continue to have problems logging in please <a href='%{password_reset_url}'>Reset Your Password Here</a><br/><br/>\n",inactive_login:"Your user account has not been activated yet. Please contact your site administrator for assistance.",about_to_lock:"Warning: The next unsuccessful login attempt with this username will temporarily disable the account for %{ban_time} minutes.",login_required:"Please login to access the requested page.",click_to_download:"click to download",config_updated:"Configuration updated!",doc_only_import_unavailable:"Documents & Activity import cannot be run until a full import has successfully completed. Please run a full import and try again.",download_problem:"There was a problem with your download. Please try again.",email_sent:"An email has been sent to that address with instructions on how to reset your password.",emails_sent_to:"Emails Were Sent to %{user_count} user(s)",forbidden:"You do not have the proper permissions to view this page.",form_deleted:"Form on %{page_title} was successfully deleted.",form_disabled:"Form submissions are currently disabled.",form_errors:"Your Form was not saved because of these errors:",form_success:"Form on %{page_title} was successfully created.",form_updated:"Form on %{page_title} was successfully updated.",import_running:"Import already running. Can't run another.",logged_document:"You must be logged in to view this secure document.",login_banned:"Too many unsuccessful logins have been attempted for this username. The account has been temporarily disabled for %{ban_time} minutes. If you have forgotten your password, please click 'Forgot your Password?' to immediately reactivate your account.",login_warning:"Warning: The next unsuccessful login attempt with this username will temporarily disable the account for %{ban_time} minutes.",must_be_author:"You must be logged in as an author to view this page",no_permission:"You do not have the proper permissions to view that page.",not_activiated:"Your user account has not been activated yet. Please contact your site administrator for assistance.",password_blank:"Password must not be blank",password_success:"Password successfully updated.",please:"Please",pw_reset_expired:"Your password reset link has expired. Please contact your site administrator for assistance.",record_created:"%{record} was created successfully.",record_updated:"%{record} was updated successfully.",record_invalid:"%{record} was not valid.",requires_flash:"This page requires Adobe Flash to upload documents.",sent_success:"Your message has been successfully sent.",server_timeout:"InvestorBridge was unable to connect to the background server. Please contact your Backstop Support.",unconfigured_import:"Backstop Import Is Not Configured. Please contact your administrator.",user_inactive:"Previewing is unavailable for inactive users.",user_only_import_unavailable:"User import cannot be run until a full import has successfully completed. Please run a full import and try again.",visibility_failure:"Visibility import failed.",visibility_import_timeout:"Visibility import timed out."},session:{timeout:{message:"You have been logged out due to session inactivity."}},navigation:{admin_home:{text:"Admin Home",tooltip:"Review Release Notes and Support Documents"},edit_content:{text:"Edit Content",tooltip:"Edit Page Content"}},models:{account:{placeholder:{name:"[Account Name]"}},document:{to_s:"Title: %{title}.  Other_id (from Backstop): %{other_id}"}},formats:{na:"N/A",date:"%m-%d-%Y",time:"%I:%M%p",datetime:"%m-%d-%Y %I:%M%p %Z"},month:{month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},quarter:{names:[null,"Q1","Q2","Q3","Q4"]},scheduled_tasks:{type:{full_download:"Backstop Import",doc_only:"Document Only Import",user_only:"User Only Import"}},email_template:{blank_template:"Blank Template",general_email:"General Email",password_reset:"Password Reset Email"},system_api:{ip_regex:"^(192\\.168|127\\.0)\\.\\d+\\.\\d+$"},configuration:{revision:{not_found:"A revision file was not found at:%{REVISION_PATH}"},branch:{not_found:"A branch file was not found at:%{BRANCH_PATH}"}},parameter_filtering:{mask:"[U_CAN_NOT_HAZ]"},recaptcha:{errors:{verification_failed:"The Captcha value you entered is incorrect.  Please try again.",recaptcha_unavailable:"Captcha service is momentarily unavailable.  Please try again in a few minutes."}}}},function(e){function t(t){var n={};if(typeof t=="undefined")throw"Parse error reading link definition from server";try{return e.each(t,function(e,t){n[t.rel]=t.href}),n}catch(r){throw"Unparsable response from server: "+t}}Backstop.InvestorBridgeJson=function(e){this.data=e,this._links=t(e._links)},Backstop.InvestorBridgeJson.prototype.link=function(e){try{return this._links[e]}catch(t){throw"Unparsable response from server: "+this.data}}}(jQuery),function(e){function r(t,n,r){var i=e('meta[name="csrf-token"]').attr("content");i&&r.setRequestHeader("X-CSRF-Token",i)}Backstop.drm_on=e('meta[name="enable-enhanced-pdf-encryption"]').attr("content")=="true";var t=function(){this.drmd=e('meta[name="enable-enhanced-pdf-encryption"]').attr("content")=="true"};t.prototype.onCreate=function(e,t){if(this.drmd&&e._links[0].encrypting){t.going();var n=new Backstop.InvestorBridgeJson(e);Backstop.redirect(n.link("self"))}else t.handleStatus(e,undefined,function(e){t.going(),Backstop.redirect(e)})},Backstop.CreationHandler=t;var n=function(t){this.link=e(t),this.waiting(),this.createUrl=this.link.data("download-url"),this.statusUrl=this.link.data("status-url")};Backstop.DownloadPoller=n,n.prototype={start:function(){this.create(this.createUrl)},pollStatus:function(){var e=this;this.waiting(),this.handleStatus(undefined,undefined,function(t){e.link.attr("href",t),e.going()})},waiting:function(){if(e("p.download-in-progress").size()>0)return;var t=e("<p></p>");t.addClass("download-in-progress"),t.addClass("waiting-ajax"),t.html("Creating your download&hellip;"),this.link.hide(),this.link.after(t),this.link.addClass("waiting-ajax")},going:function(){this.link.next("p.download-in-progress").remove(),this.link.removeClass("waiting-ajax"),this.link.show()},create:function(n){var r=this;this.waiting(),e.ajax({url:n,type:"POST",dataType:"json",success:function(e,n){(new t).onCreate(e,r)},error:function(e,t,n){window.location.reload()}})},handleStatus:function(t,n,r){var i=this,s=function(e){(new Backstop.CreationHandler).drmd?i.going():Backstop.redirect(e)};if(t&&t._links){var o=new Backstop.InvestorBridgeJson(t);this.statusUrl=o.link("self")}var u=r;u===undefined&&(u=s),e.ajax({url:this.statusUrl,dataType:"json",success:function(t,n,r){var s=r.status,o=new Backstop.InvestorBridgeJson(t);if(s===202)setTimeout(function(){e.proxy(i.handleStatus(undefined,undefined,u),i)},500);else{var a=o.link("self");u(a)}},error:function(t,n,r){var s;try{s=jQuery.parseJSON(t.responseText).download.messages}catch(o){s=undefined}var u=e("<div class=error> <p>"+(s||"There was a problem creating your download, please try again.")+"</p></div>");t.status==410?i.create(i.createUrl):(e("#flash-div").html(u),u.fadeIn("fast"),i.going())},complete:function(e,t){}})}},e.fn.pollingDocumentDownload=function(){return this.each(function(){var t=e(this),r=t.data("backstop.pollingDocumentDownload");r||(t.delegate("a[data-download-url]","click",function(e){e.preventDefault(),(new n(this)).start()}),t.find("a[data-status-url]").each(function(){(new n(this)).pollStatus()}),t.data("backstop.pollingDocumentDownload",{poller:this}))})},n.init=function(){e.ajaxPrefilter(r),e("#body-content, #control-panel-bg").pollingDocumentDownload()},e(function(){n.init()})}(jQuery);var mejs=mejs||{};mejs.version="2.11.0",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){var t=0,n,r="",i="",s,o=document.getElementsByTagName("script"),u=o.length,a=e.length;for(;t<u;t++){s=o[t].src;for(n=0;n<a;n++){i=e[n];if(s.indexOf(i)>-1){r=s.substring(0,s.indexOf(i));break}}if(r!=="")break}return r},secondsToTimeCode:function(e,t,n,r){typeof n=="undefined"?n=!1:typeof r=="undefined"&&(r=25);var i=Math.floor(e/3600)%24,s=Math.floor(e/60)%60,o=Math.floor(e%60),u=Math.floor((e%1*r).toFixed(3)),a=(t||i>0?(i<10?"0"+i:i)+":":"")+(s<10?"0"+s:s)+":"+(o<10?"0"+o:o)+(n?":"+(u<10?"0"+u:u):"");return a},timeCodeToSeconds:function(e,t,n,r){typeof n=="undefined"?n=!1:typeof r=="undefined"&&(r=25);var i=e.split(":"),s=parseInt(i[0],10),o=parseInt(i[1],10),u=parseInt(i[2],10),a=0,f=0;return n&&(a=parseInt(i[3])/r),f=s*3600+o*60+u+a,f},convertSMPTEtoSeconds:function(e){if(typeof e!="string")return!1;e=e.replace(",",".");var t=0,n=e.indexOf(".")!=-1?e.split(".")[1].length:0,r=1;e=e.split(":").reverse();for(var i=0;i<e.length;i++)r=1,i>0&&(r=Math.pow(60,i)),t+=Number(e[i])*r;return Number(t.toFixed(n))},removeSwf:function(e){var t=document.getElementById(e);t&&/object|embed/i.test(t.nodeName)&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){t.readyState==4?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){var t=document.getElementById(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var n=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,n[0]>t[0]||n[0]==t[0]&&n[1]>t[1]||n[0]==t[0]&&n[1]==t[1]&&n[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,n,r,i){this.plugins[e]=this.detectPlugin(t,n,r,i)},detectPlugin:function(e,t,n,r){var i=[0,0,0],s,o,u;if(typeof this.nav.plugins!="undefined"&&typeof this.nav.plugins[e]=="object"){s=this.nav.plugins[e].description;if(s&&(typeof this.nav.mimeTypes=="undefined"||!this.nav.mimeTypes[t]||!!this.nav.mimeTypes[t].enabledPlugin)){i=s.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");for(o=0;o<i.length;o++)i[o]=parseInt(i[o].match(/\d+/),10)}}else if(typeof window.ActiveXObject!="undefined")try{u=new ActiveXObject(n),u&&(i=r(u))}catch(a){}return i}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[],n=e.GetVariable("$version");return n&&(n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]),t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],n=function(e,t,n,r){while(e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]))t[n]+=r;t[n]-=r};return n(e,t,0,1),n(e,t,1,1),n(e,t,2,1e4),n(e,t,2,1e3),n(e,t,2,100),n(e,t,2,10),n(e,t,2,1),n(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e=this,t=document,n=mejs.PluginDetector.nav,r=mejs.PluginDetector.ua.toLowerCase(),i,s,o=["source","track","audio","video"];e.isiPad=r.match(/ipad/i)!==null,e.isiPhone=r.match(/iphone/i)!==null,e.isiOS=e.isiPhone||e.isiPad,e.isAndroid=r.match(/android/i)!==null,e.isBustedAndroid=r.match(/android 2\.[12]/)!==null,e.isIE=n.appName.toLowerCase().indexOf("microsoft")!=-1,e.isChrome=r.match(/chrome/gi)!==null,e.isFirefox=r.match(/firefox/gi)!==null,e.isWebkit=r.match(/webkit/gi)!==null,e.isGecko=r.match(/gecko/gi)!==null&&!e.isWebkit,e.isOpera=r.match(/opera/gi)!==null,e.hasTouch="ontouchstart"in window,e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(i=0;i<o.length;i++)s=document.createElement(o[i]);e.supportsMediaTag=typeof s.canPlayType!="undefined"||e.isBustedAndroid,e.hasSemiNativeFullScreen=typeof s.webkitEnterFullscreen!="undefined",e.hasWebkitNativeFullScreen=typeof s.webkitRequestFullScreen!="undefined",e.hasMozNativeFullScreen=typeof s.mozRequestFullScreen!="undefined",e.hasTrueNativeFullScreen=e.hasWebkitNativeFullScreen||e.hasMozNativeFullScreen,e.nativeFullScreenEnabled=e.hasTrueNativeFullScreen,e.hasMozNativeFullScreen&&(e.nativeFullScreenEnabled=s.mozFullScreenEnabled),this.isChrome&&(e.hasSemiNativeFullScreen=!1),e.hasTrueNativeFullScreen&&(e.fullScreenEventName=e.hasWebkitNativeFullScreen?"webkitfullscreenchange":"mozfullscreenchange",e.isFullScreen=function(){if(s.mozRequestFullScreen)return t.mozFullScreen;if(s.webkitRequestFullScreen)return t.webkitIsFullScreen},e.requestFullScreen=function(t){e.hasWebkitNativeFullScreen?t.webkitRequestFullScreen():e.hasMozNativeFullScreen&&t.mozRequestFullScreen()},e.cancelFullScreen=function(){e.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():e.hasMozNativeFullScreen&&document.mozCancelFullScreen()}),e.hasSemiNativeFullScreen&&r.match(/mac os x 10_5/i)&&(e.hasNativeFullScreen=!1,e.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){var t=this.getElementsByTagName("source");while(t.length>0)this.removeChild(t[0]);if(typeof e=="string")this.src=e;else{var n,r;for(n=0;n<e.length;n++){r=e[n];if(this.canPlayType(r.type)){this.src=r.src;break}}}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,n){this.id=e,this.pluginType=t,this.src=n,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){this.pluginApi!=null&&(this.pluginType!="youtube"&&this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,n,r,i=mejs.plugins[this.pluginType];for(t=0;t<i.length;t++){r=i[t];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,r.version))for(n=0;n<r.types.length;n++)if(e==r.types[n])return"probably"}return""},positionFullscreenButton:function(e,t,n){this.pluginApi!=null&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(e,t,n)},hideFullscreenButton:function(){this.pluginApi!=null&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if(typeof e=="string")this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,n;for(t=0;t<e.length;t++){n=e[t];if(this.canPlayType(n.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(n.src)),this.src=mejs.Utility.absolutizeUrl(e);break}}}},setCurrentTime:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.setVolume(e*100):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),this.pluginApi!=null&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t,n){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(i=0;i<n.length;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,n,r=this.events[e];if(r){n=Array.prototype.slice.call(arguments,1);for(t=0;t<r.length;t++)r[t].apply(null,n)}},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,n){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=n},unregisterPluginElement:function(e){delete this.pluginMediaElements[e],delete this.htmlMediaElements[e]},initPlugin:function(e){var t=this.pluginMediaElements[e],n=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}t.pluginApi!=null&&t.success&&t.success(t,n)}},fireEvent:function(e,t,n){var r,i,s,o=this.pluginMediaElements[e];r={type:t,target:o};for(i in n)o[i]=n[i],r[i]=n[i];s=n.bufferedTime||0,r.target.buffered=r.buffered={start:function(e){return 0},end:function(e){return s},length:1},o.dispatchEvent(r.type,r)}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var n=mejs.MediaElementDefaults,r=typeof e=="string"?document.getElementById(e):e,i=r.tagName.toLowerCase(),s=i==="audio"||i==="video",o=s?r.getAttribute("src"):r.getAttribute("href"),u=r.getAttribute("poster"),a=r.getAttribute("autoplay"),f=r.getAttribute("preload"),l=r.getAttribute("controls"),c,h;for(h in t)n[h]=t[h];return o=typeof o=="undefined"||o===null||o==""?null:o,u=typeof u=="undefined"||u===null?"":u,f=typeof f=="undefined"||f===null||f==="false"?"none":f,a=typeof a!="undefined"&&a!==null&&a!=="false",l=typeof l!="undefined"&&l!==null&&l!=="false",c=this.determinePlayback(r,n,mejs.MediaFeatures.supportsMediaTag,s,o),c.url=c.url!==null?mejs.Utility.absolutizeUrl(c.url):"",c.method=="native"?(mejs.MediaFeatures.isBustedAndroid&&(r.src=c.url,r.addEventListener("click",function(){r.play()},!1)),this.updateNative(c,n,a,f)):c.method!==""?this.createPlugin(c,n,u,a,f,l):(this.createErrorMessage(c,n,u),this)},determinePlayback:function(e,t,n,r,i){var s=[],o,u,a,f,l,c,h={method:"",url:"",htmlMediaElement:e,isVideo:e.tagName.toLowerCase()!="audio"},p,d,v,m,g;if(typeof t.type!="undefined"&&t.type!=="")if(typeof t.type=="string")s.push({type:t.type,url:i});else for(o=0;o<t.type.length;o++)s.push({type:t.type[o],url:i});else if(i!==null)c=this.formatType(i,e.getAttribute("type")),s.push({type:c,url:i});else for(o=0;o<e.childNodes.length;o++)l=e.childNodes[o],l.nodeType==1&&l.tagName.toLowerCase()=="source"&&(i=l.getAttribute("src"),c=this.formatType(i,l.getAttribute("type")),g=l.getAttribute("media"),(!g||!window.matchMedia||window.matchMedia&&window.matchMedia(g).matches)&&s.push({type:c,url:i}));!r&&s.length>0&&s[0].url!==null&&this.getTypeFromFile(s[0].url).indexOf("audio")>-1&&(h.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return e.match(/video\/(mp4|m4v)/gi)!==null?"maybe":""});if(n&&(t.mode==="auto"||t.mode==="auto_plugin"||t.mode==="native")){r||(m=document.createElement(h.isVideo?"video":"audio"),e.parentNode.insertBefore(m,e),e.style.display="none",h.htmlMediaElement=e=m);for(o=0;o<s.length;o++)if(e.canPlayType(s[o].type).replace(/no/,"")!==""||e.canPlayType(s[o].type.replace(/mp3/,"mpeg")).replace(/no/,"")!==""){h.method="native",h.url=s[o].url;break}if(h.method==="native"){h.url!==null&&(e.src=h.url);if(t.mode!=="auto_plugin")return h}}if(t.mode==="auto"||t.mode==="auto_plugin"||t.mode==="shim")for(o=0;o<s.length;o++){c=s[o].type;for(u=0;u<t.plugins.length;u++){p=t.plugins[u],d=mejs.plugins[p];for(a=0;a<d.length;a++){v=d[a];if(v.version==null||mejs.PluginDetector.hasPluginVersion(p,v.version))for(f=0;f<v.types.length;f++)if(c==v.types[f])return h.method=p,h.url=s[o].url,h}}}return t.mode==="auto_plugin"&&h.method==="native"?h:(h.method===""&&s.length>0&&(h.url=s[0].url),h)},formatType:function(e,t){var n;return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){e=e.split("?")[0];var t=e.substring(e.lastIndexOf(".")+1);return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(t)?"video":"audio")+"/"+this.getTypeFromExtension(t)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,t,n){var r=e.htmlMediaElement,i=document.createElement("div");i.className="me-cannotplay";try{i.style.width=r.width+"px",i.style.height=r.height+"px"}catch(s){}i.innerHTML=n!==""?'<a href="'+e.url+'"><img src="'+n+'" width="100%" height="100%" /></a>':'<a href="'+e.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>",r.parentNode.insertBefore(i,r),r.style.display="none",t.error(r)},createPlugin:function(e,t,n,r,i,s){var o=e.htmlMediaElement,u=1,a=1,f="me_"+e.method+"_"+mejs.meIndex++,l=new mejs.PluginMediaElement(f,e.method,e.url),c=document.createElement("div"),h,p,d;l.tagName=o.tagName;for(var v=0;v<o.attributes.length;v++){var m=o.attributes[v];m.specified==1&&l.setAttribute(m.name,m.value)}p=o.parentNode;while(p!==null&&p.tagName.toLowerCase()!="body"){if(p.parentNode.tagName.toLowerCase()=="p"){p.parentNode.parentNode.insertBefore(p,p.parentNode);break}p=p.parentNode}e.isVideo?(u=t.videoWidth>0?t.videoWidth:o.getAttribute("width")!==null?o.getAttribute("width"):t.defaultVideoWidth,a=t.videoHeight>0?t.videoHeight:o.getAttribute("height")!==null?o.getAttribute("height"):t.defaultVideoHeight,u=mejs.Utility.encodeUrl(u),a=mejs.Utility.encodeUrl(a)):t.enablePluginDebug&&(u=320,a=240),l.success=t.success,mejs.MediaPluginBridge.registerPluginElement(f,l,o),c.className="me-plugin",c.id=f+"_container",e.isVideo?o.parentNode.insertBefore(c,o):document.body.insertBefore(c,document.body.childNodes[0]),d=["id="+f,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(r?"true":"false"),"preload="+i,"width="+u,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+a],e.url!==null&&(e.method=="flash"?d.push("file="+mejs.Utility.encodeUrl(e.url)):d.push("file="+e.url)),t.enablePluginDebug&&d.push("debug=true"),t.enablePluginSmoothing&&d.push("smoothing=true"),s&&d.push("controls=true"),t.pluginVars&&(d=d.concat(t.pluginVars));switch(e.method){case"silverlight":c.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+f+'" name="'+f+'" width="'+u+'" height="'+a+'" class="mejs-shim">'+'<param name="initParams" value="'+d.join(",")+'" />'+'<param name="windowless" value="true" />'+'<param name="background" value="black" />'+'<param name="minRuntimeVersion" value="3.0.0.0" />'+'<param name="autoUpgrade" value="true" />'+'<param name="source" value="'+t.pluginPath+t.silverlightName+'" />'+"</object>";break;case"flash":mejs.MediaFeatures.isIE?(h=document.createElement("div"),c.appendChild(h),h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+f+'" width="'+u+'" height="'+a+'" class="mejs-shim">'+'<param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" />'+'<param name="flashvars" value="'+d.join("&amp;")+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#000000" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+"</object>"
):c.innerHTML='<embed id="'+f+'" name="'+f+'" '+'play="true" '+'loop="false" '+'quality="high" '+'bgcolor="#000000" '+'wmode="transparent" '+'allowScriptAccess="always" '+'allowFullScreen="true" '+'type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" '+'src="'+t.pluginPath+t.flashName+'" '+'flashvars="'+d.join("&")+'" '+'width="'+u+'" '+'height="'+a+'" '+'class="mejs-shim"></embed>';break;case"youtube":var g=e.url.substr(e.url.lastIndexOf("=")+1);youtubeSettings={container:c,containerId:c.id,pluginMediaElement:l,pluginId:f,videoId:g,height:a,width:u},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":l.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),c.innerHTML='<iframe src="http://player.vimeo.com/video/'+l.vimeoid+'?portrait=0&byline=0&title=0" width="'+u+'" height="'+a+'" frameborder="0" class="mejs-shim"></iframe>'}return o.style.display="none",l},updateNative:function(e,t,n,r){var i=e.htmlMediaElement,s;for(s in mejs.HtmlMediaElement)i[s]=mejs.HtmlMediaElement[s];return t.success(i,i),i}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="http://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,n=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=n,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(n,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,n,t)}}})},createEvent:function(e,t,n){var r={type:n,target:t};if(e&&e.getDuration){t.currentTime=r.currentTime=e.getCurrentTime(),t.duration=r.duration=e.getDuration(),r.paused=t.paused,r.ended=t.ended,r.muted=e.isMuted(),r.volume=e.getVolume()/100,r.bytesTotal=e.getVideoBytesTotal(),r.bufferedBytes=e.getVideoBytesLoaded();var i=r.bufferedBytes/r.bytesTotal*r.duration;r.target.buffered=r.buffered={start:function(e){return 0},end:function(e){return i},length:1}}t.dispatchEvent(r.type,r)},iFrameReady:function(){this.isLoaded=!0,this.isIframeLoaded=!0;while(this.iframeQueue.length>0){var e=this.iframeQueue.pop();this.createIframe(e)}},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,n="http://www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim">'+'<param name="movie" value="'+n+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullScreen" value="true" />'+"</object>"):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+n+'" '+'width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim">'+'<param name="allowScriptAccess" value="always">'+'<param name="wmode" value="transparent">'+"</object>"},flashReady:function(e){var t=this.flashPlayers[e],n=document.getElementById(e),r=t.pluginMediaElement;r.pluginApi=r.pluginElement=n,mejs.MediaPluginBridge.initPlugin(e),n.cueVideoById(t.videoId);var i=t.containerId+"_callback";window[i]=function(e){mejs.YouTubeApi.handleStateChange(e,n,r)},n.addEventListener("onStateChange",i),setInterval(function(){mejs.YouTubeApi.createEvent(n,r,"timeupdate")},250)},handleStateChange:function(e,t,n){switch(e){case-1:n.paused=!0,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"loadedmetadata");break;case 0:n.paused=!1,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"ended");break;case 1:n.paused=!1,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"play"),mejs.YouTubeApi.createEvent(t,n,"playing");break;case 2:n.paused=!0,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,n,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(e,t,n,r){"use strict";var i={locale:{strings:{}},methods:{}};i.locale.getLanguage=function(){return{language:navigator.language}},i.locale.INIT_LANGUAGE=i.locale.getLanguage(),i.methods.checkPlain=function(e){var t,n,r={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e=String(e);for(t in r)r.hasOwnProperty(t)&&(n=new RegExp(t,"g"),e=e.replace(n,r[t]));return e},i.methods.formatString=function(e,t){for(var n in t){switch(n.charAt(0)){case"@":t[n]=i.methods.checkPlain(t[n]);break;case"!":break;case"%":default:t[n]='<em class="placeholder">'+i.methods.checkPlain(t[n])+"</em>"}e=e.replace(n,t[n])}return e},i.methods.t=function(e,t,n){return i.locale.strings&&i.locale.strings[n.context]&&i.locale.strings[n.context][e]&&(e=i.locale.strings[n.context][e]),t&&(e=i.methods.formatString(e,t)),e},i.t=function(e,t,n){if(typeof e=="string"&&e.length>0){var r=i.locale.getLanguage();return n=n||{context:r.language},i.methods.t(e,t,n)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},n.i18n=i}(jQuery,document,mejs),function(e,t){"use strict";e.de={Fullscreen:"Vollbild","Go Fullscreen":"Vollbild an","Turn off Fullscreen":"Vollbild aus",Close:"Schließen"}}(mejs.i18n.locale.strings),mejs.MediaElementDefaults.pluginPath="",mejs.MediaElementDefaults.flashName="/assets/mediaelement_rails/flashmediaelement-c6bd29dc7fad7e88b9befab6abd7ed69.swf",mejs.MediaElementDefaults.silverlightName="/assets/mediaelement_rails/silverlightmediaelement-ac7d5d194f4aaf0f31f29a8f153ff966.xap",typeof jQuery!="undefined"?mejs.$=jQuery:typeof ender!="undefined"&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return e.duration*.05},defaultSeekForwardInterval:function(e){return e.duration*.05},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){var n=Math.min(t.volume+.1,1);t.setVolume(n)}},{keys:[40],action:function(e,t){var n=Math.max(t.volume-.1,0);t.setVolume(n)}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(n)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(n)}}},{keys:[70],action:function(e,t){typeof e.enterFullScreen!="undefined"&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(t,n){if(this instanceof mejs.MediaElementPlayer){var r=this;return r.$media=r.$node=e(t),r.node=r.media=r.$media[0],typeof r.node.player!="undefined"?r.node.player:(r.node.player=r,typeof n=="undefined"&&(n=r.$node.data("mejsoptions")),r.options=e.extend({},mejs.MepDefaults,n),r.id="mep_"+mejs.mepIndex++,mejs.players[r.id]=r,r.init(),r)}return new mejs.MediaElementPlayer(t,n)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,n=mejs.MediaFeatures,r=e.extend(!0,{},t.options,{success:function(e,n){t.meReady(e,n)},error:function(e){t.handleError(e)}}),i=t.media.tagName.toLowerCase();t.isDynamic=i!=="audio"&&i!=="video",t.isDynamic?t.isVideo=t.options.isVideo:t.isVideo=i!=="audio"&&t.options.isVideo;if(n.isiPad&&t.options.iPadUseNativeControls||n.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),n.isiPad&&t.media.getAttribute("autoplay")!==null&&(t.media.load(),t.media.play());else if(!n.isAndroid||!t.options.AndroidUseNativeControls){t.$media.removeAttr("controls"),t.container=e('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+"</div>"+"</div>").addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((n.isAndroid?"mejs-android ":"")+(n.isiOS?"mejs-ios ":"")+(n.isiPad?"mejs-ipad ":"")+(n.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio "));if(n.isiOS){var s=t.$media.clone();t.container.find(".mejs-mediaelement").append(s),t.$media.remove(),t.$node=t.$media=s,t.node=t.media=s[0]}else t.container.find(".mejs-mediaelement").append(t.$media);t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var o=t.isVideo?"video":"audio",u=o.substring(0,1).toUpperCase()+o.substring(1);t.options[o+"Width"]>0||t.options[o+"Width"].toString().indexOf("%")>-1?t.width=t.options[o+"Width"]:t.media.style.width!==""&&t.media.style.width!==null?t.width=t.media.style.width:t.media.getAttribute("width")!==null?t.width=t.$media.attr("width"):t.width=t.options["default"+u+"Width"],t.options[o+"Height"]>0||t.options[o+"Height"].toString().indexOf("%")>-1?t.height=t.options[o+"Height"]:t.media.style.height!==""&&t.media.style.height!==null?t.height=t.media.style.height:t.$media[0].getAttribute("height")!==null?t.height=t.$media.attr("height"):t.height=t.options["default"+u+"Height"],t.setPlayerSize(t.width,t.height),r.pluginWidth=t.height,r.pluginHeight=t.width}mejs.MediaElement(t.$media[0],r),t.container.trigger("controlsshown")},showControls:function(e){var t=this;e=typeof e=="undefined"||e;if(t.controlsAreVisible)return;e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize()},hideControls:function(t){var n=this;t=typeof t=="undefined"||t;if(!n.controlsAreVisible)return;t?(n.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),n.controlsAreVisible=!1,n.container.trigger("controlshidden")}),n.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(n.controls.css("visibility","hidden").css("display","block"),n.container.find(".mejs-control").css("visibility","hidden").css("display","block"),n.controlsAreVisible=!1,n.container.trigger("controlshidden"))},controlsTimer:null,startControlsTimer:function(e){var t=this;e=typeof e!="undefined"?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(e){var t=this;t.controlsTimer!==null&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var e=this;e.killControlsTimer(),e.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var e=this;e.showControls(!1),e.controlsEnabled=!0},meReady:function(e,t){var n=this,r=mejs.MediaFeatures,i=t.getAttribute("autoplay"),s=typeof i!="undefined"&&i!==null&&i!=="false",o,u;if(n.created)return;n.created=!0,n.media=e,n.domNode=t;if((!r.isAndroid||!n.options.AndroidUseNativeControls)&&(!r.isiPad||!n.options.iPadUseNativeControls)&&(!r.isiPhone||!n.options.iPhoneUseNativeControls)){n.buildposter(n,n.controls,n.layers,n.media),n.buildkeyboard(n,n.controls,n.layers,n.media),n.buildoverlays(n,n.controls,n.layers,n.media),n.findTracks();for(o in n.options.features){u=n.options.features[o];if(n["build"+u])try{n["build"+u](n,n.controls,n.layers,n.media)}catch(a){}}n.container.trigger("controlsready"),n.setPlayerSize(n.width,n.height),n.setControlsSize(),n.isVideo&&(mejs.MediaFeatures.hasTouch?n.$media.bind("touchstart",function(){n.controlsAreVisible?n.hideControls(!1):n.controlsEnabled&&n.showControls(!1)}):(n.media.addEventListener("click",function(){n.options.clickToPlayPause&&(n.media.paused?n.media.play():n.media.pause())}),n.container.bind("mouseenter mouseover",function(){n.controlsEnabled&&(n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(2500)))}).bind("mousemove",function(){n.controlsEnabled&&(n.controlsAreVisible||n.showControls(),n.options.alwaysShowControls||n.startControlsTimer(2500))}).bind("mouseleave",function(){n.controlsEnabled&&!n.media.paused&&!n.options.alwaysShowControls&&n.startControlsTimer(1e3)})),n.options.hideVideoControlsOnLoad&&n.hideControls(!1),s&&!n.options.alwaysShowControls&&n.hideControls(),n.options.enableAutosize&&n.media.addEventListener("loadedmetadata",function(e){n.options.videoHeight<=0&&n.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)&&(n.setPlayerSize(e.target.videoWidth,e.target.videoHeight),n.setControlsSize(),n.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),e.addEventListener("play",function(){var e;for(e in mejs.players){var t=mejs.players[e];t.id!=n.id&&n.options.pauseOtherPlayers&&!t.paused&&!t.ended&&t.pause(),t.hasFocus=!1}n.hasFocus=!0},!1),n.media.addEventListener("ended",function(e){if(n.options.autoRewind)try{n.media.setCurrentTime(0)}catch(t){}n.media.pause(),n.setProgressRail&&n.setProgressRail(),n.setCurrentRail&&n.setCurrentRail(),n.options.loop?n.media.play():!n.options.alwaysShowControls&&n.controlsEnabled&&n.showControls()},!1),n.media.addEventListener("loadedmetadata",function(e){n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.isFullScreen||(n.setPlayerSize(n.width,n.height),n.setControlsSize())},!1),setTimeout(function(){n.setPlayerSize(n.width,n.height),n.setControlsSize()},50),n.globalBind("resize",function(){n.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||n.setPlayerSize(n.width,n.height),n.setControlsSize()}),n.media.pluginType=="youtube"&&n.container.find(".mejs-overlay-play").hide()}s&&e.pluginType=="native"&&(e.load(),e.play()),n.options.success&&(typeof n.options.success=="string"?window[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n))},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(t,n){var r=this;typeof t!="undefined"&&(r.width=t),typeof n!="undefined"&&(r.height=n);if(r.height.toString().indexOf("%")>0||r.$node.css("max-width")==="100%"||r.$node[0].currentStyle&&r.$node[0].currentStyle.maxWidth==="100%"){var i=r.isVideo?r.media.videoWidth&&r.media.videoWidth>0?r.media.videoWidth:r.options.defaultVideoWidth:r.options.defaultAudioWidth,s=r.isVideo?r.media.videoHeight&&r.media.videoHeight>0?r.media.videoHeight:r.options.defaultVideoHeight:r.options.defaultAudioHeight,o=r.container.parent().closest(":visible").width(),u=r.isVideo||!r.options.autosizeProgress?parseInt(o*s/i,10):s;r.container.parent()[0].tagName.toLowerCase()==="body"&&(o=e(window).width(),u=e(window).height()),u!=0&&o!=0&&(r.container.width(o).height(u),r.$media.add(r.container.find(".mejs-shim")).width("100%").height("100%"),r.isVideo&&r.media.setVideoSize&&r.media.setVideoSize(o,u),r.layers.children(".mejs-layer").width("100%").height("100%"))}else r.container.width(r.width).height(r.height),r.layers.children(".mejs-layer").width(r.width).height(r.height)},setControlsSize:function(){var t=this,n=0,r=0,i=t.controls.find(".mejs-time-rail"),s=t.controls.find(".mejs-time-total"),o=t.controls.find(".mejs-time-current"),u=t.controls.find(".mejs-time-loaded"),a=i.siblings();t.options&&!t.options.autosizeProgress&&(r=parseInt(i.css("width")));if(r===0||!r)a.each(function(){var t=e(this);t.css("position")!="absolute"&&t.is(":visible")&&(n+=e(this).outerWidth(!0))}),r=t.controls.width()-n-(i.outerWidth(!0)-i.width());i.width(r),s.width(r-(s.outerWidth(!0)-s.width())),t.setProgressRail&&t.setProgressRail(),t.setCurrentRail&&t.setCurrentRail()},buildposter:function(t,n,r,i){var s=this,o=e('<div class="mejs-poster mejs-layer"></div>').appendTo(r),u=t.$media.attr("poster");t.options.poster!==""&&(u=t.options.poster),u!==""&&u!=null?s.setPoster(u):o.hide(),i.addEventListener("play",function(){o.hide()},!1)},setPoster:function(t){var n=this,r=n.container.find(".mejs-poster"),i=r.find("img");i.length==0&&(i=e('<img width="100%" height="100%" />').appendTo(r)),i.attr("src",t)},buildoverlays:function(t,n,r,i){var s=this;if(!t.isVideo)return;var o=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(r),u=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(r),a=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(r).click(function(){s.options.clickToPlayPause&&(i.paused?i.play():i.pause())});i.addEventListener("play",function(){a.hide(),o.hide(),n.find(".mejs-time-buffering").hide(),u.hide()},!1),i.addEventListener("playing",function(){a.hide(),o.hide(),n.find(".mejs-time-buffering").hide(),u.hide()},!1),i.addEventListener("seeking",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("seeked",function(){o.hide(),n.find(".mejs-time-buffering").hide()},!1),i.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||a.show()},!1),i.addEventListener("waiting",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("loadeddata",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("canplay",function(){o.hide(),n.find(".mejs-time-buffering").hide()},!1),i.addEventListener("error",function(){o.hide(),n.find(".mejs-time-buffering").hide(),u.show(),u.find("mejs-overlay-error").html("Error loading this resource")},!1)},buildkeyboard:function(t,n,r,i){var s=this;s.globalBind("keydown",function(e){if(t.hasFocus&&t.options.enableKeyboard)for(var n=0,r=t.options.keyActions.length;n<r;n++){var s=t.options.keyActions[n];for(var o=0,u=s.keys.length;o<u;o++)if(e.keyCode==s.keys[o])return e.preventDefault(),s.action(t,i,e.keyCode),!1}return!0}),s.globalBind("click",function(n){e(n.target).closest(".mejs-container").length==0&&(t.hasFocus=!1)})},findTracks:function(){var t=this,n=t.$media.find("track");t.tracks=[],n.each(function(n,r){r=e(r),t.tracks.push({srclang:r.attr("srclang")?r.attr("srclang").toLowerCase():"",src:r.attr("src"),kind:r.attr("kind"),label:r.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){this.media.pause()},load:function(){this.media.load()},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var t=this,n,r;for(n in t.options.features){r=t.options.features[n];if(t["clean"+r])try{t["clean"+r](t)}catch(i){}}t.media.pluginType==="native"?t.$media.prop("controls",!0):t.media.remove(),t.isDynamic||(t.media.pluginType==="native",t.$node.insertBefore(t.container)),mejs.players.splice(e.inArray(t,mejs.players),1),t.container.remove(),t.globalUnbind(),delete t.node.player,delete mejs.players[t.id]}},function(){function n(n,r){var i={d:[],w:[]};return e.each((n||"").split(" "),function(e,n){i[t.test(n)?"w":"d"].push(n+"."+r)}),i.d=i.d.join(" "),i.w=i.w.join(" "),i}var t=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(t,r,i){var s=this;t=n(t,s.id),t.d&&e(document).bind(t.d,r,i),t.w&&e(window).bind(t.w,r,i)},mejs.MediaElementPlayer.prototype.globalUnbind=function(t,r){var i=this;t=n(t,i.id),t.d&&e(document).unbind(t.d,r),t.w&&e(window).unbind(t.w,r)}}(),typeof jQuery!="undefined"&&(jQuery.fn.mediaelementplayer=function(e){return e===!1?this.each(function(){var e=jQuery(this).data("mediaelementplayer");e&&e.remove(),jQuery(this).removeData("mediaelementplayer")}):this.each(function(){jQuery(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,e))}),this}),e(document).ready(function(){e(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playpauseText:"Play/Pause"}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,n,r,i){var s=this,o=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+s.id+'" title="'+s.options.playpauseText+'"></button>'+"</div>").appendTo(n).click(function(e){return e.preventDefault(),i.paused?i.play():i.pause(),!1});i.addEventListener("play",function(){o.removeClass("mejs-play").addClass("mejs-pause")},!1),i.addEventListener("playing",function(){o.removeClass("mejs-play").addClass("mejs-pause")},!1),i.addEventListener("pause",function(){o.removeClass("mejs-pause").addClass("mejs-play")},!1),i.addEventListener("paused",function(){o.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,n,r,i){var s=this,o=e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+s.id+'" title="'+s.options.stopText+'"></button>'+"</div>").appendTo(n).click(function(){i.paused||i.pause(),i.currentTime>0&&(i.setCurrentTime(0),i.pause(),n.find(".mejs-time-current").width("0px"),n.find(".mejs-time-handle").css("left","0px"),n.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),r.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,n,r,i){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(n),n.find(".mejs-time-buffering").hide();var s=this,o=n.find(".mejs-time-total"),u=n.find(".mejs-time-loaded"),a=n.find(".mejs-time-current"),f=n.find(".mejs-time-handle"),l=n.find(".mejs-time-float"),c=n.find(".mejs-time-float-current"),h=function(e){var t=e.pageX,n=o.offset(),r=o.outerWidth(!0),s=0,u=0,a=0;i.duration&&(t<n.left?t=n.left:t>r+n.left&&(t=r+n.left),a=t-n.left,s=a/r,u=s<=.02?0:s*i.duration,p&&u!==i.currentTime&&i.setCurrentTime(u),mejs.MediaFeatures.hasTouch||(l.css("left",a),c.html(mejs.Utility.secondsToTimeCode(u)),l.show()))},p=!1,d=!1;o.bind("mousedown",function(e){if(e.which===1)return p=!0,h(e),s.globalBind("mousemove.dur",function(e){h(e)}),s.globalBind("mouseup.dur",function(e){p=!1,l.hide(),s.globalUnbind(".dur")}),!1}).bind("mouseenter",function(e){d=!0,s.globalBind("mousemove.dur",function(e){h(e)}),mejs.MediaFeatures.hasTouch||l.show()}).bind("mouseleave",function(e){d=!1,p||(s.globalUnbind(".dur"),l.hide())}),i.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),i.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),s.loaded=u,s.total=o,s.current=a,s.handle=f},setProgressRail:function(e){var t=this,n=e!=undefined?e.target:t.media,r=null;n&&n.buffered&&n.buffered.length>0&&n.buffered.end&&n.duration?r=n.buffered.end(0)/n.duration:n&&n.bytesTotal!=undefined&&n.bytesTotal>0&&n.bufferedBytes!=undefined?r=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&e.total!=0&&(r=e.loaded/e.total),r!==null&&(r=Math.min(1,Math.max(0,r)),t.loaded&&t.total&&t.loaded.width(t.total.width()*r))},setCurrentRail:function(){var e=this;if(e.media.currentTime!=undefined&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),n=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",n)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:" <span> | </span> "}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,n,r,i){var s=this;e('<div class="mejs-time"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span>"+"</div>").appendTo(n),s.currenttime=s.controls.find(".mejs-currenttime"),i.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,n,r,i){var s=this;n.children().last().find(".mejs-currenttime").length>0?e(s.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(s.options.duration>0?mejs.Utility.secondsToTimeCode(s.options.duration,s.options.alwaysShowHours||s.media.duration>3600,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(n.find(".mejs-time")):(n.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(s.options.duration>0?mejs.Utility.secondsToTimeCode(s.options.duration,s.options.alwaysShowHours||s.media.duration>3600,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>"+"</div>").appendTo(n)),s.durationD=s.controls.find(".mejs-duration"),i.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){var e=this;e.currenttime&&e.currenttime.html(mejs.Utility.secondsToTimeCode(e.media.currentTime,e.options.alwaysShowHours||e.media.duration>3600,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))},updateDuration:function(){var e=this;e.container.toggleClass("mejs-long-video",e.media.duration>3600),e.durationD&&(e.options.duration>0||e.media.duration)&&e.durationD.html(mejs.Utility.secondsToTimeCode(e.options.duration>0?e.options.duration:e.media.duration,e.options.alwaysShowHours,e.options.showTimecodeFrameCount,e.options.framesPerSecond||25))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:"Mute Toggle",hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,n,r,i){if(mejs.MediaFeatures.hasTouch&&this.options.hideVolumeOnTouchDevices)return;var s=this,o=s.isVideo?s.options.videoVolume:s.options.audioVolume,u=o=="horizontal"?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'"></button>'+"</div>"+'<div class="mejs-horizontal-volume-slider">'+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+"</div>").appendTo(n):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'"></button>'+'<div class="mejs-volume-slider">'+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+"</div>"+"</div>").appendTo(n),a=s.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),f=s.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),l=s.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),c=s.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),h=function(e,t){if(!a.is(":visible")&&typeof t=="undefined"){a.show(),h(e,!0),a.hide();return}e=Math.max(0,e),e=Math.min(e,1),e==0?u.removeClass("mejs-mute").addClass("mejs-unmute"):u.removeClass("mejs-unmute").addClass("mejs-mute");if(o=="vertical"){var n=f.height(),r=f.position(),i=n-n*e;c.css("top",Math.round(r.top+i-c.height()/2)),l.height(n-i),l.css("top",r.top+i)}else{var s=f.width(),r=f.position(),p=s*e;c.css("left",Math.round(r.left+p-c.width()/2)),l.width(Math.round(p))}},p=function(e){var t=null,n=f.offset();if(o=="vertical"){var r=f.height(),s=parseInt(f.css("top").replace(/px/,""),10),u=e.pageY-n.top;t=(r-u)/r;if(n.top==0||n.left==0)return}else{var a=f.width(),l=e.pageX-n.left;t=l/a}t=Math.max(0,t),t=Math.min(t,1),h(t),t==0?i.setMuted(!0):i.setMuted(!1),i.setVolume(t)},d=!1,v=!1;u.hover(function(){a.show(),v=!0},function(){v=!1,!d&&o=="vertical"&&a.hide()}),a.bind("mouseover",function(){v=!0}).bind("mousedown",function(e){return p(e),s.globalBind("mousemove.vol",function(e){p(e)}),s.globalBind("mouseup.vol",function(){d=!1,s.globalUnbind(".vol"),!v&&o=="vertical"&&a.hide()}),d=!0,!1}),u.find("button").click(function(){i.setMuted(!i.muted)}),i.addEventListener("volumechange",function(e){d||(i.muted?(h(0),u.removeClass("mejs-mute").addClass("mejs-unmute")):(h(i.volume),u.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),s.container.is(":visible")&&(h(t.options.startVolume),t.options.startVolume===0&&i.setMuted(!0),i.pluginType==="native"&&i.setVolume(t.options.startVolume))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,docStyleOverflow:null,isInIframe:!1,buildfullscreen:function(t,n,r,i){if(!t.isVideo)return;t.isInIframe=window.location!=window.parent.location;if(mejs.MediaFeatures.hasTrueNativeFullScreen){var s=function(e){mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen())};mejs.MediaFeatures.hasMozNativeFullScreen?t.globalBind(mejs.MediaFeatures.fullScreenEventName,s):t.container.bind(mejs.MediaFeatures.fullScreenEventName,s)}var o=this,u=0,a=0,f=t.container,l=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+o.id+'" title="'+o.options.fullscreenText+'"></button>'+"</div>").appendTo(n);if(o.media.pluginType==="native"||!o.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)l.click(function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()});else{var c=null,h=function(){var e=document.createElement("x"),t=document.documentElement,n=window.getComputedStyle,r;return"pointerEvents"in e.style?(e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e),r=n&&n(e,"").pointerEvents==="auto",t.removeChild(e),!!r):!1}();if(h&&!mejs.MediaFeatures.isOpera){var p=!1,d=function(){p&&(v.hide(),m.hide(),g.hide(),l.css("pointer-events",""),o.controls.css("pointer-events",""),p=!1)},v=e('<div class="mejs-fullscreen-hover" />').appendTo(o.container).mouseover(d),m=e('<div class="mejs-fullscreen-hover"  />').appendTo(o.container).mouseover(d),g=e('<div class="mejs-fullscreen-hover"  />').appendTo(o.container).mouseover(d),y=function(){var e={position:"absolute",top:0,left:0};v.css(e),m.css(e),g.css(e),v.width(o.container.width()).height(o.container.height()-o.controls.height());var t=l.offset().left-o.container.offset().left;fullScreenBtnWidth=l.outerWidth(!0),m.width(t).height(o.controls.height()).css({top:o.container.height()-o.controls.height()}),g.width(o.container.width()-t-fullScreenBtnWidth)
.height(o.controls.height()).css({top:o.container.height()-o.controls.height(),left:t+fullScreenBtnWidth})};o.globalBind("resize",function(){y()}),l.mouseover(function(){if(!o.isFullScreen){var e=l.offset(),n=t.container.offset();i.positionFullscreenButton(e.left-n.left,e.top-n.top,!1),l.css("pointer-events","none"),o.controls.css("pointer-events","none"),v.show(),g.show(),m.show(),y(),p=!0}}),i.addEventListener("fullscreenchange",function(e){d()})}else l.mouseover(function(){c!==null&&(clearTimeout(c),delete c);var e=l.offset(),n=t.container.offset();i.positionFullscreenButton(e.left-n.left,e.top-n.top,!0)}).mouseout(function(){c!==null&&(clearTimeout(c),delete c),c=setTimeout(function(){i.hideFullscreenButton()},1500)})}t.fullscreenBtn=l,o.globalBind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||o.isFullScreen)&&e.keyCode==27&&t.exitFullScreen()})},cleanfullscreen:function(e){e.exitFullScreen()},enterFullScreen:function(){var t=this;if(t.media.pluginType!=="native"&&(mejs.MediaFeatures.isFirefox||t.options.usePluginFullScreen))return;docStyleOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",normalHeight=t.container.height(),normalWidth=t.container.width();if(t.media.pluginType==="native")if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function r(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(r,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen){t.media.webkitEnterFullscreen();return}if(t.isInIframe){var n=t.options.newWindowCallback(this);if(n!==""){if(!mejs.MediaFeatures.hasTrueNativeFullScreen){t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");return}setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),t.pluginType==="native"?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0},exitFullScreen:function(){var e=this;if(e.media.pluginType!=="native"&&mejs.MediaFeatures.isFirefox){e.media.setFullscreen(!1);return}mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||e.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),document.documentElement.style.overflow=docStyleOverflow,e.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),e.pluginType==="native"?e.$media.width(normalWidth).height(normalHeight):(e.container.find("object embed").width(normalWidth).height(normalHeight),e.media.setVideoSize(normalWidth,normalHeight)),e.layers.children("div").width(normalWidth).height(normalHeight),e.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),e.setControlsSize(),e.isFullScreen=!1}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"Captions/Subtitles",hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(t,n,r,i){if(!t.isVideo)return;if(t.tracks.length==0)return;var s=this,o,u="";t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(r).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>').prependTo(r).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+s.id+'" title="'+s.options.tracksText+'"></button>'+'<div class="mejs-captions-selector">'+"<ul>"+"<li>"+'<input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" />'+'<label for="'+t.id+'_captions_none">None</label>'+"</li>"+"</ul>"+"</div>"+"</div>").appendTo(n);var a=0;for(o=0;o<t.tracks.length;o++)t.tracks[o].kind=="subtitles"&&a++;s.options.toggleCaptionsButtonWhenOnlyOne&&a==1?t.captionsButton.on("click",function(){if(t.selectedTrack==null)var e=t.tracks[0].srclang;else var e="none";t.setTrack(e)}):t.captionsButton.hover(function(){e(this).find(".mejs-captions-selector").css("visibility","visible")},function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")}).on("click","input[type=radio]",function(){lang=this.value,t.setTrack(lang)}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("controlsshown",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){i.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1;for(o=0;o<t.tracks.length;o++)t.tracks[o].kind=="subtitles"&&t.addTrackButton(t.tracks[o].srclang,t.tracks[o].label);t.loadNextTrack(),i.addEventListener("timeupdate",function(e){t.displayCaptions()},!1),t.options.slidesSelector!=""&&(t.slidesContainer=e(t.options.slidesSelector),i.addEventListener("timeupdate",function(e){t.displaySlides()},!1)),i.addEventListener("loadedmetadata",function(e){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!i.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),t.node.getAttribute("autoplay")!==null&&t.chapters.css("visibility","hidden")},setTrack:function(e){var t=this,n;if(e=="none")t.selectedTrack=null,t.captionsButton.removeClass("mejs-captions-enabled");else for(n=0;n<t.tracks.length;n++)if(t.tracks[n].srclang==e){t.selectedTrack==null&&t.captionsButton.addClass("mejs-captions-enabled"),t.selectedTrack=t.tracks[n],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}},loadNextTrack:function(){var e=this;e.trackToLoad++,e.trackToLoad<e.tracks.length?(e.isLoadingTrack=!0,e.loadTrack(e.trackToLoad)):(e.isLoadingTrack=!1,e.checkForTracks())},loadTrack:function(t){var n=this,r=n.tracks[t],i=function(){r.isLoaded=!0,n.enableTrackButton(r.srclang,r.label),n.loadNextTrack()};e.ajax({url:r.src,dataType:"text",success:function(e){typeof e=="string"&&/<tt\s+xml/ig.exec(e)?r.entries=mejs.TrackFormatParser.dfxp.parse(e):r.entries=mejs.TrackFormatParser.webvvt.parse(e),i(),r.kind=="chapters"&&n.media.addEventListener("play",function(e){n.media.duration>0&&n.displayChapters(r)},!1),r.kind=="slides"&&n.setupSlides(r)},error:function(){n.loadNextTrack()}})},enableTrackButton:function(t,n){var r=this;n===""&&(n=mejs.language.codes[t]||t),r.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(n),r.options.startLanguage==t&&e("#"+r.id+"_captions_"+t).click(),r.adjustLanguageBox()},addTrackButton:function(t,n){var r=this;n===""&&(n=mejs.language.codes[t]||t),r.captionsButton.find("ul").append(e('<li><input type="radio" name="'+r.id+'_captions" id="'+r.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" />'+'<label for="'+r.id+"_captions_"+t+'">'+n+" (loading)"+"</label>"+"</li>")),r.adjustLanguageBox(),r.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){var e=this;e.captionsButton.find(".mejs-captions-selector").height(e.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+e.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=this,t=!1;if(e.options.hideCaptionsButtonWhenEmpty){for(i=0;i<e.tracks.length;i++)if(e.tracks[i].kind=="subtitles"){t=!0;break}t||(e.captionsButton.hide(),e.setControlsSize())}},displayCaptions:function(){if(typeof this.tracks=="undefined")return;var e=this,t,n=e.selectedTrack;if(n!=null&&n.isLoaded){for(t=0;t<n.entries.times.length;t++)if(e.media.currentTime>=n.entries.times[t].start&&e.media.currentTime<=n.entries.times[t].stop){e.captionsText.html(n.entries.text[t]),e.captions.show().height(0);return}e.captions.hide()}else e.captions.hide()},setupSlides:function(e){var t=this;t.slides=e,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(t){if(typeof this.tracks=="undefined"||typeof this.slidesContainer=="undefined")return;var n=this,r=n.slides.entries.text[t],i=n.slides.entries.imgs[t];typeof i=="undefined"||typeof i.fadeIn=="undefined"?n.slides.entries.imgs[t]=i=e('<img src="'+r+'">').on("load",function(){i.appendTo(n.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):!i.is(":visible")&&!i.is(":animated")&&(console.log("showing existing slide"),i.fadeIn().siblings(":visible").fadeOut())},displaySlides:function(){if(typeof this.slides=="undefined")return;var e=this,t=e.slides,n;for(n=0;n<t.entries.times.length;n++)if(e.media.currentTime>=t.entries.times[n].start&&e.media.currentTime<=t.entries.times[n].stop){e.showSlide(n);return}},displayChapters:function(){var e=this,t;for(t=0;t<e.tracks.length;t++)if(e.tracks[t].kind=="chapters"&&e.tracks[t].isLoaded){e.drawChapters(e.tracks[t]),e.hasChapters=!0;break}},drawChapters:function(t){var n=this,r,i,s=0,o=0;n.chapters.empty();for(r=0;r<t.entries.times.length;r++){i=t.entries.times[r].stop-t.entries.times[r].start,s=Math.floor(i/n.media.duration*100);if(s+o>100||r==t.entries.times.length-1&&s+o<100)s=100-o;n.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[r].start+'" style="left: '+o.toString()+"%;width: "+s.toString()+'%;">'+'<div class="mejs-chapter-block'+(r==t.entries.times.length-1?" mejs-chapter-block-last":"")+'">'+'<span class="ch-title">'+t.entries.text[r]+"</span>"+'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[r].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[r].stop)+"</span>"+"</div>"+"</div>")),o+=s}n.chapters.find("div.mejs-chapter").click(function(){n.media.setCurrentTime(parseFloat(e(this).attr("rel"))),n.media.paused&&n.media.play()}),n.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){var n=0,r=mejs.TrackFormatParser.split2(t,/\r?\n/),i={text:[],times:[]},s,o;for(;n<r.length;n++)if(this.pattern_identifier.exec(r[n])){n++,s=this.pattern_timecode.exec(r[n]);if(s&&n<r.length){n++,o=r[n],n++;while(r[n]!==""&&n<r.length)o=o+"\n"+r[n],n++;o=e.trim(o).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"),i.text.push(o),i.times.push({start:mejs.Utility.convertSMPTEtoSeconds(s[1])==0?.2:mejs.Utility.convertSMPTEtoSeconds(s[1]),stop:mejs.Utility.convertSMPTEtoSeconds(s[3]),settings:s[5]})}}return i}},dfxp:{parse:function(t){t=e(t).filter("tt");var n=0,r=t.children("div").eq(0),i=r.find("p"),s=t.find("#"+r.attr("style")),o,u,a,f,l={text:[],times:[]};if(s.length){var c=s.removeAttr("id").get(0).attributes;if(c.length){o={};for(n=0;n<c.length;n++)o[c[n].name.split(":")[1]]=c[n].value}}for(n=0;n<i.length;n++){var h,p={start:null,stop:null,style:null};i.eq(n).attr("begin")&&(p.start=mejs.Utility.convertSMPTEtoSeconds(i.eq(n).attr("begin"))),!p.start&&i.eq(n-1).attr("end")&&(p.start=mejs.Utility.convertSMPTEtoSeconds(i.eq(n-1).attr("end"))),i.eq(n).attr("end")&&(p.stop=mejs.Utility.convertSMPTEtoSeconds(i.eq(n).attr("end"))),!p.stop&&i.eq(n+1).attr("begin")&&(p.stop=mejs.Utility.convertSMPTEtoSeconds(i.eq(n+1).attr("begin")));if(o){h="";for(var d in o)h+=d+":"+o[d]+";"}h&&(p.style=h),p.start==0&&(p.start=.2),l.times.push(p),f=e.trim(i.eq(n).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"),l.text.push(f),l.times.start==0&&(l.times.start=2)}return l}},split2:function(e,t){return e.split(t)}},"x\n\ny".split(/\n/gi).length!=3&&(mejs.TrackFormatParser.split2=function(e,t){var n=[],r="",i;for(i=0;i<e.length;i++)r+=e.substring(i,i+1),t.test(r)&&(n.push(r.replace(t,"")),r="");return n.push(r),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return typeof e.enterFullScreen=="undefined"?null:e.isFullScreen?"Turn off Fullscreen":"Go Fullscreen"},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?"Unmute":"Mute"},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(e){return"Download Video"},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t,n,r,i){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){if(t.isContextMenuEnabled)return e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},cleancontextmenu:function(e){e.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;e!=null&&(clearTimeout(e),delete e,e=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,n){var r=this,i="",s=r.options.contextMenuItems;for(var o=0,u=s.length;o<u;o++)if(s[o].isSeparator)i+='<div class="mejs-contextmenu-separator"></div>';else{var a=s[o].render(r);a!=null&&(i+='<div class="mejs-contextmenu-item" data-itemindex="'+o+'" id="element-'+Math.random()*1e6+'">'+a+"</div>")}r.contextMenu.empty().append(e(i)).css({top:n,left:t}).show(),r.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),n=parseInt(t.data("itemindex"),10),i=r.options.contextMenuItems[n];typeof i.show!="undefined"&&i.show(t,r),t.click(function(){typeof i.click!="undefined"&&i.click(r),r.contextMenu.hide()})}),setTimeout(function(){r.killControlsTimer("rev3")},100)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),e.extend(MediaElementPlayer.prototype,{buildpostroll:function(t,n,r,i){var s=this,o=s.container.find('link[rel="postroll"]').attr("href");typeof o!="undefined"&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+s.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(r).hide(),s.media.addEventListener("ended",function(n){e.ajax({dataType:"html",url:o,success:function(e,t){r.find(".mejs-postroll-layer-content").html(e)}}),t.postroll.show()},!1))}})}(mejs.$),function(e){function n(e){var t=[];while(e=u(e))t[t.length]=e[0];return t}function r(n){return e("table.treeTable tbody tr."+t.childPrefix+n[0].id)}function i(n,s){var o=e(n.children("td")[t.treeColumn]),u=parseInt(o.css("padding-left"),10)+s;o.css("padding-left",+u+"px"),r(n).each(function(){i(e(this),s)})}function s(n){if(!n.hasClass("initialized")){n.addClass("initialized");var i=r(n);!n.hasClass("parent")&&i.length>0&&n.addClass("parent");if(n.hasClass("parent")){var s=e(n.children("td")[t.treeColumn]),o=parseInt(s.css("padding-left"),10)+t.indent;i.each(function(){e(e(this).children("td")[t.treeColumn]).css("padding-left",o+"px")}),t.expandable&&(s.prepend('<span style="padding-left: '+t.indent+'px" class="expander"></span>'),e(s[0].firstChild).click(function(){n.toggleBranch()}),t.clickableNodeNames&&(e(s).css("cursor","pointer"),e(s).click(function(e){e.target.className!="expander"&&n.toggleBranch()})),!n.hasClass("expanded")&&!n.hasClass("collapsed")&&n.addClass(t.initialState),n.hasClass("expanded")&&n.expand())}}}function o(t,n){t.insertAfter(n),r(t).reverse().each(function(){o(e(this),t[0])})}function u(t){var n=t[0].className.split(" ");for(key in n)if(n[key].match("child-of-"))return e("#"+n[key].substring(9))}var t;e.fn.treeTable=function(n){return t=e.extend({},e.fn.treeTable.defaults,n),this.each(function(){e(this).addClass("treeTable").find("tbody tr").each(function(){!t.expandable||e(this)[0].className.search("child-of-")==-1?s(e(this)):t.initialState=="collapsed"&&(this.style.display="none")})})},e.fn.treeTable.defaults={childPrefix:"child-of-",clickableNodeNames:!1,expandable:!0,indent:19,initialState:"collapsed",treeColumn:0},e.fn.collapse=function(){return e(this).addClass("collapsed"),r(e(this)).each(function(){e(this).hasClass("collapsed")||e(this).collapse(),e(this).hide()}),this},e.fn.expand=function(){return e(this).removeClass("collapsed").addClass("expanded"),r(e(this)).each(function(){s(e(this)),e(this).is(".expanded.parent")&&e(this).expand(),e(this).show()}),this},e.fn.appendBranchTo=function(r){var s=e(this),a=u(s),f=e.map(n(e(r)),function(e){return e.id});return e.inArray(s[0].id,f)==-1&&(!a||r.id!=a[0].id)&&r.id!=s[0].id&&(i(s,n(s).length*t.indent*-1),a&&s.removeClass(t.childPrefix+a[0].id),s.addClass(t.childPrefix+r.id),o(s,r),i(s,n(s).length*t.indent)),this},e.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},e.fn.toggleBranch=function(){return e(this).hasClass("collapsed")?e(this).expand():e(this).removeClass("expanded").collapse(),this}}(jQuery),function(e){e(function(){function t(){var t=e(".flash");t.has(".error").length===0&&t.append('<div class="error"></div>');var n=e('<div class="js-require-error"></div>');n.append(e(".js-require-warning").html()),t.has(".error .js-require-error").length===0&&t.find(".error").append(n)}e('form input[type="checkbox"].js-require-check').closest("form").submit(function(n){var r=e(n.target).find('input[type="checkbox"].js-require-check'),i=r.prop("checked");i||(i=!1),i===!1&&(n.preventDefault(),t())})})}(jQuery);